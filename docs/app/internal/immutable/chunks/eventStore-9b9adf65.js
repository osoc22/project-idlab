import{_ as vw}from"./preload-helper-ed63bd61.js";import{a as ai,e as vp,g as Tw,u as Ew,d as ci}from"./userStore-17b06846.js";import{d as Tp,w as Ep}from"./index-b2bed869.js";function Iw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}class g extends Array{constructor(e,n){if(super(e),this.sign=n,Object.setPrototypeOf(this,g.prototype),e>g.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var n=Math.floor,r=Number.isFinite;if(typeof e=="number"){if(e===0)return g.__zero();if(g.__isOneDigitInt(e))return 0>e?g.__oneDigit(-e,!0):g.__oneDigit(e,!1);if(!r(e)||n(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return g.__fromDouble(e)}if(typeof e=="string"){const i=g.__fromString(e);if(i===null)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return i}if(typeof e=="boolean")return e===!0?g.__oneDigit(1,!1):g.__zero();if(typeof e=="object"){if(e.constructor===g)return e;const i=g.__toPrimitive(e);return g.BigInt(i)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const n of this)e.push((n&&(n>>>0).toString(16))+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(e&e-1)==0?g.__toStringBasePowerOfTwo(this,e):g.__toStringGeneric(this,e,!1)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(e){const n=e.length;if(n===0)return 0;if(n===1){const _=e.__unsignedDigit(0);return e.sign?-_:_}const r=e.__digit(n-1),i=g.__clz30(r),s=30*n-i;if(1024<s)return e.sign?-1/0:1/0;let o=s-1,a=r,c=n-1;const l=i+3;let d=l===32?0:a<<l;d>>>=12;const f=l-12;let p=12<=l?0:a<<20+l,h=20+l;for(0<f&&0<c&&(c--,a=e.__digit(c),d|=a>>>30-f,p=a<<f+2,h=f+2);0<h&&0<c;)c--,a=e.__digit(c),p|=30<=h?a<<h-30:a>>>30-h,h-=30;const m=g.__decideRounding(e,h,c,a);if((m===1||m===0&&(1&p)==1)&&(p=p+1>>>0,p===0&&(d++,d>>>20!=0&&(d=0,o++,1023<o))))return e.sign?-1/0:1/0;const y=e.sign?-2147483648:0;return o=o+1023<<20,g.__kBitConversionInts[1]=y|o|d,g.__kBitConversionInts[0]=p,g.__kBitConversionDouble[0]}static unaryMinus(e){if(e.length===0)return e;const n=e.__copy();return n.sign=!e.sign,n}static bitwiseNot(e){return e.sign?g.__absoluteSubOne(e).__trim():g.__absoluteAddOne(e,!0)}static exponentiate(e,n){if(n.sign)throw new RangeError("Exponent must be positive");if(n.length===0)return g.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&(1&n.__digit(0))==0?g.unaryMinus(e):e;if(1<n.length)throw new RangeError("BigInt too big");let r=n.__unsignedDigit(0);if(r===1)return e;if(r>=g.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){const o=1+(0|r/30),a=e.sign&&(1&r)!=0,c=new g(o,a);c.__initializeDigits();const l=1<<r%30;return c.__setDigit(o-1,l),c}let i=null,s=e;for((1&r)!=0&&(i=e),r>>=1;r!==0;r>>=1)s=g.multiply(s,s),(1&r)!=0&&(i===null?i=s:i=g.multiply(i,s));return i}static multiply(e,n){if(e.length===0)return e;if(n.length===0)return n;let r=e.length+n.length;30<=e.__clzmsd()+n.__clzmsd()&&r--;const i=new g(r,e.sign!==n.sign);i.__initializeDigits();for(let s=0;s<e.length;s++)g.__multiplyAccumulate(n,e.__digit(s),i,s);return i.__trim()}static divide(e,n){if(n.length===0)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(e,n))return g.__zero();const r=e.sign!==n.sign,i=n.__unsignedDigit(0);let s;if(n.length===1&&32767>=i){if(i===1)return r===e.sign?e:g.unaryMinus(e);s=g.__absoluteDivSmall(e,i,null)}else s=g.__absoluteDivLarge(e,n,!0,!1);return s.sign=r,s.__trim()}static remainder(e,n){if(n.length===0)throw new RangeError("Division by zero");if(0>g.__absoluteCompare(e,n))return e;const r=n.__unsignedDigit(0);if(n.length===1&&32767>=r){if(r===1)return g.__zero();const s=g.__absoluteModSmall(e,r);return s===0?g.__zero():g.__oneDigit(s,e.sign)}const i=g.__absoluteDivLarge(e,n,!1,!0);return i.sign=e.sign,i.__trim()}static add(e,n){const r=e.sign;return r===n.sign?g.__absoluteAdd(e,n,r):0<=g.__absoluteCompare(e,n)?g.__absoluteSub(e,n,r):g.__absoluteSub(n,e,!r)}static subtract(e,n){const r=e.sign;return r===n.sign?0<=g.__absoluteCompare(e,n)?g.__absoluteSub(e,n,r):g.__absoluteSub(n,e,!r):g.__absoluteAdd(e,n,r)}static leftShift(e,n){return n.length===0||e.length===0?e:n.sign?g.__rightShiftByAbsolute(e,n):g.__leftShiftByAbsolute(e,n)}static signedRightShift(e,n){return n.length===0||e.length===0?e:n.sign?g.__leftShiftByAbsolute(e,n):g.__rightShiftByAbsolute(e,n)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,n){return 0>g.__compareToBigInt(e,n)}static lessThanOrEqual(e,n){return 0>=g.__compareToBigInt(e,n)}static greaterThan(e,n){return 0<g.__compareToBigInt(e,n)}static greaterThanOrEqual(e,n){return 0<=g.__compareToBigInt(e,n)}static equal(e,n){if(e.sign!==n.sign||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e.__digit(r)!==n.__digit(r))return!1;return!0}static notEqual(e,n){return!g.equal(e,n)}static bitwiseAnd(e,n){var r=Math.max;if(!e.sign&&!n.sign)return g.__absoluteAnd(e,n).__trim();if(e.sign&&n.sign){const i=r(e.length,n.length)+1;let s=g.__absoluteSubOne(e,i);const o=g.__absoluteSubOne(n);return s=g.__absoluteOr(s,o,s),g.__absoluteAddOne(s,!0,s).__trim()}return e.sign&&([e,n]=[n,e]),g.__absoluteAndNot(e,g.__absoluteSubOne(n)).__trim()}static bitwiseXor(e,n){var r=Math.max;if(!e.sign&&!n.sign)return g.__absoluteXor(e,n).__trim();if(e.sign&&n.sign){const o=r(e.length,n.length),a=g.__absoluteSubOne(e,o),c=g.__absoluteSubOne(n);return g.__absoluteXor(a,c,a).__trim()}const i=r(e.length,n.length)+1;e.sign&&([e,n]=[n,e]);let s=g.__absoluteSubOne(n,i);return s=g.__absoluteXor(s,e,s),g.__absoluteAddOne(s,!0,s).__trim()}static bitwiseOr(e,n){var r=Math.max;const i=r(e.length,n.length);if(!e.sign&&!n.sign)return g.__absoluteOr(e,n).__trim();if(e.sign&&n.sign){let o=g.__absoluteSubOne(e,i);const a=g.__absoluteSubOne(n);return o=g.__absoluteAnd(o,a,o),g.__absoluteAddOne(o,!0,o).__trim()}e.sign&&([e,n]=[n,e]);let s=g.__absoluteSubOne(n,i);return s=g.__absoluteAndNot(s,e,s),g.__absoluteAddOne(s,!0,s).__trim()}static asIntN(e,n){var r=Math.floor;if(n.length===0)return n;if(e=r(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return g.__zero();if(e>=g.__kMaxLengthBits)return n;const i=0|(e+29)/30;if(n.length<i)return n;const s=n.__unsignedDigit(i-1),o=1<<(e-1)%30;if(n.length===i&&s<o)return n;if((s&o)!==o)return g.__truncateToNBits(e,n);if(!n.sign)return g.__truncateAndSubFromPowerOfTwo(e,n,!0);if((s&o-1)==0){for(let a=i-2;0<=a;a--)if(n.__digit(a)!==0)return g.__truncateAndSubFromPowerOfTwo(e,n,!1);return n.length===i&&s===o?n:g.__truncateToNBits(e,n)}return g.__truncateAndSubFromPowerOfTwo(e,n,!1)}static asUintN(e,n){var r=Math.floor;if(n.length===0)return n;if(e=r(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return g.__zero();if(n.sign){if(e>g.__kMaxLengthBits)throw new RangeError("BigInt too big");return g.__truncateAndSubFromPowerOfTwo(e,n,!1)}if(e>=g.__kMaxLengthBits)return n;const i=0|(e+29)/30;if(n.length<i)return n;const s=e%30;return n.length==i&&(s===0||n.__digit(i-1)>>>s==0)?n:g.__truncateToNBits(e,n)}static ADD(e,n){if(e=g.__toPrimitive(e),n=g.__toPrimitive(n),typeof e=="string")return typeof n!="string"&&(n=n.toString()),e+n;if(typeof n=="string")return e.toString()+n;if(e=g.__toNumeric(e),n=g.__toNumeric(n),g.__isBigInt(e)&&g.__isBigInt(n))return g.add(e,n);if(typeof e=="number"&&typeof n=="number")return e+n;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,n){return g.__compare(e,n,0)}static LE(e,n){return g.__compare(e,n,1)}static GT(e,n){return g.__compare(e,n,2)}static GE(e,n){return g.__compare(e,n,3)}static EQ(e,n){for(;;){if(g.__isBigInt(e))return g.__isBigInt(n)?g.equal(e,n):g.EQ(n,e);if(typeof e=="number"){if(g.__isBigInt(n))return g.__equalToNumber(n,e);if(typeof n!="object")return e==n;n=g.__toPrimitive(n)}else if(typeof e=="string"){if(g.__isBigInt(n))return e=g.__fromString(e),e!==null&&g.equal(e,n);if(typeof n!="object")return e==n;n=g.__toPrimitive(n)}else if(typeof e=="boolean"){if(g.__isBigInt(n))return g.__equalToNumber(n,+e);if(typeof n!="object")return e==n;n=g.__toPrimitive(n)}else if(typeof e=="symbol"){if(g.__isBigInt(n))return!1;if(typeof n!="object")return e==n;n=g.__toPrimitive(n)}else if(typeof e=="object"){if(typeof n=="object"&&n.constructor!==g)return e==n;e=g.__toPrimitive(e)}else return e==n}}static NE(e,n){return!g.EQ(e,n)}static DataViewGetBigInt64(e,n,r=!1){return g.asIntN(64,g.DataViewGetBigUint64(e,n,r))}static DataViewGetBigUint64(e,n,r=!1){const[i,s]=r?[4,0]:[0,4],o=e.getUint32(n+i,r),a=e.getUint32(n+s,r),c=new g(3,!1);return c.__setDigit(0,1073741823&a),c.__setDigit(1,(268435455&o)<<2|a>>>30),c.__setDigit(2,o>>>28),c.__trim()}static DataViewSetBigInt64(e,n,r,i=!1){g.DataViewSetBigUint64(e,n,r,i)}static DataViewSetBigUint64(e,n,r,i=!1){r=g.asUintN(64,r);let s=0,o=0;if(0<r.length&&(o=r.__digit(0),1<r.length)){const l=r.__digit(1);o|=l<<30,s=l>>>2,2<r.length&&(s|=r.__digit(2)<<28)}const[a,c]=i?[4,0]:[0,4];e.setUint32(n+a,s,i),e.setUint32(n+c,o,i)}static __zero(){return new g(0,!1)}static __oneDigit(e,n){const r=new g(1,n);return r.__setDigit(0,e),r}__copy(){const e=new g(this.length,this.sign);for(let n=0;n<this.length;n++)e[n]=this[n];return e}__trim(){let e=this.length,n=this[e-1];for(;n===0;)e--,n=this[e-1],this.pop();return e===0&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,n,r,i){if(0<n)return-1;let s;if(0>n)s=-n-1;else{if(r===0)return-1;r--,i=e.__digit(r),s=29}let o=1<<s;if((i&o)==0)return-1;if(o-=1,(i&o)!=0)return 1;for(;0<r;)if(r--,e.__digit(r)!==0)return 1;return 0}static __fromDouble(e){g.__kBitConversionDouble[0]=e;const n=2047&g.__kBitConversionInts[1]>>>20,r=n-1023,i=(0|r/30)+1,s=new g(i,0>e);let o=1048575&g.__kBitConversionInts[1]|1048576,a=g.__kBitConversionInts[0];const c=20,l=r%30;let d,f=0;if(l<20){const p=c-l;f=p+32,d=o>>>p,o=o<<32-p|a>>>p,a<<=32-p}else if(l===20)f=32,d=o,o=a,a=0;else{const p=l-c;f=32-p,d=o<<p|a>>>32-p,o=a<<p,a=0}s.__setDigit(i-1,d);for(let p=i-2;0<=p;p--)0<f?(f-=30,d=o>>>2,o=o<<30|a>>>2,a<<=30):d=0,s.__setDigit(p,d);return s.__trim()}static __isWhitespace(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}static __fromString(e,n=0){let r=0;const i=e.length;let s=0;if(s===i)return g.__zero();let o=e.charCodeAt(s);for(;g.__isWhitespace(o);){if(++s===i)return g.__zero();o=e.charCodeAt(s)}if(o===43){if(++s===i)return null;o=e.charCodeAt(s),r=1}else if(o===45){if(++s===i)return null;o=e.charCodeAt(s),r=-1}if(n===0){if(n=10,o===48){if(++s===i)return g.__zero();if(o=e.charCodeAt(s),o===88||o===120){if(n=16,++s===i)return null;o=e.charCodeAt(s)}else if(o===79||o===111){if(n=8,++s===i)return null;o=e.charCodeAt(s)}else if(o===66||o===98){if(n=2,++s===i)return null;o=e.charCodeAt(s)}}}else if(n===16&&o===48){if(++s===i)return g.__zero();if(o=e.charCodeAt(s),o===88||o===120){if(++s===i)return null;o=e.charCodeAt(s)}}if(r!=0&&n!==10)return null;for(;o===48;){if(++s===i)return g.__zero();o=e.charCodeAt(s)}const a=i-s;let c=g.__kMaxBitsPerChar[n],l=g.__kBitsPerCharTableMultiplier-1;if(a>1073741824/c)return null;const d=c*a+l>>>g.__kBitsPerCharTableShift,f=new g(0|(d+29)/30,!1),p=10>n?n:10,h=10<n?n-10:0;if((n&n-1)==0){c>>=g.__kBitsPerCharTableShift;const m=[],y=[];let _=!1;do{let v=0,T=0;for(;;){let I;if(o-48>>>0<p)I=o-48;else if((32|o)-97>>>0<h)I=(32|o)-87;else{_=!0;break}if(T+=c,v=v<<c|I,++s===i){_=!0;break}if(o=e.charCodeAt(s),30<T+c)break}m.push(v),y.push(T)}while(!_);g.__fillFromParts(f,m,y)}else{f.__initializeDigits();let m=!1,y=0;do{let _=0,v=1;for(;;){let I;if(o-48>>>0<p)I=o-48;else if((32|o)-97>>>0<h)I=(32|o)-87;else{m=!0;break}const R=v*n;if(1073741823<R)break;if(v=R,_=_*n+I,y++,++s===i){m=!0;break}o=e.charCodeAt(s)}l=30*g.__kBitsPerCharTableMultiplier-1;const T=0|(c*y+l>>>g.__kBitsPerCharTableShift)/30;f.__inplaceMultiplyAdd(v,_,T)}while(!m)}if(s!==i){if(!g.__isWhitespace(o))return null;for(s++;s<i;s++)if(o=e.charCodeAt(s),!g.__isWhitespace(o))return null}return f.sign=r==-1,f.__trim()}static __fillFromParts(e,n,r){let i=0,s=0,o=0;for(let a=n.length-1;0<=a;a--){const c=n[a],l=r[a];s|=c<<o,o+=l,o===30?(e.__setDigit(i++,s),o=0,s=0):30<o&&(e.__setDigit(i++,1073741823&s),o-=30,s=c>>>l-o)}if(s!==0){if(i>=e.length)throw new Error("implementation bug");e.__setDigit(i++,s)}for(;i<e.length;i++)e.__setDigit(i,0)}static __toStringBasePowerOfTwo(e,n){const r=e.length;let i=n-1;i=(85&i>>>1)+(85&i),i=(51&i>>>2)+(51&i),i=(15&i>>>4)+(15&i);const s=i,o=n-1,a=e.__digit(r-1),c=g.__clz30(a);let l=0|(30*r-c+s-1)/s;if(e.sign&&l++,268435456<l)throw new Error("string too long");const d=Array(l);let f=l-1,p=0,h=0;for(let y=0;y<r-1;y++){const _=e.__digit(y),v=(p|_<<h)&o;d[f--]=g.__kConversionChars[v];const T=s-h;for(p=_>>>T,h=30-T;h>=s;)d[f--]=g.__kConversionChars[p&o],p>>>=s,h-=s}const m=(p|a<<h)&o;for(d[f--]=g.__kConversionChars[m],p=a>>>s-h;p!==0;)d[f--]=g.__kConversionChars[p&o],p>>>=s;if(e.sign&&(d[f--]="-"),f!=-1)throw new Error("implementation bug");return d.join("")}static __toStringGeneric(e,n,r){const i=e.length;if(i===0)return"";if(i===1){let y=e.__unsignedDigit(0).toString(n);return r===!1&&e.sign&&(y="-"+y),y}const s=30*i-g.__clz30(e.__digit(i-1)),o=g.__kMaxBitsPerChar[n],a=o-1;let c=s*g.__kBitsPerCharTableMultiplier;c+=a-1,c=0|c/a;const l=c+1>>1,d=g.exponentiate(g.__oneDigit(n,!1),g.__oneDigit(l,!1));let f,p;const h=d.__unsignedDigit(0);if(d.length===1&&32767>=h){f=new g(e.length,!1),f.__initializeDigits();let y=0;for(let _=2*e.length-1;0<=_;_--){const v=y<<15|e.__halfDigit(_);f.__setHalfDigit(_,0|v/h),y=0|v%h}p=y.toString(n)}else{const y=g.__absoluteDivLarge(e,d,!0,!0);f=y.quotient;const _=y.remainder.__trim();p=g.__toStringGeneric(_,n,!0)}f.__trim();let m=g.__toStringGeneric(f,n,!0);for(;p.length<l;)p="0"+p;return r===!1&&e.sign&&(m="-"+m),m+p}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,n){const r=e.sign;if(r!==n.sign)return g.__unequalSign(r);const i=g.__absoluteCompare(e,n);return 0<i?g.__absoluteGreater(r):0>i?g.__absoluteLess(r):0}static __compareToNumber(e,n){if(g.__isOneDigitInt(n)){const r=e.sign,i=0>n;if(r!==i)return g.__unequalSign(r);if(e.length===0){if(i)throw new Error("implementation bug");return n===0?0:-1}if(1<e.length)return g.__absoluteGreater(r);const s=Math.abs(n),o=e.__unsignedDigit(0);return o>s?g.__absoluteGreater(r):o<s?g.__absoluteLess(r):0}return g.__compareToDouble(e,n)}static __compareToDouble(e,n){if(n!==n)return n;if(n===1/0)return-1;if(n===-1/0)return 1;const r=e.sign;if(r!==0>n)return g.__unequalSign(r);if(n===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;g.__kBitConversionDouble[0]=n;const i=2047&g.__kBitConversionInts[1]>>>20;if(i==2047)throw new Error("implementation bug: handled elsewhere");const s=i-1023;if(0>s)return g.__absoluteGreater(r);const o=e.length;let a=e.__digit(o-1);const c=g.__clz30(a),l=30*o-c,d=s+1;if(l<d)return g.__absoluteLess(r);if(l>d)return g.__absoluteGreater(r);let f=1048576|1048575&g.__kBitConversionInts[1],p=g.__kBitConversionInts[0];const h=20,m=29-c;if(m!==(0|(l-1)%30))throw new Error("implementation bug");let y,_=0;if(20>m){const v=h-m;_=v+32,y=f>>>v,f=f<<32-v|p>>>v,p<<=32-v}else if(m===20)_=32,y=f,f=p,p=0;else{const v=m-h;_=32-v,y=f<<v|p>>>32-v,f=p<<v,p=0}if(a>>>=0,y>>>=0,a>y)return g.__absoluteGreater(r);if(a<y)return g.__absoluteLess(r);for(let v=o-2;0<=v;v--){0<_?(_-=30,y=f>>>2,f=f<<30|p>>>2,p<<=30):y=0;const T=e.__unsignedDigit(v);if(T>y)return g.__absoluteGreater(r);if(T<y)return g.__absoluteLess(r)}if(f!==0||p!==0){if(_===0)throw new Error("implementation bug");return g.__absoluteLess(r)}return 0}static __equalToNumber(e,n){var r=Math.abs;return g.__isOneDigitInt(n)?n===0?e.length===0:e.length===1&&e.sign===0>n&&e.__unsignedDigit(0)===r(n):g.__compareToDouble(e,n)===0}static __comparisonResultToBool(e,n){return n===0?0>e:n===1?0>=e:n===2?0<e:n===3?0<=e:void 0}static __compare(e,n,r){if(e=g.__toPrimitive(e),n=g.__toPrimitive(n),typeof e=="string"&&typeof n=="string")switch(r){case 0:return e<n;case 1:return e<=n;case 2:return e>n;case 3:return e>=n}if(g.__isBigInt(e)&&typeof n=="string")return n=g.__fromString(n),n!==null&&g.__comparisonResultToBool(g.__compareToBigInt(e,n),r);if(typeof e=="string"&&g.__isBigInt(n))return e=g.__fromString(e),e!==null&&g.__comparisonResultToBool(g.__compareToBigInt(e,n),r);if(e=g.__toNumeric(e),n=g.__toNumeric(n),g.__isBigInt(e)){if(g.__isBigInt(n))return g.__comparisonResultToBool(g.__compareToBigInt(e,n),r);if(typeof n!="number")throw new Error("implementation bug");return g.__comparisonResultToBool(g.__compareToNumber(e,n),r)}if(typeof e!="number")throw new Error("implementation bug");if(g.__isBigInt(n))return g.__comparisonResultToBool(g.__compareToNumber(n,e),2^r);if(typeof n!="number")throw new Error("implementation bug");return r===0?e<n:r===1?e<=n:r===2?e>n:r===3?e>=n:void 0}__clzmsd(){return g.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,n,r){if(e.length<n.length)return g.__absoluteAdd(n,e,r);if(e.length===0)return e;if(n.length===0)return e.sign===r?e:g.unaryMinus(e);let i=e.length;(e.__clzmsd()===0||n.length===e.length&&n.__clzmsd()===0)&&i++;const s=new g(i,r);let o=0,a=0;for(;a<n.length;a++){const c=e.__digit(a)+n.__digit(a)+o;o=c>>>30,s.__setDigit(a,1073741823&c)}for(;a<e.length;a++){const c=e.__digit(a)+o;o=c>>>30,s.__setDigit(a,1073741823&c)}return a<s.length&&s.__setDigit(a,o),s.__trim()}static __absoluteSub(e,n,r){if(e.length===0)return e;if(n.length===0)return e.sign===r?e:g.unaryMinus(e);const i=new g(e.length,r);let s=0,o=0;for(;o<n.length;o++){const a=e.__digit(o)-n.__digit(o)-s;s=1&a>>>30,i.__setDigit(o,1073741823&a)}for(;o<e.length;o++){const a=e.__digit(o)-s;s=1&a>>>30,i.__setDigit(o,1073741823&a)}return i.__trim()}static __absoluteAddOne(e,n,r=null){const i=e.length;r===null?r=new g(i,n):r.sign=n;let s=1;for(let o=0;o<i;o++){const a=e.__digit(o)+s;s=a>>>30,r.__setDigit(o,1073741823&a)}return s!=0&&r.__setDigitGrow(i,1),r}static __absoluteSubOne(e,n){const r=e.length;n=n||r;const i=new g(n,!1);let s=1;for(let o=0;o<r;o++){const a=e.__digit(o)-s;s=1&a>>>30,i.__setDigit(o,1073741823&a)}if(s!=0)throw new Error("implementation bug");for(let o=r;o<n;o++)i.__setDigit(o,0);return i}static __absoluteAnd(e,n,r=null){let i=e.length,s=n.length,o=s;if(i<s){o=i;const l=e,d=i;e=n,i=s,n=l,s=d}let a=o;r===null?r=new g(a,!1):a=r.length;let c=0;for(;c<o;c++)r.__setDigit(c,e.__digit(c)&n.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteAndNot(e,n,r=null){const i=e.length,s=n.length;let o=s;i<s&&(o=i);let a=i;r===null?r=new g(a,!1):a=r.length;let c=0;for(;c<o;c++)r.__setDigit(c,e.__digit(c)&~n.__digit(c));for(;c<i;c++)r.__setDigit(c,e.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteOr(e,n,r=null){let i=e.length,s=n.length,o=s;if(i<s){o=i;const l=e,d=i;e=n,i=s,n=l,s=d}let a=i;r===null?r=new g(a,!1):a=r.length;let c=0;for(;c<o;c++)r.__setDigit(c,e.__digit(c)|n.__digit(c));for(;c<i;c++)r.__setDigit(c,e.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteXor(e,n,r=null){let i=e.length,s=n.length,o=s;if(i<s){o=i;const l=e,d=i;e=n,i=s,n=l,s=d}let a=i;r===null?r=new g(a,!1):a=r.length;let c=0;for(;c<o;c++)r.__setDigit(c,e.__digit(c)^n.__digit(c));for(;c<i;c++)r.__setDigit(c,e.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteCompare(e,n){const r=e.length-n.length;if(r!=0)return r;let i=e.length-1;for(;0<=i&&e.__digit(i)===n.__digit(i);)i--;return 0>i?0:e.__unsignedDigit(i)>n.__unsignedDigit(i)?1:-1}static __multiplyAccumulate(e,n,r,i){if(n===0)return;const s=32767&n,o=n>>>15;let a=0,c=0;for(let l,d=0;d<e.length;d++,i++){l=r.__digit(i);const f=e.__digit(d),p=32767&f,h=f>>>15,m=g.__imul(p,s),y=g.__imul(p,o),_=g.__imul(h,s),v=g.__imul(h,o);l+=c+m+a,a=l>>>30,l&=1073741823,l+=((32767&y)<<15)+((32767&_)<<15),a+=l>>>30,c=v+(y>>>15)+(_>>>15),r.__setDigit(i,1073741823&l)}for(;a!=0||c!==0;i++){let l=r.__digit(i);l+=a+c,c=0,a=l>>>30,r.__setDigit(i,1073741823&l)}}static __internalMultiplyAdd(e,n,r,i,s){let o=r,a=0;for(let c=0;c<i;c++){const l=e.__digit(c),d=g.__imul(32767&l,n),f=g.__imul(l>>>15,n),p=d+((32767&f)<<15)+a+o;o=p>>>30,a=f>>>15,s.__setDigit(c,1073741823&p)}if(s.length>i)for(s.__setDigit(i++,o+a);i<s.length;)s.__setDigit(i++,0);else if(o+a!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,n,r){r>this.length&&(r=this.length);const i=32767&e,s=e>>>15;let o=0,a=n;for(let c=0;c<r;c++){const l=this.__digit(c),d=32767&l,f=l>>>15,p=g.__imul(d,i),h=g.__imul(d,s),m=g.__imul(f,i),y=g.__imul(f,s);let _=a+p+o;o=_>>>30,_&=1073741823,_+=((32767&h)<<15)+((32767&m)<<15),o+=_>>>30,a=y+(h>>>15)+(m>>>15),this.__setDigit(c,1073741823&_)}if(o!=0||a!==0)throw new Error("implementation bug")}static __absoluteDivSmall(e,n,r=null){r===null&&(r=new g(e.length,!1));let i=0;for(let s,o=2*e.length-1;0<=o;o-=2){s=(i<<15|e.__halfDigit(o))>>>0;const a=0|s/n;i=0|s%n,s=(i<<15|e.__halfDigit(o-1))>>>0;const c=0|s/n;i=0|s%n,r.__setDigit(o>>>1,a<<15|c)}return r}static __absoluteModSmall(e,n){let r=0;for(let i=2*e.length-1;0<=i;i--){const s=(r<<15|e.__halfDigit(i))>>>0;r=0|s%n}return r}static __absoluteDivLarge(e,n,r,i){const s=n.__halfDigitLength(),o=n.length,a=e.__halfDigitLength()-s;let c=null;r&&(c=new g(a+2>>>1,!1),c.__initializeDigits());const l=new g(s+2>>>1,!1);l.__initializeDigits();const d=g.__clz15(n.__halfDigit(s-1));0<d&&(n=g.__specialLeftShift(n,d,0));const f=g.__specialLeftShift(e,d,1),p=n.__halfDigit(s-1);let h=0;for(let m,y=a;0<=y;y--){m=32767;const _=f.__halfDigit(y+s);if(_!==p){const T=(_<<15|f.__halfDigit(y+s-1))>>>0;m=0|T/p;let I=0|T%p;const R=n.__halfDigit(s-2),O=f.__halfDigit(y+s-2);for(;g.__imul(m,R)>>>0>(I<<16|O)>>>0&&(m--,I+=p,!(32767<I)););}g.__internalMultiplyAdd(n,m,0,o,l);let v=f.__inplaceSub(l,y,s+1);v!==0&&(v=f.__inplaceAdd(n,y,s),f.__setHalfDigit(y+s,32767&f.__halfDigit(y+s)+v),m--),r&&(1&y?h=m<<15:c.__setDigit(y>>>1,h|m))}if(i)return f.__inplaceRightShift(d),r?{quotient:c,remainder:f}:f;if(r)return c;throw new Error("unreachable")}static __clz15(e){return g.__clz30(e)-15}__inplaceAdd(e,n,r){let i=0;for(let s=0;s<r;s++){const o=this.__halfDigit(n+s)+e.__halfDigit(s)+i;i=o>>>15,this.__setHalfDigit(n+s,32767&o)}return i}__inplaceSub(e,n,r){let i=0;if(1&n){n>>=1;let s=this.__digit(n),o=32767&s,a=0;for(;a<r-1>>>1;a++){const d=e.__digit(a),f=(s>>>15)-(32767&d)-i;i=1&f>>>15,this.__setDigit(n+a,(32767&f)<<15|32767&o),s=this.__digit(n+a+1),o=(32767&s)-(d>>>15)-i,i=1&o>>>15}const c=e.__digit(a),l=(s>>>15)-(32767&c)-i;if(i=1&l>>>15,this.__setDigit(n+a,(32767&l)<<15|32767&o),n+a+1>=this.length)throw new RangeError("out of bounds");(1&r)==0&&(s=this.__digit(n+a+1),o=(32767&s)-(c>>>15)-i,i=1&o>>>15,this.__setDigit(n+e.length,1073709056&s|32767&o))}else{n>>=1;let s=0;for(;s<e.length-1;s++){const d=this.__digit(n+s),f=e.__digit(s),p=(32767&d)-(32767&f)-i;i=1&p>>>15;const h=(d>>>15)-(f>>>15)-i;i=1&h>>>15,this.__setDigit(n+s,(32767&h)<<15|32767&p)}const o=this.__digit(n+s),a=e.__digit(s),c=(32767&o)-(32767&a)-i;i=1&c>>>15;let l=0;(1&r)==0&&(l=(o>>>15)-(a>>>15)-i,i=1&l>>>15),this.__setDigit(n+s,(32767&l)<<15|32767&c)}return i}__inplaceRightShift(e){if(e===0)return;let n=this.__digit(0)>>>e;const r=this.length-1;for(let i=0;i<r;i++){const s=this.__digit(i+1);this.__setDigit(i,1073741823&s<<30-e|n),n=s>>>e}this.__setDigit(r,n)}static __specialLeftShift(e,n,r){const i=e.length,s=new g(i+r,!1);if(n===0){for(let a=0;a<i;a++)s.__setDigit(a,e.__digit(a));return 0<r&&s.__setDigit(i,0),s}let o=0;for(let a=0;a<i;a++){const c=e.__digit(a);s.__setDigit(a,1073741823&c<<n|o),o=c>>>30-n}return 0<r&&s.__setDigit(i,o),s}static __leftShiftByAbsolute(e,n){const r=g.__toShiftAmount(n);if(0>r)throw new RangeError("BigInt too big");const i=0|r/30,s=r%30,o=e.length,a=s!==0&&e.__digit(o-1)>>>30-s!=0,c=o+i+(a?1:0),l=new g(c,e.sign);if(s===0){let d=0;for(;d<i;d++)l.__setDigit(d,0);for(;d<c;d++)l.__setDigit(d,e.__digit(d-i))}else{let d=0;for(let f=0;f<i;f++)l.__setDigit(f,0);for(let f=0;f<o;f++){const p=e.__digit(f);l.__setDigit(f+i,1073741823&p<<s|d),d=p>>>30-s}if(a)l.__setDigit(o+i,d);else if(d!==0)throw new Error("implementation bug")}return l.__trim()}static __rightShiftByAbsolute(e,n){const r=e.length,i=e.sign,s=g.__toShiftAmount(n);if(0>s)return g.__rightShiftByMaximum(i);const o=0|s/30,a=s%30;let c=r-o;if(0>=c)return g.__rightShiftByMaximum(i);let l=!1;if(i){if((e.__digit(o)&(1<<a)-1)!=0)l=!0;else for(let f=0;f<o;f++)if(e.__digit(f)!==0){l=!0;break}}l&&a===0&&~e.__digit(r-1)==0&&c++;let d=new g(c,i);if(a===0){d.__setDigit(c-1,0);for(let f=o;f<r;f++)d.__setDigit(f-o,e.__digit(f))}else{let f=e.__digit(o)>>>a;const p=r-o-1;for(let h=0;h<p;h++){const m=e.__digit(h+o+1);d.__setDigit(h,1073741823&m<<30-a|f),f=m>>>a}d.__setDigit(p,f)}return l&&(d=g.__absoluteAddOne(d,!0,d)),d.__trim()}static __rightShiftByMaximum(e){return e?g.__oneDigit(1,!0):g.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const n=e.__unsignedDigit(0);return n>g.__kMaxLengthBits?-1:n}static __toPrimitive(e,n="default"){if(typeof e!="object"||e.constructor===g)return e;if(typeof Symbol!="undefined"&&typeof Symbol.toPrimitive=="symbol"){const s=e[Symbol.toPrimitive];if(s){const o=s(n);if(typeof o!="object")return o;throw new TypeError("Cannot convert object to primitive value")}}const r=e.valueOf;if(r){const s=r.call(e);if(typeof s!="object")return s}const i=e.toString;if(i){const s=i.call(e);if(typeof s!="object")return s}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return g.__isBigInt(e)?e:+e}static __isBigInt(e){return typeof e=="object"&&e!==null&&e.constructor===g}static __truncateToNBits(e,n){const r=0|(e+29)/30,i=new g(r,n.sign),s=r-1;for(let a=0;a<s;a++)i.__setDigit(a,n.__digit(a));let o=n.__digit(s);if(e%30!=0){const a=32-e%30;o=o<<a>>>a}return i.__setDigit(s,o),i.__trim()}static __truncateAndSubFromPowerOfTwo(e,n,r){var i=Math.min;const s=0|(e+29)/30,o=new g(s,r);let a=0;const c=s-1;let l=0;for(const h=i(c,n.length);a<h;a++){const m=0-n.__digit(a)-l;l=1&m>>>30,o.__setDigit(a,1073741823&m)}for(;a<c;a++)o.__setDigit(a,0|1073741823&-l);let d=c<n.length?n.__digit(c):0;const f=e%30;let p;if(f==0)p=0-d-l,p&=1073741823;else{const h=32-f;d=d<<h>>>h;const m=1<<32-h;p=m-d-l,p&=m-1}return o.__setDigit(c,p),o.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,n){this[e]=0|n}__setDigitGrow(e,n){this[e]=0|n}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,n){const r=e>>>1,i=this.__digit(r),s=1&e?32767&i|n<<15:1073709056&i|32767&n;this.__setDigit(r,s)}static __digitPow(e,n){let r=1;for(;0<n;)1&n&&(r*=e),n>>>=1,e*=e;return r}static __isOneDigitInt(e){return(1073741823&e)===e}}g.__kMaxLength=33554432,g.__kMaxLengthBits=g.__kMaxLength<<5,g.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],g.__kBitsPerCharTableShift=5,g.__kBitsPerCharTableMultiplier=1<<g.__kBitsPerCharTableShift,g.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],g.__kBitConversionBuffer=new ArrayBuffer(8),g.__kBitConversionDouble=new Float64Array(g.__kBitConversionBuffer),g.__kBitConversionInts=new Int32Array(g.__kBitConversionBuffer),g.__clz30=Math.clz32?function(t){return Math.clz32(t)-2}:function(t){return t===0?30:0|29-(0|Math.log(t>>>0)/Math.LN2)},g.__imul=Math.imul||function(t,e){return 0|t*e};const bu={},Dw={["Temporal.Duration"](t,e){const n=e.stylize(`${this[Symbol.toStringTag]} <${this}>`,"special");if(t<1)return n;const r=[];for(const i of["years","months","weeks","days","hours","minutes","seconds","milliseconds","microseconds","nanoseconds"])this[i]!==0&&r.push(`  ${i}: ${e.stylize(this[i],"number")}`);return n+` {
`+r.join(`,
`)+`
}`}};function Rw(t,e){return e.stylize(`${this[Symbol.toStringTag]} <${this}>`,"special")}function yr(t,e){Object.defineProperty(t.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,Symbol.for("nodejs.util.inspect.custom"),{value:Dw[e]||Rw,writable:!1,enumerable:!1,configurable:!0});for(const n of Object.getOwnPropertyNames(t)){const r=Object.getOwnPropertyDescriptor(t,n);!r.configurable||!r.enumerable||(r.enumerable=!1,Object.defineProperty(t,n,r))}for(const n of Object.getOwnPropertyNames(t.prototype)){const r=Object.getOwnPropertyDescriptor(t.prototype,n);!r.configurable||!r.enumerable||(r.enumerable=!1,Object.defineProperty(t.prototype,n,r))}_u(e,t),_u(`${e}.prototype`,t.prototype)}function _u(t,e){const n=`%${t}%`;if(bu[n]!==void 0)throw new Error(`intrinsic ${t} already exists`);bu[n]=e}function G(t){return bu[t]}const z="slot-epochNanoSeconds",Kr="slot-timezone-identifier",k="slot-year",F="slot-month",B="slot-day",Z="slot-hour",V="slot-minute",W="slot-second",Q="slot-millisecond",X="slot-microsecond",K="slot-nanosecond",S="slot-calendar",Ip="slot-date-brand",Dp="slot-year-month-brand",Rp="slot-month-day-brand",Nt="slot-cached-instant",me="slot-time-zone",Mt="slot-years",ht="slot-months",Gt="slot-weeks",Ct="slot-days",Lt="slot-hours",$t="slot-minutes",kt="slot-seconds",Pt="slot-milliseconds",Ut="slot-microseconds",Ft="slot-nanoseconds",Je="slot-calendar-identifier",xp=new WeakMap;function wr(t){xp.set(t,Object.create(null))}function bd(t){return xp.get(t)}function gt(t,...e){if(!t||typeof t!="object")return!1;const n=bd(t);return!!n&&e.reduce((r,i)=>r&&i in n,!0)}function u(t,e){const n=bd(t)[e];if(n===void 0)throw new TypeError(`Missing internal slot ${e}`);return n}function re(t,e,n){bd(t)[e]=n}const No=Array.prototype.includes,xw=Array.prototype.push,Ow=globalThis.Intl.DateTimeFormat,Nw=Array.prototype.sort,Aw=Math.abs,Sw=Math.floor,vu=Object.entries,uh=Object.keys,Fe={};class Ic{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: id is required");const n=H(e);if(!jp(n))throw new RangeError(`invalid calendar identifier ${n}`);wr(this),re(this,Je,n),Object.defineProperty(this,"_repr_",{value:`${this[Symbol.toStringTag]} <${n}>`,writable:!1,enumerable:!1,configurable:!1})}get id(){if(!Ke(this))throw new TypeError("invalid receiver");return H(this)}dateFromFields(e,n=void 0){if(!Ke(this))throw new TypeError("invalid receiver");if(!Ae(e))throw new TypeError("invalid fields");const r=J(n);return Fe[u(this,Je)].dateFromFields(e,r,this)}yearMonthFromFields(e,n=void 0){if(!Ke(this))throw new TypeError("invalid receiver");if(!Ae(e))throw new TypeError("invalid fields");const r=J(n);return Fe[u(this,Je)].yearMonthFromFields(e,r,this)}monthDayFromFields(e,n=void 0){if(!Ke(this))throw new TypeError("invalid receiver");if(!Ae(e))throw new TypeError("invalid fields");const r=J(n);return Fe[u(this,Je)].monthDayFromFields(e,r,this)}fields(e){if(!Ke(this))throw new TypeError("invalid receiver");const n=[],r=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(const i of e){if(typeof i!="string")throw new TypeError("invalid fields");if(!r.has(i))throw new RangeError(`invalid field name ${i}`);r.delete(i),xw.call(n,i)}return Fe[u(this,Je)].fields(n)}mergeFields(e,n){if(!Ke(this))throw new TypeError("invalid receiver");return Fe[u(this,Je)].mergeFields(e,n)}dateAdd(e,n,r=void 0){if(!Ke(this))throw new TypeError("invalid receiver");const i=Ee(e),s=Ts(n),o=J(r),a=Et(o),{days:c}=Dt(u(s,Ct),u(s,Lt),u(s,$t),u(s,kt),u(s,Pt),u(s,Ut),u(s,Ft),"day");return Fe[u(this,Je)].dateAdd(i,u(s,Mt),u(s,ht),u(s,Gt),c,a,this)}dateUntil(e,n,r=void 0){if(!Ke(this))throw new TypeError("invalid receiver");const i=Ee(e),s=Ee(n),o=J(r),a=mn(o,"auto",["hour","minute","second","millisecond","microsecond","nanosecond"],"day"),{years:c,months:l,weeks:d,days:f}=Fe[u(this,Je)].dateUntil(i,s,a),p=G("%Temporal.Duration%");return new p(c,l,d,f,0,0,0,0,0,0)}year(e){let n=e;if(!Ke(this))throw new TypeError("invalid receiver");return be(n)||(n=Ee(n)),Fe[u(this,Je)].year(n)}month(e){let n=e;if(!Ke(this))throw new TypeError("invalid receiver");if(wt(n))throw new TypeError("use monthCode on PlainMonthDay instead");return be(n)||(n=Ee(n)),Fe[u(this,Je)].month(n)}monthCode(e){let n=e;if(!Ke(this))throw new TypeError("invalid receiver");return!be(n)&&!wt(n)&&(n=Ee(n)),Fe[u(this,Je)].monthCode(n)}day(e){let n=e;if(!Ke(this))throw new TypeError("invalid receiver");return wt(n)||(n=Ee(n)),Fe[u(this,Je)].day(n)}era(e){let n=e;if(!Ke(this))throw new TypeError("invalid receiver");return be(n)||(n=Ee(n)),Fe[u(this,Je)].era(n)}eraYear(e){let n=e;if(!Ke(this))throw new TypeError("invalid receiver");return be(n)||(n=Ee(n)),Fe[u(this,Je)].eraYear(n)}dayOfWeek(e){if(!Ke(this))throw new TypeError("invalid receiver");const n=Ee(e);return Fe[u(this,Je)].dayOfWeek(n)}dayOfYear(e){if(!Ke(this))throw new TypeError("invalid receiver");const n=Ee(e);return Fe[u(this,Je)].dayOfYear(n)}weekOfYear(e){if(!Ke(this))throw new TypeError("invalid receiver");const n=Ee(e);return Fe[u(this,Je)].weekOfYear(n)}daysInWeek(e){if(!Ke(this))throw new TypeError("invalid receiver");const n=Ee(e);return Fe[u(this,Je)].daysInWeek(n)}daysInMonth(e){let n=e;if(!Ke(this))throw new TypeError("invalid receiver");return be(n)||(n=Ee(n)),Fe[u(this,Je)].daysInMonth(n)}daysInYear(e){let n=e;if(!Ke(this))throw new TypeError("invalid receiver");return be(n)||(n=Ee(n)),Fe[u(this,Je)].daysInYear(n)}monthsInYear(e){let n=e;if(!Ke(this))throw new TypeError("invalid receiver");return be(n)||(n=Ee(n)),Fe[u(this,Je)].monthsInYear(n)}inLeapYear(e){let n=e;if(!Ke(this))throw new TypeError("invalid receiver");return be(n)||(n=Ee(n)),Fe[u(this,Je)].inLeapYear(n)}toString(){if(!Ke(this))throw new TypeError("invalid receiver");return u(this,Je)}toJSON(){if(!Ke(this))throw new TypeError("invalid receiver");return H(this)}static from(e){return Rt(e)}}yr(Ic,"Temporal.Calendar");_u("Temporal.Calendar.from",Ic.from);Fe.iso8601={dateFromFields(t,e,n){const r=Et(e);let i=It(t,[["day"],["month",void 0],["monthCode",void 0],["year"]]);i=Fa(i);let{year:s,month:o,day:a}=i;return{year:s,month:o,day:a}=sc(s,o,a,r),Bn(s,o,a,n)},yearMonthFromFields(t,e,n){const r=Et(e);let i=It(t,[["month",void 0],["monthCode",void 0],["year"]]);i=Fa(i);let{year:s,month:o}=i;return{year:s,month:o}=D0(s,o,r),ko(s,o,n,1)},monthDayFromFields(t,e,n){const r=Et(e);let i=It(t,[["day"],["month",void 0],["monthCode",void 0],["year",void 0]]);if(i.month!==void 0&&i.year===void 0&&i.monthCode===void 0)throw new TypeError("either year or monthCode required with month");const s=i.monthCode===void 0,o=1972;i=Fa(i);let{month:a,day:c,year:l}=i;return{month:a,day:c}=sc(s?l:o,a,c,r),$o(a,c,n,o)},fields(t){return t},mergeFields(t,e){const n={};for(const i of uh(t))i==="month"||i==="monthCode"||(n[i]=t[i]);const r=uh(e);for(const i of r)n[i]=e[i];if(!No.call(r,"month")&&!No.call(r,"monthCode")){const{month:i,monthCode:s}=t;i!==void 0&&(n.month=i),s!==void 0&&(n.monthCode=s)}return n},dateAdd(t,e,n,r,i,s,o){let a=u(t,k),c=u(t,F),l=u(t,B);return{year:a,month:c,day:l}=Ui(a,c,l,e,n,r,i,s),Bn(a,c,l,o)},dateUntil(t,e,n){return Cd(u(t,k),u(t,F),u(t,B),u(e,k),u(e,F),u(e,B),n)},year(t){return u(t,k)},era(){},eraYear(){},month(t){return u(t,F)},monthCode(t){return $r(u(t,F))},day(t){return u(t,B)},dayOfWeek(t){return ju(u(t,k),u(t,F),u(t,B))},dayOfYear(t){return lc(u(t,k),u(t,F),u(t,B))},weekOfYear(t){return L0(u(t,k),u(t,F),u(t,B))},daysInWeek(){return 7},daysInMonth(t){return Ur(u(t,k),u(t,F))},daysInYear(t){let e=t;return gt(e,k)||(e=Ee(e)),fi(u(e,k))?366:365},monthsInYear(){return 12},inLeapYear(t){let e=t;return gt(e,k)||(e=Ee(e)),fi(u(e,k))}};function _d(t){if(!t.startsWith("M"))throw new RangeError(`Invalid month code: ${t}.  Month codes must start with M.`);const e=+t.slice(1);if(isNaN(e))throw new RangeError(`Invalid month code: ${t}`);return e}function $r(t,e=!1){return`M${t.toString().padStart(2,"0")}${e?"L":""}`}function Fa(t,e=void 0,n=12){let{month:r,monthCode:i}=t;if(i===void 0){if(r===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&At(r,1,n),e==="constrain"&&(r=cn(r,1,n)),i=$r(r)}else{const s=_d(i);if(r!==void 0&&r!==s)throw new RangeError(`monthCode ${i} and month ${r} must match if both are present`);if(i!==$r(s))throw new RangeError(`Invalid month code: ${i}`);if(r=s,r<1||r>n)throw new RangeError(`Invalid monthCode: ${i}`)}return{...t,month:r,monthCode:i}}class Be{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),e!==void 0){let n=0;for(const r of e.map.entries()){if(++n>Be.MAX_CACHE_ENTRIES)break;this.map.set(...r)}}}get(e){const n=this.map.get(e);return n&&(this.hits++,this.report()),this.calls++,n}set(e,n){this.map.set(e,n),this.misses++,this.report()}report(){}setObject(e){if(Be.objectMap.get(e))throw new RangeError("object already cached");Be.objectMap.set(e,this),this.report()}static getCacheForObject(e){let n=Be.objectMap.get(e);return n||(n=new Be,Be.objectMap.set(e,n)),n}}Be.objectMap=new WeakMap;Be.MAX_CACHE_ENTRIES=1e3;function Op({isoYear:t,isoMonth:e,isoDay:n}){const r=Wi(t),i=$e(e),s=$e(n);return`${r}-${i}-${s}T00:00Z`}function Ol(t,e){return{years:t.year-e.year,months:t.month-e.month,days:t.day-e.day}}class qs{constructor(){this.eraLength="short",this.hasEra=!0}getFormatter(){return typeof this.formatter=="undefined"&&(this.formatter=new Ow(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(e,n){const{year:r,month:i,day:s}=e,o=JSON.stringify({func:"isoToCalendarDate",isoYear:r,isoMonth:i,isoDay:s,id:this.id}),a=n.get(o);if(a)return a;const c=this.getFormatter();let l,d;try{d=Op({isoYear:r,isoMonth:i,isoDay:s}),l=c.formatToParts(new Date(d))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:r,isoMonth:i,isoDay:s})}`)}const f={};for(let{type:h,value:m}of l){if(h==="year"&&(f.eraYear=+m),h==="relatedYear"&&(f.eraYear=+m),h==="month"){const y=/^([0-9]*)(.*?)$/.exec(m);if(!y||y.length!=3||!y[1]&&!y[2])throw new RangeError(`Unexpected month: ${m}`);if(f.month=y[1]?+y[1]:1,f.month<1)throw new RangeError(`Invalid month ${m} from ${d}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(f.month>13)throw new RangeError(`Invalid month ${m} from ${d}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);y[2]&&(f.monthExtra=y[2])}h==="day"&&(f.day=+m),this.hasEra&&h==="era"&&m!=null&&m!==""&&(m=m.split(" (")[0],f.era=m.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(f.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){const{era:h,eraYear:m}=this.reviseIntlEra(f,e);f.era=h,f.eraYear=m}this.checkIcuBugs&&this.checkIcuBugs(e);const p=this.adjustCalendarDate(f,n,"constrain",!0);if(p.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(p.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(p.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return n.set(o,p),["constrain","reject"].forEach(h=>{const m=JSON.stringify({func:"calendarToIsoDate",year:p.year,month:p.month,day:p.day,overflow:h,id:this.id});n.set(m,e)}),p}validateCalendarDate(e){const{era:n,month:r,year:i,day:s,eraYear:o,monthCode:a,monthExtra:c}=e;if(c!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(i===void 0&&o===void 0)throw new TypeError("year or eraYear is required");if(r===void 0&&a===void 0)throw new TypeError("month or monthCode is required");if(s===void 0)throw new RangeError("Missing day");if(a!==void 0){if(typeof a!="string")throw new RangeError(`monthCode must be a string, not ${typeof a}`);if(!/^M([01]?\d)(L?)$/.test(a))throw new RangeError(`Invalid monthCode: ${a}`)}if(this.constantEra){if(n!==void 0&&n!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${n}`);if(o!==void 0&&i!==void 0&&o!==i)throw new RangeError(`eraYear ${o} does not match year ${i}`)}}adjustCalendarDate(e,n=void 0,r="constrain",i=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let s=e;if(this.validateCalendarDate(s),this.constantEra){const{year:l,eraYear:d}=s;s={...s,era:this.constantEra,year:l!==void 0?l:d,eraYear:d!==void 0?d:l}}const o=this.monthsInYear(s,n);let{month:a,monthCode:c}=s;return{month:a,monthCode:c}=Fa(s,r,o),{...s,month:a,monthCode:c}}regulateMonthDayNaive(e,n,r){const i=this.monthsInYear(e,r);let{month:s,day:o}=e;return n==="reject"?(At(s,1,i),At(o,1,this.maximumMonthLength(e))):(s=cn(s,1,i),o=cn(o,1,this.maximumMonthLength({...e,month:s}))),{...e,month:s,day:o}}calendarToIsoDate(e,n="constrain",r){const i=e;let s=this.adjustCalendarDate(e,r,n,!1);s=this.regulateMonthDayNaive(s,n,r);const{year:o,month:a,day:c}=s,l=JSON.stringify({func:"calendarToIsoDate",year:o,month:a,day:c,overflow:n,id:this.id});let d=r.get(l);if(d)return d;let f;if(i.year!==void 0&&i.month!==void 0&&i.day!==void 0&&(i.year!==s.year||i.month!==s.month||i.day!==s.day)&&(f=JSON.stringify({func:"calendarToIsoDate",year:i.year,month:i.month,day:i.day,overflow:n,id:this.id}),d=r.get(f),d))return d;let p=this.estimateIsoDate({year:o,month:a,day:c});const h=I=>{let R=this.addDaysIso(p,I);if(s.day>this.minimumMonthLength(s)){let O=this.isoToCalendarDate(R,r);for(;O.month!==a||O.year!==o;){if(n==="reject")throw new RangeError(`day ${c} does not exist in month ${a} of year ${o}`);R=this.addDaysIso(R,-1),O=this.isoToCalendarDate(R,r)}}return R};let m=0,y=this.isoToCalendarDate(p,r),_=Ol(s,y);if(_.years!==0||_.months!==0||_.days!==0){const I=_.years*365+_.months*30+_.days;p=this.addDaysIso(p,I),y=this.isoToCalendarDate(p,r),_=Ol(s,y),_.years===0&&_.months===0?p=h(_.days):m=this.compareCalendarDates(s,y)}let v=8,T=!1;for(;m;){p=this.addDaysIso(p,m*v);const I=y;y=this.isoToCalendarDate(p,r);const R=m;if(m=this.compareCalendarDates(s,y),m){if(_=Ol(s,y),_.years===0&&_.months===0)p=h(_.days),m=0,T=s.day>this.minimumMonthLength(s);else if(R&&m!==R)if(v>1)v/=2;else{if(n==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...i})}`);this.compareCalendarDates(y,I)>0&&(p=this.addDaysIso(p,-1)),T=!0,m=0}}}if(r.set(l,p),f&&r.set(f,p),s.year===void 0||s.month===void 0||s.day===void 0||s.monthCode===void 0||this.hasEra&&(s.era===void 0||s.eraYear===void 0))throw new RangeError("Unexpected missing property");if(!T){const I=JSON.stringify({func:"isoToCalendarDate",isoYear:p.year,isoMonth:p.month,isoDay:p.day,id:this.id});r.set(I,s)}return p}temporalToCalendarDate(e,n){const r={year:u(e,k),month:u(e,F),day:u(e,B)};return this.isoToCalendarDate(r,n)}compareCalendarDates(e,n){const r=It(e,[["day"],["month"],["year"]]),i=It(n,[["day"],["month"],["year"]]);return r.year!==i.year?Fi(r.year-i.year):r.month!==i.month?Fi(r.month-i.month):r.day!==i.day?Fi(r.day-i.day):0}regulateDate(e,n="constrain",r){const i=this.calendarToIsoDate(e,n,r);return this.isoToCalendarDate(i,r)}addDaysIso(e,n){return Ui(e.year,e.month,e.day,0,0,0,n,"constrain")}addDaysCalendar(e,n,r){const i=this.calendarToIsoDate(e,"constrain",r),s=this.addDaysIso(i,n);return this.isoToCalendarDate(s,r)}addMonthsCalendar(e,n,r,i){let s=e;const{day:o}=s;for(let a=0,c=Aw(n);a<c;a++){const{month:l}=s,d=s,f=n<0?-Math.max(o,this.daysInPreviousMonth(s,i)):this.daysInMonth(s,i),p=this.calendarToIsoDate(s,"constrain",i);let h=this.addDaysIso(p,f);if(s=this.isoToCalendarDate(h,i),n>0){const m=this.monthsInYear(d,i);for(;s.month-1!==l%m;)h=this.addDaysIso(h,-1),s=this.isoToCalendarDate(h,i)}s.day!==o&&(s=this.regulateDate({...s,day:o},"constrain",i))}if(r==="reject"&&s.day!==o)throw new RangeError(`Day ${o} does not exist in resulting calendar month`);return s}addCalendar(e,{years:n=0,months:r=0,weeks:i=0,days:s=0},o,a){const{year:c,month:l,day:d}=e,f=this.addMonthsCalendar({year:c+n,month:l,day:d},r,o,a),p=s+i*7;return this.addDaysCalendar(f,p,a)}untilCalendar(e,n,r,i){let s=0,o=0,a=0,c=0;switch(r){case"day":s=this.calendarDaysUntil(e,n,i);break;case"week":{const l=this.calendarDaysUntil(e,n,i);s=l%7,o=(l-s)/7;break}case"month":case"year":{const l=n.year-e.year,d=n.month-e.month,f=n.day-e.day,p=this.compareCalendarDates(n,e);r==="year"&&l&&(c=d*p<0||d===0&&f*p<0?l-p:l);const h=c?this.addCalendar(e,{years:c},"constrain",i):e;let m,y=h;do a+=p,m=y,y=this.addMonthsCalendar(m,p,"constrain",i),y.day!==e.day&&(y=this.regulateDate({...y,day:e.day},"constrain",i));while(this.compareCalendarDates(n,y)*p>=0);a-=p,s=this.calendarDaysUntil(m,n,i);break}}return{years:c,months:a,weeks:o,days:s}}daysInMonth(e,n){const{day:r}=e,i=this.maximumMonthLength(e),s=this.minimumMonthLength(e);if(s===i)return s;const o=r<=i-s?i:s,a=this.calendarToIsoDate(e,"constrain",n),c=this.addDaysIso(a,o),l=this.isoToCalendarDate(c,n),d=this.addDaysIso(c,-l.day);return this.isoToCalendarDate(d,n).day}daysInPreviousMonth(e,n){const{day:r,month:i,year:s}=e;let a={year:i>1?s:s-1,month:i,day:1};const c=i>1?i-1:this.monthsInYear(a,n);a={...a,month:c};const l=this.minimumMonthLength(a),d=this.maximumMonthLength(a);if(l===d)return d;const f=this.calendarToIsoDate(e,"constrain",n),p=this.addDaysIso(f,-r);return this.isoToCalendarDate(p,n).day}startOfCalendarYear(e){return{year:e.year,month:1,day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,n,r){const i=this.calendarToIsoDate(e,"constrain",r),s=this.calendarToIsoDate(n,"constrain",r);return this.isoDaysUntil(i,s)}isoDaysUntil(e,n){return Cd(e.year,e.month,e.day,n.year,n.month,n.day,"day").days}monthDayFromFields(e,n,r){let{year:i,month:s,monthCode:o,day:a,era:c,eraYear:l}=e;if(o===void 0){if(i===void 0&&(c===void 0||l===void 0))throw new TypeError("`monthCode`, `year`, or `era` and `eraYear` is required");({monthCode:o,year:i}=this.adjustCalendarDate({year:i,month:s,monthCode:o,day:a,era:c,eraYear:l},r,n))}let d,f,p,h,m;const y={year:1972,month:1,day:1},{year:_}=this.isoToCalendarDate(y,r);for(let v=0;v<100;v++){const T=this.adjustCalendarDate({day:a,monthCode:o,year:_-v},r),I=this.calendarToIsoDate(T,"constrain",r),R=this.isoToCalendarDate(I,r);if({year:d,month:f,day:p}=I,R.monthCode===o&&R.day===a)return{month:f,day:p,year:d};n==="constrain"&&(h===void 0||R.monthCode===h.monthCode&&R.day>h.day)&&(h=R,m=I)}if(n==="constrain"&&m!==void 0)return m;throw new RangeError(`No recent ${this.id} year with monthCode ${o} and day ${a}`)}}class jw extends qs{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(e){const{year:n}=e;return(7*n+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,n){const{month:r,year:i}=e,s=this.getMonthCode(i,r),o=vu(this.months).find(c=>c[1].monthCode===s);if(o===void 0)throw new RangeError(`unmatched Hebrew month: ${r}`);const a=o[1].days;return typeof a=="number"?a:a[n]}estimateIsoDate(e){const{year:n}=e;return{year:n-3760,month:1,day:1}}getMonthCode(e,n){return this.inLeapYear({year:e})?n===6?$r(5,!0):$r(n<6?n:n-1):$r(n)}adjustCalendarDate(e,n,r="constrain",i=!1){let{year:s,eraYear:o,month:a,monthCode:c,day:l,monthExtra:d}=e;if(s===void 0&&o!==void 0&&(s=o),o===void 0&&s!==void 0&&(o=s),i){if(d){const p=this.months[d];if(!p)throw new RangeError(`Unrecognized month from formatToParts: ${d}`);a=this.inLeapYear({year:s})?p.leap:p.regular}return c=this.getMonthCode(s,a),{year:s,month:a,day:l,era:void 0,eraYear:o,monthCode:c}}else{if(this.validateCalendarDate(e),a===void 0)if(c.endsWith("L")){if(c!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${c}`);if(a=6,!this.inLeapYear({year:s})){if(r==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${s} which is not a leap year`);a=5,l=30,c="M05"}}else{a=_d(c),this.inLeapYear({year:s})&&a>6&&a++;const f=this.monthsInYear({year:s});if(a<1||a>f)throw new RangeError(`Invalid monthCode: ${c}`)}else if(r==="reject"?(At(a,1,this.monthsInYear({year:s})),At(l,1,this.maximumMonthLength({year:s,month:a}))):(a=cn(a,1,this.monthsInYear({year:s})),l=cn(l,1,this.maximumMonthLength({year:s,month:a}))),c===void 0)c=this.getMonthCode(s,a);else if(this.getMonthCode(s,a)!==c)throw new RangeError(`monthCode ${c} doesn't correspond to month ${a} in Hebrew year ${s}`);return{...e,day:l,month:a,monthCode:c,year:s,eraYear:o}}}}class Ys extends qs{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(e,n){return this.daysInMonth({year:e.year,month:12,day:1},n)===30}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(e){const{year:n}=this.adjustCalendarDate(e);return{year:Sw(n*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class Np extends Ys{constructor(){super(...arguments),this.id="islamic"}}class Mw extends Ys{constructor(){super(...arguments),this.id="islamic-umalqura"}}class Cw extends Ys{constructor(){super(...arguments),this.id="islamic-tbla"}}class Lw extends Ys{constructor(){super(...arguments),this.id="islamic-civil"}}class $w extends Ys{constructor(){super(...arguments),this.id="islamic-rgsa"}}class kw extends Ys{constructor(){super(...arguments),this.id="islamicc"}}class Pw extends qs{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(e,n){return Np.prototype.inLeapYear.call(this,e,n)}monthsInYear(){return 12}minimumMonthLength(e){const{month:n}=e;return n===12?29:n<=6?31:30}maximumMonthLength(e){const{month:n}=e;return n===12?30:n<=6?31:30}estimateIsoDate(e){const{year:n}=this.adjustCalendarDate(e);return{year:n+621,month:1,day:1}}}class Uw extends qs{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return Ap(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}getMonthInfo(e){const{month:n}=e;let r=this.months[n];if(r===void 0)throw new RangeError(`Invalid month: ${n}`);return this.inLeapYear(e)&&r.leap&&(r=r.leap),r}estimateIsoDate(e){const n=this.adjustCalendarDate(e),r=this.getMonthInfo(n),i=n.year+78+(r.nextYear?1:0),s=r.month,o=r.day;return Ui(i,s,o,0,0,0,n.day-1,"constrain")}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function Fw(t){let e=t;if(e.length===0)throw new RangeError("Invalid era data: eras are required");if(e.length===1&&e[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(e.length===1&&!e[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(e.filter(i=>i.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");let n;e.forEach(i=>{if(i.isAnchor||!i.anchorEpoch&&!i.reverseOf){if(n)throw new RangeError("Invalid era data: cannot have multiple anchor eras");n=i,i.anchorEpoch={year:i.hasYearZero?0:1}}else if(!i.name)throw new RangeError("If era name is blank, it must be the anchor era")}),e=e.filter(i=>i.name),e.forEach(i=>{const{reverseOf:s}=i;if(s){const o=e.find(a=>a.name===s);if(o===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${s}`);i.reverseOf=o,i.anchorEpoch=o.anchorEpoch,i.isoEpoch=o.isoEpoch}i.anchorEpoch.month===void 0&&(i.anchorEpoch.month=1),i.anchorEpoch.day===void 0&&(i.anchorEpoch.day=1)}),Nw.call(e,(i,s)=>{if(i.reverseOf)return 1;if(s.reverseOf)return-1;if(!i.isoEpoch||!s.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return s.isoEpoch.year-i.isoEpoch.year});const r=e[e.length-1].reverseOf;if(r&&r!==e[e.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return e.forEach((i,s)=>{i.genericName=`era${e.length-1-s}`}),{eras:e,anchorEra:n||e[0]}}function Ap(t){return t%4===0&&(t%100!==0||t%400===0)}class Go extends qs{constructor(e,n){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=e;const{eras:r,anchorEra:i}=Fw(n);this.anchorEra=i,this.eras=r}inLeapYear(e){const{year:n}=this.estimateIsoDate({month:1,day:1,year:e.year});return Ap(n)}monthsInYear(){return 12}minimumMonthLength(e){const{month:n}=e;return n===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(n)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}completeEraYear(e){const n=(a,c)=>{const l=e[a];if(l!=null&&l!=c)throw new RangeError(`Input ${a} ${l} doesn't match calculated value ${c}`)},r=a=>{let c;const l={...e,year:a},d=this.eras.find((f,p)=>{if(p===this.eras.length-1){if(f.reverseOf){if(a>0)throw new RangeError(`Signed year ${a} is invalid for era ${f.name}`);return c=f.anchorEpoch.year-a,!0}return c=a-f.anchorEpoch.year+(f.hasYearZero?0:1),!0}return this.compareCalendarDates(l,f.anchorEpoch)>=0?(c=a-f.anchorEpoch.year+(f.hasYearZero?0:1),!0):!1});if(!d)throw new RangeError(`Year ${a} was not matched by any era`);return{eraYear:c,era:d.name}};let{year:i,eraYear:s,era:o}=e;if(i!=null)({eraYear:s,era:o}=r(i)),n("era",o),n("eraYear",s);else if(s!=null){const a=o===void 0?void 0:this.eras.find(c=>c.name===o||c.genericName===o);if(!a)throw new RangeError(`Era ${o} (ISO year ${s}) was not matched by any era`);if(s<1&&a.reverseOf)throw new RangeError(`Years in ${o} era must be positive, not ${i}`);a.reverseOf?i=a.anchorEpoch.year-s:i=s+a.anchorEpoch.year-(a.hasYearZero?0:1),n("year",i),{eraYear:s,era:o}=r(i)}else throw new RangeError("Either `year` or `eraYear` and `era` are required");return{...e,year:i,eraYear:s,era:o}}adjustCalendarDate(e,n,r="constrain"){let i=e;const{month:s,monthCode:o}=i;return s===void 0&&(i={...i,month:_d(o)}),this.validateCalendarDate(i),i=this.completeEraYear(i),super.adjustCalendarDate(i,n,r)}estimateIsoDate(e){const n=this.adjustCalendarDate(e),{year:r,month:i,day:s}=n,{anchorEra:o}=this,a=r+o.isoEpoch.year-(o.hasYearZero?0:1);return sc(a,i,s,"constrain")}checkIcuBugs(e){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&Sr(e.year,e.month,e.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}}class vd extends Go{constructor(e,n){super(e,n)}inLeapYear(e){const{year:n}=e;return(n+1)%4===0}monthsInYear(){return 13}minimumMonthLength(e){const{month:n}=e;return n===13?this.inLeapYear(e)?6:5:30}maximumMonthLength(e){return this.minimumMonthLength(e)}}class Bw extends vd{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}}class qw extends vd{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}}class Yw extends vd{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class zw extends Go{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}}class Gw extends Go{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}}class Hw extends Go{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(e){let{era:n,eraYear:r}=e;return(n==="bc"||n==="b")&&(n="bce"),(n==="ad"||n==="a")&&(n="ce"),{era:n,eraYear:r}}}class Zw extends Go{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long"}reviseIntlEra(e,n){const{era:r,eraYear:i}=e,{year:s}=n;return this.eras.find(o=>o.name===r)?{era:r,eraYear:i}:s<1?{era:"bce",eraYear:1-s}:{era:"ce",eraYear:s}}}class Sp extends qs{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(e,n){const r=this.getMonthList(e.year,n);return vu(r).length===13}monthsInYear(e,n){return this.inLeapYear(e,n)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(e,n){if(e===void 0)throw new TypeError("Missing year");const r=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),i=n.get(r);if(i)return i;const s=this.getFormatter(),o=(_,v)=>{const T=Op({isoYear:_,isoMonth:2,isoDay:1}),I=new Date(T);I.setUTCDate(v+1);const R=s.formatToParts(I),O=R.find(C=>C.type==="month").value,N=+R.find(C=>C.type==="day").value;let x=R.find(C=>C.type==="relatedYear");if(x!==void 0)x=+x.value;else throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return{calendarMonthString:O,calendarDay:N,calendarYearToVerify:x}};let a=17,{calendarMonthString:c,calendarDay:l,calendarYearToVerify:d}=o(e,a);c!=="1"&&(a+=29,{calendarMonthString:c,calendarDay:l}=o(e,a)),a-=l-5;const f={};let p=1,h,m,y=!1;do({calendarMonthString:c,calendarDay:l,calendarYearToVerify:d}=o(e,a)),h&&(f[m].daysInMonth=h+30-l),d!==e?y=!0:(f[c]={monthIndex:p++},a+=30),h=l,m=c;while(!y);return f[m].daysInMonth=h+30-l,n.set(r,f),f}estimateIsoDate(e){const{year:n,month:r}=e;return{year:n,month:r>=12?12:r+1,day:1}}adjustCalendarDate(e,n,r="constrain",i=!1){let{year:s,month:o,monthExtra:a,day:c,monthCode:l,eraYear:d}=e;if(i){if(s=d,a&&a!=="bis")throw new RangeError(`Unexpected leap month suffix: ${a}`);const f=$r(o,a!==void 0),p=`${o}${a||""}`,m=this.getMonthList(s,n)[p];if(m===void 0)throw new RangeError(`Unmatched month ${p} in Chinese year ${s}`);return o=m.monthIndex,{year:s,month:o,day:c,era:void 0,eraYear:d,monthCode:f}}else{if(this.validateCalendarDate(e),s===void 0&&(s=d),d===void 0&&(d=s),o===void 0){const f=this.getMonthList(s,n);let p=l.replace("L","bis").slice(1);p[0]==="0"&&(p=p.slice(1));let h=f[p];if(o=h&&h.monthIndex,o===void 0&&l.endsWith("L")&&!No.call(["M01L","M12L","M13L"],l)&&r==="constrain"){let m=l.slice(1,-1);m[0]==="0"&&(m=m.slice(1)),h=f[m],h&&({daysInMonth:c,monthIndex:o}=h,l=$r(m))}if(o===void 0)throw new RangeError(`Unmatched month ${l} in Chinese year ${s}`)}else if(l===void 0){const f=this.getMonthList(s,n),p=vu(f),h=p.length;r==="reject"?(At(o,1,h),At(c,1,this.maximumMonthLength())):(o=cn(o,1,h),c=cn(c,1,this.maximumMonthLength()));const m=p.find(([,y])=>y.monthIndex===o);if(m===void 0)throw new RangeError(`Invalid month ${o} in Chinese year ${s}`);l=$r(m[0].replace("bis",""),m[0].indexOf("bis")!==-1)}else{const f=this.getMonthList(s,n);let p=l.replace("L","bis").slice(1);p[0]==="0"&&(p=p.slice(1));const h=f[p];if(!h)throw new RangeError(`Unmatched monthCode ${l} in Chinese year ${s}`);if(o!==h.monthIndex)throw new RangeError(`monthCode ${l} doesn't correspond to month ${o} in Chinese year ${s}`)}return{...e,year:s,eraYear:d,month:o,monthCode:l,day:c}}}}class Vw extends Sp{constructor(){super(...arguments),this.id="chinese"}}class Ww extends Sp{constructor(){super(...arguments),this.id="dangi"}}const Qw={helper:void 0,dateFromFields(t,e,n){const r=Et(e),i=new Be,s=It(t,[["day"],["era",void 0],["eraYear",void 0],["month",void 0],["monthCode",void 0],["year",void 0]]),{year:o,month:a,day:c}=this.helper.calendarToIsoDate(s,r,i),l=Bn(o,a,c,n);return i.setObject(l),l},yearMonthFromFields(t,e,n){const r=Et(e),i=new Be,s=It(t,[["era",void 0],["eraYear",void 0],["month",void 0],["monthCode",void 0],["year",void 0]]),{year:o,month:a,day:c}=this.helper.calendarToIsoDate({...s,day:1},r,i),l=ko(o,a,n,c);return i.setObject(l),l},monthDayFromFields(t,e,n){const r=Et(e),i=new Be,s=It(t,[["day"],["era",void 0],["eraYear",void 0],["month",void 0],["monthCode",void 0],["year",void 0]]),{year:o,month:a,day:c}=this.helper.monthDayFromFields(s,r,i),l=$o(a,c,n,o);return i.setObject(l),l},fields(t){let e=t;return No.call(e,"year")&&(e=[...e,"era","eraYear"]),e},mergeFields(t,e){const n={...t},r={...e},{month:i,monthCode:s,year:o,era:a,eraYear:c,...l}=n,{month:d,monthCode:f,year:p,era:h,eraYear:m}=r;return d===void 0&&f===void 0&&(l.month=i,l.monthCode=s),p===void 0&&h===void 0&&m===void 0&&(l.year=o),{...l,...r}},dateAdd(t,e,n,r,i,s,o){const a=Be.getCacheForObject(t),c=this.helper.temporalToCalendarDate(t,a),l=this.helper.addCalendar(c,{years:e,months:n,weeks:r,days:i},s,a),d=this.helper.calendarToIsoDate(l,"constrain",a),{year:f,month:p,day:h}=d,m=Bn(f,p,h,o);return new Be(a).setObject(m),m},dateUntil(t,e,n){const r=Be.getCacheForObject(t),i=Be.getCacheForObject(e),s=this.helper.temporalToCalendarDate(t,r),o=this.helper.temporalToCalendarDate(e,i);return this.helper.untilCalendar(s,o,n,r)},year(t){const e=Be.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,e).year},month(t){const e=Be.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,e).month},day(t){const e=Be.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,e).day},era(t){if(!this.helper.hasEra)return;const e=Be.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,e).era},eraYear(t){if(!this.helper.hasEra)return;const e=Be.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,e).eraYear},monthCode(t){const e=Be.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,e).monthCode},dayOfWeek(t){return Fe.iso8601.dayOfWeek(t)},dayOfYear(t){const e=Be.getCacheForObject(t),n=this.helper.isoToCalendarDate(t,e),r=this.helper.startOfCalendarYear(n);return this.helper.calendarDaysUntil(r,n,e)+1},weekOfYear(t){return Fe.iso8601.weekOfYear(t)},daysInWeek(t){return Fe.iso8601.daysInWeek(t)},daysInMonth(t){const e=Be.getCacheForObject(t),n=this.helper.temporalToCalendarDate(t,e),r=this.helper.maximumMonthLength(n),i=this.helper.minimumMonthLength(n);if(r===i)return r;const s=this.helper.startOfCalendarMonth(n),o=this.helper.addMonthsCalendar(s,1,"constrain",e);return this.helper.calendarDaysUntil(s,o,e)},daysInYear(t){let e=t;gt(e,k)||(e=Ee(e));const n=Be.getCacheForObject(e),r=this.helper.temporalToCalendarDate(e,n),i=this.helper.startOfCalendarYear(r),s=this.helper.addCalendar(i,{years:1},"constrain",n);return this.helper.calendarDaysUntil(i,s,n)},monthsInYear(t){const e=Be.getCacheForObject(t),n=this.helper.temporalToCalendarDate(t,e);return this.helper.monthsInYear(n,e)},inLeapYear(t){let e=t;gt(e,k)||(e=Ee(e));const n=Be.getCacheForObject(e),r=this.helper.temporalToCalendarDate(e,n);return this.helper.inLeapYear(r,n)}};for(const t of[jw,Pw,Yw,Bw,qw,Vw,Ww,zw,Uw,Gw,Hw,Zw,Np,Mw,Cw,Lw,$w,kw]){const e=new t;Fe[e.id]={...Qw,helper:e}}const Xw=Object.keys(Fe);function jp(t){return No.call(Xw,t)}const dh=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,Kw=/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/,Jw=new RegExp(`(?:(?:${dh.source})(?:\\/(?:${dh.source}))*|Etc/GMT[-+]\\d{1,2}|${Kw.source})`),fh=/[A-Za-z0-9]{3,8}/,e0=new RegExp(`(?:${fh.source}(?:-${fh.source})*)`),Mp=/(?:[+\u2212-]\d{6}|\d{4})/,tc=/(?:0[1-9]|1[0-2])/,Tu=/(?:0[1-9]|[12]\d|3[01])/,t0=new RegExp(`(${Mp.source})(?:-(${tc.source})-(${Tu.source})|(${tc.source})(${Tu.source}))`),Cp=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,Lp=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,$p=new RegExp(`(?:([zZ])|(?:${Lp.source})?)(?:\\[(${Jw.source})\\])?`),kp=new RegExp(`\\[u-ca=(${e0.source})\\]`),n0=new RegExp(`^${t0.source}(?:(?:T|\\s+)${Cp.source})?${$p.source}(?:${kp.source})?$`,"i"),r0=new RegExp(`^T?${Cp.source}(?:${$p.source})?(?:${kp.source})?$`,"i"),i0=new RegExp(`^(${Mp.source})-?(${tc.source})$`),s0=new RegExp(`^(?:--)?(${tc.source})-?(${Tu.source})$`),Nl=/(\d+)(?:[.,](\d{1,9}))?/,o0=/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/,a0=new RegExp(`(?:${Nl.source}H)?(?:${Nl.source}M)?(?:${Nl.source}S)?`),c0=new RegExp(`^([+\u2212-])?P${o0.source}(?:T(?!$)${a0.source})?$`,"i"),Pp=Array.prototype.push,Up=globalThis.Intl.DateTimeFormat,l0=Math.min,u0=Math.max,we=Math.abs,pt=Math.floor,Ao=Math.sign,ys=Math.trunc,Ho=Number.isNaN,Tt=Number.isFinite,d0=Number,Zo=String,f0=Number.MAX_SAFE_INTEGER,Re=Object.create,h0=Object.defineProperty,p0=Object.is,Td=Reflect.apply,tt=g.BigInt(0),Ed=g.BigInt(1),$i=g.BigInt(60),_e=g.BigInt(1e3),En=g.BigInt(1e6),kr=g.BigInt(1e9),g0=g.BigInt(-1),m0=86400,ui=g.multiply(g.BigInt(m0),kr),So=g.multiply(g.BigInt(-86400),g.BigInt(1e17)),jo=g.multiply(g.BigInt(86400),g.BigInt(1e17)),nc=-271821,rc=275760,Fp=g.multiply(g.BigInt(-388152),g.BigInt(1e13)),y0=g.multiply(ui,g.BigInt(366*10)),Bp=g.multiply(ui,g.BigInt(366*1)),qp=g.multiply(ui,g.BigInt(2*7));function Yp(t){if(typeof t!="number"||!Tt(t))return!1;const e=we(t);return pt(e)===e}function Ae(t){return typeof t=="object"&&t!==null||typeof t=="function"}function Mo(t){if(typeof t=="bigint")throw new TypeError("Cannot convert BigInt to number");return d0(t)}function ve(t){const e=Mo(t);if(Ho(e))return 0;const n=ys(e);return e===0?0:n}function H(t){if(typeof t=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return Zo(t)}function De(t){const e=ve(t);if(!Tt(e))throw new RangeError("infinity is out of range");return e}function Ms(t,e){const n=ve(t);if(!Tt(n))throw new RangeError("infinity is out of range");if(n<1)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return n}function bt(t){const e=Mo(t);if(Ho(e))return 0;if(!Tt(e))throw new RangeError("infinity is out of range");if(!Yp(e))throw new RangeError(`unsupported fractional value ${e}`);return ve(e)}function ft(t,e){const n=g.divide(t,e),r=g.remainder(t,e);return{quotient:n,remainder:r}}function Id(t){return g.lessThan(t,tt)?g.multiply(t,g0):t}const ic=new Map([["year",De],["month",Ms],["monthCode",H],["day",Ms],["hour",De],["minute",De],["second",De],["millisecond",De],["microsecond",De],["nanosecond",De],["years",bt],["months",bt],["weeks",bt],["days",bt],["hours",bt],["minutes",bt],["seconds",bt],["milliseconds",bt],["microseconds",bt],["nanoseconds",bt],["era",H],["eraYear",ve],["offset",H]]),Cs=["year","month","week","day","hour","minute","second","millisecond","microsecond","nanosecond"],Dc=[["years","year"],["months","month"],["weeks","week"],["days","day"],["hours","hour"],["minutes","minute"],["seconds","second"],["milliseconds","millisecond"],["microseconds","microsecond"],["nanoseconds","nanosecond"]],hh=new Map;function zp(t){let e=hh.get(t);return e===void 0&&(e=new Up("en-us",{timeZone:Zo(t),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),hh.set(t,e)),e}function ct(t){return gt(t,z)&&!gt(t,me,S)}function sr(t){return gt(t,Kr)}function Ke(t){return gt(t,Je)}function Ge(t){return gt(t,Mt,ht,Ct,Lt,$t,kt,Pt,Ut,Ft)}function oe(t){return gt(t,Ip)}function He(t){return gt(t,Z,V,W,Q,X,K)&&!gt(t,k,F,B)}function ne(t){return gt(t,k,F,B,Z,V,W,Q,X,K)}function be(t){return gt(t,Dp)}function wt(t){return gt(t,Rp)}function Y(t){return gt(t,z,me,S)}function zs(t){if(gt(t,S)||gt(t,me))throw new TypeError("with() does not support a calendar or timeZone property");if(t.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(t.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function Gp(t){let{ianaName:e,offset:n,z:r}=E0(t);return e||(r?"UTC":n)}function Vo(t,e){return e==="never"||e==="auto"&&t==="iso8601"?"":`[u-ca=${t}]`}function br(t){const e=n0.exec(t);if(!e)throw new RangeError(`invalid ISO 8601 string: ${t}`);let n=e[1];if(n[0]==="\u2212"&&(n=`-${n.slice(1)}`),n==="-000000")throw new RangeError(`invalid ISO 8601 string: ${t}`);const r=ve(n),i=ve(e[2]||e[4]),s=ve(e[3]||e[5]),o=ve(e[6]),a=e[6]!==void 0,c=ve(e[7]||e[10]);let l=ve(e[8]||e[11]);l===60&&(l=59);const d=(e[9]||e[12])+"000000000",f=ve(d.slice(0,3)),p=ve(d.slice(3,6)),h=ve(d.slice(6,9));let m,y=!1;if(e[13])m=void 0,y=!0;else if(e[14]&&e[15]){const T=e[14]==="-"||e[14]==="\u2212"?"-":"+",I=e[15]||"00",R=e[16]||"00",O=e[17]||"00";let N=e[18]||"0";if(m=`${T}${I}:${R}`,+N){for(;N.endsWith("0");)N=N.slice(0,-1);m+=`:${O}.${N}`}else+O&&(m+=`:${O}`);m==="-00:00"&&(m="+00:00")}let _=e[19];if(_)try{_=Sd(_).toString()}catch{}const v=e[20];return{year:r,month:i,day:s,hasTime:a,hour:o,minute:c,second:l,millisecond:f,microsecond:p,nanosecond:h,ianaName:_,offset:m,z:y,calendar:v}}function w0(t){const e=br(t);if(!e.z&&!e.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return e}function b0(t){const e=br(t);if(!e.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return e}function _0(t){return br(t)}function v0(t){return br(t)}function T0(t){const e=r0.exec(t);let n,r,i,s,o,a,c;if(e){n=ve(e[1]),r=ve(e[2]||e[5]),i=ve(e[3]||e[6]),i===60&&(i=59);const l=(e[4]||e[7])+"000000000";s=ve(l.slice(0,3)),o=ve(l.slice(3,6)),a=ve(l.slice(6,9)),c=e[15]}else{let l,d;if({hasTime:d,hour:n,minute:r,second:i,millisecond:s,microsecond:o,nanosecond:a,calendar:c,z:l}=br(t),!d)throw new RangeError(`time is missing in string: ${t}`);if(l)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(t))return{hour:n,minute:r,second:i,millisecond:s,microsecond:o,nanosecond:a,calendar:c};try{const{month:l,day:d}=Zp(t);pr(1972,l,d)}catch{try{const{year:l,month:d}=Hp(t);pr(l,d,1)}catch{return{hour:n,minute:r,second:i,millisecond:s,microsecond:o,nanosecond:a,calendar:c}}}throw new RangeError(`invalid ISO 8601 time-only string ${t}; may need a T prefix`)}function Hp(t){const e=i0.exec(t);let n,r,i,s;if(e){let o=e[1];if(o[0]==="\u2212"&&(o=`-${o.slice(1)}`),o==="-000000")throw new RangeError(`invalid ISO 8601 string: ${t}`);n=ve(o),r=ve(e[2]),i=e[3]}else{let o;if({year:n,month:r,calendar:i,day:s,z:o}=br(t),o)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:n,month:r,calendar:i,referenceISODay:s}}function Zp(t){const e=s0.exec(t);let n,r,i,s;if(e)n=ve(e[1]),r=ve(e[2]);else{let o;if({month:n,day:r,calendar:i,year:s,z:o}=br(t),o)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:n,day:r,calendar:i,referenceISOYear:s}}function E0(t){try{let e=Sd(t);if(e)return e=e.toString(),ws(e)?{offset:e}:{ianaName:e}}catch{}try{const e=br(t);if(e.z||e.offset||e.ianaName)return e}catch{}throw new RangeError(`Invalid time zone: ${t}`)}function Vp(t){const e=c0.exec(t);if(!e)throw new RangeError(`invalid duration: ${t}`);if(e.slice(2).every(_=>_===void 0))throw new RangeError(`invalid duration: ${t}`);const n=e[1]==="-"||e[1]==="\u2212"?-1:1,r=ve(e[2])*n,i=ve(e[3])*n,s=ve(e[4])*n,o=ve(e[5])*n,a=ve(e[6])*n;let c=e[7],l=ve(e[8])*n,d=e[9],f=ve(e[10])*n;const p=e[11]+"000000000";let h=ve(p.slice(0,3))*n,m=ve(p.slice(3,6))*n,y=ve(p.slice(6,9))*n;return c=c?n*ve(c)/10**c.length:0,d=d?n*ve(d)/10**d.length:0,{minutes:l,seconds:f,milliseconds:h,microseconds:m,nanoseconds:y}=R0(c,l,d,f,h,m,y),{years:r,months:i,weeks:s,days:o,hours:a,minutes:l,seconds:f,milliseconds:h,microseconds:m,nanoseconds:y}}function I0(t){const{year:e,month:n,day:r,hour:i,minute:s,second:o,millisecond:a,microsecond:c,nanosecond:l,offset:d,z:f}=w0(t),p=di(e,n,r,i,s,o,a,c,l);if(p===null)throw new RangeError("DateTime outside of supported range");const h=f?0:Yi(d);return g.subtract(p,g.BigInt(h))}function sc(t,e,n,r){let i=t,s=e,o=n;switch(r){case"reject":pr(i,s,o);break;case"constrain":({year:i,month:s,day:o}=ug(i,s,o));break}return{year:i,month:s,day:o}}function bo(t,e,n,r,i,s,o){let a=t,c=e,l=n,d=r,f=i,p=s;switch(o){case"reject":Lc(a,c,l,d,f,p);break;case"constrain":({hour:a,minute:c,second:l,millisecond:d,microsecond:f,nanosecond:p}=k0(a,c,l,d,f,p));break}return{hour:a,minute:c,second:l,millisecond:d,microsecond:f,nanosecond:p}}function D0(t,e,n){let r=t,i=e;const s=1;switch(n){case"reject":pr(r,i,s);break;case"constrain":({year:r,month:i}=ug(r,i));break}return{year:r,month:i}}function R0(t,e,n,r,i,s,o){let a=t,c=e,l=n,d=r,f=i,p=s,h=o;if(a!==0){[c,l,d,f,p,h].forEach(y=>{if(y!==0)throw new RangeError("only the smallest unit can be fractional")});const m=a*60;c=ys(m),l=m%1}if(l!==0){[d,f,p,h].forEach(_=>{if(_!==0)throw new RangeError("only the smallest unit can be fractional")});const m=l*60;d=ys(m);const y=m%1;if(y!==0){const _=y*1e3;f=ys(_);const v=_%1;if(v!==0){const T=v*1e3;p=ys(T);const I=T%1;if(I!==0){const R=I*1e3;h=ys(R)}}}}return{minutes:c,seconds:d,milliseconds:f,microseconds:p,nanoseconds:h}}function Wp(t){if(Ge(t))return{years:u(t,Mt),months:u(t,ht),weeks:u(t,Gt),days:u(t,Ct),hours:u(t,Lt),minutes:u(t,$t),seconds:u(t,kt),milliseconds:u(t,Pt),microseconds:u(t,Ut),nanoseconds:u(t,Ft)};const e=gi(t,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"]);if(!e)throw new TypeError("invalid duration-like");const{years:n=0,months:r=0,weeks:i=0,days:s=0,hours:o=0,minutes:a=0,seconds:c=0,milliseconds:l=0,microseconds:d=0,nanoseconds:f=0}=e;return{years:n,months:r,weeks:i,days:s,hours:o,minutes:a,seconds:c,milliseconds:l,microseconds:d,nanoseconds:f}}function Un(t,e=[]){let n;if(Ae(t))n=Wp(t);else{const h=H(t);n=Vp(h)}const{years:r,months:i,weeks:s,days:o,hours:a,minutes:c,seconds:l,milliseconds:d,microseconds:f,nanoseconds:p}=n;pg(r,i,s,o,a,c,l,d,f,p);for(const h of e)if(n[h]!==0)throw new RangeError(`Duration field ${h} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return n}function Et(t){return _r(t,"overflow",["constrain","reject"],"constrain")}function Co(t){return _r(t,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function lt(t,e){return _r(t,"roundingMode",["ceil","floor","trunc","halfExpand"],e)}function Wo(t){switch(t){case"ceil":return"floor";case"floor":return"ceil";default:return t}}function Eu(t,e){return _r(t,"offset",["prefer","use","ignore","reject"],e)}function Qo(t){return _r(t,"calendarName",["auto","always","never"],"auto")}function x0(t){return _r(t,"timeZoneName",["auto","never"],"auto")}function O0(t){return _r(t,"offset",["auto","never"],"auto")}function In(t,e,n){let r=1/0;e!==void 0&&(r=e),!n&&e!==void 0&&(r=e>1?e-1:1);const i=F0(t,"roundingIncrement",1,r,1);if(e!==void 0&&e%i!==0)throw new RangeError(`Rounding increment must divide evenly into ${e}`);return i}function Lo(t,e){return In(t,{year:void 0,month:void 0,week:void 0,day:void 0,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[e],!1)}function Xo(t){switch(zt(t,void 0,["year","month","week","day","hour"])){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}let n=t.fractionalSecondDigits;if(n===void 0&&(n="auto"),typeof n!="number"){const i=H(n);if(i==="auto")return{precision:"auto",unit:"nanosecond",increment:1};throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${i}`)}if(Ho(n)||n<0||n>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${n}`);const r=pt(n);switch(r){case 0:return{precision:r,unit:"second",increment:1};case 1:case 2:case 3:return{precision:r,unit:"millisecond",increment:10**(3-r)};case 4:case 5:case 6:return{precision:r,unit:"microsecond",increment:10**(6-r)};case 7:case 8:case 9:return{precision:r,unit:"nanosecond",increment:10**(9-r)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${n}`)}}function mn(t,e,n=[],r){const i=new Map(Dc.filter(([,a])=>!n.includes(a))),s=new Set(Cs);for(const a of n)s.delete(a);const o=_r(t,"largestUnit",["auto",...s,...i.keys()],e);return o==="auto"&&r!==void 0?r:i.has(o)?i.get(o):o}function zt(t,e,n=[]){const r=new Map(Dc.filter(([,o])=>!n.includes(o))),i=new Set(Cs);for(const o of n)i.delete(o);const s=_r(t,"smallestUnit",[...i,...r.keys()],e);return r.has(s)?r.get(s):s}function N0(t){const e=new Map(Dc),n=_r(t,"unit",[...e.values(),...e.keys()],void 0);return e.has(n)?e.get(n):n}function io(t){const e=t.relativeTo;if(e===void 0)return e;let n="option",r=!1,i,s,o,a,c,l,d,f,p,h,m,y;if(Ae(e)){if(Y(e)||oe(e))return e;if(ne(e))return Pi(e);h=Gs(e);const _=Ve(h,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),v=oc(e,_),T=Re(null);T.overflow="constrain",{year:i,month:s,day:o,hour:a,minute:c,second:l,millisecond:d,microsecond:f,nanosecond:p}=Ko(h,v,T),y=e.offset,y===void 0&&(n="wall"),m=e.timeZone}else{let _,v;({year:i,month:s,day:o,hour:a,minute:c,second:l,millisecond:d,microsecond:f,nanosecond:p,calendar:h,ianaName:_,offset:y,z:v}=br(H(e))),_&&(m=_),v?n="exact":y||(n="wall"),h||(h=nt()),h=Rt(h),r=!0}if(m){m=Zt(m);let _=0;n==="option"&&(_=Yi(H(y)));const v=ac(i,s,o,a,c,l,d,f,p,n,_,m,"compatible","reject",r);return _t(v,m,h)}return Bn(i,s,o,h)}function Dn(t,e){if(Cs.indexOf(t)>Cs.indexOf(e))throw new RangeError(`largestUnit ${t} cannot be smaller than smallestUnit ${e}`)}function Iu(t,e,n,r,i,s,o,a,c,l){const d=new Map(Dc);for(const[f,p]of[["years",t],["months",e],["weeks",n],["days",r],["hours",i],["minutes",s],["seconds",o],["milliseconds",a],["microseconds",c],["nanoseconds",l]])if(p!==0)return d.get(f);return"nanosecond"}function Fn(t,e){return Cs.indexOf(t)>Cs.indexOf(e)?e:t}function gi(t,e){const n=t,r=e;let i=!1,s={};for(const o of r){const a=n[o];a!==void 0&&(i=!0,ic.has(o)?s[o]=ic.get(o)(a):s[o]=a)}return i?s:!1}function It(t,e){const n=t,r=e,i={};let s=!1;for(const o of r){const[a,c]=o;let l=n[a];if(l===void 0){if(o.length===1)throw new TypeError(`required property '${a}' missing or undefined`);l=c}else s=!0,ic.has(a)&&(l=ic.get(a)(l));i[a]=l}if(!s)throw new TypeError("no supported properties found");if(i.era===void 0!=(i.eraYear===void 0))throw new RangeError("properties 'era' and 'eraYear' must be provided together");return i}function Du(t,e){const n=[["day",void 0],["month",void 0],["monthCode",void 0],["year",void 0]];return e.forEach(r=>{n.some(([i])=>i===r)||n.push([r,void 0])}),It(t,n)}function oc(t,e){const n=[["day",void 0],["hour",0],["microsecond",0],["millisecond",0],["minute",0],["month",void 0],["monthCode",void 0],["nanosecond",0],["second",0],["year",void 0]];return e.forEach(r=>{n.some(([i])=>i===r)||n.push([r,void 0])}),It(t,n)}function ki(t,e){const n=[["day",void 0],["month",void 0],["monthCode",void 0],["year",void 0]];return e.forEach(r=>{n.some(([i])=>i===r)||n.push([r,void 0])}),It(t,n)}function Dd(t){return It(t,[["hour",0],["microsecond",0],["millisecond",0],["minute",0],["nanosecond",0],["second",0]])}function rn(t,e){const n=[["month",void 0],["monthCode",void 0],["year",void 0]];return e.forEach(r=>{n.some(([i])=>i===r)||n.push([r,void 0])}),It(t,n)}function A0(t,e){const n=[["day",void 0],["hour",0],["microsecond",0],["millisecond",0],["minute",0],["month",void 0],["monthCode",void 0],["nanosecond",0],["second",0],["year",void 0],["offset",void 0],["timeZone"]];return e.forEach(r=>{n.some(([i])=>i===r)||n.push([r,void 0])}),It(t,n)}function Ee(t,e=Re(null)){let n=t;if(Ae(n)){if(oe(n))return n;if(Y(n)&&(n=yn(u(n,me),u(n,Nt),u(n,S))),ne(n))return Bn(u(n,k),u(n,F),u(n,B),u(n,S));const l=Gs(n),d=Ve(l,["day","month","monthCode","year"]),f=Du(n,d);return Xn(l,f,e)}Et(e);const{year:r,month:i,day:s,calendar:o,z:a}=v0(H(n));if(a)throw new RangeError("Z designator not supported for PlainDate");const c=G("%Temporal.PlainDate%");return new c(r,i,s,o)}function Ko(t,e,n){let{hour:r,minute:i,second:s,millisecond:o,microsecond:a,nanosecond:c}=Dd(e);const l=Et(n),d=Xn(t,e,n),f=u(d,k),p=u(d,F),h=u(d,B);return{hour:r,minute:i,second:s,millisecond:o,microsecond:a,nanosecond:c}=bo(r,i,s,o,a,c,l),{year:f,month:p,day:h,hour:r,minute:i,second:s,millisecond:o,microsecond:a,nanosecond:c}}function Jr(t,e=Re(null)){let n,r,i,s,o,a,c,l,d,f;if(Ae(t)){if(ne(t))return t;if(Y(t))return yn(u(t,me),u(t,Nt),u(t,S));if(oe(t))return Jt(u(t,k),u(t,F),u(t,B),0,0,0,0,0,0,u(t,S));f=Gs(t);const p=Ve(f,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),h=oc(t,p);({year:n,month:r,day:i,hour:s,minute:o,second:a,millisecond:c,microsecond:l,nanosecond:d}=Ko(f,h,e))}else{Et(e);let p;if({year:n,month:r,day:i,hour:s,minute:o,second:a,millisecond:c,microsecond:l,nanosecond:d,calendar:f,z:p}=_0(H(t)),p)throw new RangeError("Z designator not supported for PlainDateTime");fg(n,r,i,s,o,a,c,l,d),f===void 0&&(f=nt()),f=Rt(f)}return Jt(n,r,i,s,o,a,c,l,d,f)}function Ts(t){let e,n,r,i,s,o,a,c,l,d;if(Ae(t)){if(Ge(t))return t;({years:e,months:n,weeks:r,days:i,hours:s,minutes:o,seconds:a,milliseconds:c,microseconds:l,nanoseconds:d}=Wp(t))}else({years:e,months:n,weeks:r,days:i,hours:s,minutes:o,seconds:a,milliseconds:c,microseconds:l,nanoseconds:d}=Vp(H(t)));const f=G("%Temporal.Duration%");return new f(e,n,r,i,s,o,a,c,l,d)}function Kn(t){if(ct(t))return t;if(Y(t)){const r=G("%Temporal.Instant%");return new r(u(t,z))}const e=I0(H(t)),n=G("%Temporal.Instant%");return new n(e)}function ph(t,e=Re(null)){if(Ae(t)){if(wt(t))return t;let l,d;if(gt(t,S))l=u(t,S),d=!1;else{let h=t.calendar;d=h===void 0,h===void 0&&(h=nt()),l=Rt(h)}const f=Ve(l,["day","month","monthCode","year"]),p=ki(t,f);return d&&p.month!==void 0&&p.monthCode===void 0&&p.year===void 0&&(p.year=1972),Ls(l,p,e)}Et(e);let{month:n,day:r,referenceISOYear:i,calendar:s}=Zp(H(t)),o=s;if(o===void 0&&(o=nt()),o=Rt(o),i===void 0)return pr(1972,n,r),$o(n,r,o);const a=$o(n,r,o,i),c=Re(null);return Ls(o,a,c)}function lr(t,e="constrain"){let n=t,r,i,s,o,a,c,l;if(Ae(n)){if(He(n))return n;if(Y(n)&&(n=yn(u(n,me),u(n,Nt),u(n,S))),ne(n)){const f=G("%Temporal.PlainTime%");return new f(u(n,Z),u(n,V),u(n,W),u(n,Q),u(n,X),u(n,K))}if(l=Gs(n),H(l)!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");({hour:r,minute:i,second:s,millisecond:o,microsecond:a,nanosecond:c}=Dd(n)),{hour:r,minute:i,second:s,millisecond:o,microsecond:a,nanosecond:c}=bo(r,i,s,o,a,c,e)}else if({hour:r,minute:i,second:s,millisecond:o,microsecond:a,nanosecond:c,calendar:l}=T0(H(n)),Lc(r,i,s,o,a,c),l!==void 0&&l!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");const d=G("%Temporal.PlainTime%");return new d(r,i,s,o,a,c)}function us(t,e=Re(null)){if(Ae(t)){if(be(t))return t;const l=Gs(t),d=Ve(l,["month","monthCode","year"]),f=rn(t,d);return li(l,f,e)}Et(e);let{year:n,month:r,referenceISODay:i,calendar:s}=Hp(H(t)),o=s;if(o===void 0&&(o=nt()),o=Rt(o),i===void 0)return pr(n,r,1),ko(n,r,o);const a=ko(n,r,o,i),c=Re(null);return li(o,a,c)}function ac(t,e,n,r,i,s,o,a,c,l,d,f,p,h,m){const y=G("%Temporal.PlainDateTime%"),_=new y(t,e,n,r,i,s,o,a,c);if(l==="wall"||h==="ignore"){const I=Ht(f,_,p);return u(I,z)}if(l==="exact"||h==="use"){const I=di(t,e,n,r,i,s,o,a,c);if(I===null)throw new RangeError("ZonedDateTime outside of supported range");return g.subtract(I,g.BigInt(d))}const v=cc(f,_);for(const I of v){const R=er(f,I),O=g.toNumber(sn(g.BigInt(R),6e10,"halfExpand"));if(R===d||m&&O===d)return u(I,z)}if(h==="reject"){const I=jd(d),R=sr(f)?u(f,Kr):"time zone";throw new RangeError(`Offset ${I} is invalid for ${_.toString()} in ${R}`)}const T=ng(v,f,_,p);return u(T,z)}function ds(t,e=Re(null)){let n,r,i,s,o,a,c,l,d,f,p,h,m=!1,y="option";if(Ae(t)){if(Y(t))return t;h=Gs(t);const R=Ve(h,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),O=A0(t,R);({year:n,month:r,day:i,hour:s,minute:o,second:a,millisecond:c,microsecond:l,nanosecond:d}=Ko(h,O,e)),f=Zt(O.timeZone),p=O.offset,p===void 0?y="wall":p=H(p)}else{Et(e);let R,O;if({year:n,month:r,day:i,hour:s,minute:o,second:a,millisecond:c,microsecond:l,nanosecond:d,ianaName:R,offset:p,z:O,calendar:h}=b0(H(t)),!R)throw new RangeError("time zone ID required in brackets");O?y="exact":p||(y="wall");const N=G("%Temporal.TimeZone%");f=new N(R),h||(h=nt()),h=Rt(h),m=!0}let _=0;y==="option"&&(_=Yi(p));const v=Co(e),T=Eu(e,"reject"),I=ac(n,r,i,s,o,a,c,l,d,y,_,f,v,T,m);return _t(I,f,h)}function Qp(t,e,n,r,i){pr(e,n,r),dg(e,n,r),wr(t),re(t,k,e),re(t,F,n),re(t,B,r),re(t,S,i),re(t,Ip,!0),h0(t,"_repr_",{value:`${t[Symbol.toStringTag]} <${xu(t)}>`,writable:!1,enumerable:!1,configurable:!1})}function Bn(t,e,n,r=nt()){const i=G("%Temporal.PlainDate%"),s=Re(i.prototype);return Qp(s,t,e,n,r),s}function Xp(t,e,n,r,i,s,o,a,c,l,d){fg(e,n,r,i,s,o,a,c,l),hg(e,n,r,i,s,o,a,c,l),wr(t),re(t,k,e),re(t,F,n),re(t,B,r),re(t,Z,i),re(t,V,s),re(t,W,o),re(t,Q,a),re(t,X,c),re(t,K,l),re(t,S,d),Object.defineProperty(t,"_repr_",{value:`${t[Symbol.toStringTag]} <${Ou(t,"auto")}>`,writable:!1,enumerable:!1,configurable:!1})}function Jt(t,e,n,r,i,s,o,a,c,l=nt()){const d=G("%Temporal.PlainDateTime%"),f=Re(d.prototype);return Xp(f,t,e,n,r,i,s,o,a,c,l),f}function Kp(t,e,n,r,i){pr(i,e,n),dg(i,e,n),wr(t),re(t,F,e),re(t,B,n),re(t,k,i),re(t,S,r),re(t,Rp,!0),Object.defineProperty(t,"_repr_",{value:`${t[Symbol.toStringTag]} <${Nu(t)}>`,writable:!1,enumerable:!1,configurable:!1})}function $o(t,e,n=nt(),r=1972){const i=G("%Temporal.PlainMonthDay%"),s=Re(i.prototype);return Kp(s,t,e,n,r),s}function Jp(t,e,n,r,i){pr(e,n,i),P0(e,n),wr(t),re(t,k,e),re(t,F,n),re(t,B,i),re(t,S,r),re(t,Dp,!0),Object.defineProperty(t,"_repr_",{value:`${t[Symbol.toStringTag]} <${Au(t)}>`,writable:!1,enumerable:!1,configurable:!1})}function ko(t,e,n=nt(),r=1){const i=G("%Temporal.PlainYearMonth%"),s=Re(i.prototype);return Jp(s,t,e,n,r),s}function eg(t,e,n,r){Ni(e),wr(t),re(t,z,e),re(t,me,n),re(t,S,r);const i=G("%Temporal.Instant%"),s=new i(u(t,z));re(t,Nt,s),Object.defineProperty(t,"_repr_",{value:`${t[Symbol.toStringTag]} <${Su(t,"auto")}>`,writable:!1,enumerable:!1,configurable:!1})}function _t(t,e,n=nt()){const r=G("%Temporal.ZonedDateTime%"),i=Re(r.prototype);return eg(i,t,e,n),i}function nt(){const t=G("%Temporal.Calendar%");return new t("iso8601")}function Ve(t,e){let n=e;t.fields&&(n=t.fields(n));const r=[];for(const i of n){if(typeof i!="string")throw new TypeError("bad return from calendar.fields()");Pp.call(r,i)}return r}function qi(t,e,n){const r=t.mergeFields;if(!r)return{...e,...n};const i=Reflect.apply(r,t,[e,n]);if(!Ae(i))throw new TypeError("bad return from calendar.mergeFields()");return i}function Yt(t,e,n,r,i){let s=i;s===void 0&&(s=t.dateAdd);const o=Td(s,t,[e,n,r]);if(!oe(o))throw new TypeError("invalid result");return o}function hr(t,e,n,r,i){let s=i;s===void 0&&(s=t.dateUntil);const o=Td(s,t,[e,n,r]);if(!Ge(o))throw new TypeError("invalid result");return o}function Rc(t,e){const n=t.year(e);if(n===void 0)throw new RangeError("calendar year result must be an integer");return De(n)}function xc(t,e){const n=t.month(e);if(n===void 0)throw new RangeError("calendar month result must be a positive integer");return Ms(n)}function Jo(t,e){const n=t.monthCode(e);if(n===void 0)throw new RangeError("calendar monthCode result must be a string");return H(n)}function Oc(t,e){const n=t.day(e);if(n===void 0)throw new RangeError("calendar day result must be a positive integer");return Ms(n)}function Nc(t,e){let n=t.era(e);return n!==void 0&&(n=H(n)),n}function Ac(t,e){let n=t.eraYear(e);return n!==void 0&&(n=De(n)),n}function Rd(t,e){return t.dayOfWeek(e)}function xd(t,e){return t.dayOfYear(e)}function Od(t,e){return t.weekOfYear(e)}function Nd(t,e){return t.daysInWeek(e)}function Es(t,e){return t.daysInMonth(e)}function Sc(t,e){return t.daysInYear(e)}function jc(t,e){return t.monthsInYear(e)}function Mc(t,e){return t.inLeapYear(e)}function Rt(t){let e=t;if(Ae(e)){if(gt(e,S))return u(e,S);if(!("calendar"in e)||(e=e.calendar,Ae(e)&&!("calendar"in e)))return e}const n=H(e),r=G("%Temporal.Calendar%");if(jp(n))return new r(n);let i;try{({calendar:i}=br(n))}catch{throw new RangeError(`Invalid calendar: ${n}`)}return i||(i="iso8601"),new r(i)}function Gs(t){if(gt(t,S))return u(t,S);const{calendar:e}=t;return e===void 0?nt():Rt(e)}function ea(t,e){if(t===e)return!0;const n=H(t),r=H(e);return n===r}function tg(t,e){if(t===e)return e;const n=H(t),r=H(e);if(n===r||n==="iso8601")return e;if(r==="iso8601")return t;throw new RangeError("irreconcilable calendars")}function Xn(t,e,n){const r=t.dateFromFields(e,n);if(!oe(r))throw new TypeError("invalid result");return r}function li(t,e,n){const r=t.yearMonthFromFields(e,n);if(!be(r))throw new TypeError("invalid result");return r}function Ls(t,e,n){const r=t.monthDayFromFields(e,n);if(!wt(r))throw new TypeError("invalid result");return r}function Zt(t){let e=t;if(Ae(e)){if(Y(e))return u(e,me);if(!("timeZone"in e)||(e=e.timeZone,Ae(e)&&!("timeZone"in e)))return e}const n=H(e),r=Gp(n),i=G("%Temporal.TimeZone%");return new i(r)}function Al(t,e){if(t===e)return!0;const n=H(t),r=H(e);return n===r}function Pi(t){return Bn(u(t,k),u(t,F),u(t,B),u(t,S))}function Ad(t){const e=G("%Temporal.PlainTime%");return new e(u(t,Z),u(t,V),u(t,W),u(t,Q),u(t,X),u(t,K))}function er(t,e){let n=t.getOffsetNanosecondsFor;if(typeof n!="function")throw new TypeError("getOffsetNanosecondsFor not callable");const r=Reflect.apply(n,t,[e]);if(typeof r!="number")throw new TypeError("bad return from getOffsetNanosecondsFor");if(!Yp(r)||we(r)>864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return r}function Ru(t,e){const n=er(t,e);return jd(n)}function yn(t,e,n){const r=u(e,z),i=er(t,e);let{year:s,month:o,day:a,hour:c,minute:l,second:d,millisecond:f,microsecond:p,nanosecond:h}=ig(r);return{year:s,month:o,day:a,hour:c,minute:l,second:d,millisecond:f,microsecond:p,nanosecond:h}=cg(s,o,a,c,l,d,f,p,h+i),Jt(s,o,a,c,l,d,f,p,h,n)}function Ht(t,e,n){const r=cc(t,e);return ng(r,t,e,n)}function ng(t,e,n,r){const i=G("%Temporal.Instant%"),s=t.length;if(s===1)return t[0];if(s)switch(r){case"compatible":case"earlier":return t[0];case"later":return t[s-1];case"reject":throw new RangeError("multiple instants found")}const o=u(n,k),a=u(n,F),c=u(n,B),l=u(n,Z),d=u(n,V),f=u(n,W),p=u(n,Q),h=u(n,X),m=u(n,K),y=di(o,a,c,l,d,f,p,h,m);if(y===null)throw new RangeError("DateTime outside of supported range");const _=new i(g.subtract(y,ui)),v=new i(g.add(y,ui)),T=er(e,_),R=er(e,v)-T;switch(r){case"earlier":{const O=u(n,S),N=G("%Temporal.PlainDateTime%"),x=fc(o,a,c,l,d,f,p,h,m,O,0,0,0,0,0,0,0,0,0,-R,void 0),C=new N(x.year,x.month,x.day,x.hour,x.minute,x.second,x.millisecond,x.microsecond,x.nanosecond,O);return cc(e,C)[0]}case"compatible":case"later":{const O=u(n,S),N=G("%Temporal.PlainDateTime%"),x=fc(o,a,c,l,d,f,p,h,m,O,0,0,0,0,0,0,0,0,0,R,void 0),C=new N(x.year,x.month,x.day,x.hour,x.minute,x.second,x.millisecond,x.microsecond,x.nanosecond,O),$=cc(e,C);return $[$.length-1]}case"reject":throw new RangeError("no such instant found")}}function cc(t,e){const n=t.getPossibleInstantsFor(e),r=[];for(const i of n){if(!ct(i))throw new TypeError("bad return from getPossibleInstantsFor");Pp.call(r,i)}return r}function Wi(t){let e;if(t<1e3||t>9999){const n=t<0?"-":"+",r=we(t);e=n+`000000${r}`.slice(-6)}else e=`${t}`;return e}function $e(t){return`00${t}`.slice(-2)}function Cc(t,e,n,r,i){if(i==="minute")return"";const s=`:${$e(t)}`;let o=e*1e6+n*1e3+r,a;if(i==="auto"){if(o===0)return s;for(a=`${o}`.padStart(9,"0");a[a.length-1]==="0";)a=a.slice(0,-1)}else{if(i===0)return s;a=`${o}`.padStart(9,"0").slice(0,i)}return`${s}.${a}`}function Sl(t,e,n){let r=e;if(r===void 0){const h=G("%Temporal.TimeZone%");r=new h("UTC")}const i=nt(),s=yn(r,t,i),o=Wi(u(s,k)),a=$e(u(s,F)),c=$e(u(s,B)),l=$e(u(s,Z)),d=$e(u(s,V)),f=Cc(u(s,W),u(s,Q),u(s,X),u(s,K),n);let p="Z";if(e!==void 0){const h=er(r,t);p=rg(h)}return`${o}-${a}-${c}T${l}:${d}${f}${p}`}function xa(t,e="auto",n=void 0){function r($){return $<=f0?$.toString(10):g.BigInt($).toString(10)}const i=u(t,Mt),s=u(t,ht),o=u(t,Gt),a=u(t,Ct),c=u(t,Lt),l=u(t,$t);let d=u(t,kt),f=u(t,Pt),p=u(t,Ut),h=u(t,Ft);const m=$n(i,s,o,a,c,l,d,f,p,h);if(n){const{unit:$,increment:te,roundingMode:q}=n;({seconds:d,milliseconds:f,microseconds:p,nanoseconds:h}=Rn(0,0,0,0,0,0,d,f,p,h,te,$,q))}const y=[];i&&y.push(`${r(we(i))}Y`),s&&y.push(`${r(we(s))}M`),o&&y.push(`${r(we(o))}W`),a&&y.push(`${r(we(a))}D`);const _=[];c&&_.push(`${r(we(c))}H`),l&&_.push(`${r(we(l))}M`);const v=[];let T=$s(0,0,0,d,f,p,h,0),I,R,O,N;({quotient:T,remainder:I}=ft(T,_e)),{quotient:T,remainder:R}=ft(T,_e),{quotient:N,remainder:O}=ft(T,_e);const x=we(g.toNumber(O))*1e6+we(g.toNumber(R))*1e3+we(g.toNumber(I));let C;if(e==="auto"){if(x!==0)for(C=`${x}`.padStart(9,"0");C[C.length-1]==="0";)C=C.slice(0,-1)}else e!==0&&(C=`${x}`.padStart(9,"0").slice(0,e));return C&&v.unshift(".",C),(!g.equal(N,tt)||v.length||e!=="auto")&&v.unshift(Id(N).toString()),v.length&&_.push(`${v.join("")}S`),_.length&&_.unshift("T"),!y.length&&!_.length?"PT0S":`${m<0?"-":""}P${y.join("")}${_.join("")}`}function xu(t,e="auto"){const n=Wi(u(t,k)),r=$e(u(t,F)),i=$e(u(t,B)),s=H(u(t,S)),o=Vo(s,e);return`${n}-${r}-${i}${o}`}function Ou(t,e,n="auto",r=void 0){let i=u(t,k),s=u(t,F),o=u(t,B),a=u(t,Z),c=u(t,V),l=u(t,W),d=u(t,Q),f=u(t,X),p=u(t,K);if(r){const{unit:O,increment:N,roundingMode:x}=r;({year:i,month:s,day:o,hour:a,minute:c,second:l,millisecond:d,microsecond:f,nanosecond:p}=Ld(i,s,o,a,c,l,d,f,p,N,O,x))}const h=Wi(i),m=$e(s),y=$e(o),_=$e(a),v=$e(c),T=Cc(l,d,f,p,e),I=H(u(t,S)),R=Vo(I,n);return`${h}-${m}-${y}T${_}:${v}${T}${R}`}function Nu(t,e="auto"){const n=$e(u(t,F)),r=$e(u(t,B));let i=`${n}-${r}`;const s=u(t,S),o=H(s);o!=="iso8601"&&(i=`${Wi(u(t,k))}-${i}`);const a=Vo(o,e);return a&&(i+=a),i}function Au(t,e="auto"){const n=Wi(u(t,k)),r=$e(u(t,F));let i=`${n}-${r}`;const s=u(t,S),o=H(s);o!=="iso8601"&&(i+=`-${$e(u(t,B))}`);const a=Vo(o,e);return a&&(i+=a),i}function Su(t,e,n="auto",r="auto",i="auto",s=void 0){let o=u(t,Nt);if(s){const{unit:T,increment:I,roundingMode:R}=s,O=hc(u(t,z),I,T,R),N=G("%Temporal.Instant%");o=new N(O)}const a=u(t,me),c=nt(),l=yn(a,o,c),d=Wi(u(l,k)),f=$e(u(l,F)),p=$e(u(l,B)),h=$e(u(l,Z)),m=$e(u(l,V)),y=Cc(u(l,W),u(l,Q),u(l,X),u(l,K),e);let _=`${d}-${f}-${p}T${h}:${m}${y}`;if(i!=="never"){const T=er(a,o);_+=rg(T)}r!=="never"&&(_+=`[${a}]`);const v=H(u(t,S));return _+=Vo(v,n),_}function ws(t){return gg.test(Zo(t))}function Yi(t){const e=gg.exec(Zo(t));if(!e)throw new RangeError(`invalid time zone offset: ${t}`);const n=e[1]==="-"||e[1]==="\u2212"?-1:1,r=+e[2],i=+(e[3]||0),s=+(e[4]||0),o=+((e[5]||0)+"000000000").slice(0,9);return n*(((r*60+i)*60+s)*1e9+o)}function Sd(t){if(ws(t)){const n=Yi(t);return jd(n)}return zp(Zo(t)).resolvedOptions().timeZone}function Pr(t,e){const{year:n,month:r,day:i,hour:s,minute:o,second:a,millisecond:c,microsecond:l,nanosecond:d}=sg(t,e),f=di(n,r,i,s,o,a,c,l,d);if(f===null)throw new RangeError("Date outside of supported range");return g.toNumber(g.subtract(f,t))}function jd(t){const e=t<0?"-":"+",n=we(t),r=n%1e9,i=pt(n/1e9)%60,s=pt(n/6e10)%60,o=pt(n/36e11),a=$e(o),c=$e(s),l=$e(i);let d="";if(r){let f=`${r}`.padStart(9,"0");for(;f[f.length-1]==="0";)f=f.slice(0,-1);d=`:${l}.${f}`}else i&&(d=`:${l}`);return`${e}${a}:${c}${d}`}function rg(t){let e=g.toNumber(sn(g.BigInt(t),6e10,"halfExpand"));const n=e<0?"-":"+";e=we(e);const r=e/6e10%60,i=pt(e/36e11),s=$e(i),o=$e(r);return`${n}${s}:${o}`}function di(t,e,n,r,i,s,o,a,c){const l=new Date;l.setUTCHours(r,i,s,o),l.setUTCFullYear(t,e-1,n);const d=l.getTime();if(Ho(d))return null;let f=g.multiply(g.BigInt(d),En);return f=g.add(f,g.multiply(g.BigInt(a),_e)),f=g.add(f,g.BigInt(c)),g.lessThan(f,So)||g.greaterThan(f,jo)?null:f}function ig(t){const{quotient:e,remainder:n}=ft(t,En);let r=g.toNumber(e),i=g.toNumber(n);i<0&&(i+=1e6,r-=1);const s=pt(i/1e3)%1e3,o=i%1e3,a=new Date(r),c=a.getUTCFullYear(),l=a.getUTCMonth()+1,d=a.getUTCDate(),f=a.getUTCHours(),p=a.getUTCMinutes(),h=a.getUTCSeconds(),m=a.getUTCMilliseconds();return{epochMilliseconds:r,year:c,month:l,day:d,hour:f,minute:p,second:h,millisecond:m,microsecond:s,nanosecond:o}}function sg(t,e){const{epochMilliseconds:n,millisecond:r,microsecond:i,nanosecond:s}=ig(t),{year:o,month:a,day:c,hour:l,minute:d,second:f}=M0(e,n);return cg(o,a,c,l,d,f,r,i,s)}function gh(t,e){return g.lessThan(t,e)?e:t}function og(){return g.add(kd(),y0)}function S0(t,e){const n=g.add(t,Bp),r=gh(og(),n);let i=gh(Fp,t);const s=Pr(i,e);let o=i,a=s;for(;s===a&&g.lessThan(g.BigInt(i),r);)o=g.add(i,qp),a=Pr(o,e),s===a&&(i=o);return s===a?null:mg(l=>Pr(l,e),i,o,s,a)}function ag(t,e){const n=og(),r=g.greaterThan(t,n),i=r?g.subtract(t,Bp):Fp;let s=g.subtract(t,Ed);const o=Pr(s,e);let a=s,c=o;for(;o===c&&g.greaterThan(s,i);)a=g.subtract(s,qp),c=Pr(a,e),o===c&&(s=a);if(o===c){if(r){const d=g.subtract(n,ui);return ag(d,e)}return null}return mg(d=>Pr(d,e),a,s,c,o)}function j0(t){const e=t.split(/[^\w]+/);if(e.length!==7)throw new RangeError(`expected 7 parts in "${t}`);const n=+e[0],r=+e[1];let i=+e[2];const s=e[3].toUpperCase();if(s==="B"||s==="BC")i=-i+1;else if(s!=="A"&&s!=="AD")throw new RangeError(`Unknown era ${s} in "${t}`);let o=+e[4];o===24&&(o=0);const a=+e[5],c=+e[6];if(!Tt(i)||!Tt(n)||!Tt(r)||!Tt(o)||!Tt(a)||!Tt(c))throw new RangeError(`Invalid number in "${t}`);return{year:i,month:n,day:r,hour:o,minute:a,second:c}}function M0(t,e){const r=zp(t).format(new Date(e));return j0(r)}function C0(t,e,n,r,i,s,o,a,c,l){const d=di(e,n,r,i,s,o,a,c,l);if(d===null)throw new RangeError("DateTime outside of supported range");let f=g.subtract(d,ui);g.lessThan(f,So)&&(f=d);let p=g.add(d,ui);g.greaterThan(p,jo)&&(p=d);const h=Pr(f,t),m=Pr(p,t);return(h===m?[h]:[h,m]).map(_=>{const v=g.subtract(d,g.BigInt(_)),T=sg(v,t);if(!(e!==T.year||n!==T.month||r!==T.day||i!==T.hour||s!==T.minute||o!==T.second||a!==T.millisecond||c!==T.microsecond||l!==T.nanosecond))return v}).filter(_=>_!==void 0)}function fi(t){if(t===void 0)return!1;const e=t%4===0,n=t%100===0,r=t%400===0;return e&&(!n||r)}function Ur(t,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[fi(t)?"leapyear":"standard"][e-1]}function ju(t,e,n){const r=e+(e<3?10:-2),i=t-(e<3?1:0),s=pt(i/100),o=i-s*100,c=n,l=pt(2.6*r-.2),d=o+pt(o/4),f=pt(s/4)-2*s,p=(c+l+d+f)%7;return p+(p<=0?7:0)}function lc(t,e,n){let r=n;for(let i=e-1;i>0;i--)r+=Ur(t,i);return r}function L0(t,e,n){const r=lc(t,e,n),i=ju(t,e,n)||7,s=ju(t,1,1),o=pt((r-i+10)/7);return o<1?s===5||s===6&&fi(t-1)?53:52:o===53&&(fi(t)?366:365)-r<4-i?1:o}function $n(t,e,n,r,i,s,o,a,c,l){for(const d of[t,e,n,r,i,s,o,a,c,l])if(d!==0)return d<0?-1:1;return 0}function Ba(t,e){let n=t,r=e;if(!Tt(n)||!Tt(r))throw new RangeError("infinity is out of range");return r-=1,n+=pt(r/12),r%=12,r<0&&(r+=12),r+=1,{year:n,month:r}}function Po(t,e,n){let r=t,i=e,s=n;if(!Tt(s))throw new RangeError("infinity is out of range");({year:r,month:i}=Ba(r,i));let o=0,a=i>2?r:r-1;for(;o=fi(a)?366:365,s<-o;)r-=1,a-=1,s+=o;for(a+=1;o=fi(a)?366:365,s>o;)r+=1,a+=1,s-=o;for(;s<1;)({year:r,month:i}=Ba(r,i-1)),s+=Ur(r,i);for(;s>Ur(r,i);)s-=Ur(r,i),{year:r,month:i}=Ba(r,i+1);return{year:r,month:i,day:s}}function cg(t,e,n,r,i,s,o,a,c){const{deltaDays:l,hour:d,minute:f,second:p,millisecond:h,microsecond:m,nanosecond:y}=Nr(r,i,s,o,a,c),{year:_,month:v,day:T}=Po(t,e,n+l);return{year:_,month:v,day:T,hour:d,minute:f,second:p,millisecond:h,microsecond:m,nanosecond:y}}function Nr(t,e,n,r,i,s){let o=t,a=e,c=n,l=r,d=i,f=s;if(!Tt(o)||!Tt(a)||!Tt(c)||!Tt(l)||!Tt(d)||!Tt(f))throw new RangeError("infinity is out of range");d+=pt(f/1e3),f=fs(f,1e3),l+=pt(d/1e3),d=fs(d,1e3),c+=pt(l/1e3),l=fs(l,1e3),a+=pt(c/60),c=fs(c,60),o+=pt(a/60),a=fs(a,60);const p=pt(o/24);return o=fs(o,24),{deltaDays:p,hour:o,minute:a,second:c,millisecond:l,microsecond:d,nanosecond:f}}function $s(t,e,n,r,i,s,o,a){const c=g.BigInt(t);let l=g.BigInt(o);t!==0&&(l=g.subtract(g.BigInt(o),g.BigInt(a)));const d=g.add(g.BigInt(e),g.multiply(c,g.BigInt(24))),f=g.add(g.BigInt(n),g.multiply(d,$i)),p=g.add(g.BigInt(r),g.multiply(f,$i)),h=g.add(g.BigInt(i),g.multiply(p,_e)),m=g.add(g.BigInt(s),g.multiply(h,_e));return g.add(g.BigInt(l),g.multiply(m,_e))}function Md(t,e){const n=G("%Temporal.Instant%"),r=Ao(g.toNumber(t));let i=g.BigInt(t),s=864e11;if(r===0)return{days:0,nanoseconds:tt,dayLengthNs:s};if(!Y(e)){let T;return{quotient:T,remainder:i}=ft(i,g.BigInt(s)),{days:g.toNumber(T),nanoseconds:i,dayLengthNs:s}}const o=u(e,z),a=u(e,Nt),c=g.add(o,i),l=new n(c),d=u(e,me),f=u(e,S),p=yn(d,a,f),h=yn(d,l,f);let{days:m}=uc(u(p,k),u(p,F),u(p,B),u(p,Z),u(p,V),u(p,W),u(p,Q),u(p,X),u(p,K),u(h,k),u(h,F),u(h,B),u(h,Z),u(h,V),u(h,W),u(h,Q),u(h,X),u(h,K),f,"day"),y=gn(a,d,f,0,0,0,m,0,0,0,0,0,0);if(r===1)for(;m>0&&g.greaterThan(y,c);)--m,y=gn(a,d,f,0,0,0,m,0,0,0,0,0,0);i=g.subtract(c,y);let _=!1,v=new n(y);do{const T=gn(v,d,f,0,0,0,r,0,0,0,0,0,0),I=u(v,z);s=g.toNumber(g.subtract(T,I)),_=g.greaterThan(g.multiply(g.subtract(i,g.BigInt(s)),g.BigInt(r)),tt),_&&(i=g.subtract(i,g.BigInt(s)),v=new n(T),m+=r)}while(_);return{days:m,nanoseconds:i,dayLengthNs:we(s)}}function Dt(t,e,n,r,i,s,o,a,c=void 0){let l=t,d,f,p,h,m,y;if(Y(c)){const x=gn(u(c,Nt),u(c,me),u(c,S),0,0,0,l,e,n,r,i,s,o),C=u(c,z);d=g.subtract(x,C)}else d=$s(l,e,n,r,i,s,o,0);a==="year"||a==="month"||a==="week"||a==="day"?{days:l,nanoseconds:d}=Md(d,c):l=0;const _=g.lessThan(d,tt)?-1:1;switch(d=Id(d),f=p=h=m=y=tt,a){case"year":case"month":case"week":case"day":case"hour":({quotient:f,remainder:d}=ft(d,_e)),{quotient:p,remainder:f}=ft(f,_e),{quotient:h,remainder:p}=ft(p,_e),{quotient:m,remainder:h}=ft(h,$i),{quotient:y,remainder:m}=ft(m,$i);break;case"minute":({quotient:f,remainder:d}=ft(d,_e)),{quotient:p,remainder:f}=ft(f,_e),{quotient:h,remainder:p}=ft(p,_e),{quotient:m,remainder:h}=ft(h,$i);break;case"second":({quotient:f,remainder:d}=ft(d,_e)),{quotient:p,remainder:f}=ft(f,_e),{quotient:h,remainder:p}=ft(p,_e);break;case"millisecond":({quotient:f,remainder:d}=ft(d,_e)),{quotient:p,remainder:f}=ft(f,_e);break;case"microsecond":({quotient:f,remainder:d}=ft(d,_e));break;case"nanosecond":break;default:throw new Error("assert not reached")}const v=g.toNumber(y)*_,T=g.toNumber(m)*_,I=g.toNumber(h)*_,R=g.toNumber(p)*_,O=g.toNumber(f)*_,N=g.toNumber(d)*_;return{days:l,hours:v,minutes:T,seconds:I,milliseconds:R,microseconds:O,nanoseconds:N}}function Oa(t,e,n,r,i,s){let o=t,a=e,c=n,l=r;const d=G("%Temporal.Duration%"),f=$n(o,a,c,l,0,0,0,0,0,0);let p,h;s&&(h=Ee(s),p=u(h,S));const m=new d(f),y=new d(0,f),_=new d(0,0,f);switch(i){case"year":break;case"month":{if(!p)throw new RangeError("a starting point is required for months balancing");const v=p.dateAdd,T=p.dateUntil;let I=h;for(;we(o)>0;){const R=Re(null),O=Yt(p,I,m,R,v),N=Re(null);N.largestUnit="month";const x=hr(p,I,O,N,T),C=u(x,ht);I=O,a+=C,o-=f}}break;case"week":if(!p)throw new RangeError("a starting point is required for weeks balancing");for(;we(o)>0;){let v;({relativeTo:h,days:v}=Bt(p,h,m)),l+=v,o-=f}for(;we(a)>0;){let v;({relativeTo:h,days:v}=Bt(p,h,y)),l+=v,a-=f}break;default:for(;we(o)>0;){if(!p)throw new RangeError("a starting point is required for balancing calendar units");let v;({relativeTo:h,days:v}=Bt(p,h,m)),l+=v,o-=f}for(;we(a)>0;){if(!p)throw new RangeError("a starting point is required for balancing calendar units");let v;({relativeTo:h,days:v}=Bt(p,h,y)),l+=v,a-=f}for(;we(c)>0;){if(!p)throw new RangeError("a starting point is required for balancing calendar units");let v;({relativeTo:h,days:v}=Bt(p,h,_)),l+=v,c-=f}break}return{years:o,months:a,weeks:c,days:l}}function $0(t,e,n,r,i,s){let o=t,a=e,c=n,l=r;const d=G("%Temporal.Duration%"),f=$n(o,a,c,l,0,0,0,0,0,0);if(f===0)return{years:o,months:a,weeks:c,days:l};let p,h;s&&(h=Ee(s),p=u(h,S));const m=new d(f),y=new d(0,f),_=new d(0,0,f);switch(i){case"year":{if(!p)throw new RangeError("a starting point is required for years balancing");let v,T;for({relativeTo:v,days:T}=Bt(p,h,m);we(l)>=we(T);)l-=T,o+=f,h=v,{relativeTo:v,days:T}=Bt(p,h,m);let I;for({relativeTo:v,days:I}=Bt(p,h,y);we(l)>=we(I);)l-=I,a+=f,h=v,{relativeTo:v,days:I}=Bt(p,h,y);const R=p.dateAdd,O=Re(null);v=Yt(p,h,m,O,R);const N=p.dateUntil,x=Re(null);x.largestUnit="month";let C=hr(p,h,v,x,N),$=u(C,ht);for(;we(a)>=we($);){a-=$,o+=f,h=v;const te=Re(null);v=Yt(p,h,m,te,R);const q=Re(null);q.largestUnit="month",C=hr(p,h,v,q,N),$=u(C,ht)}break}case"month":{if(!p)throw new RangeError("a starting point is required for months balancing");let v,T;for({relativeTo:v,days:T}=Bt(p,h,y);we(l)>=we(T);)l-=T,a+=f,h=v,{relativeTo:v,days:T}=Bt(p,h,y);break}case"week":{if(!p)throw new RangeError("a starting point is required for weeks balancing");let v,T;for({relativeTo:v,days:T}=Bt(p,h,_);we(l)>=we(T);)l-=T,c+=f,h=v,{relativeTo:v,days:T}=Bt(p,h,_);break}}return{years:o,months:a,weeks:c,days:l}}function mh(t,e,n,r,i,s,o,a,c,l,d){if(Y(t)){const f=u(t,Nt),p=u(t,me),h=u(t,S),m=er(p,f),y=gn(f,p,h,e,n,r,i,s,o,a,c,l,d),_=G("%Temporal.Instant%"),v=new _(y);return er(p,v)-m}return 0}function lg(t){const e=G("%Temporal.Duration%");return new e(-u(t,Mt),-u(t,ht),-u(t,Gt),-u(t,Ct),-u(t,Lt),-u(t,$t),-u(t,kt),-u(t,Pt),-u(t,Ut),-u(t,Ft))}function cn(t,e,n){return l0(n,u0(e,t))}function ug(t,e,n){const r=cn(e,1,12),i=cn(n,1,Ur(t,r));return{year:t,month:r,day:i}}function k0(t,e,n,r,i,s){const o=cn(t,0,23),a=cn(e,0,59),c=cn(n,0,59),l=cn(r,0,999),d=cn(i,0,999),f=cn(s,0,999);return{hour:o,minute:a,second:c,millisecond:l,microsecond:d,nanosecond:f}}function At(t,e,n){if(t<e||t>n)throw new RangeError(`value out of range: ${e} <= ${t} <= ${n}`)}function pr(t,e,n){At(e,1,12),At(n,1,Ur(t,e))}function dg(t,e,n){hg(t,e,n,12,0,0,0,0,0)}function Lc(t,e,n,r,i,s){At(t,0,23),At(e,0,59),At(n,0,59),At(r,0,999),At(i,0,999),At(s,0,999)}function fg(t,e,n,r,i,s,o,a,c){pr(t,e,n),Lc(r,i,s,o,a,c)}function hg(t,e,n,r,i,s,o,a,c){if(At(t,nc,rc),t===nc&&di(t,e,n+1,r,i,s,o,a,c-1)==null||t===rc&&di(t,e,n-1,r,i,s,o,a,c+1)==null)throw new RangeError("DateTime outside of supported range")}function Ni(t){if(g.lessThan(t,So)||g.greaterThan(t,jo))throw new RangeError("Instant outside of supported range")}function P0(t,e){At(t,nc,rc),t===nc?At(e,4,12):t===rc&&At(e,1,9)}function pg(t,e,n,r,i,s,o,a,c,l){const d=$n(t,e,n,r,i,s,o,a,c,l);for(const f of[t,e,n,r,i,s,o,a,c,l]){if(!Tt(f))throw new RangeError("infinite values not allowed as duration fields");const p=Ao(f);if(p!==0&&p!==d)throw new RangeError("mixed-sign values not allowed as duration fields")}}function Cd(t,e,n,r,i,s,o){switch(o){case"year":case"month":{const a=-Sr(t,e,n,r,i,s);if(a===0)return{years:0,months:0,weeks:0,days:0};const c={year:t,month:e,day:n},l={year:r,month:i,day:s};let d=l.year-c.year,f=Ui(t,e,n,d,0,0,0,"constrain"),p=-Sr(f.year,f.month,f.day,r,i,s);if(p===0)return o==="year"?{years:d,months:0,weeks:0,days:0}:{years:0,months:d*12,weeks:0,days:0};let h=l.month-c.month;if(p!==a&&(d-=a,h+=a*12),f=Ui(t,e,n,d,h,0,0,"constrain"),p=-Sr(f.year,f.month,f.day,r,i,s),p===0)return o==="year"?{years:d,months:h,weeks:0,days:0}:{years:0,months:h+d*12,weeks:0,days:0};p!==a&&(h-=a,h===-a&&(d-=a,h=11*a),f=Ui(t,e,n,d,h,0,0,"constrain"),p=-Sr(t,e,n,f.year,f.month,f.day));let m=0;return f.month===l.month?m=l.day-f.day:a<0?m=-f.day-(Ur(l.year,l.month)-l.day):m=l.day+(Ur(f.year,f.month)-f.day),o==="month"&&(h+=d*12,d=0),{years:d,months:h,weeks:0,days:m}}case"week":case"day":{let a,c,l;Sr(t,e,n,r,i,s)<0?(c={year:t,month:e,day:n},a={year:r,month:i,day:s},l=1):(c={year:r,month:i,day:s},a={year:t,month:e,day:n},l=-1);let d=lc(a.year,a.month,a.day)-lc(c.year,c.month,c.day);for(let p=c.year;p<a.year;++p)d+=fi(p)?366:365;let f=0;return o==="week"&&(f=pt(d/7),d%=7),f*=l,d*=l,{years:0,months:0,weeks:f,days:d}}default:throw new Error("assert not reached")}}function Mu(t,e,n,r,i,s,o,a,c,l,d,f){let p=o-t,h=a-e,m=c-n,y=l-r,_=d-i,v=f-s;const T=$n(0,0,0,0,p,h,m,y,_,v);p*=T,h*=T,m*=T,y*=T,_*=T,v*=T;let I=0;return{deltaDays:I,hour:p,minute:h,second:m,millisecond:y,microsecond:_,nanosecond:v}=Nr(p,h,m,y,_,v),I*=T,p*=T,h*=T,m*=T,y*=T,_*=T,v*=T,{deltaDays:I,hours:p,minutes:h,seconds:m,milliseconds:y,microseconds:_,nanoseconds:v}}function Uo(t,e,n,r,i){const s=g.subtract(e,t),o=g.remainder(s,g.BigInt(864e11)),a=g.subtract(s,o),c=sn(o,Pd[r]*n,i),l=g.add(a,c),d=g.toNumber(g.remainder(l,_e)),f=g.toNumber(g.remainder(g.divide(l,_e),_e)),p=g.toNumber(g.remainder(g.divide(l,En),_e));return{seconds:g.toNumber(g.divide(l,kr)),milliseconds:p,microseconds:f,nanoseconds:d}}function uc(t,e,n,r,i,s,o,a,c,l,d,f,p,h,m,y,_,v,T,I,R=Re(null)){let O=t,N=e,x=n,{deltaDays:C,hours:$,minutes:te,seconds:q,milliseconds:de,microseconds:Ie,nanoseconds:se}=Mu(r,i,s,o,a,c,p,h,m,y,_,v);const U=$n(0,0,0,C,$,te,q,de,Ie,se);({year:O,month:N,day:x}=Po(O,N,x+C)),Sr(l,d,f,O,N,x)===-U&&({year:O,month:N,day:x}=Po(O,N,x-U),{hours:$,minutes:te,seconds:q,milliseconds:de,microseconds:Ie,nanoseconds:se}=Dt(-U,$,te,q,de,Ie,se,I));const it=Bn(O,N,x,T),fn=Bn(l,d,f,T),Xt=Fn("day",I),wn={...R,largestUnit:Xt};let{years:Ce,months:ze,weeks:Hn,days:xt}=hr(T,it,fn,wn);return{days:xt,hours:$,minutes:te,seconds:q,milliseconds:de,microseconds:Ie,nanoseconds:se}=Dt(xt,$,te,q,de,Ie,se,I),{years:Ce,months:ze,weeks:Hn,days:xt,hours:$,minutes:te,seconds:q,milliseconds:de,microseconds:Ie,nanoseconds:se}}function Cu(t,e,n,r,i,s){const o=g.subtract(e,t);if(g.equal(o,tt))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};const a=G("%Temporal.Instant%"),c=new a(t),l=new a(e),d=yn(n,c,r),f=yn(n,l,r);let{years:p,months:h,weeks:m,days:y}=uc(u(d,k),u(d,F),u(d,B),u(d,Z),u(d,V),u(d,W),u(d,Q),u(d,X),u(d,K),u(f,k),u(f,F),u(f,B),u(f,Z),u(f,V),u(f,W),u(f,Q),u(f,X),u(f,K),r,i,s);const _=gn(c,n,r,p,h,m,0,0,0,0,0,0,0);let v=g.subtract(e,_);const T=_t(_,n,r);({nanoseconds:v,days:y}=Md(v,T));const{hours:I,minutes:R,seconds:O,milliseconds:N,microseconds:x,nanoseconds:C}=Dt(0,0,0,0,0,0,g.toNumber(v),"hour");return{years:p,months:h,weeks:m,days:y,hours:I,minutes:R,seconds:O,milliseconds:N,microseconds:x,nanoseconds:C}}function Ui(t,e,n,r,i,s,o,a){let c=t,l=e,d=n,f=r,p=i,h=s,m=o;return c+=f,l+=p,{year:c,month:l}=Ba(c,l),{year:c,month:l,day:d}=sc(c,l,d,a),m+=7*h,d+=m,{year:c,month:l,day:d}=Po(c,l,d),{year:c,month:l,day:d}}function Lu(t,e,n,r,i,s,o,a,c,l,d,f){let p=t,h=e,m=n,y=r,_=i,v=s;p+=o,h+=a,m+=c,y+=l,_+=d,v+=f;let T=0;return{deltaDays:T,hour:p,minute:h,second:m,millisecond:y,microsecond:_,nanosecond:v}=Nr(p,h,m,y,_,v),{deltaDays:T,hour:p,minute:h,second:m,millisecond:y,microsecond:_,nanosecond:v}}function $u(t,e,n,r,i,s,o,a,c,l,d,f,p,h,m,y,_,v,T,I,R){const O=Iu(t,e,n,r,i,s,o,a,c,l),N=Iu(d,f,p,h,m,y,_,v,T,I),x=Fn(O,N);let C,$,te,q,de,Ie,se,U,fe,it;if(R)if(oe(R)){const fn=G("%Temporal.Duration%"),Xt=u(R,S),wn=new fn(t,e,n,r,0,0,0,0,0,0),Ce=new fn(d,f,p,h,0,0,0,0,0,0),ze=Xt.dateAdd,Hn=Re(null),xt=Yt(Xt,R,wn,Hn,ze),On=Re(null),Zr=Yt(Xt,xt,Ce,On,ze),os=Fn("day",x),nr=Re(null);nr.largestUnit=os,{years:C,months:$,weeks:te,days:q}=hr(Xt,R,Zr,nr),{days:q,hours:de,minutes:Ie,seconds:se,milliseconds:U,microseconds:fe,nanoseconds:it}=Dt(q,i+m,s+y,o+_,a+v,c+T,l+I,x)}else{const fn=G("%Temporal.Instant%"),Xt=u(R,me),wn=u(R,S),Ce=gn(u(R,Nt),Xt,wn,t,e,n,r,i,s,o,a,c,l),ze=gn(new fn(Ce),Xt,wn,d,f,p,h,m,y,_,v,T,I);x!=="year"&&x!=="month"&&x!=="week"&&x!=="day"?(C=0,$=0,te=0,q=0,{seconds:se,milliseconds:U,microseconds:fe,nanoseconds:it}=Uo(u(R,z),ze,1,"nanosecond","halfExpand"),{hours:de,minutes:Ie,seconds:se,milliseconds:U,microseconds:fe,nanoseconds:it}=Dt(0,0,0,se,U,fe,it,x)):{years:C,months:$,weeks:te,days:q,hours:de,minutes:Ie,seconds:se,milliseconds:U,microseconds:fe,nanoseconds:it}=Cu(u(R,z),ze,Xt,wn,x)}else{if(x==="year"||x==="month"||x==="week")throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");C=$=te=0,{days:q,hours:de,minutes:Ie,seconds:se,milliseconds:U,microseconds:fe,nanoseconds:it}=Dt(r+h,i+m,s+y,o+_,a+v,c+T,l+I,x)}return pg(C,$,te,q,de,Ie,se,U,fe,it),{years:C,months:$,weeks:te,days:q,hours:de,minutes:Ie,seconds:se,milliseconds:U,microseconds:fe,nanoseconds:it}}function dc(t,e,n,r,i,s,o){let a=tt;a=g.add(a,g.BigInt(o)),a=g.add(a,g.multiply(g.BigInt(s),_e)),a=g.add(a,g.multiply(g.BigInt(i),En)),a=g.add(a,g.multiply(g.BigInt(r),kr)),a=g.add(a,g.multiply(g.BigInt(n),g.BigInt(60*1e9))),a=g.add(a,g.multiply(g.BigInt(e),g.BigInt(60*60*1e9)));const c=g.add(t,a);return Ni(c),c}function fc(t,e,n,r,i,s,o,a,c,l,d,f,p,h,m,y,_,v,T,I,R){let O=h,{deltaDays:N,hour:x,minute:C,second:$,millisecond:te,microsecond:q,nanosecond:de}=Lu(r,i,s,o,a,c,m,y,_,v,T,I);O+=N;const Ie=G("%Temporal.Duration%"),se=Bn(t,e,n,l),U=new Ie(d,f,p,O,0,0,0,0,0,0),fe=Yt(l,se,U,R);return{year:u(fe,k),month:u(fe,F),day:u(fe,B),hour:x,minute:C,second:$,millisecond:te,microsecond:q,nanosecond:de}}function gn(t,e,n,r,i,s,o,a,c,l,d,f,p,h){const m=G("%Temporal.Duration%");if($n(r,i,s,o,0,0,0,0,0,0)===0)return dc(u(t,z),a,c,l,d,f,p);const y=yn(e,t,n),_=Bn(u(y,k),u(y,F),u(y,B),n),v=new m(r,i,s,o,0,0,0,0,0,0),T=Yt(n,_,v,h),I=Jt(u(T,k),u(T,F),u(T,B),u(y,Z),u(y,V),u(y,W),u(y,Q),u(y,X),u(y,K),n),R=Ht(e,I,"compatible");return dc(u(R,z),a,c,l,d,f,p)}function sn(t,e,n){if(e===1)return t;let{quotient:r,remainder:i}=ft(t,g.BigInt(e));if(g.equal(i,tt))return t;const s=g.lessThan(i,tt)?-1:1;switch(n){case"ceil":s>0&&(r=g.add(r,g.BigInt(s)));break;case"floor":s<0&&(r=g.add(r,g.BigInt(s)));break;case"trunc":break;case"halfExpand":g.toNumber(Id(g.multiply(i,g.BigInt(2))))>=e&&(r=g.add(r,g.BigInt(s)));break}return g.multiply(r,g.BigInt(e))}function hc(t,e,n,r){let i=g.remainder(t,g.BigInt(864e11));g.lessThan(i,tt)&&(i=g.add(i,g.BigInt(864e11)));const s=g.subtract(t,i),o=sn(i,Pd[n]*e,r);return g.add(s,o)}function Ld(t,e,n,r,i,s,o,a,c,l,d,f,p=864e11){const{deltaDays:h,hour:m,minute:y,second:_,millisecond:v,microsecond:T,nanosecond:I}=$d(r,i,s,o,a,c,l,d,f,p),{year:R,month:O,day:N}=Po(t,e,n+h);return{year:R,month:O,day:N,hour:m,minute:y,second:_,millisecond:v,microsecond:T,nanosecond:I}}function $d(t,e,n,r,i,s,o,a,c,l=864e11){let d=tt;switch(a){case"day":case"hour":d=g.BigInt(t);case"minute":d=g.add(g.multiply(d,$i),g.BigInt(e));case"second":d=g.add(g.multiply(d,$i),g.BigInt(n));case"millisecond":d=g.add(g.multiply(d,_e),g.BigInt(r));case"microsecond":d=g.add(g.multiply(d,_e),g.BigInt(i));case"nanosecond":d=g.add(g.multiply(d,_e),g.BigInt(s))}const f=a==="day"?l:Pd[a],p=sn(d,f*o,c),h=g.toNumber(g.divide(p,g.BigInt(f)));switch(a){case"day":return{deltaDays:h,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return Nr(h,0,0,0,0,0);case"minute":return Nr(t,h,0,0,0,0);case"second":return Nr(t,e,h,0,0,0);case"millisecond":return Nr(t,e,n,h,0,0);case"microsecond":return Nr(t,e,n,r,h,0);case"nanosecond":return Nr(t,e,n,r,i,h);default:throw new Error(`Invalid unit ${a}`)}}function qa(t,e){return Cd(u(t,k),u(t,F),u(t,B),u(e,k),u(e,F),u(e,B),"day").days}function Bt(t,e,n){const r=Re(null),i=Yt(t,e,n,r),s=qa(e,i);return{relativeTo:i,days:s}}function ku(t,e,n,r,i){const s=u(t,me),o=u(t,S),a=gn(u(t,Nt),s,o,e,n,r,i,0,0,0,0,0,0);return _t(a,s,o)}function Pu(t,e,n,r,i,s,o,a,c,l,d,f,p,h){let m=t,y=e,_=n,v=r,T=i,I=s,R=o,O=a,N=c,x=l;if(!Y(h)||f==="year"||f==="month"||f==="week"||f==="day"||f==="nanosecond"&&d===1)return{years:m,months:y,weeks:_,days:v,hours:T,minutes:I,seconds:R,milliseconds:O,microseconds:N,nanoseconds:x};let C=$s(0,T,I,R,O,N,x,0);const $=Ao(g.toNumber(C)),te=u(h,me),q=u(h,S),de=gn(u(h,Nt),te,q,m,y,_,v,0,0,0,0,0,0),Ie=G("%Temporal.Instant%"),se=gn(new Ie(de),te,q,0,0,0,$,0,0,0,0,0,0),U=g.subtract(se,de);return g.greaterThanOrEqual(g.multiply(g.subtract(C,U),g.BigInt($)),tt)&&({years:m,months:y,weeks:_,days:v}=$u(m,y,_,v,0,0,0,0,0,0,0,0,0,$,0,0,0,0,0,0,h),C=hc(g.subtract(C,U),d,f,p),{hours:T,minutes:I,seconds:R,milliseconds:O,microseconds:N,nanoseconds:x}=Dt(0,0,0,0,0,0,g.toNumber(C),"hour")),{years:m,months:y,weeks:_,days:v,hours:T,minutes:I,seconds:R,milliseconds:O,microseconds:N,nanoseconds:x}}function Rn(t,e,n,r,i,s,o,a,c,l,d,f,p,h=void 0){let m=t,y=e,_=n,v=r,T=i,I=s,R=o,O=a,N=c,x=g.BigInt(l);const C=G("%Temporal.Duration%");let $,te,q=h;if(q){if(Y(q))te=q,q=Ee(q);else if(!oe(q))throw new TypeError("starting point must be PlainDate or ZonedDateTime");$=u(q,S)}let de;if(f==="year"||f==="month"||f==="week"||f==="day"){x=$s(0,T,I,R,O,N,l,0);let se;te&&(se=ku(te,m,y,_,v));let U,fe;({days:U,nanoseconds:x,dayLengthNs:fe}=Md(x,se)),de=g.BigInt(fe),v+=U,T=I=R=O=N=0}let Ie;switch(f){case"year":{if(!$)throw new RangeError("A starting point is required for years rounding");const se=new C(m),U=$.dateAdd,fe=Re(null),it=Yt($,q,se,fe,U),fn=new C(m,y,_),Xt=Re(null),wn=Yt($,q,fn,Xt,U),Ce=qa(it,wn);q=it,v+=Ce;const ze=Re(null),Hn=Yt($,q,{days:v},ze,U),xt=Re(null);xt.largestUnit="year";const On=hr($,q,Hn,xt).years;m+=On;const Zr=q,os=Re(null);q=Yt($,q,{years:On},os,U),v-=qa(Zr,q);const no=new C(v<0?-1:1);let{days:as}=Bt($,q,no);as=we(as);const cs=g.multiply(g.BigInt(as),de);x=g.add(g.add(g.multiply(cs,g.BigInt(m)),g.multiply(g.BigInt(v),de)),x);const Da=sn(x,g.toNumber(g.multiply(cs,g.BigInt(d))),p);Ie=g.toNumber(x)/g.toNumber(cs),m=g.toNumber(g.divide(Da,cs)),x=tt,y=_=v=0;break}case"month":{if(!$)throw new RangeError("A starting point is required for months rounding");const se=new C(m,y),U=$.dateAdd,fe=Re(null),it=Yt($,q,se,fe,U),fn=new C(m,y,_),Xt=Re(null),wn=Yt($,q,fn,Xt,U),Ce=qa(it,wn);q=it,v+=Ce;const ze=Ao(v),Hn=new C(0,v<0?-1:1);let xt;for({relativeTo:q,days:xt}=Bt($,q,Hn);we(v)>=we(xt);)y+=ze,v-=xt,{relativeTo:q,days:xt}=Bt($,q,Hn);xt=we(xt);const On=g.multiply(g.BigInt(xt),de);x=g.add(g.add(g.multiply(On,g.BigInt(y)),g.multiply(g.BigInt(v),de)),x);const Zr=sn(x,g.toNumber(g.multiply(On,g.BigInt(d))),p);Ie=g.toNumber(x)/g.toNumber(On),y=g.toNumber(g.divide(Zr,On)),x=tt,_=v=0;break}case"week":{if(!$)throw new RangeError("A starting point is required for weeks rounding");const se=Ao(v),U=new C(0,0,v<0?-1:1);let fe;for({relativeTo:q,days:fe}=Bt($,q,U);we(v)>=we(fe);)_+=se,v-=fe,{relativeTo:q,days:fe}=Bt($,q,U);fe=we(fe);const it=g.multiply(g.BigInt(fe),de);x=g.add(g.add(g.multiply(it,g.BigInt(_)),g.multiply(g.BigInt(v),de)),x);const fn=sn(x,g.toNumber(g.multiply(it,g.BigInt(d))),p);Ie=g.toNumber(x)/g.toNumber(it),_=g.toNumber(g.divide(fn,it)),x=tt,v=0;break}case"day":{const se=de;x=g.add(g.multiply(se,g.BigInt(v)),x);const U=sn(x,g.toNumber(g.multiply(se,g.BigInt(d))),p);Ie=g.toNumber(x)/g.toNumber(se),v=g.toNumber(g.divide(U,se)),x=tt;break}case"hour":{let U=g.multiply(g.BigInt(T),g.BigInt(36e11));U=g.add(U,g.multiply(g.BigInt(I),g.BigInt(6e10))),U=g.add(U,g.multiply(g.BigInt(R),kr)),U=g.add(U,g.multiply(g.BigInt(O),En)),U=g.add(U,g.multiply(g.BigInt(N),_e)),U=g.add(U,x),Ie=g.toNumber(U)/36e11;const fe=sn(U,36e11*d,p);T=g.toNumber(g.divide(fe,g.BigInt(36e11))),x=tt,I=R=O=N=0;break}case"minute":{let U=g.multiply(g.BigInt(I),g.BigInt(6e10));U=g.add(U,g.multiply(g.BigInt(R),kr)),U=g.add(U,g.multiply(g.BigInt(O),En)),U=g.add(U,g.multiply(g.BigInt(N),_e)),U=g.add(U,x),Ie=g.toNumber(U)/6e10;const fe=sn(U,6e10*d,p);I=g.toNumber(g.divide(fe,g.BigInt(6e10))),x=tt,R=O=N=0;break}case"second":{let U=g.multiply(g.BigInt(R),kr);U=g.add(U,g.multiply(g.BigInt(O),En)),U=g.add(U,g.multiply(g.BigInt(N),_e)),U=g.add(U,x),Ie=g.toNumber(U)/1e9;const fe=sn(U,1e9*d,p);R=g.toNumber(g.divide(fe,g.BigInt(1e9))),x=tt,O=N=0;break}case"millisecond":{let U=g.multiply(g.BigInt(O),En);U=g.add(U,g.multiply(g.BigInt(N),_e)),U=g.add(U,x),Ie=g.toNumber(U)/1e6;const fe=sn(U,1e6*d,p);O=g.toNumber(g.divide(fe,g.BigInt(1e6))),x=tt,N=0;break}case"microsecond":{let U=g.multiply(g.BigInt(N),_e);U=g.add(U,x),Ie=g.toNumber(U)/1e3;const fe=sn(U,1e3*d,p);N=g.toNumber(g.divide(fe,g.BigInt(1e3))),x=tt;break}case"nanosecond":{Ie=g.toNumber(x),x=sn(x,d,p);break}}return{years:m,months:y,weeks:_,days:v,hours:T,minutes:I,seconds:R,milliseconds:O,microseconds:N,nanoseconds:g.toNumber(x),total:Ie}}function Sr(t,e,n,r,i,s){for(const[o,a]of[[t,r],[e,i],[n,s]])if(o!==a)return Fi(o-a);return 0}function fs(t,e){let n=t%e;return p0(n,-0)?0:(n<0&&(n+=e),n)}function pc(t){const e=_o(t);return typeof globalThis.BigInt!="undefined"?globalThis.BigInt(e.toString(10)):e}function _o(t){if(t instanceof g)return t;let e=t;if(typeof t=="object"){const n=t[Symbol.toPrimitive];n&&typeof n=="function"&&(e=Td(n,t,["number"]))}switch(typeof e){case"undefined":case"object":case"number":case"symbol":default:throw new TypeError(`cannot convert ${typeof t} to bigint`);case"string":if(!e.match(/^\s*(?:[+-]?\d+\s*)?$/))throw new SyntaxError("invalid BigInt syntax");case"bigint":try{return g.BigInt(e.toString())}catch(n){throw n instanceof Error&&n.message.startsWith("Invalid integer")?new SyntaxError(n.message):n}case"boolean":return e?Ed:tt}}const kd=(()=>{let t=g.BigInt(Date.now()%1e6);return()=>{const e=g.BigInt(Date.now()),n=g.add(g.multiply(e,En),t);return t=g.divide(e,En),g.greaterThan(n,jo)?jo:g.lessThan(n,So)?So:n}})();function U0(){const t=new Up("en-us"),e=G("%Temporal.TimeZone%");return new e(Gp(t.resolvedOptions().timeZone))}function Fi(t){return t<0?-1:t>0?1:t}function J(t){if(t===void 0)return Re(null);if(Ae(t)&&t!==null)return t;throw new TypeError(`Options parameter must be an object, not ${t===null?"null":`${typeof t}`}`)}function ks(t,e){const n=Re(null);return n[t]=e,n}function _r(t,e,n,r){let i=t[e];if(i!==void 0){if(i=H(i),!n.includes(i))throw new RangeError(`${e} must be one of ${n.join(", ")}, not ${i}`);return i}return r}function F0(t,e,n,r,i){let s=t[e];if(s===void 0)return i;const o=Mo(s);if(Ho(o)||o<n||o>r)throw new RangeError(`${e} must be between ${n} and ${r}, not ${o}`);return pt(o)}const gg=new RegExp(`^${Lp.source}$`);function mg(t,e,n,r=t(e),i=t(n)){let s=g.BigInt(e),o=g.BigInt(n),a=r,c=i;for(;g.greaterThan(g.subtract(o,s),Ed);){const l=g.divide(g.add(s,o),g.BigInt(2)),d=t(l);if(d===a)s=l,a=d;else if(d===c)o=l,c=d;else throw new Error(`invalid state in bisection ${a} - ${d} - ${c}`)}return o}const Pd={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},yg=Symbol("date"),wg=Symbol("ym"),bg=Symbol("md"),_g=Symbol("time"),vg=Symbol("datetime"),Tg=Symbol("zoneddatetime"),Eg=Symbol("instant"),Hs=Symbol("original"),Uu=Symbol("timezone"),Ya=Symbol("timezone-id-given"),hn=Symbol("calendar-id"),Ig=Symbol("locale"),Fu=Symbol("options"),vo=t=>({value:t,enumerable:!0,writable:!1,configurable:!0}),Qi=globalThis.Intl.DateTimeFormat,gr=Object.assign,B0=Object.prototype.hasOwnProperty,q0=Reflect.apply;function Ei(t,e){let n=t[e];return typeof n=="function"&&(n=new Qi(t[Ig],n(t[Fu])),t[e]=n),n}function so(t){let e=t[Uu];return typeof e=="string"&&(e=Zt(e),t[Uu]=e),e}function zi(t=void 0,e={}){if(!(this instanceof zi))return new zi(t,e);const n=typeof e!="undefined",r=n?gr({},e):{},i=new Qi(t,r),s=i.resolvedOptions();if(n){const o=gr({},s);for(const a in o)q0(B0,r,[a])||delete o[a];this[Fu]=o}else this[Fu]=r;this[Ya]=r.timeZone?r.timeZone:null,this[Ig]=s.locale,this[Hs]=i,this[Uu]=s.timeZone,this[hn]=s.calendar,this[yg]=X0,this[wg]=W0,this[bg]=Q0,this[_g]=V0,this[vg]=K0,this[Tg]=J0,this[Eg]=eb}Object.defineProperty(zi,"name",{writable:!0,value:"DateTimeFormat"});zi.supportedLocalesOf=function(t,e){return Qi.supportedLocalesOf(t,e)};const Ud={resolvedOptions:vo(Y0),format:vo(z0),formatRange:vo(H0)};"formatToParts"in Qi.prototype&&(Ud.formatToParts=vo(G0));"formatRangeToParts"in Qi.prototype&&(Ud.formatRangeToParts=vo(Z0));zi.prototype=Object.create(Qi.prototype,Ud);Object.defineProperty(zi,"prototype",{writable:!1,enumerable:!1,configurable:!1});const Xi=zi;function Y0(){return this[Hs].resolvedOptions()}function $c(t,e){if(!e)return t;const n=t.resolvedOptions();return n.timeZone===e?t:((n.dateStyle||n.timeStyle)&&(delete n.weekday,delete n.era,delete n.year,delete n.month,delete n.day,delete n.hour,delete n.minute,delete n.second,delete n.timeZoneName,delete n.hourCycle,delete n.hour12,delete n.dayPeriod),new Qi(n.locale,{...n,timeZone:e}))}function z0(t,...e){let{instant:n,formatter:r,timeZone:i}=Us(t,this);return n&&r?(r=$c(r,i),r.format(n.epochMilliseconds)):this[Hs].format(t,...e)}function G0(t,...e){let{instant:n,formatter:r,timeZone:i}=Us(t,this);return n&&r?(r=$c(r,i),r.formatToParts(n.epochMilliseconds)):this[Hs].formatToParts(t,...e)}function H0(t,e){if(Ps(t)||Ps(e)){if(!Dg(t,e))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{instant:n,formatter:r,timeZone:i}=Us(t,this),{instant:s,formatter:o,timeZone:a}=Us(e,this);if(i&&a&&i!==a)throw new RangeError("cannot format range between different time zones");if(n&&s&&r&&o&&r===o)return $c(r,i).formatRange(n.epochMilliseconds,s.epochMilliseconds)}return this[Hs].formatRange(t,e)}function Z0(t,e){if(Ps(t)||Ps(e)){if(!Dg(t,e))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{instant:n,formatter:r,timeZone:i}=Us(t,this),{instant:s,formatter:o,timeZone:a}=Us(e,this);if(i&&a&&i!==a)throw new RangeError("cannot format range between different time zones");if(n&&s&&r&&o&&r===o)return $c(r,i).formatRangeToParts(n.epochMilliseconds,s.epochMilliseconds)}return this[Hs].formatRangeToParts(t,e)}function ta(t={},e={}){const n=gr({},t);for(const r of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])n[r]=r in e?e[r]:n[r],(n[r]===!1||n[r]===void 0)&&delete n[r];return n}function V0(t){let e=ta(t,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return Pc(e)||(e=gr({},e,{hour:"numeric",minute:"numeric",second:"numeric"})),e}function W0(t){let e=ta(t,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in e||"month"in e||(e=gr(e,{year:"numeric",month:"numeric"})),e}function Q0(t){let e=ta(t,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in e||"day"in e||(e=gr({},e,{month:"numeric",day:"numeric"})),e}function X0(t){let e=ta(t,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return kc(e)||(e=gr({},e,{year:"numeric",month:"numeric",day:"numeric"})),e}function K0(t){let e=ta(t,{timeZoneName:!1});return!Pc(e)&&!kc(e)&&(e=gr({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function J0(t){let e=t;return!Pc(e)&&!kc(e)&&(e=gr({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),e.timeZoneName===void 0&&(e.timeZoneName="short")),e}function eb(t){let e=t;return!Pc(e)&&!kc(e)&&(e=gr({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function kc(t){return"year"in t||"month"in t||"day"in t||"weekday"in t||"dateStyle"in t}function Pc(t){return"hour"in t||"minute"in t||"second"in t||"timeStyle"in t||"dayPeriod"in t}function Ps(t){return oe(t)||He(t)||ne(t)||Y(t)||be(t)||wt(t)||ct(t)}function Dg(t,e){return!(!Ps(t)||!Ps(e)||He(t)&&!He(e)||oe(t)&&!oe(e)||ne(t)&&!ne(e)||Y(t)&&!Y(e)||be(t)&&!be(e)||wt(t)&&!wt(e)||ct(t)&&!ct(e))}function Us(t,e){const n=G("%Temporal.PlainDateTime%");if(He(t)){const r=u(t,Z),i=u(t,V),s=u(t,W),o=u(t,Q),a=u(t,X),c=u(t,K),l=new n(1970,1,1,r,i,s,o,a,c,e[hn]);return{instant:Ht(so(e),l,"compatible"),formatter:Ei(e,_g)}}if(be(t)){const r=u(t,k),i=u(t,F),s=u(t,B),o=H(u(t,S));if(o!==e[hn])throw new RangeError(`cannot format PlainYearMonth with calendar ${o} in locale with calendar ${e[hn]}`);const a=new n(r,i,s,12,0,0,0,0,0,o);return{instant:Ht(so(e),a,"compatible"),formatter:Ei(e,wg)}}if(wt(t)){const r=u(t,k),i=u(t,F),s=u(t,B),o=H(u(t,S));if(o!==e[hn])throw new RangeError(`cannot format PlainMonthDay with calendar ${o} in locale with calendar ${e[hn]}`);const a=new n(r,i,s,12,0,0,0,0,0,o);return{instant:Ht(so(e),a,"compatible"),formatter:Ei(e,bg)}}if(oe(t)){const r=u(t,k),i=u(t,F),s=u(t,B),o=H(u(t,S));if(o!=="iso8601"&&o!==e[hn])throw new RangeError(`cannot format PlainDate with calendar ${o} in locale with calendar ${e[hn]}`);const a=new n(r,i,s,12,0,0,0,0,0,e[hn]);return{instant:Ht(so(e),a,"compatible"),formatter:Ei(e,yg)}}if(ne(t)){const r=u(t,k),i=u(t,F),s=u(t,B),o=u(t,Z),a=u(t,V),c=u(t,W),l=u(t,Q),d=u(t,X),f=u(t,K),p=H(u(t,S));if(p!=="iso8601"&&p!==e[hn])throw new RangeError(`cannot format PlainDateTime with calendar ${p} in locale with calendar ${e[hn]}`);let h=t;return p==="iso8601"&&(h=new n(r,i,s,o,a,c,l,d,f,e[hn])),{instant:Ht(so(e),h,"compatible"),formatter:Ei(e,vg)}}if(Y(t)){const r=H(u(t,S));if(r!=="iso8601"&&r!==e[hn])throw new RangeError(`cannot format ZonedDateTime with calendar ${r} in locale with calendar ${e[hn]}`);const i=u(t,me),s=H(i);if(e[Ya]&&e[Ya]!==s)throw new RangeError(`timeZone option ${e[Ya]} doesn't match actual time zone ${s}`);return{instant:u(t,Nt),formatter:Ei(e,Tg),timeZone:s}}return ct(t)?{instant:t,formatter:Ei(e,Eg)}:{}}const oo=["year","month","week","day"],yh={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3};class Tn{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const n=_o(e);Ni(n),wr(this),re(this,z,n);{const r=Sl(this,void 0,"auto");Object.defineProperty(this,"_repr_",{value:`${this[Symbol.toStringTag]} <${r}>`,writable:!1,enumerable:!1,configurable:!1})}}get epochSeconds(){if(!ct(this))throw new TypeError("invalid receiver");const e=u(this,z);return g.toNumber(g.divide(e,kr))}get epochMilliseconds(){if(!ct(this))throw new TypeError("invalid receiver");const e=g.BigInt(u(this,z));return g.toNumber(g.divide(e,En))}get epochMicroseconds(){if(!ct(this))throw new TypeError("invalid receiver");const e=g.BigInt(u(this,z));return pc(g.divide(e,_e))}get epochNanoseconds(){if(!ct(this))throw new TypeError("invalid receiver");return pc(g.BigInt(u(this,z)))}add(e){if(!ct(this))throw new TypeError("invalid receiver");const{hours:n,minutes:r,seconds:i,milliseconds:s,microseconds:o,nanoseconds:a}=Un(e,["years","months","weeks","days"]),c=dc(u(this,z),n,r,i,s,o,a);return new Tn(c)}subtract(e){if(!ct(this))throw new TypeError("invalid receiver");const{hours:n,minutes:r,seconds:i,milliseconds:s,microseconds:o,nanoseconds:a}=Un(e,["years","months","weeks","days"]),c=dc(u(this,z),-n,-r,-i,-s,-o,-a);return new Tn(c)}until(e,n=void 0){if(!ct(this))throw new TypeError("invalid receiver");const r=Kn(e),i=J(n),s=zt(i,"nanosecond",oo),o=Fn("second",s),a=mn(i,"auto",oo,o);Dn(a,s);const c=lt(i,"trunc"),l=In(i,yh[s],!1),d=u(this,z),f=u(r,z);let{seconds:p,milliseconds:h,microseconds:m,nanoseconds:y}=Uo(d,f,l,s,c),_,v;({hours:_,minutes:v,seconds:p,milliseconds:h,microseconds:m,nanoseconds:y}=Dt(0,0,0,p,h,m,y,a));const T=G("%Temporal.Duration%");return new T(0,0,0,0,_,v,p,h,m,y)}since(e,n=void 0){if(!ct(this))throw new TypeError("invalid receiver");const r=Kn(e),i=J(n),s=zt(i,"nanosecond",oo),o=Fn("second",s),a=mn(i,"auto",oo,o);Dn(a,s);const c=lt(i,"trunc"),l=In(i,yh[s],!1),d=u(r,z),f=u(this,z);let{seconds:p,milliseconds:h,microseconds:m,nanoseconds:y}=Uo(d,f,l,s,c),_,v;({hours:_,minutes:v,seconds:p,milliseconds:h,microseconds:m,nanoseconds:y}=Dt(0,0,0,p,h,m,y,a));const T=G("%Temporal.Duration%");return new T(0,0,0,0,_,v,p,h,m,y)}round(e){if(!ct(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const n=typeof e=="string"?ks("smallestUnit",e):J(e),r=zt(n,void 0,oo);if(r===void 0)throw new RangeError("smallestUnit is required");const i=lt(n,"halfExpand"),o=In(n,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[r],!0),a=u(this,z),c=hc(a,o,r,i);return new Tn(c)}equals(e){if(!ct(this))throw new TypeError("invalid receiver");const n=Kn(e),r=u(this,z),i=u(n,z);return g.equal(g.BigInt(r),g.BigInt(i))}toString(e=void 0){if(!ct(this))throw new TypeError("invalid receiver");const n=J(e);let r=n.timeZone;r!==void 0&&(r=Zt(r));const{precision:i,unit:s,increment:o}=Xo(n),a=lt(n,"trunc"),c=u(this,z),l=hc(c,o,s,a),d=new Tn(l);return Sl(d,r,i)}toJSON(){if(!ct(this))throw new TypeError("invalid receiver");return Sl(this,void 0,"auto")}toLocaleString(e=void 0,n=void 0){if(!ct(this))throw new TypeError("invalid receiver");return new Xi(e,n).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(e){if(!ct(this))throw new TypeError("invalid receiver");if(!Ae(e))throw new TypeError("invalid argument in toZonedDateTime");const n=e.calendar;if(n===void 0)throw new TypeError("missing calendar property in toZonedDateTime");const r=Rt(n),i=e.timeZone;if(i===void 0)throw new TypeError("missing timeZone property in toZonedDateTime");const s=Zt(i);return _t(u(this,z),s,r)}toZonedDateTimeISO(e){let n=e;if(!ct(this))throw new TypeError("invalid receiver");if(Ae(n)){const s=n.timeZone;s!==void 0&&(n=s)}const r=Zt(n),i=nt();return _t(u(this,z),r,i)}static fromEpochSeconds(e){const n=Mo(e),r=g.multiply(g.BigInt(n),kr);return Ni(r),new Tn(r)}static fromEpochMilliseconds(e){const n=Mo(e),r=g.multiply(g.BigInt(n),En);return Ni(r),new Tn(r)}static fromEpochMicroseconds(e){const n=_o(e),r=g.multiply(n,_e);return Ni(r),new Tn(r)}static fromEpochNanoseconds(e){const n=_o(e);return Ni(n),new Tn(n)}static from(e){return ct(e)?new Tn(u(e,z)):Kn(e)}static compare(e,n){const r=Kn(e),i=Kn(n),s=u(r,z),o=u(i,z);return g.lessThan(s,o)?-1:g.greaterThan(s,o)?1:0}}yr(Tn,"Temporal.Instant");const Na=["hour","minute","second","millisecond","microsecond","nanosecond"];class na{constructor(e,n,r,i=nt()){const s=De(e),o=De(n),a=De(r),c=Rt(i);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");Qp(this,s,o,a,c)}get calendar(){if(!oe(this))throw new TypeError("invalid receiver");return u(this,S)}get era(){if(!oe(this))throw new TypeError("invalid receiver");return Nc(u(this,S),this)}get eraYear(){if(!oe(this))throw new TypeError("invalid receiver");return Ac(u(this,S),this)}get year(){if(!oe(this))throw new TypeError("invalid receiver");return Rc(u(this,S),this)}get month(){if(!oe(this))throw new TypeError("invalid receiver");return xc(u(this,S),this)}get monthCode(){if(!oe(this))throw new TypeError("invalid receiver");return Jo(u(this,S),this)}get day(){if(!oe(this))throw new TypeError("invalid receiver");return Oc(u(this,S),this)}get dayOfWeek(){if(!oe(this))throw new TypeError("invalid receiver");return Rd(u(this,S),this)}get dayOfYear(){if(!oe(this))throw new TypeError("invalid receiver");return xd(u(this,S),this)}get weekOfYear(){if(!oe(this))throw new TypeError("invalid receiver");return Od(u(this,S),this)}get daysInWeek(){if(!oe(this))throw new TypeError("invalid receiver");return Nd(u(this,S),this)}get daysInMonth(){if(!oe(this))throw new TypeError("invalid receiver");return Es(u(this,S),this)}get daysInYear(){if(!oe(this))throw new TypeError("invalid receiver");return Sc(u(this,S),this)}get monthsInYear(){if(!oe(this))throw new TypeError("invalid receiver");return jc(u(this,S),this)}get inLeapYear(){if(!oe(this))throw new TypeError("invalid receiver");return Mc(u(this,S),this)}with(e,n=void 0){if(!oe(this))throw new TypeError("invalid receiver");if(!Ae(e))throw new TypeError("invalid argument");zs(e);const r=u(this,S),i=Ve(r,["day","month","monthCode","year"]),s=gi(e,i);if(!s)throw new TypeError("invalid date-like");let o=Du(this,i);o=qi(r,o,s),o=Du(o,i);const a=J(n);return Xn(r,o,a)}withCalendar(e){if(!oe(this))throw new TypeError("invalid receiver");const n=Rt(e);return new na(u(this,k),u(this,F),u(this,B),n)}add(e,n=void 0){if(!oe(this))throw new TypeError("invalid receiver");const r=Ts(e),i=J(n);return Yt(u(this,S),this,r,i)}subtract(e,n=void 0){if(!oe(this))throw new TypeError("invalid receiver");const r=lg(Ts(e)),i=J(n);return Yt(u(this,S),this,r,i)}until(e,n=void 0){if(!oe(this))throw new TypeError("invalid receiver");const r=Ee(e),i=u(this,S),s=u(r,S),o=H(i),a=H(s);if(o!==a)throw new RangeError(`cannot compute difference between dates of ${o} and ${a} calendars`);const c=J(n),l=zt(c,"day",Na),d=Fn("day",l),f=mn(c,"auto",Na,d);Dn(f,l);const p=lt(c,"trunc"),h=In(c,void 0,!1),m={...c,largestUnit:f},y=hr(i,this,r,m);if(l==="day"&&h===1)return y;let{years:_,months:v,weeks:T,days:I}=y;({years:_,months:v,weeks:T,days:I}=Rn(_,v,T,I,0,0,0,0,0,0,h,l,p,this));const R=G("%Temporal.Duration%");return new R(_,v,T,I,0,0,0,0,0,0)}since(e,n=void 0){if(!oe(this))throw new TypeError("invalid receiver");const r=Ee(e),i=u(this,S),s=u(r,S),o=H(i),a=H(s);if(o!==a)throw new RangeError(`cannot compute difference between dates of ${o} and ${a} calendars`);const c=J(n),l=zt(c,"day",Na),d=Fn("day",l),f=mn(c,"auto",Na,d);Dn(f,l);const p=lt(c,"trunc"),h=In(c,void 0,!1),m={...c,largestUnit:f};let{years:y,months:_,weeks:v,days:T}=hr(i,this,r,m);const I=G("%Temporal.Duration%");return l==="day"&&h===1?new I(-y,-_,-v,-T,0,0,0,0,0,0):({years:y,months:_,weeks:v,days:T}=Rn(y,_,v,T,0,0,0,0,0,0,h,l,Wo(p),this),new I(-y,-_,-v,-T,0,0,0,0,0,0))}equals(e){if(!oe(this))throw new TypeError("invalid receiver");const n=Ee(e);for(const r of[k,F,B]){const i=u(this,r),s=u(n,r);if(i!==s)return!1}return ea(u(this,S),u(n,S))}toString(e=void 0){if(!oe(this))throw new TypeError("invalid receiver");const n=J(e),r=Qo(n);return xu(this,r)}toJSON(){if(!oe(this))throw new TypeError("invalid receiver");return xu(this)}toLocaleString(e=void 0,n=void 0){if(!oe(this))throw new TypeError("invalid receiver");return new Xi(e,n).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(e=void 0){if(!oe(this))throw new TypeError("invalid receiver");const n=u(this,k),r=u(this,F),i=u(this,B),s=u(this,S);if(e===void 0)return Jt(n,r,i,0,0,0,0,0,0,s);const o=lr(e),a=u(o,Z),c=u(o,V),l=u(o,W),d=u(o,Q),f=u(o,X),p=u(o,K);return Jt(n,r,i,a,c,l,d,f,p,s)}toZonedDateTime(e){if(!oe(this))throw new TypeError("invalid receiver");let n,r;if(Ae(e)){const _=e.timeZone;_===void 0?n=Zt(e):(n=Zt(_),r=e.plainTime)}else n=Zt(e);const i=u(this,k),s=u(this,F),o=u(this,B),a=u(this,S);let c=0,l=0,d=0,f=0,p=0,h=0;r!==void 0&&(r=lr(r),c=u(r,Z),l=u(r,V),d=u(r,W),f=u(r,Q),p=u(r,X),h=u(r,K));const m=Jt(i,s,o,c,l,d,f,p,h,a),y=Ht(n,m,"compatible");return _t(u(y,z),n,a)}toPlainYearMonth(){if(!oe(this))throw new TypeError("invalid receiver");const e=u(this,S),n=Ve(e,["monthCode","year"]),r=rn(this,n);return li(e,r)}toPlainMonthDay(){if(!oe(this))throw new TypeError("invalid receiver");const e=u(this,S),n=Ve(e,["day","monthCode"]),r=ki(this,n);return Ls(e,r)}getISOFields(){if(!oe(this))throw new TypeError("invalid receiver");return{calendar:u(this,S),isoDay:u(this,B),isoMonth:u(this,F),isoYear:u(this,k)}}static from(e,n=void 0){const r=J(n);return oe(e)?(Et(r),Bn(u(e,k),u(e,F),u(e,B),u(e,S))):Ee(e,r)}static compare(e,n){const r=Ee(e),i=Ee(n);return Sr(u(r,k),u(r,F),u(r,B),u(i,k),u(i,F),u(i,B))}}yr(na,"Temporal.PlainDate");class ra{constructor(e,n,r,i=0,s=0,o=0,a=0,c=0,l=0,d=nt()){const f=De(e),p=De(n),h=De(r),m=De(i),y=De(s),_=De(o),v=De(a),T=De(c),I=De(l),R=Rt(d);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");Xp(this,f,p,h,m,y,_,v,T,I,R)}get calendar(){if(!ne(this))throw new TypeError("invalid receiver");return u(this,S)}get year(){if(!ne(this))throw new TypeError("invalid receiver");return Rc(u(this,S),this)}get month(){if(!ne(this))throw new TypeError("invalid receiver");return xc(u(this,S),this)}get monthCode(){if(!ne(this))throw new TypeError("invalid receiver");return Jo(u(this,S),this)}get day(){if(!ne(this))throw new TypeError("invalid receiver");return Oc(u(this,S),this)}get hour(){if(!ne(this))throw new TypeError("invalid receiver");return u(this,Z)}get minute(){if(!ne(this))throw new TypeError("invalid receiver");return u(this,V)}get second(){if(!ne(this))throw new TypeError("invalid receiver");return u(this,W)}get millisecond(){if(!ne(this))throw new TypeError("invalid receiver");return u(this,Q)}get microsecond(){if(!ne(this))throw new TypeError("invalid receiver");return u(this,X)}get nanosecond(){if(!ne(this))throw new TypeError("invalid receiver");return u(this,K)}get era(){if(!ne(this))throw new TypeError("invalid receiver");return Nc(u(this,S),this)}get eraYear(){if(!ne(this))throw new TypeError("invalid receiver");return Ac(u(this,S),this)}get dayOfWeek(){if(!ne(this))throw new TypeError("invalid receiver");return Rd(u(this,S),this)}get dayOfYear(){if(!ne(this))throw new TypeError("invalid receiver");return xd(u(this,S),this)}get weekOfYear(){if(!ne(this))throw new TypeError("invalid receiver");return Od(u(this,S),this)}get daysInWeek(){if(!ne(this))throw new TypeError("invalid receiver");return Nd(u(this,S),this)}get daysInYear(){if(!ne(this))throw new TypeError("invalid receiver");return Sc(u(this,S),this)}get daysInMonth(){if(!ne(this))throw new TypeError("invalid receiver");return Es(u(this,S),this)}get monthsInYear(){if(!ne(this))throw new TypeError("invalid receiver");return jc(u(this,S),this)}get inLeapYear(){if(!ne(this))throw new TypeError("invalid receiver");return Mc(u(this,S),this)}with(e,n=void 0){if(!ne(this))throw new TypeError("invalid receiver");if(!Ae(e))throw new TypeError("invalid argument");zs(e);const r=J(n),i=u(this,S),s=Ve(i,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),o=gi(e,s);if(!o)throw new TypeError("invalid date-time-like");let a=oc(this,s);a=qi(i,a,o),a=oc(a,s);const{year:c,month:l,day:d,hour:f,minute:p,second:h,millisecond:m,microsecond:y,nanosecond:_}=Ko(i,a,r);return Jt(c,l,d,f,p,h,m,y,_,i)}withPlainTime(e=void 0){if(!ne(this))throw new TypeError("invalid receiver");const n=u(this,k),r=u(this,F),i=u(this,B),s=u(this,S);if(e===void 0)return Jt(n,r,i,0,0,0,0,0,0,s);const o=lr(e),a=u(o,Z),c=u(o,V),l=u(o,W),d=u(o,Q),f=u(o,X),p=u(o,K);return Jt(n,r,i,a,c,l,d,f,p,s)}withPlainDate(e){if(!ne(this))throw new TypeError("invalid receiver");const n=Ee(e),r=u(n,k),i=u(n,F),s=u(n,B);let o=u(n,S);const a=u(this,Z),c=u(this,V),l=u(this,W),d=u(this,Q),f=u(this,X),p=u(this,K);return o=tg(u(this,S),o),Jt(r,i,s,a,c,l,d,f,p,o)}withCalendar(e){if(!ne(this))throw new TypeError("invalid receiver");const n=Rt(e);return new ra(u(this,k),u(this,F),u(this,B),u(this,Z),u(this,V),u(this,W),u(this,Q),u(this,X),u(this,K),n)}add(e,n=void 0){if(!ne(this))throw new TypeError("invalid receiver");const r=Un(e),{years:i,months:s,weeks:o,days:a,hours:c,minutes:l,seconds:d,milliseconds:f,microseconds:p,nanoseconds:h}=r,m=J(n),y=u(this,S),{year:_,month:v,day:T,hour:I,minute:R,second:O,millisecond:N,microsecond:x,nanosecond:C}=fc(u(this,k),u(this,F),u(this,B),u(this,Z),u(this,V),u(this,W),u(this,Q),u(this,X),u(this,K),y,i,s,o,a,c,l,d,f,p,h,m);return Jt(_,v,T,I,R,O,N,x,C,y)}subtract(e,n=void 0){if(!ne(this))throw new TypeError("invalid receiver");const r=Un(e),{years:i,months:s,weeks:o,days:a,hours:c,minutes:l,seconds:d,milliseconds:f,microseconds:p,nanoseconds:h}=r,m=J(n),y=u(this,S),{year:_,month:v,day:T,hour:I,minute:R,second:O,millisecond:N,microsecond:x,nanosecond:C}=fc(u(this,k),u(this,F),u(this,B),u(this,Z),u(this,V),u(this,W),u(this,Q),u(this,X),u(this,K),y,-i,-s,-o,-a,-c,-l,-d,-f,-p,-h,m);return Jt(_,v,T,I,R,O,N,x,C,y)}until(e,n=void 0){if(!ne(this))throw new TypeError("invalid receiver");const r=Jr(e),i=u(this,S),s=u(r,S),o=H(i),a=H(s);if(o!==a)throw new RangeError(`cannot compute difference between dates of ${o} and ${a} calendars`);const c=J(n),l=zt(c,"nanosecond"),d=Fn("day",l),f=mn(c,"auto",[],d);Dn(f,l);const p=lt(c,"trunc"),h=Lo(c,l);let{years:m,months:y,weeks:_,days:v,hours:T,minutes:I,seconds:R,milliseconds:O,microseconds:N,nanoseconds:x}=uc(u(this,k),u(this,F),u(this,B),u(this,Z),u(this,V),u(this,W),u(this,Q),u(this,X),u(this,K),u(r,k),u(r,F),u(r,B),u(r,Z),u(r,V),u(r,W),u(r,Q),u(r,X),u(r,K),i,f,c);const C=Pi(this);({years:m,months:y,weeks:_,days:v,hours:T,minutes:I,seconds:R,milliseconds:O,microseconds:N,nanoseconds:x}=Rn(m,y,_,v,T,I,R,O,N,x,h,l,p,C)),{days:v,hours:T,minutes:I,seconds:R,milliseconds:O,microseconds:N,nanoseconds:x}=Dt(v,T,I,R,O,N,x,f);const $=G("%Temporal.Duration%");return new $(m,y,_,v,T,I,R,O,N,x)}since(e,n=void 0){if(!ne(this))throw new TypeError("invalid receiver");const r=Jr(e),i=u(this,S),s=u(r,S),o=H(i),a=H(s);if(o!==a)throw new RangeError(`cannot compute difference between dates of ${o} and ${a} calendars`);const c=J(n),l=zt(c,"nanosecond"),d=Fn("day",l),f=mn(c,"auto",[],d);Dn(f,l);const p=lt(c,"trunc"),h=Lo(c,l);let{years:m,months:y,weeks:_,days:v,hours:T,minutes:I,seconds:R,milliseconds:O,microseconds:N,nanoseconds:x}=uc(u(this,k),u(this,F),u(this,B),u(this,Z),u(this,V),u(this,W),u(this,Q),u(this,X),u(this,K),u(r,k),u(r,F),u(r,B),u(r,Z),u(r,V),u(r,W),u(r,Q),u(r,X),u(r,K),i,f,c);const C=Pi(this);({years:m,months:y,weeks:_,days:v,hours:T,minutes:I,seconds:R,milliseconds:O,microseconds:N,nanoseconds:x}=Rn(m,y,_,v,T,I,R,O,N,x,h,l,Wo(p),C)),{days:v,hours:T,minutes:I,seconds:R,milliseconds:O,microseconds:N,nanoseconds:x}=Dt(v,T,I,R,O,N,x,f);const $=G("%Temporal.Duration%");return new $(-m,-y,-_,-v,-T,-I,-R,-O,-N,-x)}round(e){if(!ne(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const n=typeof e=="string"?ks("smallestUnit",e):J(e),r=zt(n,void 0,["year","month","week"]);if(r===void 0)throw new RangeError("smallestUnit is required");const i=lt(n,"halfExpand"),o=In(n,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[r],!1);let a=u(this,k),c=u(this,F),l=u(this,B),d=u(this,Z),f=u(this,V),p=u(this,W),h=u(this,Q),m=u(this,X),y=u(this,K);return{year:a,month:c,day:l,hour:d,minute:f,second:p,millisecond:h,microsecond:m,nanosecond:y}=Ld(a,c,l,d,f,p,h,m,y,o,r,i),Jt(a,c,l,d,f,p,h,m,y,u(this,S))}equals(e){if(!ne(this))throw new TypeError("invalid receiver");const n=Jr(e);for(const r of[k,F,B,Z,V,W,Q,X,K]){const i=u(this,r),s=u(n,r);if(i!==s)return!1}return ea(u(this,S),u(n,S))}toString(e=void 0){if(!ne(this))throw new TypeError("invalid receiver");const n=J(e),{precision:r,unit:i,increment:s}=Xo(n),o=Qo(n),a=lt(n,"trunc");return Ou(this,r,o,{unit:i,increment:s,roundingMode:a})}toJSON(){if(!ne(this))throw new TypeError("invalid receiver");return Ou(this,"auto")}toLocaleString(e=void 0,n=void 0){if(!ne(this))throw new TypeError("invalid receiver");return new Xi(e,n).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(e,n=void 0){if(!ne(this))throw new TypeError("invalid receiver");const r=Zt(e),i=J(n),s=Co(i),o=Ht(r,this,s);return _t(u(o,z),r,u(this,S))}toPlainDate(){if(!ne(this))throw new TypeError("invalid receiver");return Pi(this)}toPlainYearMonth(){if(!ne(this))throw new TypeError("invalid receiver");const e=u(this,S),n=Ve(e,["monthCode","year"]),r=rn(this,n);return li(e,r)}toPlainMonthDay(){if(!ne(this))throw new TypeError("invalid receiver");const e=u(this,S),n=Ve(e,["day","monthCode"]),r=ki(this,n);return Ls(e,r)}toPlainTime(){if(!ne(this))throw new TypeError("invalid receiver");return Ad(this)}getISOFields(){if(!ne(this))throw new TypeError("invalid receiver");return{calendar:u(this,S),isoDay:u(this,B),isoHour:u(this,Z),isoMicrosecond:u(this,X),isoMillisecond:u(this,Q),isoMinute:u(this,V),isoMonth:u(this,F),isoNanosecond:u(this,K),isoSecond:u(this,W),isoYear:u(this,k)}}static from(e,n=void 0){const r=J(n);return ne(e)?(Et(r),Jt(u(e,k),u(e,F),u(e,B),u(e,Z),u(e,V),u(e,W),u(e,Q),u(e,X),u(e,K),u(e,S))):Jr(e,r)}static compare(e,n){const r=Jr(e),i=Jr(n);for(const s of[k,F,B,Z,V,W,Q,X,K]){const o=u(r,s),a=u(i,s);if(o!==a)return Fi(o-a)}return 0}}yr(ra,"Temporal.PlainDateTime");class ur{constructor(e=0,n=0,r=0,i=0,s=0,o=0,a=0,c=0,l=0,d=0){const f=bt(e),p=bt(n),h=bt(r),m=bt(i),y=bt(s),_=bt(o),v=bt(a),T=bt(c),I=bt(l),R=bt(d),O=$n(f,p,h,m,y,_,v,T,I,R);for(const N of[f,p,h,m,y,_,v,T,I,R]){if(!Number.isFinite(N))throw new RangeError("infinite values not allowed as duration fields");const x=Math.sign(N);if(x!==0&&x!==O)throw new RangeError("mixed-sign values not allowed as duration fields")}wr(this),re(this,Mt,f),re(this,ht,p),re(this,Gt,h),re(this,Ct,m),re(this,Lt,y),re(this,$t,_),re(this,kt,v),re(this,Pt,T),re(this,Ut,I),re(this,Ft,R),Object.defineProperty(this,"_repr_",{value:`${this[Symbol.toStringTag]} <${xa(this)}>`,writable:!1,enumerable:!1,configurable:!1})}get years(){if(!Ge(this))throw new TypeError("invalid receiver");return u(this,Mt)}get months(){if(!Ge(this))throw new TypeError("invalid receiver");return u(this,ht)}get weeks(){if(!Ge(this))throw new TypeError("invalid receiver");return u(this,Gt)}get days(){if(!Ge(this))throw new TypeError("invalid receiver");return u(this,Ct)}get hours(){if(!Ge(this))throw new TypeError("invalid receiver");return u(this,Lt)}get minutes(){if(!Ge(this))throw new TypeError("invalid receiver");return u(this,$t)}get seconds(){if(!Ge(this))throw new TypeError("invalid receiver");return u(this,kt)}get milliseconds(){if(!Ge(this))throw new TypeError("invalid receiver");return u(this,Pt)}get microseconds(){if(!Ge(this))throw new TypeError("invalid receiver");return u(this,Ut)}get nanoseconds(){if(!Ge(this))throw new TypeError("invalid receiver");return u(this,Ft)}get sign(){if(!Ge(this))throw new TypeError("invalid receiver");return $n(u(this,Mt),u(this,ht),u(this,Gt),u(this,Ct),u(this,Lt),u(this,$t),u(this,kt),u(this,Pt),u(this,Ut),u(this,Ft))}get blank(){if(!Ge(this))throw new TypeError("invalid receiver");return $n(u(this,Mt),u(this,ht),u(this,Gt),u(this,Ct),u(this,Lt),u(this,$t),u(this,kt),u(this,Pt),u(this,Ut),u(this,Ft))===0}with(e){if(!Ge(this))throw new TypeError("invalid receiver");const n=gi(e,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"]);if(!n)throw new TypeError("invalid duration-like");const{years:r=u(this,Mt),months:i=u(this,ht),weeks:s=u(this,Gt),days:o=u(this,Ct),hours:a=u(this,Lt),minutes:c=u(this,$t),seconds:l=u(this,kt),milliseconds:d=u(this,Pt),microseconds:f=u(this,Ut),nanoseconds:p=u(this,Ft)}=n;return new ur(r,i,s,o,a,c,l,d,f,p)}negated(){if(!Ge(this))throw new TypeError("invalid receiver");return lg(this)}abs(){if(!Ge(this))throw new TypeError("invalid receiver");return new ur(Math.abs(u(this,Mt)),Math.abs(u(this,ht)),Math.abs(u(this,Gt)),Math.abs(u(this,Ct)),Math.abs(u(this,Lt)),Math.abs(u(this,$t)),Math.abs(u(this,kt)),Math.abs(u(this,Pt)),Math.abs(u(this,Ut)),Math.abs(u(this,Ft)))}add(e,n=void 0){if(!Ge(this))throw new TypeError("invalid receiver");let{years:r,months:i,weeks:s,days:o,hours:a,minutes:c,seconds:l,milliseconds:d,microseconds:f,nanoseconds:p}=Un(e);const h=J(n),m=io(h);return{years:r,months:i,weeks:s,days:o,hours:a,minutes:c,seconds:l,milliseconds:d,microseconds:f,nanoseconds:p}=$u(u(this,Mt),u(this,ht),u(this,Gt),u(this,Ct),u(this,Lt),u(this,$t),u(this,kt),u(this,Pt),u(this,Ut),u(this,Ft),r,i,s,o,a,c,l,d,f,p,m),new ur(r,i,s,o,a,c,l,d,f,p)}subtract(e,n=void 0){if(!Ge(this))throw new TypeError("invalid receiver");let{years:r,months:i,weeks:s,days:o,hours:a,minutes:c,seconds:l,milliseconds:d,microseconds:f,nanoseconds:p}=Un(e);const h=J(n),m=io(h);return{years:r,months:i,weeks:s,days:o,hours:a,minutes:c,seconds:l,milliseconds:d,microseconds:f,nanoseconds:p}=$u(u(this,Mt),u(this,ht),u(this,Gt),u(this,Ct),u(this,Lt),u(this,$t),u(this,kt),u(this,Pt),u(this,Ut),u(this,Ft),-r,-i,-s,-o,-a,-c,-l,-d,-f,-p,m),new ur(r,i,s,o,a,c,l,d,f,p)}round(e){if(!Ge(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let n=u(this,Mt),r=u(this,ht),i=u(this,Gt),s=u(this,Ct),o=u(this,Lt),a=u(this,$t),c=u(this,kt),l=u(this,Pt),d=u(this,Ut),f=u(this,Ft),p=Iu(n,r,i,s,o,a,c,l,d,f);const h=typeof e=="string"?ks("smallestUnit",e):J(e);let m=zt(h,void 0),y=!0;m||(y=!1,m="nanosecond"),p=Fn(p,m);let _=mn(h,void 0),v=!0;if(_||(v=!1,_=p),_==="auto"&&(_=p),!y&&!v)throw new RangeError("at least one of smallestUnit or largestUnit is required");Dn(_,m);const T=lt(h,"halfExpand"),I=Lo(h,m);let R=io(h);return{years:n,months:r,weeks:i,days:s}=Oa(n,r,i,s,_,R),{years:n,months:r,weeks:i,days:s,hours:o,minutes:a,seconds:c,milliseconds:l,microseconds:d,nanoseconds:f}=Rn(n,r,i,s,o,a,c,l,d,f,I,m,T,R),{years:n,months:r,weeks:i,days:s,hours:o,minutes:a,seconds:c,milliseconds:l,microseconds:d,nanoseconds:f}=Pu(n,r,i,s,o,a,c,l,d,f,I,m,T,R),{years:n,months:r,weeks:i,days:s}=$0(n,r,i,s,_,R),Y(R)&&(R=ku(R,n,r,i,0)),{days:s,hours:o,minutes:a,seconds:c,milliseconds:l,microseconds:d,nanoseconds:f}=Dt(s,o,a,c,l,d,f,_,R),new ur(n,r,i,s,o,a,c,l,d,f)}total(e){if(!Ge(this))throw new TypeError("invalid receiver");let n=u(this,Mt),r=u(this,ht),i=u(this,Gt),s=u(this,Ct),o=u(this,Lt),a=u(this,$t),c=u(this,kt),l=u(this,Pt),d=u(this,Ut),f=u(this,Ft);if(e===void 0)throw new TypeError("options argument is required");const p=typeof e=="string"?ks("unit",e):J(e),h=N0(p);if(h===void 0)throw new RangeError("unit option is required");const m=io(p);({years:n,months:r,weeks:i,days:s}=Oa(n,r,i,s,h,m));let y;Y(m)&&(y=ku(m,n,r,i,0)),{days:s,hours:o,minutes:a,seconds:c,milliseconds:l,microseconds:d,nanoseconds:f}=Dt(s,o,a,c,l,d,f,h,y);const{total:_}=Rn(n,r,i,s,o,a,c,l,d,f,1,h,"trunc",m);return _}toString(e=void 0){if(!Ge(this))throw new TypeError("invalid receiver");const n=J(e),{precision:r,unit:i,increment:s}=Xo(n);if(r==="minute")throw new RangeError('smallestUnit must not be "minute"');const o=lt(n,"trunc");return xa(this,r,{unit:i,increment:s,roundingMode:o})}toJSON(){if(!Ge(this))throw new TypeError("invalid receiver");return xa(this)}toLocaleString(e=void 0,n=void 0){if(!Ge(this))throw new TypeError("invalid receiver");return typeof Intl!="undefined"&&typeof Intl.DurationFormat!="undefined"?new Intl.DurationFormat(e,n).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),xa(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(e){return Ge(e)?new ur(u(e,Mt),u(e,ht),u(e,Gt),u(e,Ct),u(e,Lt),u(e,$t),u(e,kt),u(e,Pt),u(e,Ut),u(e,Ft)):Ts(e)}static compare(e,n,r=void 0){const i=Ts(e),s=Ts(n),o=J(r),a=io(o),c=u(i,Mt),l=u(i,ht),d=u(i,Gt);let f=u(i,Ct);const p=u(i,Lt),h=u(i,$t),m=u(i,kt),y=u(i,Pt),_=u(i,Ut);let v=u(i,Ft);const T=u(s,Mt),I=u(s,ht),R=u(s,Gt);let O=u(s,Ct);const N=u(s,Lt),x=u(s,$t),C=u(s,kt),$=u(s,Pt),te=u(s,Ut);let q=u(s,Ft);const de=mh(a,c,l,d,f,p,h,m,y,_,v),Ie=mh(a,T,I,R,O,N,x,C,$,te,q);(c!==0||T!==0||l!==0||I!==0||d!==0||R!==0)&&({days:f}=Oa(c,l,d,f,"day",a),{days:O}=Oa(T,I,R,O,"day",a));const se=$s(f,p,h,m,y,_,v,de),U=$s(O,N,x,C,$,te,q,Ie);return Fi(g.toNumber(g.subtract(se,U)))}}yr(ur,"Temporal.Duration");const tb=Object.create;class Fd{constructor(e,n,r=nt(),i=1972){const s=De(e),o=De(n),a=Rt(r),c=De(i);if(arguments.length<2)throw new RangeError("missing argument: isoMonth and isoDay are required");Kp(this,s,o,a,c)}get monthCode(){if(!wt(this))throw new TypeError("invalid receiver");return Jo(u(this,S),this)}get day(){if(!wt(this))throw new TypeError("invalid receiver");return Oc(u(this,S),this)}get calendar(){if(!wt(this))throw new TypeError("invalid receiver");return u(this,S)}with(e,n=void 0){if(!wt(this))throw new TypeError("invalid receiver");if(!Ae(e))throw new TypeError("invalid argument");zs(e);const r=u(this,S),i=Ve(r,["day","month","monthCode","year"]),s=gi(e,i);if(!s)throw new TypeError("invalid month-day-like");let o=ki(this,i);o=qi(r,o,s),o=ki(o,i);const a=J(n);return Ls(r,o,a)}equals(e){if(!wt(this))throw new TypeError("invalid receiver");const n=ph(e);for(const r of[F,B,k]){const i=u(this,r),s=u(n,r);if(i!==s)return!1}return ea(u(this,S),u(n,S))}toString(e=void 0){if(!wt(this))throw new TypeError("invalid receiver");const n=J(e),r=Qo(n);return Nu(this,r)}toJSON(){if(!wt(this))throw new TypeError("invalid receiver");return Nu(this)}toLocaleString(e=void 0,n=void 0){if(!wt(this))throw new TypeError("invalid receiver");return new Xi(e,n).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(e){if(!wt(this))throw new TypeError("invalid receiver");if(!Ae(e))throw new TypeError("argument should be an object");const n=u(this,S),r=Ve(n,["day","monthCode"]),i=ki(this,r),s=Ve(n,["year"]),o=[["year",void 0]];s.forEach(p=>{o.some(([h])=>h===p)||o.push([p,void 0])});const a=It(e,o);let c=qi(n,i,a);const l=[...new Set([...r,...s])],d=[];l.forEach(p=>{d.some(([h])=>h===p)||d.push([p,void 0])}),c=It(c,d);const f=tb(null);return f.overflow="reject",Xn(n,c,f)}getISOFields(){if(!wt(this))throw new TypeError("invalid receiver");return{calendar:u(this,S),isoDay:u(this,B),isoMonth:u(this,F),isoYear:u(this,k)}}static from(e,n=void 0){const r=J(n);return wt(e)?(Et(r),$o(u(e,F),u(e,B),u(e,S),u(e,k))):ph(e,r)}}yr(Fd,"Temporal.PlainMonthDay");const Bd=()=>{const t=G("%Temporal.Instant%");return new t(kd())},Rg=(t,e=mi())=>{const n=Zt(e),r=Rt(t),i=Bd();return yn(n,i,r)},qd=(t=mi())=>{const e=Zt(t),n=nt(),r=Bd();return yn(e,r,n)},xg=(t,e=mi())=>{const n=Zt(e),r=Rt(t);return _t(kd(),n,r)},nb=(t=mi())=>xg(nt(),t),rb=(t,e=mi())=>Pi(Rg(t,e)),ib=(t=mi())=>Pi(qd(t)),sb=(t=mi())=>Ad(qd(t)),mi=()=>U0(),Og={instant:Bd,plainDateTime:Rg,plainDateTimeISO:qd,plainDate:rb,plainDateISO:ib,plainTimeISO:sb,timeZone:mi,zonedDateTime:xg,zonedDateTimeISO:nb,[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(Og,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});const ob=Object.assign,ao=["year","month","week","day"],jl={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3};function Ml(t,e,n=void 0){let r=u(t,Z),i=u(t,V),s=u(t,W),o=u(t,Q),a=u(t,X),c=u(t,K);if(n){const{unit:p,increment:h,roundingMode:m}=n;({hour:r,minute:i,second:s,millisecond:o,microsecond:a,nanosecond:c}=$d(r,i,s,o,a,c,h,p,m))}const l=$e(r),d=$e(i),f=Cc(s,o,a,c,e);return`${l}:${d}${f}`}class jr{constructor(e=0,n=0,r=0,i=0,s=0,o=0){const a=De(e),c=De(n),l=De(r),d=De(i),f=De(s),p=De(o);Lc(a,c,l,d,f,p),wr(this),re(this,Z,a),re(this,V,c),re(this,W,l),re(this,Q,d),re(this,X,f),re(this,K,p),re(this,S,nt()),Object.defineProperty(this,"_repr_",{value:`${this[Symbol.toStringTag]} <${Ml(this,"auto")}>`,writable:!1,enumerable:!1,configurable:!1})}get calendar(){if(!He(this))throw new TypeError("invalid receiver");return u(this,S)}get hour(){if(!He(this))throw new TypeError("invalid receiver");return u(this,Z)}get minute(){if(!He(this))throw new TypeError("invalid receiver");return u(this,V)}get second(){if(!He(this))throw new TypeError("invalid receiver");return u(this,W)}get millisecond(){if(!He(this))throw new TypeError("invalid receiver");return u(this,Q)}get microsecond(){if(!He(this))throw new TypeError("invalid receiver");return u(this,X)}get nanosecond(){if(!He(this))throw new TypeError("invalid receiver");return u(this,K)}with(e,n=void 0){if(!He(this))throw new TypeError("invalid receiver");if(!Ae(e))throw new TypeError("invalid argument");zs(e);const r=J(n),i=Et(r),s=gi(e,["hour","microsecond","millisecond","minute","nanosecond","second"]);if(!s)throw new TypeError("invalid time-like");const o=Dd(this);let{hour:a,minute:c,second:l,millisecond:d,microsecond:f,nanosecond:p}=ob(o,s);return{hour:a,minute:c,second:l,millisecond:d,microsecond:f,nanosecond:p}=bo(a,c,l,d,f,p,i),new jr(a,c,l,d,f,p)}add(e){if(!He(this))throw new TypeError("invalid receiver");const n=Un(e),{hours:r,minutes:i,seconds:s,milliseconds:o,microseconds:a,nanoseconds:c}=n;let l=u(this,Z),d=u(this,V),f=u(this,W),p=u(this,Q),h=u(this,X),m=u(this,K);return{hour:l,minute:d,second:f,millisecond:p,microsecond:h,nanosecond:m}=Lu(l,d,f,p,h,m,r,i,s,o,a,c),{hour:l,minute:d,second:f,millisecond:p,microsecond:h,nanosecond:m}=bo(l,d,f,p,h,m,"reject"),new jr(l,d,f,p,h,m)}subtract(e){if(!He(this))throw new TypeError("invalid receiver");const n=Un(e),{hours:r,minutes:i,seconds:s,milliseconds:o,microseconds:a,nanoseconds:c}=n;let l=u(this,Z),d=u(this,V),f=u(this,W),p=u(this,Q),h=u(this,X),m=u(this,K);return{hour:l,minute:d,second:f,millisecond:p,microsecond:h,nanosecond:m}=Lu(l,d,f,p,h,m,-r,-i,-s,-o,-a,-c),{hour:l,minute:d,second:f,millisecond:p,microsecond:h,nanosecond:m}=bo(l,d,f,p,h,m,"reject"),new jr(l,d,f,p,h,m)}until(e,n=void 0){if(!He(this))throw new TypeError("invalid receiver");const r=lr(e),i=J(n),s=mn(i,"auto",ao,"hour"),o=zt(i,"nanosecond",ao);Dn(s,o);const a=lt(i,"trunc"),c=In(i,jl[o],!1);let{hours:l,minutes:d,seconds:f,milliseconds:p,microseconds:h,nanoseconds:m}=Mu(u(this,Z),u(this,V),u(this,W),u(this,Q),u(this,X),u(this,K),u(r,Z),u(r,V),u(r,W),u(r,Q),u(r,X),u(r,K));({hours:l,minutes:d,seconds:f,milliseconds:p,microseconds:h,nanoseconds:m}=Rn(0,0,0,0,l,d,f,p,h,m,c,o,a)),{hours:l,minutes:d,seconds:f,milliseconds:p,microseconds:h,nanoseconds:m}=Dt(0,l,d,f,p,h,m,s);const y=G("%Temporal.Duration%");return new y(0,0,0,0,l,d,f,p,h,m)}since(e,n=void 0){if(!He(this))throw new TypeError("invalid receiver");const r=lr(e),i=J(n),s=mn(i,"auto",ao,"hour"),o=zt(i,"nanosecond",ao);Dn(s,o);const a=lt(i,"trunc"),c=In(i,jl[o],!1);let{hours:l,minutes:d,seconds:f,milliseconds:p,microseconds:h,nanoseconds:m}=Mu(u(r,Z),u(r,V),u(r,W),u(r,Q),u(r,X),u(r,K),u(this,Z),u(this,V),u(this,W),u(this,Q),u(this,X),u(this,K));({hours:l,minutes:d,seconds:f,milliseconds:p,microseconds:h,nanoseconds:m}=Rn(0,0,0,0,-l,-d,-f,-p,-h,-m,c,o,Wo(a))),l=-l,d=-d,f=-f,p=-p,h=-h,m=-m,{hours:l,minutes:d,seconds:f,milliseconds:p,microseconds:h,nanoseconds:m}=Dt(0,l,d,f,p,h,m,s);const y=G("%Temporal.Duration%");return new y(0,0,0,0,l,d,f,p,h,m)}round(e){if(!He(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const n=typeof e=="string"?ks("smallestUnit",e):J(e),r=zt(n,void 0,ao);if(r===void 0)throw new RangeError("smallestUnit is required");const i=lt(n,"halfExpand"),s=In(n,jl[r],!1);let o=u(this,Z),a=u(this,V),c=u(this,W),l=u(this,Q),d=u(this,X),f=u(this,K);return{hour:o,minute:a,second:c,millisecond:l,microsecond:d,nanosecond:f}=$d(o,a,c,l,d,f,s,r,i),new jr(o,a,c,l,d,f)}equals(e){if(!He(this))throw new TypeError("invalid receiver");const n=lr(e);for(const r of[Z,V,W,Q,X,K]){const i=u(this,r),s=u(n,r);if(i!==s)return!1}return!0}toString(e=void 0){if(!He(this))throw new TypeError("invalid receiver");const n=J(e),{precision:r,unit:i,increment:s}=Xo(n),o=lt(n,"trunc");return Ml(this,r,{unit:i,increment:s,roundingMode:o})}toJSON(){if(!He(this))throw new TypeError("invalid receiver");return Ml(this,"auto")}toLocaleString(e=void 0,n=void 0){if(!He(this))throw new TypeError("invalid receiver");return new Xi(e,n).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(e){if(!He(this))throw new TypeError("invalid receiver");const n=Ee(e),r=u(n,k),i=u(n,F),s=u(n,B),o=u(n,S),a=u(this,Z),c=u(this,V),l=u(this,W),d=u(this,Q),f=u(this,X),p=u(this,K);return Jt(r,i,s,a,c,l,d,f,p,o)}toZonedDateTime(e){if(!He(this))throw new TypeError("invalid receiver");if(!Ae(e))throw new TypeError("invalid argument");const n=e.plainDate;if(n===void 0)throw new TypeError("missing date property");const r=Ee(n),i=e.timeZone;if(i===void 0)throw new TypeError("missing timeZone property");const s=Zt(i),o=u(r,k),a=u(r,F),c=u(r,B),l=u(r,S),d=u(this,Z),f=u(this,V),p=u(this,W),h=u(this,Q),m=u(this,X),y=u(this,K),_=G("%Temporal.PlainDateTime%"),v=new _(o,a,c,d,f,p,h,m,y,l),T=Ht(s,v,"compatible");return _t(u(T,z),s,l)}getISOFields(){if(!He(this))throw new TypeError("invalid receiver");return{calendar:u(this,S),isoHour:u(this,Z),isoMicrosecond:u(this,X),isoMillisecond:u(this,Q),isoMinute:u(this,V),isoNanosecond:u(this,K),isoSecond:u(this,W)}}static from(e,n=void 0){const r=J(n),i=Et(r);return He(e)?new jr(u(e,Z),u(e,V),u(e,W),u(e,Q),u(e,X),u(e,K)):lr(e,i)}static compare(e,n){const r=lr(e),i=lr(n);for(const s of[Z,V,W,Q,X,K]){const o=u(r,s),a=u(i,s);if(o!==a)return Fi(o-a)}return 0}}yr(jr,"Temporal.PlainTime");class Yd{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");const n=Sd(e);wr(this),re(this,Kr,n),Object.defineProperty(this,"_repr_",{value:`${this[Symbol.toStringTag]} <${n}>`,writable:!1,enumerable:!1,configurable:!1})}get id(){if(!sr(this))throw new TypeError("invalid receiver");return H(this)}getOffsetNanosecondsFor(e){if(!sr(this))throw new TypeError("invalid receiver");const n=Kn(e),r=u(this,Kr);return ws(r)?Yi(r):Pr(u(n,z),r)}getOffsetStringFor(e){if(!sr(this))throw new TypeError("invalid receiver");const n=Kn(e);return Ru(this,n)}getPlainDateTimeFor(e,n=nt()){const r=Kn(e),i=Rt(n);return yn(this,r,i)}getInstantFor(e,n=void 0){if(!sr(this))throw new TypeError("invalid receiver");const r=Jr(e),i=J(n),s=Co(i);return Ht(this,r,s)}getPossibleInstantsFor(e){if(!sr(this))throw new TypeError("invalid receiver");const n=Jr(e),r=G("%Temporal.Instant%"),i=u(this,Kr);if(ws(i)){const o=di(u(n,k),u(n,F),u(n,B),u(n,Z),u(n,V),u(n,W),u(n,Q),u(n,X),u(n,K));if(o===null)throw new RangeError("DateTime outside of supported range");const a=Yi(i);return[new r(g.subtract(o,g.BigInt(a)))]}return C0(i,u(n,k),u(n,F),u(n,B),u(n,Z),u(n,V),u(n,W),u(n,Q),u(n,X),u(n,K)).map(o=>new r(o))}getNextTransition(e){if(!sr(this))throw new TypeError("invalid receiver");const n=Kn(e),r=u(this,Kr);if(ws(r)||r==="UTC")return null;let i=u(n,z);const s=G("%Temporal.Instant%");return i=S0(i,r),i===null?null:new s(i)}getPreviousTransition(e){if(!sr(this))throw new TypeError("invalid receiver");const n=Kn(e),r=u(this,Kr);if(ws(r)||r==="UTC")return null;let i=u(n,z);const s=G("%Temporal.Instant%");return i=ag(i,r),i===null?null:new s(i)}toString(){if(!sr(this))throw new TypeError("invalid receiver");return H(u(this,Kr))}toJSON(){if(!sr(this))throw new TypeError("invalid receiver");return H(this)}static from(e){return Zt(e)}}yr(Yd,"Temporal.TimeZone");const ab=Object.create,Aa=["week","day","hour","minute","second","millisecond","microsecond","nanosecond"];class zd{constructor(e,n,r=nt(),i=1){const s=De(e),o=De(n),a=Rt(r),c=De(i);if(arguments.length<2)throw new RangeError("missing argument: isoYear and isoMonth are required");Jp(this,s,o,a,c)}get year(){if(!be(this))throw new TypeError("invalid receiver");return Rc(u(this,S),this)}get month(){if(!be(this))throw new TypeError("invalid receiver");return xc(u(this,S),this)}get monthCode(){if(!be(this))throw new TypeError("invalid receiver");return Jo(u(this,S),this)}get calendar(){if(!be(this))throw new TypeError("invalid receiver");return u(this,S)}get era(){if(!be(this))throw new TypeError("invalid receiver");return Nc(u(this,S),this)}get eraYear(){if(!be(this))throw new TypeError("invalid receiver");return Ac(u(this,S),this)}get daysInMonth(){if(!be(this))throw new TypeError("invalid receiver");return Es(u(this,S),this)}get daysInYear(){if(!be(this))throw new TypeError("invalid receiver");return Sc(u(this,S),this)}get monthsInYear(){if(!be(this))throw new TypeError("invalid receiver");return jc(u(this,S),this)}get inLeapYear(){if(!be(this))throw new TypeError("invalid receiver");return Mc(u(this,S),this)}with(e,n=void 0){if(!be(this))throw new TypeError("invalid receiver");if(!Ae(e))throw new TypeError("invalid argument");zs(e);const r=u(this,S),i=Ve(r,["month","monthCode","year"]),s=gi(e,i);if(!s)throw new TypeError("invalid year-month-like");let o=rn(this,i);o=qi(r,o,s),o=rn(o,i);const a=J(n);return li(r,o,a)}add(e,n=void 0){if(!be(this))throw new TypeError("invalid receiver");const r=Un(e);let{years:i,months:s,weeks:o,days:a,hours:c,minutes:l,seconds:d,milliseconds:f,microseconds:p,nanoseconds:h}=r;({days:a}=Dt(a,c,l,d,f,p,h,"day"));const m=J(n),y=u(this,S),_=Ve(y,["monthCode","year"]),v=rn(this,_),I=$n(i,s,o,a,0,0,0,0,0,0)<0?Ms(Es(y,this)):1,R=Xn(y,{...v,day:I}),O={...m},N=Yt(y,R,{...r,days:a},m),x=rn(N,_);return li(y,x,O)}subtract(e,n=void 0){if(!be(this))throw new TypeError("invalid receiver");let r=Un(e);r={years:-r.years,months:-r.months,weeks:-r.weeks,days:-r.days,hours:-r.hours,minutes:-r.minutes,seconds:-r.seconds,milliseconds:-r.milliseconds,microseconds:-r.microseconds,nanoseconds:-r.nanoseconds};let{years:i,months:s,weeks:o,days:a,hours:c,minutes:l,seconds:d,milliseconds:f,microseconds:p,nanoseconds:h}=r;({days:a}=Dt(a,c,l,d,f,p,h,"day"));const m=J(n),y=u(this,S),_=Ve(y,["monthCode","year"]),v=rn(this,_),I=$n(i,s,o,a,0,0,0,0,0,0)<0?Ms(Es(y,this)):1,R=Xn(y,{...v,day:I}),O={...m},N=Yt(y,R,{...r,days:a},m),x=rn(N,_);return li(y,x,O)}until(e,n=void 0){if(!be(this))throw new TypeError("invalid receiver");const r=us(e),i=u(this,S),s=u(r,S),o=H(i),a=H(s);if(o!==a)throw new RangeError(`cannot compute difference between months of ${o} and ${a} calendars`);const c=J(n),l=zt(c,"month",Aa),d=mn(c,"auto",Aa,"year");Dn(d,l);const f=lt(c,"trunc"),p=In(c,void 0,!1),h=Ve(i,["monthCode","year"]),m=rn(r,h),y=rn(this,h),_=Xn(i,{...m,day:1}),v=Xn(i,{...y,day:1}),T={...c,largestUnit:d},I=hr(i,v,_,T);if(l==="month"&&p===1)return I;let{years:R,months:O}=I;({years:R,months:O}=Rn(R,O,0,0,0,0,0,0,0,0,p,l,f,v));const N=G("%Temporal.Duration%");return new N(R,O,0,0,0,0,0,0,0,0)}since(e,n=void 0){if(!be(this))throw new TypeError("invalid receiver");const r=us(e),i=u(this,S),s=u(r,S),o=H(i),a=H(s);if(o!==a)throw new RangeError(`cannot compute difference between months of ${o} and ${a} calendars`);const c=J(n),l=zt(c,"month",Aa),d=mn(c,"auto",Aa,"year");Dn(d,l);const f=lt(c,"trunc"),p=In(c,void 0,!1),h=Ve(i,["monthCode","year"]),m=rn(r,h),y=rn(this,h),_=Xn(i,{...m,day:1}),v=Xn(i,{...y,day:1}),T={...c,largestUnit:d};let{years:I,months:R}=hr(i,v,_,T);const O=G("%Temporal.Duration%");return l==="month"&&p===1?new O(-I,-R,0,0,0,0,0,0,0,0):({years:I,months:R}=Rn(I,R,0,0,0,0,0,0,0,0,p,l,Wo(f),v),new O(-I,-R,0,0,0,0,0,0,0,0))}equals(e){if(!be(this))throw new TypeError("invalid receiver");const n=us(e);for(const r of[k,F,B]){const i=u(this,r),s=u(n,r);if(i!==s)return!1}return ea(u(this,S),u(n,S))}toString(e=void 0){if(!be(this))throw new TypeError("invalid receiver");const n=J(e),r=Qo(n);return Au(this,r)}toJSON(){if(!be(this))throw new TypeError("invalid receiver");return Au(this)}toLocaleString(e=void 0,n=void 0){if(!be(this))throw new TypeError("invalid receiver");return new Xi(e,n).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(e){if(!be(this))throw new TypeError("invalid receiver");if(!Ae(e))throw new TypeError("argument should be an object");const n=u(this,S),r=Ve(n,["monthCode","year"]),i=rn(this,r),s=Ve(n,["day"]),o=[["day"]];s.forEach(p=>{o.some(([h])=>h===p)||o.push([p,void 0])});const a=It(e,o);let c=qi(n,i,a);const l=[...new Set([...r,...s])],d=[];l.forEach(p=>{d.some(([h])=>h===p)||d.push([p,void 0])}),c=It(c,d);const f=ab(null);return f.overflow="reject",Xn(n,c,f)}getISOFields(){if(!be(this))throw new TypeError("invalid receiver");return{calendar:u(this,S),isoDay:u(this,B),isoMonth:u(this,F),isoYear:u(this,k)}}static from(e,n=void 0){const r=J(n);return be(e)?(Et(r),ko(u(e,k),u(e,F),u(e,S),u(e,B))):us(e,r)}static compare(e,n){const r=us(e),i=us(n);return Sr(u(r,k),u(r,F),u(r,B),u(i,k),u(i,F),u(i,B))}}yr(zd,"Temporal.PlainYearMonth");const cb=Array.prototype.push;class Gd{constructor(e,n,r=nt()){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const i=_o(e),s=Zt(n),o=Rt(r);eg(this,i,s,o)}get calendar(){if(!Y(this))throw new TypeError("invalid receiver");return u(this,S)}get timeZone(){if(!Y(this))throw new TypeError("invalid receiver");return u(this,me)}get year(){if(!Y(this))throw new TypeError("invalid receiver");return Rc(u(this,S),Se(this))}get month(){if(!Y(this))throw new TypeError("invalid receiver");return xc(u(this,S),Se(this))}get monthCode(){if(!Y(this))throw new TypeError("invalid receiver");return Jo(u(this,S),Se(this))}get day(){if(!Y(this))throw new TypeError("invalid receiver");return Oc(u(this,S),Se(this))}get hour(){if(!Y(this))throw new TypeError("invalid receiver");return u(Se(this),Z)}get minute(){if(!Y(this))throw new TypeError("invalid receiver");return u(Se(this),V)}get second(){if(!Y(this))throw new TypeError("invalid receiver");return u(Se(this),W)}get millisecond(){if(!Y(this))throw new TypeError("invalid receiver");return u(Se(this),Q)}get microsecond(){if(!Y(this))throw new TypeError("invalid receiver");return u(Se(this),X)}get nanosecond(){if(!Y(this))throw new TypeError("invalid receiver");return u(Se(this),K)}get era(){if(!Y(this))throw new TypeError("invalid receiver");return Nc(u(this,S),Se(this))}get eraYear(){if(!Y(this))throw new TypeError("invalid receiver");return Ac(u(this,S),Se(this))}get epochSeconds(){if(!Y(this))throw new TypeError("invalid receiver");const e=u(this,z);return g.toNumber(g.divide(e,kr))}get epochMilliseconds(){if(!Y(this))throw new TypeError("invalid receiver");const e=u(this,z);return g.toNumber(g.divide(e,En))}get epochMicroseconds(){if(!Y(this))throw new TypeError("invalid receiver");const e=u(this,z);return pc(g.divide(e,_e))}get epochNanoseconds(){if(!Y(this))throw new TypeError("invalid receiver");return pc(u(this,z))}get dayOfWeek(){if(!Y(this))throw new TypeError("invalid receiver");return Rd(u(this,S),Se(this))}get dayOfYear(){if(!Y(this))throw new TypeError("invalid receiver");return xd(u(this,S),Se(this))}get weekOfYear(){if(!Y(this))throw new TypeError("invalid receiver");return Od(u(this,S),Se(this))}get hoursInDay(){if(!Y(this))throw new TypeError("invalid receiver");const e=Se(this),n=G("%Temporal.PlainDateTime%"),r=u(e,k),i=u(e,F),s=u(e,B),o=new n(r,i,s,0,0,0,0,0,0),a=Ui(r,i,s,0,0,0,1,"reject"),c=new n(a.year,a.month,a.day,0,0,0,0,0,0),l=u(this,me),d=u(Ht(l,o,"compatible"),z),f=u(Ht(l,c,"compatible"),z);return g.toNumber(g.subtract(f,d))/36e11}get daysInWeek(){if(!Y(this))throw new TypeError("invalid receiver");return Nd(u(this,S),Se(this))}get daysInMonth(){if(!Y(this))throw new TypeError("invalid receiver");return Es(u(this,S),Se(this))}get daysInYear(){if(!Y(this))throw new TypeError("invalid receiver");return Sc(u(this,S),Se(this))}get monthsInYear(){if(!Y(this))throw new TypeError("invalid receiver");return jc(u(this,S),Se(this))}get inLeapYear(){if(!Y(this))throw new TypeError("invalid receiver");return Mc(u(this,S),Se(this))}get offset(){if(!Y(this))throw new TypeError("invalid receiver");return Ru(u(this,me),u(this,Nt))}get offsetNanoseconds(){if(!Y(this))throw new TypeError("invalid receiver");return er(u(this,me),u(this,Nt))}with(e,n=void 0){if(!Y(this))throw new TypeError("invalid receiver");if(!Ae(e))throw new TypeError("invalid zoned-date-time-like");zs(e);const r=J(n),i=Co(r),s=Eu(r,"prefer"),o=u(this,me),a=u(this,S),c=Ve(a,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);cb.call(c,"offset");const l=gi(e,c);if(!l)throw new TypeError("invalid zoned-date-time-like");const d=[["day",void 0],["hour",0],["microsecond",0],["millisecond",0],["minute",0],["month",void 0],["monthCode",void 0],["nanosecond",0],["second",0],["year",void 0],["offset"],["timeZone"]];c.forEach(x=>{d.some(([C])=>C===x)||d.push([x,void 0])});let f=It(this,d);f=qi(a,f,l),f=It(f,d);const{year:p,month:h,day:m,hour:y,minute:_,second:v,millisecond:T,microsecond:I,nanosecond:R}=Ko(a,f,r),O=Yi(f.offset),N=ac(p,h,m,y,_,v,T,I,R,"option",O,o,i,s,!1);return _t(N,u(this,me),a)}withPlainDate(e){if(!Y(this))throw new TypeError("invalid receiver");const n=Ee(e),r=u(n,k),i=u(n,F),s=u(n,B);let o=u(n,S);const a=Se(this),c=u(a,Z),l=u(a,V),d=u(a,W),f=u(a,Q),p=u(a,X),h=u(a,K);o=tg(u(this,S),o);const m=u(this,me),y=G("%Temporal.PlainDateTime%"),_=new y(r,i,s,c,l,d,f,p,h,o),v=Ht(m,_,"compatible");return _t(u(v,z),m,o)}withPlainTime(e=void 0){if(!Y(this))throw new TypeError("invalid receiver");const n=G("%Temporal.PlainTime%"),r=e==null?new n:lr(e),i=Se(this),s=u(i,k),o=u(i,F),a=u(i,B),c=u(this,S),l=u(r,Z),d=u(r,V),f=u(r,W),p=u(r,Q),h=u(r,X),m=u(r,K),y=u(this,me),_=G("%Temporal.PlainDateTime%"),v=new _(s,o,a,l,d,f,p,h,m,c),T=Ht(y,v,"compatible");return _t(u(T,z),y,c)}withTimeZone(e){if(!Y(this))throw new TypeError("invalid receiver");const n=Zt(e);return _t(u(this,z),n,u(this,S))}withCalendar(e){if(!Y(this))throw new TypeError("invalid receiver");const n=Rt(e);return _t(u(this,z),u(this,me),n)}add(e,n=void 0){if(!Y(this))throw new TypeError("invalid receiver");const r=Un(e),{years:i,months:s,weeks:o,days:a,hours:c,minutes:l,seconds:d,milliseconds:f,microseconds:p,nanoseconds:h}=r,m=J(n),y=u(this,me),_=u(this,S),v=gn(u(this,Nt),y,_,i,s,o,a,c,l,d,f,p,h,m);return _t(v,y,_)}subtract(e,n=void 0){if(!Y(this))throw new TypeError("invalid receiver");const r=Un(e),{years:i,months:s,weeks:o,days:a,hours:c,minutes:l,seconds:d,milliseconds:f,microseconds:p,nanoseconds:h}=r,m=J(n),y=u(this,me),_=u(this,S),v=gn(u(this,Nt),y,_,-i,-s,-o,-a,-c,-l,-d,-f,-p,-h,m);return _t(v,y,_)}until(e,n=void 0){if(!Y(this))throw new TypeError("invalid receiver");const r=ds(e),i=u(this,S),s=u(r,S),o=H(i),a=H(s);if(o!==a)throw new RangeError(`cannot compute difference between dates of ${o} and ${a} calendars`);const c=J(n),l=zt(c,"nanosecond"),d=Fn("hour",l),f=mn(c,"auto",[],d);Dn(f,l);const p=lt(c,"trunc"),h=Lo(c,l),m=u(this,z),y=u(r,z);let _,v,T,I,R,O,N,x,C,$;if(f!=="year"&&f!=="month"&&f!=="week"&&f!=="day")_=0,v=0,T=0,I=0,{seconds:N,milliseconds:x,microseconds:C,nanoseconds:$}=Uo(m,y,h,l,p),{hours:R,minutes:O,seconds:N,milliseconds:x,microseconds:C,nanoseconds:$}=Dt(0,0,0,N,x,C,$,f);else{const q=u(this,me);if(!Al(q,u(r,me)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");const de={...c,largestUnit:f};({years:_,months:v,weeks:T,days:I,hours:R,minutes:O,seconds:N,milliseconds:x,microseconds:C,nanoseconds:$}=Cu(m,y,q,i,f,de)),{years:_,months:v,weeks:T,days:I,hours:R,minutes:O,seconds:N,milliseconds:x,microseconds:C,nanoseconds:$}=Rn(_,v,T,I,R,O,N,x,C,$,h,l,p,this),{years:_,months:v,weeks:T,days:I,hours:R,minutes:O,seconds:N,milliseconds:x,microseconds:C,nanoseconds:$}=Pu(_,v,T,I,R,O,N,x,C,$,h,l,p,this)}const te=G("%Temporal.Duration%");return new te(_,v,T,I,R,O,N,x,C,$)}since(e,n=void 0){if(!Y(this))throw new TypeError("invalid receiver");const r=ds(e),i=u(this,S),s=u(r,S),o=H(i),a=H(s);if(o!==a)throw new RangeError(`cannot compute difference between dates of ${o} and ${a} calendars`);const c=J(n),l=zt(c,"nanosecond"),d=Fn("hour",l),f=mn(c,"auto",[],d);Dn(f,l);let p=lt(c,"trunc");p=Wo(p);const h=Lo(c,l),m=u(this,z),y=u(r,z);let _,v,T,I,R,O,N,x,C,$;if(f!=="year"&&f!=="month"&&f!=="week"&&f!=="day")_=0,v=0,T=0,I=0,{seconds:N,milliseconds:x,microseconds:C,nanoseconds:$}=Uo(m,y,h,l,p),{hours:R,minutes:O,seconds:N,milliseconds:x,microseconds:C,nanoseconds:$}=Dt(0,0,0,N,x,C,$,f);else{const q=u(this,me);if(!Al(q,u(r,me)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");const de={...c,largestUnit:f};({years:_,months:v,weeks:T,days:I,hours:R,minutes:O,seconds:N,milliseconds:x,microseconds:C,nanoseconds:$}=Cu(m,y,q,i,f,de)),{years:_,months:v,weeks:T,days:I,hours:R,minutes:O,seconds:N,milliseconds:x,microseconds:C,nanoseconds:$}=Rn(_,v,T,I,R,O,N,x,C,$,h,l,p,this),{years:_,months:v,weeks:T,days:I,hours:R,minutes:O,seconds:N,milliseconds:x,microseconds:C,nanoseconds:$}=Pu(_,v,T,I,R,O,N,x,C,$,h,l,p,this)}const te=G("%Temporal.Duration%");return new te(-_,-v,-T,-I,-R,-O,-N,-x,-C,-$)}round(e){if(!Y(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const n=typeof e=="string"?ks("smallestUnit",e):J(e),r=zt(n,void 0,["year","month","week"]);if(r===void 0)throw new RangeError("smallestUnit is required");const i=lt(n,"halfExpand"),o=In(n,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[r],!1),a=Se(this);let c=u(a,k),l=u(a,F),d=u(a,B),f=u(a,Z),p=u(a,V),h=u(a,W),m=u(a,Q),y=u(a,X),_=u(a,K);const v=G("%Temporal.PlainDateTime%"),T=u(this,me),I=u(this,S),R=new v(u(a,k),u(a,F),u(a,B),0,0,0,0,0,0),O=Ht(T,R,"compatible"),N=gn(O,T,I,0,0,0,1,0,0,0,0,0,0),x=g.subtract(N,g.BigInt(u(O,z)));if(g.equal(x,tt))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero-length days");({year:c,month:l,day:d,hour:f,minute:p,second:h,millisecond:m,microsecond:y,nanosecond:_}=Ld(c,l,d,f,p,h,m,y,_,o,r,i,g.toNumber(x)));const C=er(T,u(this,Nt)),$=ac(c,l,d,f,p,h,m,y,_,"option",C,T,"compatible","prefer",!1);return _t($,T,u(this,S))}equals(e){if(!Y(this))throw new TypeError("invalid receiver");const n=ds(e),r=u(this,z),i=u(n,z);return!g.equal(g.BigInt(r),g.BigInt(i))||!Al(u(this,me),u(n,me))?!1:ea(u(this,S),u(n,S))}toString(e=void 0){if(!Y(this))throw new TypeError("invalid receiver");const n=J(e),{precision:r,unit:i,increment:s}=Xo(n),o=lt(n,"trunc"),a=Qo(n),c=x0(n),l=O0(n);return Su(this,r,a,c,l,{unit:i,increment:s,roundingMode:o})}toLocaleString(e=void 0,n=void 0){if(!Y(this))throw new TypeError("invalid receiver");return new Xi(e,n).format(this)}toJSON(){if(!Y(this))throw new TypeError("invalid receiver");return Su(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!Y(this))throw new TypeError("invalid receiver");const e=Se(this),n=G("%Temporal.PlainDateTime%"),r=u(this,S),i=new n(u(e,k),u(e,F),u(e,B),0,0,0,0,0,0,r),s=u(this,me),o=Ht(s,i,"compatible");return _t(u(o,z),s,r)}toInstant(){if(!Y(this))throw new TypeError("invalid receiver");const e=G("%Temporal.Instant%");return new e(u(this,z))}toPlainDate(){if(!Y(this))throw new TypeError("invalid receiver");return Pi(Se(this))}toPlainTime(){if(!Y(this))throw new TypeError("invalid receiver");return Ad(Se(this))}toPlainDateTime(){if(!Y(this))throw new TypeError("invalid receiver");return Se(this)}toPlainYearMonth(){if(!Y(this))throw new TypeError("invalid receiver");const e=u(this,S),n=Ve(e,["monthCode","year"]),r=rn(this,n);return li(e,r)}toPlainMonthDay(){if(!Y(this))throw new TypeError("invalid receiver");const e=u(this,S),n=Ve(e,["day","monthCode"]),r=ki(this,n);return Ls(e,r)}getISOFields(){if(!Y(this))throw new TypeError("invalid receiver");const e=Se(this),n=u(this,me);return{calendar:u(this,S),isoDay:u(e,B),isoHour:u(e,Z),isoMicrosecond:u(e,X),isoMillisecond:u(e,Q),isoMinute:u(e,V),isoMonth:u(e,F),isoNanosecond:u(e,K),isoSecond:u(e,W),isoYear:u(e,k),offset:Ru(n,u(this,Nt)),timeZone:n}}static from(e,n=void 0){const r=J(n);return Y(e)?(Et(r),Co(r),Eu(r,"reject"),_t(u(e,z),u(e,me),u(e,S))):ds(e,r)}static compare(e,n){const r=ds(e),i=ds(n),s=u(r,z),o=u(i,z);return g.lessThan(g.BigInt(s),g.BigInt(o))?-1:g.greaterThan(g.BigInt(s),g.BigInt(o))?1:0}}yr(Gd,"Temporal.ZonedDateTime");function Se(t){return yn(u(t,me),u(t,Nt),u(t,S))}var An=Object.freeze({__proto__:null,Instant:Tn,Calendar:Ic,PlainDate:na,PlainDateTime:ra,Duration:ur,PlainMonthDay:Fd,Now:Og,PlainTime:jr,TimeZone:Yd,PlainYearMonth:zd,ZonedDateTime:Gd});const lb=[Tn,Ic,na,ra,ur,Fd,jr,Yd,zd,Gd];for(const t of lb){const e=Object.getOwnPropertyDescriptor(t,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(t,"prototype",e))}class Ng{constructor(){this.id=Iw()}equals(e){return"id"in e&&this.id===e.id}}var hi={},Uc={};Uc.byteLength=fb;Uc.toByteArray=pb;Uc.fromByteArray=yb;var fr=[],Sn=[],ub=typeof Uint8Array!="undefined"?Uint8Array:Array,Cl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var hs=0,db=Cl.length;hs<db;++hs)fr[hs]=Cl[hs],Sn[Cl.charCodeAt(hs)]=hs;Sn["-".charCodeAt(0)]=62;Sn["_".charCodeAt(0)]=63;function Ag(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function fb(t){var e=Ag(t),n=e[0],r=e[1];return(n+r)*3/4-r}function hb(t,e,n){return(e+n)*3/4-n}function pb(t){var e,n=Ag(t),r=n[0],i=n[1],s=new ub(hb(t,r,i)),o=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)e=Sn[t.charCodeAt(c)]<<18|Sn[t.charCodeAt(c+1)]<<12|Sn[t.charCodeAt(c+2)]<<6|Sn[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Sn[t.charCodeAt(c)]<<2|Sn[t.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=Sn[t.charCodeAt(c)]<<10|Sn[t.charCodeAt(c+1)]<<4|Sn[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function gb(t){return fr[t>>18&63]+fr[t>>12&63]+fr[t>>6&63]+fr[t&63]}function mb(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(gb(r));return i.join("")}function yb(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(mb(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(fr[e>>2]+fr[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(fr[e>>10]+fr[e>>4&63]+fr[e<<2&63]+"=")),i.join("")}var Hd={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Hd.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,c=(1<<a)-1,l=c>>1,d=-7,f=n?i-1:0,p=n?-1:1,h=t[e+f];for(f+=p,s=h&(1<<-d)-1,h>>=-d,d+=a;d>0;s=s*256+t[e+f],f+=p,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=o*256+t[e+f],f+=p,d-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-l}return(h?-1:1)*o*Math.pow(2,s-r)};Hd.write=function(t,e,n,r,i,s){var o,a,c,l=s*8-i-1,d=(1<<l)-1,f=d>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,m=r?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+f>=1?e+=p/c:e+=p*Math.pow(2,1-f),e*c>=2&&(o++,c/=2),o+f>=d?(a=0,o=d):o+f>=1?(a=(e*c-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+h]=a&255,h+=m,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[n+h]=o&255,h+=m,o/=256,l-=8);t[n+h-m]|=y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Uc,n=Hd,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=T,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const E=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(E,w),E.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.byteOffset}});function o(E){if(E>i)throw new RangeError('The value "'+E+'" is invalid for option "size"');const w=new Uint8Array(E);return Object.setPrototypeOf(w,a.prototype),w}function a(E,w,b){if(typeof E=="number"){if(typeof w=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(E)}return c(E,w,b)}a.poolSize=8192;function c(E,w,b){if(typeof E=="string")return p(E,w);if(ArrayBuffer.isView(E))return m(E);if(E==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E);if(rr(E,ArrayBuffer)||E&&rr(E.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(rr(E,SharedArrayBuffer)||E&&rr(E.buffer,SharedArrayBuffer)))return y(E,w,b);if(typeof E=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=E.valueOf&&E.valueOf();if(D!=null&&D!==E)return a.from(D,w,b);const A=_(E);if(A)return A;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof E[Symbol.toPrimitive]=="function")return a.from(E[Symbol.toPrimitive]("string"),w,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E)}a.from=function(E,w,b){return c(E,w,b)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(E){if(typeof E!="number")throw new TypeError('"size" argument must be of type number');if(E<0)throw new RangeError('The value "'+E+'" is invalid for option "size"')}function d(E,w,b){return l(E),E<=0?o(E):w!==void 0?typeof b=="string"?o(E).fill(w,b):o(E).fill(w):o(E)}a.alloc=function(E,w,b){return d(E,w,b)};function f(E){return l(E),o(E<0?0:v(E)|0)}a.allocUnsafe=function(E){return f(E)},a.allocUnsafeSlow=function(E){return f(E)};function p(E,w){if((typeof w!="string"||w==="")&&(w="utf8"),!a.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const b=I(E,w)|0;let D=o(b);const A=D.write(E,w);return A!==b&&(D=D.slice(0,A)),D}function h(E){const w=E.length<0?0:v(E.length)|0,b=o(w);for(let D=0;D<w;D+=1)b[D]=E[D]&255;return b}function m(E){if(rr(E,Uint8Array)){const w=new Uint8Array(E);return y(w.buffer,w.byteOffset,w.byteLength)}return h(E)}function y(E,w,b){if(w<0||E.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(E.byteLength<w+(b||0))throw new RangeError('"length" is outside of buffer bounds');let D;return w===void 0&&b===void 0?D=new Uint8Array(E):b===void 0?D=new Uint8Array(E,w):D=new Uint8Array(E,w,b),Object.setPrototypeOf(D,a.prototype),D}function _(E){if(a.isBuffer(E)){const w=v(E.length)|0,b=o(w);return b.length===0||E.copy(b,0,0,w),b}if(E.length!==void 0)return typeof E.length!="number"||xl(E.length)?o(0):h(E);if(E.type==="Buffer"&&Array.isArray(E.data))return h(E.data)}function v(E){if(E>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return E|0}function T(E){return+E!=E&&(E=0),a.alloc(+E)}a.isBuffer=function(w){return w!=null&&w._isBuffer===!0&&w!==a.prototype},a.compare=function(w,b){if(rr(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),rr(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),!a.isBuffer(w)||!a.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===b)return 0;let D=w.length,A=b.length;for(let M=0,L=Math.min(D,A);M<L;++M)if(w[M]!==b[M]){D=w[M],A=b[M];break}return D<A?-1:A<D?1:0},a.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(w,b){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(w.length===0)return a.alloc(0);let D;if(b===void 0)for(b=0,D=0;D<w.length;++D)b+=w[D].length;const A=a.allocUnsafe(b);let M=0;for(D=0;D<w.length;++D){let L=w[D];if(rr(L,Uint8Array))M+L.length>A.length?(a.isBuffer(L)||(L=a.from(L)),L.copy(A,M)):Uint8Array.prototype.set.call(A,L,M);else if(a.isBuffer(L))L.copy(A,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=L.length}return A};function I(E,w){if(a.isBuffer(E))return E.length;if(ArrayBuffer.isView(E)||rr(E,ArrayBuffer))return E.byteLength;if(typeof E!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof E);const b=E.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&b===0)return 0;let A=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return Rl(E).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return lh(E).length;default:if(A)return D?-1:Rl(E).length;w=(""+w).toLowerCase(),A=!0}}a.byteLength=I;function R(E,w,b){let D=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,w>>>=0,b<=w))return"";for(E||(E="utf8");;)switch(E){case"hex":return Xt(this,w,b);case"utf8":case"utf-8":return se(this,w,b);case"ascii":return it(this,w,b);case"latin1":case"binary":return fn(this,w,b);case"base64":return Ie(this,w,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wn(this,w,b);default:if(D)throw new TypeError("Unknown encoding: "+E);E=(E+"").toLowerCase(),D=!0}}a.prototype._isBuffer=!0;function O(E,w,b){const D=E[w];E[w]=E[b],E[b]=D}a.prototype.swap16=function(){const w=this.length;if(w%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<w;b+=2)O(this,b,b+1);return this},a.prototype.swap32=function(){const w=this.length;if(w%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<w;b+=4)O(this,b,b+3),O(this,b+1,b+2);return this},a.prototype.swap64=function(){const w=this.length;if(w%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<w;b+=8)O(this,b,b+7),O(this,b+1,b+6),O(this,b+2,b+5),O(this,b+3,b+4);return this},a.prototype.toString=function(){const w=this.length;return w===0?"":arguments.length===0?se(this,0,w):R.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(w){if(!a.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w?!0:a.compare(this,w)===0},a.prototype.inspect=function(){let w="";const b=t.INSPECT_MAX_BYTES;return w=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(w+=" ... "),"<Buffer "+w+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(w,b,D,A,M){if(rr(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),!a.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(b===void 0&&(b=0),D===void 0&&(D=w?w.length:0),A===void 0&&(A=0),M===void 0&&(M=this.length),b<0||D>w.length||A<0||M>this.length)throw new RangeError("out of range index");if(A>=M&&b>=D)return 0;if(A>=M)return-1;if(b>=D)return 1;if(b>>>=0,D>>>=0,A>>>=0,M>>>=0,this===w)return 0;let L=M-A,ge=D-b;const ot=Math.min(L,ge),Xe=this.slice(A,M),at=w.slice(b,D);for(let Ue=0;Ue<ot;++Ue)if(Xe[Ue]!==at[Ue]){L=Xe[Ue],ge=at[Ue];break}return L<ge?-1:ge<L?1:0};function N(E,w,b,D,A){if(E.length===0)return-1;if(typeof b=="string"?(D=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,xl(b)&&(b=A?0:E.length-1),b<0&&(b=E.length+b),b>=E.length){if(A)return-1;b=E.length-1}else if(b<0)if(A)b=0;else return-1;if(typeof w=="string"&&(w=a.from(w,D)),a.isBuffer(w))return w.length===0?-1:x(E,w,b,D,A);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?A?Uint8Array.prototype.indexOf.call(E,w,b):Uint8Array.prototype.lastIndexOf.call(E,w,b):x(E,[w],b,D,A);throw new TypeError("val must be string, number or Buffer")}function x(E,w,b,D,A){let M=1,L=E.length,ge=w.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(E.length<2||w.length<2)return-1;M=2,L/=2,ge/=2,b/=2}function ot(at,Ue){return M===1?at[Ue]:at.readUInt16BE(Ue*M)}let Xe;if(A){let at=-1;for(Xe=b;Xe<L;Xe++)if(ot(E,Xe)===ot(w,at===-1?0:Xe-at)){if(at===-1&&(at=Xe),Xe-at+1===ge)return at*M}else at!==-1&&(Xe-=Xe-at),at=-1}else for(b+ge>L&&(b=L-ge),Xe=b;Xe>=0;Xe--){let at=!0;for(let Ue=0;Ue<ge;Ue++)if(ot(E,Xe+Ue)!==ot(w,Ue)){at=!1;break}if(at)return Xe}return-1}a.prototype.includes=function(w,b,D){return this.indexOf(w,b,D)!==-1},a.prototype.indexOf=function(w,b,D){return N(this,w,b,D,!0)},a.prototype.lastIndexOf=function(w,b,D){return N(this,w,b,D,!1)};function C(E,w,b,D){b=Number(b)||0;const A=E.length-b;D?(D=Number(D),D>A&&(D=A)):D=A;const M=w.length;D>M/2&&(D=M/2);let L;for(L=0;L<D;++L){const ge=parseInt(w.substr(L*2,2),16);if(xl(ge))return L;E[b+L]=ge}return L}function $(E,w,b,D){return Ra(Rl(w,E.length-b),E,b,D)}function te(E,w,b,D){return Ra(yw(w),E,b,D)}function q(E,w,b,D){return Ra(lh(w),E,b,D)}function de(E,w,b,D){return Ra(ww(w,E.length-b),E,b,D)}a.prototype.write=function(w,b,D,A){if(b===void 0)A="utf8",D=this.length,b=0;else if(D===void 0&&typeof b=="string")A=b,D=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(D)?(D=D>>>0,A===void 0&&(A="utf8")):(A=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const M=this.length-b;if((D===void 0||D>M)&&(D=M),w.length>0&&(D<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");A||(A="utf8");let L=!1;for(;;)switch(A){case"hex":return C(this,w,b,D);case"utf8":case"utf-8":return $(this,w,b,D);case"ascii":case"latin1":case"binary":return te(this,w,b,D);case"base64":return q(this,w,b,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,w,b,D);default:if(L)throw new TypeError("Unknown encoding: "+A);A=(""+A).toLowerCase(),L=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ie(E,w,b){return w===0&&b===E.length?e.fromByteArray(E):e.fromByteArray(E.slice(w,b))}function se(E,w,b){b=Math.min(E.length,b);const D=[];let A=w;for(;A<b;){const M=E[A];let L=null,ge=M>239?4:M>223?3:M>191?2:1;if(A+ge<=b){let ot,Xe,at,Ue;switch(ge){case 1:M<128&&(L=M);break;case 2:ot=E[A+1],(ot&192)===128&&(Ue=(M&31)<<6|ot&63,Ue>127&&(L=Ue));break;case 3:ot=E[A+1],Xe=E[A+2],(ot&192)===128&&(Xe&192)===128&&(Ue=(M&15)<<12|(ot&63)<<6|Xe&63,Ue>2047&&(Ue<55296||Ue>57343)&&(L=Ue));break;case 4:ot=E[A+1],Xe=E[A+2],at=E[A+3],(ot&192)===128&&(Xe&192)===128&&(at&192)===128&&(Ue=(M&15)<<18|(ot&63)<<12|(Xe&63)<<6|at&63,Ue>65535&&Ue<1114112&&(L=Ue))}}L===null?(L=65533,ge=1):L>65535&&(L-=65536,D.push(L>>>10&1023|55296),L=56320|L&1023),D.push(L),A+=ge}return fe(D)}const U=4096;function fe(E){const w=E.length;if(w<=U)return String.fromCharCode.apply(String,E);let b="",D=0;for(;D<w;)b+=String.fromCharCode.apply(String,E.slice(D,D+=U));return b}function it(E,w,b){let D="";b=Math.min(E.length,b);for(let A=w;A<b;++A)D+=String.fromCharCode(E[A]&127);return D}function fn(E,w,b){let D="";b=Math.min(E.length,b);for(let A=w;A<b;++A)D+=String.fromCharCode(E[A]);return D}function Xt(E,w,b){const D=E.length;(!w||w<0)&&(w=0),(!b||b<0||b>D)&&(b=D);let A="";for(let M=w;M<b;++M)A+=bw[E[M]];return A}function wn(E,w,b){const D=E.slice(w,b);let A="";for(let M=0;M<D.length-1;M+=2)A+=String.fromCharCode(D[M]+D[M+1]*256);return A}a.prototype.slice=function(w,b){const D=this.length;w=~~w,b=b===void 0?D:~~b,w<0?(w+=D,w<0&&(w=0)):w>D&&(w=D),b<0?(b+=D,b<0&&(b=0)):b>D&&(b=D),b<w&&(b=w);const A=this.subarray(w,b);return Object.setPrototypeOf(A,a.prototype),A};function Ce(E,w,b){if(E%1!==0||E<0)throw new RangeError("offset is not uint");if(E+w>b)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(w,b,D){w=w>>>0,b=b>>>0,D||Ce(w,b,this.length);let A=this[w],M=1,L=0;for(;++L<b&&(M*=256);)A+=this[w+L]*M;return A},a.prototype.readUintBE=a.prototype.readUIntBE=function(w,b,D){w=w>>>0,b=b>>>0,D||Ce(w,b,this.length);let A=this[w+--b],M=1;for(;b>0&&(M*=256);)A+=this[w+--b]*M;return A},a.prototype.readUint8=a.prototype.readUInt8=function(w,b){return w=w>>>0,b||Ce(w,1,this.length),this[w]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(w,b){return w=w>>>0,b||Ce(w,2,this.length),this[w]|this[w+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(w,b){return w=w>>>0,b||Ce(w,2,this.length),this[w]<<8|this[w+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(w,b){return w=w>>>0,b||Ce(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+this[w+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(w,b){return w=w>>>0,b||Ce(w,4,this.length),this[w]*16777216+(this[w+1]<<16|this[w+2]<<8|this[w+3])},a.prototype.readBigUInt64LE=Vr(function(w){w=w>>>0,ls(w,"offset");const b=this[w],D=this[w+7];(b===void 0||D===void 0)&&ro(w,this.length-8);const A=b+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24,M=this[++w]+this[++w]*2**8+this[++w]*2**16+D*2**24;return BigInt(A)+(BigInt(M)<<BigInt(32))}),a.prototype.readBigUInt64BE=Vr(function(w){w=w>>>0,ls(w,"offset");const b=this[w],D=this[w+7];(b===void 0||D===void 0)&&ro(w,this.length-8);const A=b*2**24+this[++w]*2**16+this[++w]*2**8+this[++w],M=this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+D;return(BigInt(A)<<BigInt(32))+BigInt(M)}),a.prototype.readIntLE=function(w,b,D){w=w>>>0,b=b>>>0,D||Ce(w,b,this.length);let A=this[w],M=1,L=0;for(;++L<b&&(M*=256);)A+=this[w+L]*M;return M*=128,A>=M&&(A-=Math.pow(2,8*b)),A},a.prototype.readIntBE=function(w,b,D){w=w>>>0,b=b>>>0,D||Ce(w,b,this.length);let A=b,M=1,L=this[w+--A];for(;A>0&&(M*=256);)L+=this[w+--A]*M;return M*=128,L>=M&&(L-=Math.pow(2,8*b)),L},a.prototype.readInt8=function(w,b){return w=w>>>0,b||Ce(w,1,this.length),this[w]&128?(255-this[w]+1)*-1:this[w]},a.prototype.readInt16LE=function(w,b){w=w>>>0,b||Ce(w,2,this.length);const D=this[w]|this[w+1]<<8;return D&32768?D|4294901760:D},a.prototype.readInt16BE=function(w,b){w=w>>>0,b||Ce(w,2,this.length);const D=this[w+1]|this[w]<<8;return D&32768?D|4294901760:D},a.prototype.readInt32LE=function(w,b){return w=w>>>0,b||Ce(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},a.prototype.readInt32BE=function(w,b){return w=w>>>0,b||Ce(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},a.prototype.readBigInt64LE=Vr(function(w){w=w>>>0,ls(w,"offset");const b=this[w],D=this[w+7];(b===void 0||D===void 0)&&ro(w,this.length-8);const A=this[w+4]+this[w+5]*2**8+this[w+6]*2**16+(D<<24);return(BigInt(A)<<BigInt(32))+BigInt(b+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24)}),a.prototype.readBigInt64BE=Vr(function(w){w=w>>>0,ls(w,"offset");const b=this[w],D=this[w+7];(b===void 0||D===void 0)&&ro(w,this.length-8);const A=(b<<24)+this[++w]*2**16+this[++w]*2**8+this[++w];return(BigInt(A)<<BigInt(32))+BigInt(this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+D)}),a.prototype.readFloatLE=function(w,b){return w=w>>>0,b||Ce(w,4,this.length),n.read(this,w,!0,23,4)},a.prototype.readFloatBE=function(w,b){return w=w>>>0,b||Ce(w,4,this.length),n.read(this,w,!1,23,4)},a.prototype.readDoubleLE=function(w,b){return w=w>>>0,b||Ce(w,8,this.length),n.read(this,w,!0,52,8)},a.prototype.readDoubleBE=function(w,b){return w=w>>>0,b||Ce(w,8,this.length),n.read(this,w,!1,52,8)};function ze(E,w,b,D,A,M){if(!a.isBuffer(E))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>A||w<M)throw new RangeError('"value" argument is out of bounds');if(b+D>E.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(w,b,D,A){if(w=+w,b=b>>>0,D=D>>>0,!A){const ge=Math.pow(2,8*D)-1;ze(this,w,b,D,ge,0)}let M=1,L=0;for(this[b]=w&255;++L<D&&(M*=256);)this[b+L]=w/M&255;return b+D},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(w,b,D,A){if(w=+w,b=b>>>0,D=D>>>0,!A){const ge=Math.pow(2,8*D)-1;ze(this,w,b,D,ge,0)}let M=D-1,L=1;for(this[b+M]=w&255;--M>=0&&(L*=256);)this[b+M]=w/L&255;return b+D},a.prototype.writeUint8=a.prototype.writeUInt8=function(w,b,D){return w=+w,b=b>>>0,D||ze(this,w,b,1,255,0),this[b]=w&255,b+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(w,b,D){return w=+w,b=b>>>0,D||ze(this,w,b,2,65535,0),this[b]=w&255,this[b+1]=w>>>8,b+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(w,b,D){return w=+w,b=b>>>0,D||ze(this,w,b,2,65535,0),this[b]=w>>>8,this[b+1]=w&255,b+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(w,b,D){return w=+w,b=b>>>0,D||ze(this,w,b,4,4294967295,0),this[b+3]=w>>>24,this[b+2]=w>>>16,this[b+1]=w>>>8,this[b]=w&255,b+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(w,b,D){return w=+w,b=b>>>0,D||ze(this,w,b,4,4294967295,0),this[b]=w>>>24,this[b+1]=w>>>16,this[b+2]=w>>>8,this[b+3]=w&255,b+4};function Hn(E,w,b,D,A){Da(w,D,A,E,b,7);let M=Number(w&BigInt(4294967295));E[b++]=M,M=M>>8,E[b++]=M,M=M>>8,E[b++]=M,M=M>>8,E[b++]=M;let L=Number(w>>BigInt(32)&BigInt(4294967295));return E[b++]=L,L=L>>8,E[b++]=L,L=L>>8,E[b++]=L,L=L>>8,E[b++]=L,b}function xt(E,w,b,D,A){Da(w,D,A,E,b,7);let M=Number(w&BigInt(4294967295));E[b+7]=M,M=M>>8,E[b+6]=M,M=M>>8,E[b+5]=M,M=M>>8,E[b+4]=M;let L=Number(w>>BigInt(32)&BigInt(4294967295));return E[b+3]=L,L=L>>8,E[b+2]=L,L=L>>8,E[b+1]=L,L=L>>8,E[b]=L,b+8}a.prototype.writeBigUInt64LE=Vr(function(w,b=0){return Hn(this,w,b,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Vr(function(w,b=0){return xt(this,w,b,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(w,b,D,A){if(w=+w,b=b>>>0,!A){const ot=Math.pow(2,8*D-1);ze(this,w,b,D,ot-1,-ot)}let M=0,L=1,ge=0;for(this[b]=w&255;++M<D&&(L*=256);)w<0&&ge===0&&this[b+M-1]!==0&&(ge=1),this[b+M]=(w/L>>0)-ge&255;return b+D},a.prototype.writeIntBE=function(w,b,D,A){if(w=+w,b=b>>>0,!A){const ot=Math.pow(2,8*D-1);ze(this,w,b,D,ot-1,-ot)}let M=D-1,L=1,ge=0;for(this[b+M]=w&255;--M>=0&&(L*=256);)w<0&&ge===0&&this[b+M+1]!==0&&(ge=1),this[b+M]=(w/L>>0)-ge&255;return b+D},a.prototype.writeInt8=function(w,b,D){return w=+w,b=b>>>0,D||ze(this,w,b,1,127,-128),w<0&&(w=255+w+1),this[b]=w&255,b+1},a.prototype.writeInt16LE=function(w,b,D){return w=+w,b=b>>>0,D||ze(this,w,b,2,32767,-32768),this[b]=w&255,this[b+1]=w>>>8,b+2},a.prototype.writeInt16BE=function(w,b,D){return w=+w,b=b>>>0,D||ze(this,w,b,2,32767,-32768),this[b]=w>>>8,this[b+1]=w&255,b+2},a.prototype.writeInt32LE=function(w,b,D){return w=+w,b=b>>>0,D||ze(this,w,b,4,2147483647,-2147483648),this[b]=w&255,this[b+1]=w>>>8,this[b+2]=w>>>16,this[b+3]=w>>>24,b+4},a.prototype.writeInt32BE=function(w,b,D){return w=+w,b=b>>>0,D||ze(this,w,b,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[b]=w>>>24,this[b+1]=w>>>16,this[b+2]=w>>>8,this[b+3]=w&255,b+4},a.prototype.writeBigInt64LE=Vr(function(w,b=0){return Hn(this,w,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Vr(function(w,b=0){return xt(this,w,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function On(E,w,b,D,A,M){if(b+D>E.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function Zr(E,w,b,D,A){return w=+w,b=b>>>0,A||On(E,w,b,4),n.write(E,w,b,D,23,4),b+4}a.prototype.writeFloatLE=function(w,b,D){return Zr(this,w,b,!0,D)},a.prototype.writeFloatBE=function(w,b,D){return Zr(this,w,b,!1,D)};function os(E,w,b,D,A){return w=+w,b=b>>>0,A||On(E,w,b,8),n.write(E,w,b,D,52,8),b+8}a.prototype.writeDoubleLE=function(w,b,D){return os(this,w,b,!0,D)},a.prototype.writeDoubleBE=function(w,b,D){return os(this,w,b,!1,D)},a.prototype.copy=function(w,b,D,A){if(!a.isBuffer(w))throw new TypeError("argument should be a Buffer");if(D||(D=0),!A&&A!==0&&(A=this.length),b>=w.length&&(b=w.length),b||(b=0),A>0&&A<D&&(A=D),A===D||w.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("sourceEnd out of bounds");A>this.length&&(A=this.length),w.length-b<A-D&&(A=w.length-b+D);const M=A-D;return this===w&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,D,A):Uint8Array.prototype.set.call(w,this.subarray(D,A),b),M},a.prototype.fill=function(w,b,D,A){if(typeof w=="string"){if(typeof b=="string"?(A=b,b=0,D=this.length):typeof D=="string"&&(A=D,D=this.length),A!==void 0&&typeof A!="string")throw new TypeError("encoding must be a string");if(typeof A=="string"&&!a.isEncoding(A))throw new TypeError("Unknown encoding: "+A);if(w.length===1){const L=w.charCodeAt(0);(A==="utf8"&&L<128||A==="latin1")&&(w=L)}}else typeof w=="number"?w=w&255:typeof w=="boolean"&&(w=Number(w));if(b<0||this.length<b||this.length<D)throw new RangeError("Out of range index");if(D<=b)return this;b=b>>>0,D=D===void 0?this.length:D>>>0,w||(w=0);let M;if(typeof w=="number")for(M=b;M<D;++M)this[M]=w;else{const L=a.isBuffer(w)?w:a.from(w,A),ge=L.length;if(ge===0)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(M=0;M<D-b;++M)this[M+b]=L[M%ge]}return this};const nr={};function no(E,w,b){nr[E]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${E}]`,this.stack,delete this.name}get code(){return E}set code(A){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:A,writable:!0})}toString(){return`${this.name} [${E}]: ${this.message}`}}}no("ERR_BUFFER_OUT_OF_BOUNDS",function(E){return E?`${E} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),no("ERR_INVALID_ARG_TYPE",function(E,w){return`The "${E}" argument must be of type number. Received type ${typeof w}`},TypeError),no("ERR_OUT_OF_RANGE",function(E,w,b){let D=`The value of "${E}" is out of range.`,A=b;return Number.isInteger(b)&&Math.abs(b)>2**32?A=as(String(b)):typeof b=="bigint"&&(A=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(A=as(A)),A+="n"),D+=` It must be ${w}. Received ${A}`,D},RangeError);function as(E){let w="",b=E.length;const D=E[0]==="-"?1:0;for(;b>=D+4;b-=3)w=`_${E.slice(b-3,b)}${w}`;return`${E.slice(0,b)}${w}`}function cs(E,w,b){ls(w,"offset"),(E[w]===void 0||E[w+b]===void 0)&&ro(w,E.length-(b+1))}function Da(E,w,b,D,A,M){if(E>b||E<w){const L=typeof w=="bigint"?"n":"";let ge;throw M>3?w===0||w===BigInt(0)?ge=`>= 0${L} and < 2${L} ** ${(M+1)*8}${L}`:ge=`>= -(2${L} ** ${(M+1)*8-1}${L}) and < 2 ** ${(M+1)*8-1}${L}`:ge=`>= ${w}${L} and <= ${b}${L}`,new nr.ERR_OUT_OF_RANGE("value",ge,E)}cs(D,A,M)}function ls(E,w){if(typeof E!="number")throw new nr.ERR_INVALID_ARG_TYPE(w,"number",E)}function ro(E,w,b){throw Math.floor(E)!==E?(ls(E,b),new nr.ERR_OUT_OF_RANGE(b||"offset","an integer",E)):w<0?new nr.ERR_BUFFER_OUT_OF_BOUNDS:new nr.ERR_OUT_OF_RANGE(b||"offset",`>= ${b?1:0} and <= ${w}`,E)}const gw=/[^+/0-9A-Za-z-_]/g;function mw(E){if(E=E.split("=")[0],E=E.trim().replace(gw,""),E.length<2)return"";for(;E.length%4!==0;)E=E+"=";return E}function Rl(E,w){w=w||1/0;let b;const D=E.length;let A=null;const M=[];for(let L=0;L<D;++L){if(b=E.charCodeAt(L),b>55295&&b<57344){if(!A){if(b>56319){(w-=3)>-1&&M.push(239,191,189);continue}else if(L+1===D){(w-=3)>-1&&M.push(239,191,189);continue}A=b;continue}if(b<56320){(w-=3)>-1&&M.push(239,191,189),A=b;continue}b=(A-55296<<10|b-56320)+65536}else A&&(w-=3)>-1&&M.push(239,191,189);if(A=null,b<128){if((w-=1)<0)break;M.push(b)}else if(b<2048){if((w-=2)<0)break;M.push(b>>6|192,b&63|128)}else if(b<65536){if((w-=3)<0)break;M.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((w-=4)<0)break;M.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return M}function yw(E){const w=[];for(let b=0;b<E.length;++b)w.push(E.charCodeAt(b)&255);return w}function ww(E,w){let b,D,A;const M=[];for(let L=0;L<E.length&&!((w-=2)<0);++L)b=E.charCodeAt(L),D=b>>8,A=b%256,M.push(A),M.push(D);return M}function lh(E){return e.toByteArray(mw(E))}function Ra(E,w,b,D){let A;for(A=0;A<D&&!(A+b>=w.length||A>=E.length);++A)w[A+b]=E[A];return A}function rr(E,w){return E instanceof w||E!=null&&E.constructor!=null&&E.constructor.name!=null&&E.constructor.name===w.name}function xl(E){return E!==E}const bw=function(){const E="0123456789abcdef",w=new Array(256);for(let b=0;b<16;++b){const D=b*16;for(let A=0;A<16;++A)w[D+A]=E[b]+E[A]}return w}();function Vr(E){return typeof BigInt=="undefined"?_w:E}function _w(){throw new Error("BigInt not supported")}})(hi);var wb=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,bb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,_b=/\s|\uFEFF|\xA0/,vb=/\r?\n[\x20\x09]+/g,Tb=/[;,"]/,Eb=/[;,"]|\s/,Ib=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,Rr={IDLE:1<<0,URI:1<<1,ATTR:1<<2};function wh(t){return t.replace(bb,"")}function za(t){return _b.test(t)}function Db(t,e){for(;za(t[e]);)e++;return e}function bh(t){return Eb.test(t)||!Ib.test(t)}class We{constructor(e){this.refs=[],e&&this.parse(e)}rel(e){for(var n=[],r=e.toLowerCase(),i=0;i<this.refs.length;i++)this.refs[i].rel.toLowerCase()===r&&n.push(this.refs[i]);return n}get(e,n){e=e.toLowerCase();for(var r=[],i=0;i<this.refs.length;i++)this.refs[i][e]===n&&r.push(this.refs[i]);return r}set(e){return this.refs.push(e),this}has(e,n){e=e.toLowerCase();for(var r=0;r<this.refs.length;r++)if(this.refs[r][e]===n)return!0;return!1}parse(e,s){s=s||0,e=s?e.slice(s):e,e=wh(e).replace(vb,"");for(var r=Rr.IDLE,i=e.length,s=0,o=null;s<i;)if(r===Rr.IDLE){if(za(e[s])){s++;continue}else if(e[s]==="<"){o!=null&&(o.rel!=null?this.refs.push(...We.expandRelations(o)):this.refs.push(o));var a=e.indexOf(">",s);if(a===-1)throw new Error("Expected end of URI delimiter at offset "+s);o={uri:e.slice(s+1,a)},s=a,r=Rr.URI}else throw new Error('Unexpected character "'+e[s]+'" at offset '+s);s++}else if(r===Rr.URI)if(za(e[s])){s++;continue}else if(e[s]===";")r=Rr.ATTR,s++;else if(e[s]===",")r=Rr.IDLE,s++;else throw new Error('Unexpected character "'+e[s]+'" at offset '+s);else if(r===Rr.ATTR){if(e[s]===";"||za(e[s])){s++;continue}var a=e.indexOf("=",s);if(a===-1)throw new Error("Expected attribute delimiter at offset "+s);var c=wh(e.slice(s,a)).toLowerCase(),l="";if(s=a+1,s=Db(e,s),e[s]==='"')for(s++;s<i;){if(e[s]==='"'){s++;break}e[s]==="\\"&&s++,l+=e[s],s++}else{for(var a=s+1;!Tb.test(e[a])&&a<i;)a++;l=e.slice(s,a),s=a}switch(o[c]&&We.isSingleOccurenceAttr(c)||(c[c.length-1]==="*"?o[c]=We.parseExtendedValue(l):(l=c==="type"?l.toLowerCase():l,o[c]!=null?Array.isArray(o[c])?o[c].push(l):o[c]=[o[c],l]:o[c]=l)),e[s]){case",":r=Rr.IDLE;break;case";":r=Rr.ATTR;break}s++}else throw new Error('Unknown parser state "'+r+'"');return o!=null&&(o.rel!=null?this.refs.push(...We.expandRelations(o)):this.refs.push(o)),o=null,this}toString(){for(var e=[],n="",r=null,i=0;i<this.refs.length;i++)r=this.refs[i],n=Object.keys(this.refs[i]).reduce(function(s,o){return o==="uri"?s:s+"; "+We.formatAttribute(o,r[o])},"<"+r.uri+">"),e.push(n);return e.join(", ")}}We.isCompatibleEncoding=function(t){return wb.test(t)};We.parse=function(t,e){return new We().parse(t,e)};We.isSingleOccurenceAttr=function(t){return t==="rel"||t==="type"||t==="media"||t==="title"||t==="title*"};We.isTokenAttr=function(t){return t==="rel"||t==="type"||t==="anchor"};We.escapeQuotes=function(t){return t.replace(/"/g,'\\"')};We.expandRelations=function(t){var e=t.rel.split(" ");return e.map(function(n){var r=Object.assign({},t);return r.rel=n,r})};We.parseExtendedValue=function(t){var e=/([^']+)?(?:'([^']*)')?(.+)/.exec(t);return{language:e[2].toLowerCase(),encoding:We.isCompatibleEncoding(e[1])?null:e[1].toLowerCase(),value:We.isCompatibleEncoding(e[1])?decodeURIComponent(e[3]):e[3]}};We.formatExtendedAttribute=function(t,e){var n=(e.encoding||"utf-8").toUpperCase(),r=e.language||"en",i="";return hi.Buffer.isBuffer(e.value)&&We.isCompatibleEncoding(n)?i=e.value.toString(n):hi.Buffer.isBuffer(e.value)?i=e.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):i=encodeURIComponent(e.value),t+"="+n+"'"+r+"'"+i};We.formatAttribute=function(t,e){return Array.isArray(e)?e.map(n=>We.formatAttribute(t,n)).join("; "):t[t.length-1]==="*"||typeof e!="string"?We.formatExtendedAttribute(t,e):(We.isTokenAttr(t)?e=bh(e)?'"'+We.escapeQuotes(e)+'"':We.escapeQuotes(e):bh(e)&&(e=encodeURIComponent(e),e=e.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),e='"'+e+'"'),t+"="+e)};var Rb=We;class ia{constructor(e){this.value=e||"b"+ ++ia.nextId}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}ia.prototype.termType="BlankNode";ia.nextId=0;var xb=ia;class Zd{equals(e){return!!e&&e.termType===this.termType}}Zd.prototype.termType="DefaultGraph";Zd.prototype.value="";var Sg=Zd;function Ob(t){if(!t)return null;if(t.termType==="BlankNode")return this.blankNode(t.value);if(t.termType==="DefaultGraph")return this.defaultGraph();if(t.termType==="Literal")return this.literal(t.value,t.language||this.namedNode(t.datatype.value));if(t.termType==="NamedNode")return this.namedNode(t.value);if(t.termType==="Quad"){const e=this.fromTerm(t.subject),n=this.fromTerm(t.predicate),r=this.fromTerm(t.object),i=this.fromTerm(t.graph);return this.quad(e,n,r,i)}if(t.termType==="Variable")return this.variable(t.value);throw new Error(`unknown termType ${t.termType}`)}var Nb=Ob;class jg{constructor(e){this.value=e}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}jg.prototype.termType="NamedNode";var Mg=jg;const Cg=Mg;class Gi{constructor(e,n,r){this.value=e,this.datatype=Gi.stringDatatype,this.language="",n?(this.language=n,this.datatype=Gi.langStringDatatype):r&&(this.datatype=r)}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}Gi.prototype.termType="Literal";Gi.langStringDatatype=new Cg("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");Gi.stringDatatype=new Cg("http://www.w3.org/2001/XMLSchema#string");var Ab=Gi;const Sb=Sg;class Vd{constructor(e,n,r,i){this.subject=e,this.predicate=n,this.object=r,i?this.graph=i:this.graph=new Sb}equals(e){return!!e&&(e.termType==="Quad"||!e.termType)&&e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}}Vd.prototype.termType="Quad";Vd.prototype.value="";var jb=Vd;class Lg{constructor(e){this.value=e}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}Lg.prototype.termType="Variable";var Mb=Lg;const Cb=xb,Lb=Sg,$g=Nb,Ll=Ab,$b=Mg,kb=jb,Pb=Mb;function Ub(t){return new $b(t)}function Fb(t){return new Cb(t)}function Bb(t,e){return typeof e=="string"?e.indexOf(":")===-1?new Ll(t,e):new Ll(t,null,Ki.namedNode(e)):new Ll(t,null,e)}function qb(t){return new Pb(t)}function Yb(){return Ki.defaultGraphInstance}function zb(t,e,n){return Ki.quad(t,e,n)}function Gb(t,e,n,r){return new kb(t,e,n,r||Ki.defaultGraphInstance)}function Hb(t){return $g.call(Ki,t)}function Zb(t){return $g.call(Ki,t)}const Ki={namedNode:Ub,blankNode:Fb,literal:Bb,variable:qb,defaultGraph:Yb,triple:zb,quad:Gb,fromTerm:Hb,fromQuad:Zb,defaultGraphInstance:new Lb};var Vb=Ki;const Wb=Vb;var Fc=Wb;function Ii(t){return typeof t=="string"||t instanceof String}const Qb="http://www.w3.org/2001/XMLSchema#string";function yt(t){if(typeof t=="string")return t;if(!t)return"";if(typeof t.id!="undefined"&&t.termType!=="Quad")return t.id;let e,n,r,i;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return t.language?`"${t.value}"@${t.language}`:`"${t.value}"${t.datatype&&t.datatype.value!==Qb?`^^${t.datatype.value}`:""}`;case"Quad":return e=$l(yt(t.subject)),n=$l(yt(t.predicate)),r=$l(yt(t.object)),i=t.graph.termType==="DefaultGraph"?"":` ${yt(t.graph)}`,`<<${e} ${n} ${r}${i}>>`;default:throw new Error(`Unexpected termType: ${t.termType}`)}}const Xb=/^"(.*".*)(?="[^"]*$)/;function $l(t){return t.replace(Xb,(e,n)=>`"${n.replace(/"/g,'""')}`)}class Kb{constructor(e){if(this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._quads=new Map,e)for(const n of e)this.add(n)}get size(){let e=this._size;if(e!==null)return e;e=0;const n=this._graphs;let r,i;for(const s in n)for(const o in r=n[s].subjects)for(const a in i=r[o])e+=Object.keys(i[a]).length;return this._size=e,this._size}add(e){let n=yt(e.subject),r=yt(e.predicate),i=yt(e.object);const s=yt(e.graph);let o=this._graphs[s];o||(o=this._graphs[s]={subjects:{},predicates:{},objects:{}},Object.freeze(o));const a=this._ids,c=this._entities;return n=a[n]||(a[c[++this._id]=n]=this._id),r=a[r]||(a[c[++this._id]=r]=this._id),i=a[i]||(a[c[++this._id]=i]=this._id),this._addToIndex(o.subjects,n,r,i),this._addToIndex(o.predicates,r,i,n),this._addToIndex(o.objects,i,n,r),this._setQuad(n,r,i,s,e),this._size=null,this}delete(e){let n=yt(e.subject),r=yt(e.predicate),i=yt(e.object);const s=yt(e.graph),o=this._ids,a=this._graphs;let c,l,d;if(!(n=o[n])||!(r=o[r])||!(i=o[i])||!(c=a[s])||!(l=c.subjects[n])||!(d=l[r])||!(i in d))return this;this._removeFromIndex(c.subjects,n,r,i),this._removeFromIndex(c.predicates,r,i,n),this._removeFromIndex(c.objects,i,n,r),this._size!==null&&this._size--,this._deleteQuad(n,r,i,s);for(n in c.subjects)return this;return delete a[s],this}has(e){const n=yt(e.subject),r=yt(e.predicate),i=yt(e.object),s=yt(e.graph),o=this._graphs[s];if(!o)return!1;const a=this._ids;let c,l,d;return Ii(n)&&!(c=a[n])||Ii(r)&&!(l=a[r])||Ii(i)&&!(d=a[i])?!1:this._countInIndex(o.objects,d,c,l)===1}match(e,n,r,i){return this._createDataset(this._match(e,n,r,i))}[Symbol.iterator](){return this._match()[Symbol.iterator]()}_addToIndex(e,n,r,i){const s=e[n]||(e[n]={}),o=s[r]||(s[r]={}),a=i in o;return a||(o[i]=null),!a}_removeFromIndex(e,n,r,i){const s=e[n],o=s[r];delete o[i];for(const a in o)return;delete s[r];for(const a in s)return;delete e[n]}_findInIndex(e,n,r,i,s,o,a,c,l,d){let f,p,h;n&&((f=e,e={})[n]=f[n]);for(const m in e)if(p=e[m],p){r&&((f=p,p={})[r]=f[r]);for(const y in p)if(h=p[y],h){const _=i?i in h?[i]:[]:Object.keys(h);for(let v=0;v<_.length;v++){const T={[s]:m,[o]:y,[a]:_[v]},I=this._getQuad(T.subject,T.predicate,T.object,c);if(d)d.push(I);else if(l(I))return!0}}}return d}_countInIndex(e,n,r,i){let s=0,o,a,c;n&&((o=e,e={})[n]=o[n]);for(const l in e)if(a=e[l],a){r&&((o=a,a={})[r]=o[r]);for(const d in a)c=a[d],c&&(i?i in c&&s++:s+=Object.keys(c).length)}return s}_getGraphs(e){return Ii(e)?{[e]:this._graphs[e]}:this._graphs}_match(e,n,r,i){e=e&&yt(e),n=n&&yt(n),r=r&&yt(r),i=i&&yt(i);const s=[],o=this._getGraphs(i),a=this._ids;let c,l,d,f;if(Ii(e)&&!(l=a[e])||Ii(n)&&!(d=a[n])||Ii(r)&&!(f=a[r]))return s;for(const p in o)c=o[p],c&&(l?f?this._findInIndex(c.objects,f,l,d,"object","subject","predicate",p,null,s):this._findInIndex(c.subjects,l,d,null,"subject","predicate","object",p,null,s):d?this._findInIndex(c.predicates,d,f,null,"predicate","object","subject",p,null,s):f?this._findInIndex(c.objects,f,null,null,"object","subject","predicate",p,null,s):this._findInIndex(c.subjects,null,null,null,"subject","predicate","object",p,null,s));return s}_getQuad(e,n,r,i){return this._quads.get(this._toId(e,n,r,i))}_setQuad(e,n,r,i,s){this._quads.set(this._toId(e,n,r,i),s)}_deleteQuad(e,n,r,i){this._quads.delete(this._toId(e,n,r,i))}_createDataset(e){return new this.constructor(e)}_toId(e,n,r,i){return`${e}:${n}:${r}:${i}`}}var Jb=Kb;const e_=Fc,t_=Jb;function n_(t){return new t_(t)}var kg=Object.assign({dataset:n_},e_),Wd=class Pg{constructor(e,n=new Map,r=0){this.prefix=e,this._existing=n,this.counter=r}clone(){const{prefix:e,_existing:n,counter:r}=this;return new Pg(e,new Map(n),r)}getId(e){const n=e&&this._existing.get(e);if(n)return n;const r=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,r),r}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}},Ug={exports:{}},mt=Ug.exports={},ar,cr;function Bu(){throw new Error("setTimeout has not been defined")}function qu(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ar=setTimeout:ar=Bu}catch{ar=Bu}try{typeof clearTimeout=="function"?cr=clearTimeout:cr=qu}catch{cr=qu}})();function Fg(t){if(ar===setTimeout)return setTimeout(t,0);if((ar===Bu||!ar)&&setTimeout)return ar=setTimeout,setTimeout(t,0);try{return ar(t,0)}catch{try{return ar.call(null,t,0)}catch{return ar.call(this,t,0)}}}function r_(t){if(cr===clearTimeout)return clearTimeout(t);if((cr===qu||!cr)&&clearTimeout)return cr=clearTimeout,clearTimeout(t);try{return cr(t)}catch{try{return cr.call(null,t)}catch{return cr.call(this,t)}}}var Lr=[],Is=!1,ji,Ga=-1;function i_(){!Is||!ji||(Is=!1,ji.length?Lr=ji.concat(Lr):Ga=-1,Lr.length&&Bg())}function Bg(){if(!Is){var t=Fg(i_);Is=!0;for(var e=Lr.length;e;){for(ji=Lr,Lr=[];++Ga<e;)ji&&ji[Ga].run();Ga=-1,e=Lr.length}ji=null,Is=!1,r_(t)}}mt.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Lr.push(new qg(t,e)),Lr.length===1&&!Is&&Fg(Bg)};function qg(t,e){this.fun=t,this.array=e}qg.prototype.run=function(){this.fun.apply(null,this.array)};mt.title="browser";mt.browser=!0;mt.env={};mt.argv=[];mt.version="";mt.versions={};function Yr(){}mt.on=Yr;mt.addListener=Yr;mt.once=Yr;mt.off=Yr;mt.removeListener=Yr;mt.removeAllListeners=Yr;mt.emit=Yr;mt.prependListener=Yr;mt.prependOnceListener=Yr;mt.listeners=function(t){return[]};mt.binding=function(t){throw new Error("process.binding is not supported")};mt.cwd=function(){return"/"};mt.chdir=function(t){throw new Error("process.chdir is not supported")};mt.umask=function(){return 0};var Le=Ug.exports;(function(t,e){if(t.setImmediate)return;var n=1,r={},i=!1,s=t.document,o;function a(T){typeof T!="function"&&(T=new Function(""+T));for(var I=new Array(arguments.length-1),R=0;R<I.length;R++)I[R]=arguments[R+1];var O={callback:T,args:I};return r[n]=O,o(n),n++}function c(T){delete r[T]}function l(T){var I=T.callback,R=T.args;switch(R.length){case 0:I();break;case 1:I(R[0]);break;case 2:I(R[0],R[1]);break;case 3:I(R[0],R[1],R[2]);break;default:I.apply(e,R);break}}function d(T){if(i)setTimeout(d,0,T);else{var I=r[T];if(I){i=!0;try{l(I)}finally{c(T),i=!1}}}}function f(){o=function(T){Le.nextTick(function(){d(T)})}}function p(){if(t.postMessage&&!t.importScripts){var T=!0,I=t.onmessage;return t.onmessage=function(){T=!1},t.postMessage("","*"),t.onmessage=I,T}}function h(){var T="setImmediate$"+Math.random()+"$",I=function(R){R.source===t&&typeof R.data=="string"&&R.data.indexOf(T)===0&&d(+R.data.slice(T.length))};t.addEventListener?t.addEventListener("message",I,!1):t.attachEvent("onmessage",I),o=function(R){t.postMessage(T+R,"*")}}function m(){var T=new MessageChannel;T.port1.onmessage=function(I){var R=I.data;d(R)},o=function(I){T.port2.postMessage(I)}}function y(){var T=s.documentElement;o=function(I){var R=s.createElement("script");R.onreadystatechange=function(){d(I),R.onreadystatechange=null,T.removeChild(R),R=null},T.appendChild(R)}}function _(){o=function(T){setTimeout(d,0,T)}}var v=Object.getPrototypeOf&&Object.getPrototypeOf(t);v=v&&v.setTimeout?v:t,{}.toString.call(t.process)==="[object process]"?f():p()?h():t.MessageChannel?m():s&&"onreadystatechange"in s.createElement("script")?y():_(),v.setImmediate=a,v.clearImmediate=c})(typeof self=="undefined"?typeof ai=="undefined"?ai:ai:self);const kl=self.crypto||self.msCrypto;var Yg=class{constructor(e){if(!(kl&&kl.subtle))throw new Error("crypto.subtle not found.");if(e==="sha256")this.algorithm={name:"SHA-256"};else if(e==="sha1")this.algorithm={name:"SHA-1"};else throw new Error(`Unsupport algorithm "${e}".`);this._content=""}update(e){this._content+=e}async digest(){const e=new TextEncoder().encode(this._content),n=new Uint8Array(await kl.subtle.digest(this.algorithm,e));let r="";for(let i=0;i<n.length;++i)r+=n[i].toString(16).padStart(2,"0");return r}},zg=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let n=0;n<e.length;++n)this.dir.set(e[n],!0)}hasNext(){return!this.done}next(){const{current:e,dir:n}=this,r=e.slice();let i=null,s=0;const o=e.length;for(let a=0;a<o;++a){const c=e[a],l=n.get(c);(i===null||c>i)&&(l&&a>0&&c>e[a-1]||!l&&a<o-1&&c>e[a+1])&&(i=c,s=a)}if(i===null)this.done=!0;else{const a=n.get(i)?s-1:s+1;e[s]=e[a],e[a]=i;for(const c of e)c>i&&n.set(c,!n.get(c))}return r}};const s_="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Pl=s_+"langString",Ul="http://www.w3.org/2001/XMLSchema#string",Zn="NamedNode",Di="BlankNode",Ha="Literal",_h="DefaultGraph",Ds={};(()=>{const t="(?:<([^:]+:[^>]*)>)",n="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD"+"_",r=n+"0-9-\xB7\u0300-\u036F\u203F-\u2040",s="(_:(?:["+n+"0-9])(?:(?:["+r+".])*(?:["+r+"]))?)",o='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',a="(?:\\^\\^"+t+")",c="(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))",l="(?:"+o+"(?:"+a+"|"+c+")?)",d="[ \\t]+",f="[ \\t]*",p="(?:"+t+"|"+s+")"+d,h=t+d,m="(?:"+t+"|"+s+"|"+l+")"+f,y="(?:\\.|(?:(?:"+t+"|"+s+")"+f+"\\.))";Ds.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,Ds.empty=new RegExp("^"+f+"$"),Ds.quad=new RegExp("^"+f+p+h+m+y+f+"$")})();var Qd=class Yu{static parse(e){const n=[],r={},i=e.split(Ds.eoln);let s=0;for(const o of i){if(s++,Ds.empty.test(o))continue;const a=o.match(Ds.quad);if(a===null)throw new Error("N-Quads parse error on line "+s+".");const c={subject:null,predicate:null,object:null,graph:null};if(a[1]!==void 0?c.subject={termType:Zn,value:a[1]}:c.subject={termType:Di,value:a[2]},c.predicate={termType:Zn,value:a[3]},a[4]!==void 0?c.object={termType:Zn,value:a[4]}:a[5]!==void 0?c.object={termType:Di,value:a[5]}:(c.object={termType:Ha,value:void 0,datatype:{termType:Zn}},a[7]!==void 0?c.object.datatype.value=a[7]:a[8]!==void 0?(c.object.datatype.value=Pl,c.object.language=a[8]):c.object.datatype.value=Ul,c.object.value=u_(a[6])),a[9]!==void 0?c.graph={termType:Zn,value:a[9]}:a[10]!==void 0?c.graph={termType:Di,value:a[10]}:c.graph={termType:_h,value:""},!(c.graph.value in r))r[c.graph.value]=[c],n.push(c);else{let l=!0;const d=r[c.graph.value];for(const f of d)if(o_(f,c)){l=!1;break}l&&(d.push(c),n.push(c))}}return n}static serialize(e){Array.isArray(e)||(e=Yu.legacyDatasetToQuads(e));const n=[];for(const r of e)n.push(Yu.serializeQuad(r));return n.sort().join("")}static serializeQuad(e){const n=e.subject,r=e.predicate,i=e.object,s=e.graph;let o="";return n.termType===Zn?o+=`<${n.value}>`:o+=`${n.value}`,o+=` <${r.value}> `,i.termType===Zn?o+=`<${i.value}>`:i.termType===Di?o+=i.value:(o+=`"${c_(i.value)}"`,i.datatype.value===Pl?i.language&&(o+=`@${i.language}`):i.datatype.value!==Ul&&(o+=`^^<${i.datatype.value}>`)),s.termType===Zn?o+=` <${s.value}>`:s.termType===Di&&(o+=` ${s.value}`),o+=` .
`,o}static legacyDatasetToQuads(e){const n=[],r={"blank node":Di,IRI:Zn,literal:Ha};for(const i in e)e[i].forEach(o=>{const a={};for(const c in o){const l=o[c],d={termType:r[l.type],value:l.value};d.termType===Ha&&(d.datatype={termType:Zn},"datatype"in l&&(d.datatype.value=l.datatype),"language"in l?("datatype"in l||(d.datatype.value=Pl),d.language=l.language):"datatype"in l||(d.datatype.value=Ul)),a[c]=d}i==="@default"?a.graph={termType:_h,value:""}:a.graph={termType:i.startsWith("_:")?Di:Zn,value:i},n.push(a)});return n}};function o_(t,e){return!(t.subject.termType===e.subject.termType&&t.object.termType===e.object.termType)||!(t.subject.value===e.subject.value&&t.predicate.value===e.predicate.value&&t.object.value===e.object.value)?!1:t.object.termType!==Ha?!0:t.object.datatype.termType===e.object.datatype.termType&&t.object.language===e.object.language&&t.object.datatype.value===e.object.datatype.value}const a_=/["\\\n\r]/g;function c_(t){return t.replace(a_,function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}const l_=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function u_(t){return t.replace(l_,function(e,n,r,i){if(n)switch(n){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(r)return String.fromCharCode(parseInt(r,16));if(i)throw new Error("Unsupported U escape")})}const vh=Wd,Fl=Yg,d_=zg,Th=Qd;var Gg=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new vh("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}async main(e){this.quads=e;for(const c of e)this._addBlankNodeQuadInfo({quad:c,component:c.subject}),this._addBlankNodeQuadInfo({quad:c,component:c.object}),this._addBlankNodeQuadInfo({quad:c,component:c.graph});const n=new Map,r=[...this.blankNodeInfo.keys()];let i=0;for(const c of r)++i%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:c,hashToBlankNodes:n});const s=[...n.keys()].sort(),o=[];for(const c of s){const l=n.get(c);if(l.length>1){o.push(l);continue}const d=l[0];this.canonicalIssuer.getId(d)}for(const c of o){const l=[];for(const d of c){if(this.canonicalIssuer.hasId(d))continue;const f=new vh("_:b");f.getId(d);const p=await this.hashNDegreeQuads(d,f);l.push(p)}l.sort(f_);for(const d of l){const f=d.issuer.getOldIds();for(const p of f)this.canonicalIssuer.getId(p)}}const a=[];for(const c of this.quads){const l={...c};l.subject=this._useCanonicalId({component:l.subject}),l.object=this._useCanonicalId({component:l.object}),l.graph=this._useCanonicalId({component:l.graph}),a.push(Th.serializeQuad(l))}return a.sort(),a.join("")}async hashFirstDegreeQuads(e){const n=[],r=this.blankNodeInfo.get(e),i=r.quads;for(const o of i){const a={subject:null,predicate:o.predicate,object:null,graph:null};a.subject=this.modifyFirstDegreeComponent(e,o.subject,"subject"),a.object=this.modifyFirstDegreeComponent(e,o.object,"object"),a.graph=this.modifyFirstDegreeComponent(e,o.graph,"graph"),n.push(Th.serializeQuad(a))}n.sort();const s=new Fl(this.hashAlgorithm);for(const o of n)s.update(o);return r.hash=await s.digest(),r.hash}async hashRelatedBlankNode(e,n,r,i){let s;this.canonicalIssuer.hasId(e)?s=this.canonicalIssuer.getId(e):r.hasId(e)?s=r.getId(e):s=this.blankNodeInfo.get(e).hash;const o=new Fl(this.hashAlgorithm);return o.update(i),i!=="g"&&o.update(this.getRelatedPredicate(n)),o.update(s),o.digest()}async hashNDegreeQuads(e,n){const r=new Fl(this.hashAlgorithm),i=await this.createHashToRelated(e,n),s=[...i.keys()].sort();for(const o of s){r.update(o);let a="",c;const l=new d_(i.get(o));let d=0;for(;l.hasNext();){const f=l.next();++d%3===0&&await this._yield();let p=n.clone(),h="";const m=[];let y=!1;for(const _ of f)if(this.canonicalIssuer.hasId(_)?h+=this.canonicalIssuer.getId(_):(p.hasId(_)||m.push(_),h+=p.getId(_)),a.length!==0&&h>a){y=!0;break}if(!y){for(const _ of m){const v=await this.hashNDegreeQuads(_,p);if(h+=p.getId(_),h+=`<${v.hash}>`,p=v.issuer,a.length!==0&&h>a){y=!0;break}}y||(a.length===0||h<a)&&(a=h,c=p)}}r.update(a),n=c}return{hash:await r.digest(),issuer:n}}modifyFirstDegreeComponent(e,n){return n.termType!=="BlankNode"?n:{termType:"BlankNode",value:n.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}async createHashToRelated(e,n){const r=new Map,i=this.blankNodeInfo.get(e).quads;let s=0;for(const o of i)++s%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:o,component:o.subject,position:"s",id:e,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:o,component:o.object,position:"o",id:e,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:o,component:o.graph,position:"g",id:e,issuer:n,hashToRelated:r})]);return r}async _hashAndTrackBlankNode({id:e,hashToBlankNodes:n}){const r=await this.hashFirstDegreeQuads(e),i=n.get(r);i?i.push(e):n.set(r,[e])}_addBlankNodeQuadInfo({quad:e,component:n}){if(n.termType!=="BlankNode")return;const r=n.value,i=this.blankNodeInfo.get(r);i?i.quads.add(e):this.blankNodeInfo.set(r,{quads:new Set([e]),hash:null})}async _addRelatedBlankNodeHash({quad:e,component:n,position:r,id:i,issuer:s,hashToRelated:o}){if(!(n.termType==="BlankNode"&&n.value!==i))return;const a=n.value,c=await this.hashRelatedBlankNode(a,e,s,r),l=o.get(c);l?l.push(a):o.set(c,[a])}_useCanonicalId({component:e}){return e.termType==="BlankNode"&&!e.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}:e}async _yield(){return new Promise(e=>setImmediate(e))}};function f_(t,e){return t.hash<e.hash?-1:t.hash>e.hash?1:0}const h_=Gg;var p_=class extends h_{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,n,r){return n.termType!=="BlankNode"?n:r==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:n.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}async createHashToRelated(e,n){const r=new Map,i=this.blankNodeInfo.get(e).quads;let s=0;for(const o of i){let a,c;if(o.subject.termType==="BlankNode"&&o.subject.value!==e)c=o.subject.value,a="p";else if(o.object.termType==="BlankNode"&&o.object.value!==e)c=o.object.value,a="r";else continue;++s%100===0&&await this._yield();const l=await this.hashRelatedBlankNode(c,o,n,a),d=r.get(l);d?d.push(c):r.set(l,[c])}return r}};const Eh=Wd,Bl=Yg,g_=zg,Ih=Qd;var Hg=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new Eh("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(e){this.quads=e;for(const a of e)this._addBlankNodeQuadInfo({quad:a,component:a.subject}),this._addBlankNodeQuadInfo({quad:a,component:a.object}),this._addBlankNodeQuadInfo({quad:a,component:a.graph});const n=new Map,r=[...this.blankNodeInfo.keys()];for(const a of r)this._hashAndTrackBlankNode({id:a,hashToBlankNodes:n});const i=[...n.keys()].sort(),s=[];for(const a of i){const c=n.get(a);if(c.length>1){s.push(c);continue}const l=c[0];this.canonicalIssuer.getId(l)}for(const a of s){const c=[];for(const l of a){if(this.canonicalIssuer.hasId(l))continue;const d=new Eh("_:b");d.getId(l);const f=this.hashNDegreeQuads(l,d);c.push(f)}c.sort(m_);for(const l of c){const d=l.issuer.getOldIds();for(const f of d)this.canonicalIssuer.getId(f)}}const o=[];for(const a of this.quads){const c={...a};c.subject=this._useCanonicalId({component:c.subject}),c.object=this._useCanonicalId({component:c.object}),c.graph=this._useCanonicalId({component:c.graph}),o.push(Ih.serializeQuad(c))}return o.sort(),o.join("")}hashFirstDegreeQuads(e){const n=[],r=this.blankNodeInfo.get(e),i=r.quads;for(const o of i){const a={subject:null,predicate:o.predicate,object:null,graph:null};a.subject=this.modifyFirstDegreeComponent(e,o.subject,"subject"),a.object=this.modifyFirstDegreeComponent(e,o.object,"object"),a.graph=this.modifyFirstDegreeComponent(e,o.graph,"graph"),n.push(Ih.serializeQuad(a))}n.sort();const s=new Bl(this.hashAlgorithm);for(const o of n)s.update(o);return r.hash=s.digest(),r.hash}hashRelatedBlankNode(e,n,r,i){let s;this.canonicalIssuer.hasId(e)?s=this.canonicalIssuer.getId(e):r.hasId(e)?s=r.getId(e):s=this.blankNodeInfo.get(e).hash;const o=new Bl(this.hashAlgorithm);return o.update(i),i!=="g"&&o.update(this.getRelatedPredicate(n)),o.update(s),o.digest()}hashNDegreeQuads(e,n){const r=new Bl(this.hashAlgorithm),i=this.createHashToRelated(e,n),s=[...i.keys()].sort();for(const o of s){r.update(o);let a="",c;const l=new g_(i.get(o));for(;l.hasNext();){const d=l.next();let f=n.clone(),p="";const h=[];let m=!1;for(const y of d)if(this.canonicalIssuer.hasId(y)?p+=this.canonicalIssuer.getId(y):(f.hasId(y)||h.push(y),p+=f.getId(y)),a.length!==0&&p>a){m=!0;break}if(!m){for(const y of h){const _=this.hashNDegreeQuads(y,f);if(p+=f.getId(y),p+=`<${_.hash}>`,f=_.issuer,a.length!==0&&p>a){m=!0;break}}m||(a.length===0||p<a)&&(a=p,c=f)}}r.update(a),n=c}return{hash:r.digest(),issuer:n}}modifyFirstDegreeComponent(e,n){return n.termType!=="BlankNode"?n:{termType:"BlankNode",value:n.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}createHashToRelated(e,n){const r=new Map,i=this.blankNodeInfo.get(e).quads;for(const s of i)this._addRelatedBlankNodeHash({quad:s,component:s.subject,position:"s",id:e,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:s,component:s.object,position:"o",id:e,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:s,component:s.graph,position:"g",id:e,issuer:n,hashToRelated:r});return r}_hashAndTrackBlankNode({id:e,hashToBlankNodes:n}){const r=this.hashFirstDegreeQuads(e),i=n.get(r);i?i.push(e):n.set(r,[e])}_addBlankNodeQuadInfo({quad:e,component:n}){if(n.termType!=="BlankNode")return;const r=n.value,i=this.blankNodeInfo.get(r);i?i.quads.add(e):this.blankNodeInfo.set(r,{quads:new Set([e]),hash:null})}_addRelatedBlankNodeHash({quad:e,component:n,position:r,id:i,issuer:s,hashToRelated:o}){if(!(n.termType==="BlankNode"&&n.value!==i))return;const a=n.value,c=this.hashRelatedBlankNode(a,e,s,r),l=o.get(c);l?l.push(a):o.set(c,[a])}_useCanonicalId({component:e}){return e.termType==="BlankNode"&&!e.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}:e}};function m_(t,e){return t.hash<e.hash?-1:t.hash>e.hash?1:0}const y_=Hg;var w_=class extends y_{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,n,r){return n.termType!=="BlankNode"?n:r==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:n.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,n){const r=new Map,i=this.blankNodeInfo.get(e).quads;for(const s of i){let o,a;if(s.subject.termType==="BlankNode"&&s.subject.value!==e)a=s.subject.value,o="p";else if(s.object.termType==="BlankNode"&&s.object.value!==e)a=s.object.value,o="r";else continue;const c=this.hashRelatedBlankNode(a,s,n,o),l=r.get(c);l?l.push(a):r.set(c,[a])}return r}};const b_=Gg,__=p_,v_=Hg,T_=w_;let Hi;try{Hi=require("rdf-canonize-native")}catch{}const pi={};var E_=pi;pi.NQuads=Qd;pi.IdentifierIssuer=Wd;pi._rdfCanonizeNative=function(t){return t&&(Hi=t),Hi};pi.canonize=async function(t,e){if(Array.isArray(t)||(t=pi.NQuads.legacyDatasetToQuads(t)),e.useNative){if(!Hi)throw new Error("rdf-canonize-native not available");return new Promise((n,r)=>Hi.canonize(t,e,(i,s)=>i?r(i):n(s)))}if(e.algorithm==="URDNA2015")return new b_(e).main(t);if(e.algorithm==="URGNA2012")return new __(e).main(t);throw"algorithm"in e?new Error("Invalid RDF Dataset Canonicalization algorithm: "+e.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")};pi._canonizeSync=function(t,e){if(Array.isArray(t)||(t=pi.NQuads.legacyDatasetToQuads(t)),e.useNative){if(Hi)return Hi.canonizeSync(t,e);throw new Error("rdf-canonize-native not available")}if(e.algorithm==="URDNA2015")return new v_(e).main(t);if(e.algorithm==="URGNA2012")return new T_(e).main(t);throw"algorithm"in e?new Error("Invalid RDF Dataset Canonicalization algorithm: "+e.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")};var Xd=E_;const qn={};var zn=qn;qn.isArray=Array.isArray;qn.isBoolean=t=>typeof t=="boolean"||Object.prototype.toString.call(t)==="[object Boolean]";qn.isDouble=t=>qn.isNumber(t)&&(String(t).indexOf(".")!==-1||Math.abs(t)>=1e21);qn.isEmptyObject=t=>qn.isObject(t)&&Object.keys(t).length===0;qn.isNumber=t=>typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]";qn.isNumeric=t=>!isNaN(parseFloat(t))&&isFinite(t);qn.isObject=t=>Object.prototype.toString.call(t)==="[object Object]";qn.isString=t=>typeof t=="string"||Object.prototype.toString.call(t)==="[object String]";qn.isUndefined=t=>typeof t=="undefined";const Zs=zn,Fr={};var zr=Fr;Fr.isSubject=t=>Zs.isObject(t)&&!("@value"in t||"@set"in t||"@list"in t)?Object.keys(t).length>1||!("@id"in t):!1;Fr.isSubjectReference=t=>Zs.isObject(t)&&Object.keys(t).length===1&&"@id"in t;Fr.isValue=t=>Zs.isObject(t)&&"@value"in t;Fr.isList=t=>Zs.isObject(t)&&"@list"in t;Fr.isGraph=t=>Zs.isObject(t)&&"@graph"in t&&Object.keys(t).filter(e=>e!=="@id"&&e!=="@index").length===1;Fr.isSimpleGraph=t=>Fr.isGraph(t)&&!("@id"in t);Fr.isBlankNode=t=>Zs.isObject(t)?"@id"in t?t["@id"].indexOf("_:")===0:Object.keys(t).length===0||!("@value"in t||"@set"in t||"@list"in t):!1;var vr=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",n="jsonld.Error",r={}){super(e),this.name=n,this.message=e,this.details=r}};const Fo=zr,tn=zn,Zg=Xd.IdentifierIssuer,I_=vr,D_=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,R_=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,x_=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,Dh={headers:{accept:"application/ld+json, application/json"}},Me={};var tr=Me;Me.IdentifierIssuer=Zg;Me.clone=function(t){if(t&&typeof t=="object"){let e;if(tn.isArray(t)){e=[];for(let n=0;n<t.length;++n)e[n]=Me.clone(t[n])}else if(t instanceof Map){e=new Map;for(const[n,r]of t)e.set(n,Me.clone(r))}else if(t instanceof Set){e=new Set;for(const n of t)e.add(Me.clone(n))}else if(tn.isObject(t)){e={};for(const n in t)e[n]=Me.clone(t[n])}else e=t.toString();return e}return t};Me.asArray=function(t){return Array.isArray(t)?t:[t]};Me.buildHeaders=(t={})=>{if(Object.keys(t).some(n=>n.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+Dh.headers.accept+'" is supported.');return Object.assign({Accept:Dh.headers.accept},t)};Me.parseLinkHeader=t=>{const e={},n=t.match(D_);for(let r=0;r<n.length;++r){let i=n[r].match(R_);if(!i)continue;const s={target:i[1]},o=i[2];for(;i=x_.exec(o);)s[i[1]]=i[2]===void 0?i[3]:i[2];const a=s.rel||"";Array.isArray(e[a])?e[a].push(s):e.hasOwnProperty(a)?e[a]=[e[a],s]:e[a]=s}return e};Me.validateTypeValue=(t,e)=>{if(!tn.isString(t)&&!(tn.isArray(t)&&t.every(n=>tn.isString(n)))){if(e&&tn.isObject(t))switch(Object.keys(t).length){case 0:return;case 1:if("@default"in t&&Me.asArray(t["@default"]).every(n=>tn.isString(n)))return}throw new I_('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:t})}};Me.hasProperty=(t,e)=>{if(t.hasOwnProperty(e)){const n=t[e];return!tn.isArray(n)||n.length>0}return!1};Me.hasValue=(t,e,n)=>{if(Me.hasProperty(t,e)){let r=t[e];const i=Fo.isList(r);if(tn.isArray(r)||i){i&&(r=r["@list"]);for(let s=0;s<r.length;++s)if(Me.compareValues(n,r[s]))return!0}else if(!tn.isArray(n))return Me.compareValues(n,r)}return!1};Me.addValue=(t,e,n,r)=>{if(r=r||{},"propertyIsArray"in r||(r.propertyIsArray=!1),"valueIsArray"in r||(r.valueIsArray=!1),"allowDuplicate"in r||(r.allowDuplicate=!0),"prependValue"in r||(r.prependValue=!1),r.valueIsArray)t[e]=n;else if(tn.isArray(n)){n.length===0&&r.propertyIsArray&&!t.hasOwnProperty(e)&&(t[e]=[]),r.prependValue&&(n=n.concat(t[e]),t[e]=[]);for(let i=0;i<n.length;++i)Me.addValue(t,e,n[i],r)}else if(t.hasOwnProperty(e)){const i=!r.allowDuplicate&&Me.hasValue(t,e,n);!tn.isArray(t[e])&&(!i||r.propertyIsArray)&&(t[e]=[t[e]]),i||(r.prependValue?t[e].unshift(n):t[e].push(n))}else t[e]=r.propertyIsArray?[n]:n};Me.getValues=(t,e)=>[].concat(t[e]||[]);Me.removeProperty=(t,e)=>{delete t[e]};Me.removeValue=(t,e,n,r)=>{r=r||{},"propertyIsArray"in r||(r.propertyIsArray=!1);const i=Me.getValues(t,e).filter(s=>!Me.compareValues(s,n));i.length===0?Me.removeProperty(t,e):i.length===1&&!r.propertyIsArray?t[e]=i[0]:t[e]=i};Me.relabelBlankNodes=(t,e)=>{e=e||{};const n=e.issuer||new Zg("_:b");return Za(n,t)};Me.compareValues=(t,e)=>t===e||Fo.isValue(t)&&Fo.isValue(e)&&t["@value"]===e["@value"]&&t["@type"]===e["@type"]&&t["@language"]===e["@language"]&&t["@index"]===e["@index"]?!0:tn.isObject(t)&&"@id"in t&&tn.isObject(e)&&"@id"in e?t["@id"]===e["@id"]:!1;Me.compareShortestLeast=(t,e)=>t.length<e.length?-1:e.length<t.length?1:t===e?0:t<e?-1:1;function Za(t,e){if(tn.isArray(e))for(let n=0;n<e.length;++n)e[n]=Za(t,e[n]);else if(Fo.isList(e))e["@list"]=Za(t,e["@list"]);else if(tn.isObject(e)){Fo.isBlankNode(e)&&(e["@id"]=t.getId(e["@id"]));const n=Object.keys(e).sort();for(let r=0;r<n.length;++r){const i=n[r];i!=="@id"&&(e[i]=Za(t,e[i]))}}return e}const Vn="http://www.w3.org/1999/02/22-rdf-syntax-ns#",co="http://www.w3.org/2001/XMLSchema#";var Kd={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:Vn,RDF_LIST:Vn+"List",RDF_FIRST:Vn+"first",RDF_REST:Vn+"rest",RDF_NIL:Vn+"nil",RDF_TYPE:Vn+"type",RDF_PLAIN_LITERAL:Vn+"PlainLiteral",RDF_XML_LITERAL:Vn+"XMLLiteral",RDF_JSON_LITERAL:Vn+"JSON",RDF_OBJECT:Vn+"object",RDF_LANGSTRING:Vn+"langString",XSD:co,XSD_BOOLEAN:co+"boolean",XSD_DOUBLE:co+"double",XSD_INTEGER:co+"integer",XSD_STRING:co+"string"},Vg=class{constructor(){this._requests={}}wrapLoader(e){const n=this;return n._loader=e,function(){return n.add.apply(n,arguments)}}async add(e){let n=this._requests[e];if(n)return Promise.resolve(n);n=this._requests[e]=this._loader(e);try{return await n}finally{delete this._requests[e]}}};const Bc=zn,nn={};var yi=nn;nn.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};nn.parse=(t,e)=>{const n={},r=nn.parsers[e||"full"],i=r.regex.exec(t);let s=r.keys.length;for(;s--;)n[r.keys[s]]=i[s]===void 0?null:i[s];return(n.scheme==="https"&&n.port==="443"||n.scheme==="http"&&n.port==="80")&&(n.href=n.href.replace(":"+n.port,""),n.authority=n.authority.replace(":"+n.port,""),n.port=null),n.normalizedPath=nn.removeDotSegments(n.path),n};nn.prependBase=(t,e)=>{if(t===null||nn.isAbsolute(e))return e;(!t||Bc.isString(t))&&(t=nn.parse(t||""));const n=nn.parse(e),r={protocol:t.protocol||""};if(n.authority!==null)r.authority=n.authority,r.path=n.path,r.query=n.query;else if(r.authority=t.authority,n.path==="")r.path=t.path,n.query!==null?r.query=n.query:r.query=t.query;else{if(n.path.indexOf("/")===0)r.path=n.path;else{let s=t.path;s=s.substr(0,s.lastIndexOf("/")+1),(s.length>0||t.authority)&&s.substr(-1)!=="/"&&(s+="/"),s+=n.path,r.path=s}r.query=n.query}n.path!==""&&(r.path=nn.removeDotSegments(r.path));let i=r.protocol;return r.authority!==null&&(i+="//"+r.authority),i+=r.path,r.query!==null&&(i+="?"+r.query),n.fragment!==null&&(i+="#"+n.fragment),i===""&&(i="./"),i};nn.removeBase=(t,e)=>{if(t===null)return e;(!t||Bc.isString(t))&&(t=nn.parse(t||""));let n="";if(t.href!==""?n+=(t.protocol||"")+"//"+(t.authority||""):e.indexOf("//")&&(n+="//"),e.indexOf(n)!==0)return e;const r=nn.parse(e.substr(n.length)),i=t.normalizedPath.split("/"),s=r.normalizedPath.split("/"),o=r.fragment||r.query?0:1;for(;i.length>0&&s.length>o&&i[0]===s[0];)i.shift(),s.shift();let a="";if(i.length>0){i.pop();for(let c=0;c<i.length;++c)a+="../"}return a+=s.join("/"),r.query!==null&&(a+="?"+r.query),r.fragment!==null&&(a+="#"+r.fragment),a===""&&(a="./"),a};nn.removeDotSegments=t=>{if(t.length===0)return"";const e=t.split("/"),n=[];for(;e.length>0;){const r=e.shift(),i=e.length===0;if(r==="."){i&&n.push("");continue}if(r===".."){n.pop(),i&&n.push("");continue}n.push(r)}return t[0]==="/"&&n.length>0&&n[0]!==""&&n.unshift(""),n.length===1&&n[0]===""?"/":n.join("/")};const O_=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;nn.isAbsolute=t=>Bc.isString(t)&&O_.test(t);nn.isRelative=t=>Bc.isString(t);const{parseLinkHeader:N_,buildHeaders:A_}=tr,{LINK_HEADER_CONTEXT:S_}=Kd,lo=vr,j_=Vg,{prependBase:M_}=yi,C_=/(^|(\r\n))link:/i;var L_=({secure:t,headers:e={},xhr:n}={headers:{}})=>{return e=A_(e),new j_().wrapLoader(i);async function i(s){if(s.indexOf("http:")!==0&&s.indexOf("https:")!==0)throw new lo('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:s});if(t&&s.indexOf("https")!==0)throw new lo(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:s});let o;try{o=await $_(n,s,e)}catch(f){throw new lo("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:s,cause:f})}if(o.status>=400)throw new lo("URL could not be dereferenced: "+o.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:s,httpStatusCode:o.status});let a={contextUrl:null,documentUrl:s,document:o.response},c=null;const l=o.getResponseHeader("Content-Type");let d;if(C_.test(o.getAllResponseHeaders())&&(d=o.getResponseHeader("Link")),d&&l!=="application/ld+json"){const f=N_(d),p=f[S_];if(Array.isArray(p))throw new lo("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:s});p&&(a.contextUrl=p.target),c=f.alternate,c&&c.type=="application/ld+json"&&!(l||"").match(/^application\/(\w*\+)?json$/)&&(a=await i(M_(s,c.target)))}return a}};function $_(t,e,n){t=t||XMLHttpRequest;const r=new t;return new Promise((i,s)=>{r.onload=()=>i(r),r.onerror=o=>s(o),r.open("GET",e,!0);for(const o in n)r.setRequestHeader(o,n[o]);r.send()})}const k_=L_,Jd={};var P_=Jd;Jd.setupDocumentLoaders=function(t){typeof XMLHttpRequest!="undefined"&&(t.documentLoaders.xhr=k_,t.useDocumentLoader("xhr"))};Jd.setupGlobals=function(t){typeof globalThis.JsonLdProcessor=="undefined"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:t.JsonLdProcessor})};var U_=Oe;Oe.Node=Zi;Oe.create=Oe;function Oe(t){var e=this;if(e instanceof Oe||(e=new Oe),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}Oe.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Oe.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Oe.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Oe.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)B_(this,arguments[t]);return this.length};Oe.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)q_(this,arguments[t]);return this.length};Oe.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Oe.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Oe.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};Oe.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};Oe.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};Oe.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};Oe.prototype.map=function(t,e){e=e||this;for(var n=new Oe,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};Oe.prototype.mapReverse=function(t,e){e=e||this;for(var n=new Oe,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};Oe.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=t(n,r.value,i),r=r.next;return n};Oe.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=t(n,r.value,i),r=r.prev;return n};Oe.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};Oe.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};Oe.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new Oe;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)n.push(i.value);return n};Oe.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new Oe;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>t;r--,i=i.prev)n.push(i.value);return n};Oe.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(var s=[],r=0;i&&r<e;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=F_(this,i,n[r]);return s};Oe.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function F_(t,e,n){var r=e===t.head?new Zi(n,null,e,t):new Zi(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function B_(t,e){t.tail=new Zi(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function q_(t,e){t.head=new Zi(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Zi(t,e,n,r){if(!(this instanceof Zi))return new Zi(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{require("./iterator.js")(Oe)}catch{}const Y_=U_,Ai=Symbol("max"),Ar=Symbol("length"),ps=Symbol("lengthCalculator"),To=Symbol("allowStale"),Mi=Symbol("maxAge"),Or=Symbol("dispose"),Rh=Symbol("noDisposeOnSet"),jt=Symbol("lruList"),Qn=Symbol("cache"),Wg=Symbol("updateAgeOnGet"),ql=()=>1;class z_{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[Ai]=e.max||1/0;const n=e.length||ql;if(this[ps]=typeof n!="function"?ql:n,this[To]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Mi]=e.maxAge||0,this[Or]=e.dispose,this[Rh]=e.noDisposeOnSet||!1,this[Wg]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Ai]=e||1/0,uo(this)}get max(){return this[Ai]}set allowStale(e){this[To]=!!e}get allowStale(){return this[To]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Mi]=e,uo(this)}get maxAge(){return this[Mi]}set lengthCalculator(e){typeof e!="function"&&(e=ql),e!==this[ps]&&(this[ps]=e,this[Ar]=0,this[jt].forEach(n=>{n.length=this[ps](n.value,n.key),this[Ar]+=n.length})),uo(this)}get lengthCalculator(){return this[ps]}get length(){return this[Ar]}get itemCount(){return this[jt].length}rforEach(e,n){n=n||this;for(let r=this[jt].tail;r!==null;){const i=r.prev;xh(this,e,r,n),r=i}}forEach(e,n){n=n||this;for(let r=this[jt].head;r!==null;){const i=r.next;xh(this,e,r,n),r=i}}keys(){return this[jt].toArray().map(e=>e.key)}values(){return this[jt].toArray().map(e=>e.value)}reset(){this[Or]&&this[jt]&&this[jt].length&&this[jt].forEach(e=>this[Or](e.key,e.value)),this[Qn]=new Map,this[jt]=new Y_,this[Ar]=0}dump(){return this[jt].map(e=>gc(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[jt]}set(e,n,r){if(r=r||this[Mi],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[ps](n,e);if(this[Qn].has(e)){if(s>this[Ai])return Rs(this,this[Qn].get(e)),!1;const c=this[Qn].get(e).value;return this[Or]&&(this[Rh]||this[Or](e,c.value)),c.now=i,c.maxAge=r,c.value=n,this[Ar]+=s-c.length,c.length=s,this.get(e),uo(this),!0}const o=new G_(e,n,s,i,r);return o.length>this[Ai]?(this[Or]&&this[Or](e,n),!1):(this[Ar]+=o.length,this[jt].unshift(o),this[Qn].set(e,this[jt].head),uo(this),!0)}has(e){if(!this[Qn].has(e))return!1;const n=this[Qn].get(e).value;return!gc(this,n)}get(e){return Yl(this,e,!0)}peek(e){return Yl(this,e,!1)}pop(){const e=this[jt].tail;return e?(Rs(this,e),e.value):null}del(e){Rs(this,this[Qn].get(e))}load(e){this.reset();const n=Date.now();for(let r=e.length-1;r>=0;r--){const i=e[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Qn].forEach((e,n)=>Yl(this,n,!1))}}const Yl=(t,e,n)=>{const r=t[Qn].get(e);if(r){const i=r.value;if(gc(t,i)){if(Rs(t,r),!t[To])return}else n&&(t[Wg]&&(r.value.now=Date.now()),t[jt].unshiftNode(r));return i.value}},gc=(t,e)=>{if(!e||!e.maxAge&&!t[Mi])return!1;const n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[Mi]&&n>t[Mi]},uo=t=>{if(t[Ar]>t[Ai])for(let e=t[jt].tail;t[Ar]>t[Ai]&&e!==null;){const n=e.prev;Rs(t,e),e=n}},Rs=(t,e)=>{if(e){const n=e.value;t[Or]&&t[Or](n.key,n.value),t[Ar]-=n.length,t[Qn].delete(n.key),t[jt].removeNode(e)}};class G_{constructor(e,n,r,i,s){this.key=e,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const xh=(t,e,n,r)=>{let i=n.value;gc(t,i)&&(Rs(t,n),t[To]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};var Qg=z_;const H_=Qg,Z_=10;var V_=class{constructor({document:e}){this.document=e,this.cache=new H_({max:Z_})}getProcessed(e){return this.cache.get(e)}setProcessed(e,n){this.cache.set(e,n)}};const{isArray:zu,isObject:Eo,isString:mc}=zn,{asArray:W_}=tr,{prependBase:Gu}=yi,yo=vr,Oh=V_,Nh=10;var Q_=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}async resolve({activeCtx:e,context:n,documentLoader:r,base:i,cycles:s=new Set}){n&&Eo(n)&&n["@context"]&&(n=n["@context"]),n=W_(n);const o=[];for(const a of n){if(mc(a)){let d=this._get(a);d||(d=await this._resolveRemoteContext({activeCtx:e,url:a,documentLoader:r,base:i,cycles:s})),zu(d)?o.push(...d):o.push(d);continue}if(a===null){o.push(new Oh({document:null}));continue}Eo(a)||X_(n);const c=JSON.stringify(a);let l=this._get(c);l||(l=new Oh({document:a}),this._cacheResolvedContext({key:c,resolved:l,tag:"static"})),o.push(l)}return o}_get(e){let n=this.perOpCache.get(e);if(!n){const r=this.sharedCache.get(e);r&&(n=r.get("static"),n&&this.perOpCache.set(e,n))}return n}_cacheResolvedContext({key:e,resolved:n,tag:r}){if(this.perOpCache.set(e,n),r!==void 0){let i=this.sharedCache.get(e);i||(i=new Map,this.sharedCache.set(e,i)),i.set(r,n)}return n}async _resolveRemoteContext({activeCtx:e,url:n,documentLoader:r,base:i,cycles:s}){n=Gu(i,n);const{context:o,remoteDoc:a}=await this._fetchContext({activeCtx:e,url:n,documentLoader:r,cycles:s});i=a.documentUrl||n,Hu({context:o,base:i});const c=await this.resolve({activeCtx:e,context:o,documentLoader:r,base:i,cycles:s});return this._cacheResolvedContext({key:n,resolved:c,tag:a.tag}),c}async _fetchContext({activeCtx:e,url:n,documentLoader:r,cycles:i}){if(i.size>Nh)throw new yo("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:e.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:Nh});if(i.has(n))throw new yo("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:e.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:n});i.add(n);let s,o;try{o=await r(n),s=o.document||null,mc(s)&&(s=JSON.parse(s))}catch(a){throw new yo("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:n,cause:a})}if(!Eo(s))throw new yo("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:n});return"@context"in s?s={"@context":s["@context"]}:s={"@context":{}},o.contextUrl&&(zu(s["@context"])||(s["@context"]=[s["@context"]]),s["@context"].push(o.contextUrl)),{context:s,remoteDoc:o}}};function X_(t){throw new yo("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:t})}function Hu({context:t,base:e}){if(!t)return;const n=t["@context"];if(mc(n)){t["@context"]=Gu(e,n);return}if(zu(n)){for(let r=0;r<n.length;++r){const i=n[r];if(mc(i)){n[r]=Gu(e,i);continue}Eo(i)&&Hu({context:{"@context":i},base:e})}return}if(!!Eo(n))for(const r in n)Hu({context:n[r],base:e})}var K_=Xd.NQuads;const yc=tr,ee=vr,{isArray:Xg,isObject:ni,isString:pn,isUndefined:J_}=zn,{isAbsolute:xs,isRelative:ev,prependBase:Io}=yi,{asArray:Kg,compareShortestLeast:tv}=tr,Sa=new Map,nv=1e4,Va=/^@[a-zA-Z]+$/,qe={};var Ji=qe;qe.process=async({activeCtx:t,localCtx:e,options:n,propagate:r=!0,overrideProtected:i=!1,cycles:s=new Set})=>{if(ni(e)&&"@context"in e&&Xg(e["@context"])&&(e=e["@context"]),Kg(e).length===0)return t;const a=await n.contextResolver.resolve({activeCtx:t,context:e,documentLoader:n.documentLoader,base:n.base});ni(a[0].document)&&typeof a[0].document["@propagate"]=="boolean"&&(r=a[0].document["@propagate"]);let c=t;!r&&!c.previousContext&&(c=c.clone(),c.previousContext=t);for(const l of a){let{document:d}=l;if(t=c,d===null){if(!i&&Object.keys(t.protected).length!==0){const h=n&&n.protectedMode||"error";if(h==="error")throw new ee("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if(h==="warn"){console.warn("WARNING: invalid context nullification");const m=l.getProcessed(t);if(m){c=t=m;continue}const y=t;c=t=qe.getInitialContext(n).clone();for(const[_,v]of Object.entries(y.protected))v&&(t.mappings[_]=yc.clone(y.mappings[_]));t.protected=yc.clone(y.protected),l.setProcessed(y,c);continue}throw new ee("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:e,protectedMode:h})}c=t=qe.getInitialContext(n).clone();continue}const f=l.getProcessed(t);if(f){c=t=f;continue}if(ni(d)&&"@context"in d&&(d=d["@context"]),!ni(d))throw new ee("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:d});c=c.clone();const p=new Map;if("@version"in d){if(d["@version"]!==1.1)throw new ee("Unsupported JSON-LD version: "+d["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:d});if(t.processingMode&&t.processingMode==="json-ld-1.0")throw new ee("@version: "+d["@version"]+" not compatible with "+t.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:d});c.processingMode="json-ld-1.1",c["@version"]=d["@version"],p.set("@version",!0)}if(c.processingMode=c.processingMode||t.processingMode,"@base"in d){let h=d["@base"];if(!(h===null||xs(h)))if(ev(h))h=Io(c["@base"],h);else throw new ee('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:d});c["@base"]=h,p.set("@base",!0)}if("@vocab"in d){const h=d["@vocab"];if(h===null)delete c["@vocab"];else if(pn(h)){if(!xs(h)&&qe.processingMode(c,1))throw new ee('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:d});c["@vocab"]=bs(c,h,{vocab:!0,base:!0},void 0,void 0,n)}else throw new ee('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:d});p.set("@vocab",!0)}if("@language"in d){const h=d["@language"];if(h===null)delete c["@language"];else if(pn(h))c["@language"]=h.toLowerCase();else throw new ee('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:d});p.set("@language",!0)}if("@direction"in d){const h=d["@direction"];if(t.processingMode==="json-ld-1.0")throw new ee("Invalid JSON-LD syntax; @direction not compatible with "+t.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:d});if(h===null)delete c["@direction"];else{if(h!=="ltr"&&h!=="rtl")throw new ee('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:d});c["@direction"]=h}p.set("@direction",!0)}if("@propagate"in d){const h=d["@propagate"];if(t.processingMode==="json-ld-1.0")throw new ee("Invalid JSON-LD syntax; @propagate not compatible with "+t.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:d});if(typeof h!="boolean")throw new ee("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:e});p.set("@propagate",!0)}if("@import"in d){const h=d["@import"];if(t.processingMode==="json-ld-1.0")throw new ee("Invalid JSON-LD syntax; @import not compatible with "+t.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:d});if(!pn(h))throw new ee("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:e});const m=await n.contextResolver.resolve({activeCtx:t,context:h,documentLoader:n.documentLoader,base:n.base});if(m.length!==1)throw new ee("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:e});const y=m[0].getProcessed(t);if(y)d=y;else{const _=m[0].document;if("@import"in _)throw new ee("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:e});for(const v in _)d.hasOwnProperty(v)||(d[v]=_[v]);m[0].setProcessed(t,d)}p.set("@import",!0)}p.set("@protected",d["@protected"]||!1);for(const h in d)if(qe.createTermDefinition({activeCtx:c,localCtx:d,term:h,defined:p,options:n,overrideProtected:i}),ni(d[h])&&"@context"in d[h]){const m=d[h]["@context"];let y=!0;if(pn(m)){const _=Io(n.base,m);s.has(_)?y=!1:s.add(_)}if(y)try{await qe.process({activeCtx:c.clone(),localCtx:d[h]["@context"],overrideProtected:!0,options:n,cycles:s})}catch{throw new ee("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:d[h]["@context"],term:h})}}l.setProcessed(t,c)}return c};qe.createTermDefinition=({activeCtx:t,localCtx:e,term:n,defined:r,options:i,overrideProtected:s=!1})=>{if(r.has(n)){if(r.get(n))return;throw new ee("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:e,term:n})}r.set(n,!1);let o;if(e.hasOwnProperty(n)&&(o=e[n]),n==="@type"&&ni(o)&&(o["@container"]||"@set")==="@set"&&qe.processingMode(t,1.1)){const h=["@container","@id","@protected"],m=Object.keys(o);if(m.length===0||m.some(y=>!h.includes(y)))throw new ee("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:e,term:n})}else{if(qe.isKeyword(n))throw new ee("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:e,term:n});if(n.match(Va)){console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:n});return}else if(n==="")throw new ee("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:e})}const a=t.mappings.get(n);t.mappings.has(n)&&t.mappings.delete(n);let c=!1;if((pn(o)||o===null)&&(c=!0,o={"@id":o}),!ni(o))throw new ee("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:e});const l={};t.mappings.set(n,l),l.reverse=!1;const d=["@container","@id","@language","@reverse","@type"];qe.processingMode(t,1.1)&&d.push("@context","@direction","@index","@nest","@prefix","@protected");for(const h in o)if(!d.includes(h))throw new ee("Invalid JSON-LD syntax; a term definition must not contain "+h,"jsonld.SyntaxError",{code:"invalid term definition",context:e});const f=n.indexOf(":");if(l._termHasColon=f>0,"@reverse"in o){if("@id"in o)throw new ee("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:e});if("@nest"in o)throw new ee("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:e});const h=o["@reverse"];if(!pn(h))throw new ee("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});if(!qe.isKeyword(h)&&h.match(Va)){console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:h}),a?t.mappings.set(n,a):t.mappings.delete(n);return}const m=bs(t,h,{vocab:!0,base:!1},e,r,i);if(!xs(m))throw new ee("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});l["@id"]=m,l.reverse=!0}else if("@id"in o){let h=o["@id"];if(h&&!pn(h))throw new ee("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});if(h===null)l["@id"]=null;else if(!qe.isKeyword(h)&&h.match(Va)){console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:h}),a?t.mappings.set(n,a):t.mappings.delete(n);return}else if(h!==n){if(h=bs(t,h,{vocab:!0,base:!1},e,r,i),!xs(h)&&!qe.isKeyword(h))throw new ee("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});if(n.match(/(?::[^:])|\//)){const m=new Map(r).set(n,!0);if(bs(t,n,{vocab:!0,base:!1},e,m,i)!==h)throw new ee("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e})}l["@id"]=h,l._prefix=c&&!l._termHasColon&&h.match(/[:\/\?#\[\]@]$/)}}if(!("@id"in l))if(l._termHasColon){const h=n.substr(0,f);if(e.hasOwnProperty(h)&&qe.createTermDefinition({activeCtx:t,localCtx:e,term:h,defined:r,options:i}),t.mappings.has(h)){const m=n.substr(f+1);l["@id"]=t.mappings.get(h)["@id"]+m}else l["@id"]=n}else if(n==="@type")l["@id"]=n;else{if(!("@vocab"in t))throw new ee("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e,term:n});l["@id"]=t["@vocab"]+n}if((o["@protected"]===!0||r.get("@protected")===!0&&o["@protected"]!==!1)&&(t.protected[n]=!0,l.protected=!0),r.set(n,!0),"@type"in o){let h=o["@type"];if(!pn(h))throw new ee("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:e});if(h==="@json"||h==="@none"){if(qe.processingMode(t,1))throw new ee(`Invalid JSON-LD syntax; an @context @type value must not be "${h}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:e})}else if(h!=="@id"&&h!=="@vocab"){if(h=bs(t,h,{vocab:!0,base:!1},e,r,i),!xs(h))throw new ee("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:e});if(h.indexOf("_:")===0)throw new ee("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:e})}l["@type"]=h}if("@container"in o){const h=pn(o["@container"])?[o["@container"]]:o["@container"]||[],m=["@list","@set","@index","@language"];let y=!0;const _=h.includes("@set");if(qe.processingMode(t,1.1)){if(m.push("@graph","@id","@type"),h.includes("@list")){if(h.length!==1)throw new ee("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:e})}else if(h.includes("@graph")){if(h.some(v=>v!=="@graph"&&v!=="@id"&&v!=="@index"&&v!=="@set"))throw new ee("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:e})}else y&=h.length<=(_?2:1);if(h.includes("@type")&&(l["@type"]=l["@type"]||"@id",!["@id","@vocab"].includes(l["@type"])))throw new ee("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:e})}else y&=!Xg(o["@container"]),y&=h.length<=1;if(y&=h.every(v=>m.includes(v)),y&=!(_&&h.includes("@list")),!y)throw new ee("Invalid JSON-LD syntax; @context @container value must be one of the following: "+m.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:e});if(l.reverse&&!h.every(v=>["@index","@set"].includes(v)))throw new ee("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:e});l["@container"]=h}if("@index"in o){if(!("@container"in o)||!l["@container"].includes("@index"))throw new ee(`Invalid JSON-LD syntax; @index without @index in @container: "${o["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:e});if(!pn(o["@index"])||o["@index"].indexOf("@")===0)throw new ee(`Invalid JSON-LD syntax; @index must expand to an IRI: "${o["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:e});l["@index"]=o["@index"]}if("@context"in o&&(l["@context"]=o["@context"]),"@language"in o&&!("@type"in o)){let h=o["@language"];if(h!==null&&!pn(h))throw new ee("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:e});h!==null&&(h=h.toLowerCase()),l["@language"]=h}if("@prefix"in o){if(n.match(/:|\//))throw new ee("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:e});if(qe.isKeyword(l["@id"]))throw new ee("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:e});if(typeof o["@prefix"]=="boolean")l._prefix=o["@prefix"]===!0;else throw new ee("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:e})}if("@direction"in o){const h=o["@direction"];if(h!==null&&h!=="ltr"&&h!=="rtl")throw new ee('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:e});l["@direction"]=h}if("@nest"in o){const h=o["@nest"];if(!pn(h)||h!=="@nest"&&h.indexOf("@")===0)throw new ee("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:e});l["@nest"]=h}// disallow aliasing @context and @preserve
const p=l["@id"];if(p==="@context"||p==="@preserve")throw new ee("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:e});if(a&&a.protected&&!s&&(t.protected[n]=!0,l.protected=!0,!Zu(a,l))){const h=i&&i.protectedMode||"error";if(h==="error")throw new ee(`Invalid JSON-LD syntax; tried to redefine "${n}" which is a protected term.`,"jsonld.SyntaxError",{code:"protected term redefinition",context:e,term:n});if(h==="warn"){console.warn("WARNING: protected term redefinition",{term:n});return}throw new ee("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:e,term:n,protectedMode:h})}};qe.expandIri=(t,e,n,r)=>bs(t,e,n,void 0,void 0,r);function bs(t,e,n,r,i,s){if(e===null||!pn(e)||qe.isKeyword(e))return e;if(e.match(Va))return null;if(r&&r.hasOwnProperty(e)&&i.get(e)!==!0&&qe.createTermDefinition({activeCtx:t,localCtx:r,term:e,defined:i,options:s}),n=n||{},n.vocab){const a=t.mappings.get(e);if(a===null)return null;if(ni(a)&&"@id"in a)return a["@id"]}const o=e.indexOf(":");if(o>0){const a=e.substr(0,o),c=e.substr(o+1);if(a==="_"||c.indexOf("//")===0)return e;r&&r.hasOwnProperty(a)&&qe.createTermDefinition({activeCtx:t,localCtx:r,term:a,defined:i,options:s});const l=t.mappings.get(a);if(l&&l._prefix)return l["@id"]+c;if(xs(e))return e}if(n.vocab&&"@vocab"in t)return t["@vocab"]+e;if(n.base&&"@base"in t){if(t["@base"])return Io(Io(s.base,t["@base"]),e)}else if(n.base)return Io(s.base,e);return e}qe.getInitialContext=t=>{const e=JSON.stringify({processingMode:t.processingMode}),n=Sa.get(e);if(n)return n;const r={processingMode:t.processingMode,mappings:new Map,inverse:null,getInverse:i,clone:a,revertToPreviousContext:c,protected:{}};return Sa.size===nv&&Sa.clear(),Sa.set(e,r),r;function i(){const l=this;if(l.inverse)return l.inverse;const d=l.inverse={},f=l.fastCurieMap={},p={},h=(l["@language"]||"@none").toLowerCase(),m=l["@direction"],y=l.mappings,_=[...y.keys()].sort(tv);for(const v of _){const T=y.get(v);if(T===null)continue;let I=T["@container"]||"@none";if(I=[].concat(I).sort().join(""),T["@id"]===null)continue;const R=Kg(T["@id"]);for(const O of R){let N=d[O];const x=qe.isKeyword(O);if(N)!x&&!T._termHasColon&&p[O].push(v);else if(d[O]=N={},!x&&!T._termHasColon){p[O]=[v];const C={iri:O,terms:p[O]};O[0]in f?f[O[0]].push(C):f[O[0]]=[C]}if(N[I]||(N[I]={"@language":{},"@type":{},"@any":{}}),N=N[I],o(v,N["@any"],"@none"),T.reverse)o(v,N["@type"],"@reverse");else if(T["@type"]==="@none")o(v,N["@any"],"@none"),o(v,N["@language"],"@none"),o(v,N["@type"],"@none");else if("@type"in T)o(v,N["@type"],T["@type"]);else if("@language"in T&&"@direction"in T){const C=T["@language"],$=T["@direction"];C&&$?o(v,N["@language"],`${C}_${$}`.toLowerCase()):C?o(v,N["@language"],C.toLowerCase()):$?o(v,N["@language"],`_${$}`):o(v,N["@language"],"@null")}else"@language"in T?o(v,N["@language"],(T["@language"]||"@null").toLowerCase()):"@direction"in T?T["@direction"]?o(v,N["@language"],`_${T["@direction"]}`):o(v,N["@language"],"@none"):m?(o(v,N["@language"],`_${m}`),o(v,N["@language"],"@none"),o(v,N["@type"],"@none")):(o(v,N["@language"],h),o(v,N["@language"],"@none"),o(v,N["@type"],"@none"))}}for(const v in f)s(f,v,1);return d}function s(l,d,f){const p=l[d],h=l[d]={};let m,y;for(const _ of p)m=_.iri,f>=m.length?y="":y=m[f],y in h?h[y].push(_):h[y]=[_];for(const _ in h)_!==""&&s(h,_,f+1)}function o(l,d,f){d.hasOwnProperty(f)||(d[f]=l)}function a(){const l={};return l.mappings=yc.clone(this.mappings),l.clone=this.clone,l.inverse=null,l.getInverse=this.getInverse,l.protected=yc.clone(this.protected),this.previousContext&&(l.previousContext=this.previousContext.clone()),l.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(l["@base"]=this["@base"]),"@language"in this&&(l["@language"]=this["@language"]),"@vocab"in this&&(l["@vocab"]=this["@vocab"]),l}function c(){return this.previousContext?this.previousContext.clone():this}};qe.getContextValue=(t,e,n)=>{if(e===null)return n==="@context"?void 0:null;if(t.mappings.has(e)){const r=t.mappings.get(e);if(J_(n))return r;if(r.hasOwnProperty(n))return r[n]}if(n==="@language"&&n in t||n==="@direction"&&n in t)return t[n];if(n!=="@context")return null};qe.processingMode=(t,e)=>e.toString()>="1.1"?!t.processingMode||t.processingMode>="json-ld-"+e.toString():t.processingMode==="json-ld-1.0";qe.isKeyword=t=>{if(!pn(t)||t[0]!=="@")return!1;switch(t){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function Zu(t,e){if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return t===e;const n=Array.isArray(t);if(n!==Array.isArray(e))return!1;if(n){if(t.length!==e.length)return!1;for(let s=0;s<t.length;++s)if(!Zu(t[s],e[s]))return!1;return!0}const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s in t){let o=t[s],a=e[s];if(s==="@container"&&Array.isArray(o)&&Array.isArray(a)&&(o=o.slice().sort(),a=a.slice().sort()),!Zu(o,a))return!1}return!0}const et=vr,{isArray:Cn,isObject:Nn,isEmptyObject:Vu,isString:Kt,isUndefined:wc}=zn,{isList:zl,isValue:Wu,isGraph:rv,isSubject:iv}=zr,{expandIri:vt,getContextValue:Ln,isKeyword:Qu,process:Do,processingMode:Wa}=Ji,{isAbsolute:Jg}=yi,{addValue:vn,asArray:Wn,getValues:sv,validateTypeValue:ov}=tr,ii={};var av=ii;const cv=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;ii.expand=async({activeCtx:t,activeProperty:e=null,element:n,options:r={},insideList:i=!1,insideIndex:s=!1,typeScopedContext:o=null,expansionMap:a=()=>{}})=>{if(n==null)return null;if(e==="@default"&&(r=Object.assign({},r,{isFrame:!1})),!Cn(n)&&!Nn(n)){if(!i&&(e===null||vt(t,e,{vocab:!0},r)==="@graph")){const y=await a({unmappedValue:n,activeCtx:t,activeProperty:e,options:r,insideList:i});return y===void 0?null:y}return tm({activeCtx:t,activeProperty:e,value:n,options:r})}if(Cn(n)){let y=[];const _=Ln(t,e,"@container")||[];i=i||_.includes("@list");for(let v=0;v<n.length;++v){let T=await ii.expand({activeCtx:t,activeProperty:e,element:n[v],options:r,expansionMap:a,insideIndex:s,typeScopedContext:o});i&&Cn(T)&&(T={"@list":T}),!(T===null&&(T=await a({unmappedValue:n[v],activeCtx:t,activeProperty:e,parent:n,index:v,options:r,expandedParent:y,insideList:i}),T===void 0))&&(Cn(T)?y=y.concat(T):y.push(T))}return y}const c=vt(t,e,{vocab:!0},r),l=Ln(t,e,"@context");o=o||(t.previousContext?t:null);let d=Object.keys(n).sort(),f=!s;if(f&&o&&d.length<=2&&!d.includes("@context"))for(const y of d){const _=vt(o,y,{vocab:!0},r);if(_==="@value"){f=!1,t=o;break}if(_==="@id"&&d.length===1){f=!1;break}}f&&(t=t.revertToPreviousContext()),wc(l)||(t=await Do({activeCtx:t,localCtx:l,propagate:!0,overrideProtected:!0,options:r})),"@context"in n&&(t=await Do({activeCtx:t,localCtx:n["@context"],options:r})),o=t;let p=null;for(const y of d)if(vt(t,y,{vocab:!0},r)==="@type"){p=p||y;const v=n[y],T=Array.isArray(v)?v.length>1?v.slice().sort():v:[v];for(const I of T){const R=Ln(o,I,"@context");wc(R)||(t=await Do({activeCtx:t,localCtx:R,options:r,propagate:!1}))}}let h={};await em({activeCtx:t,activeProperty:e,expandedActiveProperty:c,element:n,expandedParent:h,options:r,insideList:i,typeKey:p,typeScopedContext:o,expansionMap:a}),d=Object.keys(h);let m=d.length;if("@value"in h){if("@type"in h&&("@language"in h||"@direction"in h))throw new et('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:h});let y=m-1;if("@type"in h&&(y-=1),"@index"in h&&(y-=1),"@language"in h&&(y-=1),"@direction"in h&&(y-=1),y!==0)throw new et('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:h});const _=h["@value"]===null?[]:Wn(h["@value"]),v=sv(h,"@type");if(!(Wa(t,1.1)&&v.includes("@json")&&v.length===1))if(_.length===0){const T=await a({unmappedValue:h,activeCtx:t,activeProperty:e,element:n,options:r,insideList:i});T!==void 0?h=T:h=null}else{if(!_.every(T=>Kt(T)||Vu(T))&&"@language"in h)throw new et("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:h});if(!v.every(T=>Jg(T)&&!(Kt(T)&&T.indexOf("_:")===0)||Vu(T)))throw new et('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:h})}}else if("@type"in h&&!Cn(h["@type"]))h["@type"]=[h["@type"]];else if("@set"in h||"@list"in h){if(m>1&&!(m===2&&"@index"in h))throw new et('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:h});"@set"in h&&(h=h["@set"],d=Object.keys(h),m=d.length)}else if(m===1&&"@language"in h){const y=await a(h,{unmappedValue:h,activeCtx:t,activeProperty:e,element:n,options:r,insideList:i});y!==void 0?h=y:h=null}if(Nn(h)&&!r.keepFreeFloatingNodes&&!i&&(e===null||c==="@graph")&&(m===0||"@value"in h||"@list"in h||m===1&&"@id"in h)){const y=await a({unmappedValue:h,activeCtx:t,activeProperty:e,element:n,options:r,insideList:i});y!==void 0?h=y:h=null}return h};async function em({activeCtx:t,activeProperty:e,expandedActiveProperty:n,element:r,expandedParent:i,options:s={},insideList:o,typeKey:a,typeScopedContext:c,expansionMap:l}){const d=Object.keys(r).sort(),f=[];let p;const h=r[a]&&vt(t,Cn(r[a])?r[a][0]:r[a],{vocab:!0},s)==="@json";for(const m of d){let y=r[m],_;if(m==="@context")continue;let v=vt(t,m,{vocab:!0},s);if((v===null||!(Jg(v)||Qu(v)))&&(v=l({unmappedProperty:m,activeCtx:t,activeProperty:e,parent:r,options:s,insideList:o,value:y,expandedParent:i}),v===void 0))continue;if(Qu(v)){if(n==="@reverse")throw new et("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:y});if(v in i&&v!=="@included"&&v!=="@type")throw new et("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:v})}if(v==="@id"){if(!Kt(y)){if(!s.isFrame)throw new et('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:y});if(Nn(y)){if(!Vu(y))throw new et('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:y})}else if(Cn(y)){if(!y.every(O=>Kt(O)))throw new et('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:y})}else throw new et('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:y})}vn(i,"@id",Wn(y).map(O=>Kt(O)?vt(t,O,{base:!0},s):O),{propertyIsArray:s.isFrame});continue}if(v==="@type"){Nn(y)&&(y=Object.fromEntries(Object.entries(y).map(([O,N])=>[vt(c,O,{vocab:!0}),Wn(N).map(x=>vt(c,x,{base:!0,vocab:!0}))]))),ov(y,s.isFrame),vn(i,"@type",Wn(y).map(O=>Kt(O)?vt(c,O,{base:!0,vocab:!0},s):O),{propertyIsArray:s.isFrame});continue}if(v==="@included"&&Wa(t,1.1)){const O=Wn(await ii.expand({activeCtx:t,activeProperty:e,element:y,options:s,expansionMap:l}));if(!O.every(N=>iv(N)))throw new et("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:y});vn(i,"@included",O,{propertyIsArray:!0});continue}if(v==="@graph"&&!(Nn(y)||Cn(y)))throw new et('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:y});if(v==="@value"){p=y,h&&Wa(t,1.1)?i["@value"]=y:vn(i,"@value",y,{propertyIsArray:s.isFrame});continue}if(v==="@language"){if(y===null)continue;if(!Kt(y)&&!s.isFrame)throw new et('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:y});y=Wn(y).map(O=>Kt(O)?O.toLowerCase():O);for(const O of y)Kt(O)&&!O.match(cv)&&console.warn(`@language must be valid BCP47: ${O}`);vn(i,"@language",y,{propertyIsArray:s.isFrame});continue}if(v==="@direction"){if(!Kt(y)&&!s.isFrame)throw new et('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:y});y=Wn(y);for(const O of y)if(Kt(O)&&O!=="ltr"&&O!=="rtl")throw new et('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:y});vn(i,"@direction",y,{propertyIsArray:s.isFrame});continue}if(v==="@index"){if(!Kt(y))throw new et('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:y});vn(i,"@index",y);continue}if(v==="@reverse"){if(!Nn(y))throw new et('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:y});if(_=await ii.expand({activeCtx:t,activeProperty:"@reverse",element:y,options:s,expansionMap:l}),"@reverse"in _)for(const N in _["@reverse"])vn(i,N,_["@reverse"][N],{propertyIsArray:!0});let O=i["@reverse"]||null;for(const N in _){if(N==="@reverse")continue;O===null&&(O=i["@reverse"]={}),vn(O,N,[],{propertyIsArray:!0});const x=_[N];for(let C=0;C<x.length;++C){const $=x[C];if(Wu($)||zl($))throw new et('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:_});vn(O,N,$,{propertyIsArray:!0})}}continue}if(v==="@nest"){f.push(m);continue}let T=t;const I=Ln(t,m,"@context");wc(I)||(T=await Do({activeCtx:t,localCtx:I,propagate:!0,overrideProtected:!0,options:s}));const R=Ln(T,m,"@container")||[];if(R.includes("@language")&&Nn(y)){const O=Ln(T,m,"@direction");_=lv(T,y,O,s)}else if(R.includes("@index")&&Nn(y)){const O=R.includes("@graph"),N=Ln(T,m,"@index")||"@index",x=N!=="@index"&&vt(t,N,{vocab:!0},s);_=await Gl({activeCtx:T,options:s,activeProperty:m,value:y,expansionMap:l,asGraph:O,indexKey:N,propertyIndex:x})}else if(R.includes("@id")&&Nn(y)){const O=R.includes("@graph");_=await Gl({activeCtx:T,options:s,activeProperty:m,value:y,expansionMap:l,asGraph:O,indexKey:"@id"})}else if(R.includes("@type")&&Nn(y))_=await Gl({activeCtx:T.revertToPreviousContext(),options:s,activeProperty:m,value:y,expansionMap:l,asGraph:!1,indexKey:"@type"});else{const O=v==="@list";if(O||v==="@set"){let N=e;O&&n==="@graph"&&(N=null),_=await ii.expand({activeCtx:T,activeProperty:N,element:y,options:s,insideList:O,expansionMap:l})}else Ln(t,m,"@type")==="@json"?_={"@type":"@json","@value":y}:_=await ii.expand({activeCtx:T,activeProperty:m,element:y,options:s,insideList:!1,expansionMap:l})}if(!(_===null&&v!=="@value"&&(_=l({unmappedValue:y,expandedProperty:v,activeCtx:T,activeProperty:e,parent:r,options:s,insideList:o,key:m,expandedParent:i}),_===void 0))){if(v!=="@list"&&!zl(_)&&R.includes("@list")&&(_={"@list":Wn(_)}),R.includes("@graph")&&!R.some(O=>O==="@id"||O==="@index")&&(_=Wn(_).map(O=>({"@graph":Wn(O)}))),T.mappings.has(m)&&T.mappings.get(m).reverse){const O=i["@reverse"]=i["@reverse"]||{};_=Wn(_);for(let N=0;N<_.length;++N){const x=_[N];if(Wu(x)||zl(x))throw new et('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:_});vn(O,v,x,{propertyIsArray:!0})}continue}vn(i,v,_,{propertyIsArray:!0})}}if("@value"in i&&!(i["@type"]==="@json"&&Wa(t,1.1))){if((Nn(p)||Cn(p))&&!s.isFrame)throw new et('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:p})}for(const m of f){const y=Cn(r[m])?r[m]:[r[m]];for(const _ of y){if(!Nn(_)||Object.keys(_).some(v=>vt(t,v,{vocab:!0},s)==="@value"))throw new et("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:_});await em({activeCtx:t,activeProperty:e,expandedActiveProperty:n,element:_,expandedParent:i,options:s,insideList:o,typeScopedContext:c,typeKey:a,expansionMap:l})}}}function tm({activeCtx:t,activeProperty:e,value:n,options:r}){if(n==null)return null;const i=vt(t,e,{vocab:!0},r);if(i==="@id")return vt(t,n,{base:!0},r);if(i==="@type")return vt(t,n,{vocab:!0,base:!0},r);const s=Ln(t,e,"@type");if((s==="@id"||i==="@graph")&&Kt(n))return{"@id":vt(t,n,{base:!0},r)};if(s==="@vocab"&&Kt(n))return{"@id":vt(t,n,{vocab:!0,base:!0},r)};if(Qu(i))return n;const o={};if(s&&!["@id","@vocab","@none"].includes(s))o["@type"]=s;else if(Kt(n)){const a=Ln(t,e,"@language");a!==null&&(o["@language"]=a);const c=Ln(t,e,"@direction");c!==null&&(o["@direction"]=c)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),o["@value"]=n,o}function lv(t,e,n,r){const i=[],s=Object.keys(e).sort();for(const o of s){const a=vt(t,o,{vocab:!0},r);let c=e[o];Cn(c)||(c=[c]);for(const l of c){if(l===null)continue;if(!Kt(l))throw new et("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:e});const d={"@value":l};a!=="@none"&&(d["@language"]=o.toLowerCase()),n&&(d["@direction"]=n),i.push(d)}}return i}async function Gl({activeCtx:t,options:e,activeProperty:n,value:r,expansionMap:i,asGraph:s,indexKey:o,propertyIndex:a}){const c=[],l=Object.keys(r).sort(),d=o==="@type";for(let f of l){if(d){const m=Ln(t,f,"@context");wc(m)||(t=await Do({activeCtx:t,localCtx:m,propagate:!1,options:e}))}let p=r[f];Cn(p)||(p=[p]),p=await ii.expand({activeCtx:t,activeProperty:n,element:p,options:e,insideList:!1,insideIndex:!0,expansionMap:i});let h;a?f==="@none"?h="@none":h=tm({activeCtx:t,activeProperty:o,value:f,options:e}):h=vt(t,f,{vocab:!0},e),o==="@id"?f=vt(t,f,{base:!0},e):d&&(f=h);for(let m of p){if(s&&!rv(m)&&(m={"@graph":[m]}),o==="@type")h==="@none"||(m["@type"]?m["@type"]=[f].concat(m["@type"]):m["@type"]=[f]);else{if(Wu(m)&&!["@language","@type","@index"].includes(o))throw new et(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${o}".`,"jsonld.SyntaxError",{code:"invalid value object",value:m});a?h!=="@none"&&vn(m,a,h,{propertyIsArray:!0,prependValue:!0}):h!=="@none"&&!(o in m)&&(m[o]=f)}c.push(m)}}return c}const{isKeyword:nm}=Ji,or=zr,Hl=zn,dr=tr,uv=vr,an={};var qc=an;an.createMergedNodeMap=(t,e)=>{e=e||{};const n=e.issuer||new dr.IdentifierIssuer("_:b"),r={"@default":{}};return an.createNodeMap(t,r,"@default",n),an.mergeNodeMaps(r)};an.createNodeMap=(t,e,n,r,i,s)=>{if(Hl.isArray(t)){for(const l of t)an.createNodeMap(l,e,n,r,void 0,s);return}if(!Hl.isObject(t)){s&&s.push(t);return}if(or.isValue(t)){if("@type"in t){let l=t["@type"];l.indexOf("_:")===0&&(t["@type"]=l=r.getId(l))}s&&s.push(t);return}else if(s&&or.isList(t)){const l=[];an.createNodeMap(t["@list"],e,n,r,i,l),s.push({"@list":l});return}if("@type"in t){const l=t["@type"];for(const d of l)d.indexOf("_:")===0&&r.getId(d)}Hl.isUndefined(i)&&(i=or.isBlankNode(t)?r.getId(t["@id"]):t["@id"]),s&&s.push({"@id":i});const o=e[n],a=o[i]=o[i]||{};a["@id"]=i;const c=Object.keys(t).sort();for(let l of c){if(l==="@id")continue;if(l==="@reverse"){const f={"@id":i},p=t["@reverse"];for(const h in p){const m=p[h];for(const y of m){let _=y["@id"];or.isBlankNode(y)&&(_=r.getId(_)),an.createNodeMap(y,e,n,r,_),dr.addValue(o[_],h,f,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(l==="@graph"){i in e||(e[i]={}),an.createNodeMap(t[l],e,i,r);continue}if(l==="@included"){an.createNodeMap(t[l],e,n,r);continue}if(l!=="@type"&&nm(l)){if(l==="@index"&&l in a&&(t[l]!==a[l]||t[l]["@id"]!==a[l]["@id"]))throw new uv("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:a});a[l]=t[l];continue}const d=t[l];if(l.indexOf("_:")===0&&(l=r.getId(l)),d.length===0){dr.addValue(a,l,[],{propertyIsArray:!0});continue}for(let f of d)if(l==="@type"&&(f=f.indexOf("_:")===0?r.getId(f):f),or.isSubject(f)||or.isSubjectReference(f)){if("@id"in f&&!f["@id"])continue;const p=or.isBlankNode(f)?r.getId(f["@id"]):f["@id"];dr.addValue(a,l,{"@id":p},{propertyIsArray:!0,allowDuplicate:!1}),an.createNodeMap(f,e,n,r,p)}else if(or.isValue(f))dr.addValue(a,l,f,{propertyIsArray:!0,allowDuplicate:!1});else if(or.isList(f)){const p=[];an.createNodeMap(f["@list"],e,n,r,i,p),f={"@list":p},dr.addValue(a,l,f,{propertyIsArray:!0,allowDuplicate:!1})}else an.createNodeMap(f,e,n,r,i),dr.addValue(a,l,f,{propertyIsArray:!0,allowDuplicate:!1})}};an.mergeNodeMapGraphs=t=>{const e={};for(const n of Object.keys(t).sort())for(const r of Object.keys(t[n]).sort()){const i=t[n][r];r in e||(e[r]={"@id":r});const s=e[r];for(const o of Object.keys(i).sort())if(nm(o)&&o!=="@type")s[o]=dr.clone(i[o]);else for(const a of i[o])dr.addValue(s,o,dr.clone(a),{propertyIsArray:!0,allowDuplicate:!1})}return e};an.mergeNodeMaps=t=>{const e=t["@default"],n=Object.keys(t).sort();for(const r of n){if(r==="@default")continue;const i=t[r];let s=e[r];s?"@graph"in s||(s["@graph"]=[]):e[r]=s={"@id":r,"@graph":[]};const o=s["@graph"];for(const a of Object.keys(i).sort()){const c=i[a];or.isSubjectReference(c)||o.push(c)}}return e};const{isSubjectReference:dv}=zr,{createMergedNodeMap:fv}=qc,rm={};var hv=rm;rm.flatten=t=>{const e=fv(t),n=[],r=Object.keys(e).sort();for(let i=0;i<r.length;++i){const s=e[r[i]];dv(s)||n.push(s)}return n};const pv=vr,Zl=zr,wo=zn,Ah=tr,{RDF_LIST:gv,RDF_FIRST:Vl,RDF_REST:Wl,RDF_NIL:Ql,RDF_TYPE:mv,RDF_JSON_LITERAL:yv,XSD_BOOLEAN:Sh,XSD_DOUBLE:jh,XSD_INTEGER:Mh,XSD_STRING:Xl}=Kd,wv=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,im={};var bv=im;im.fromRDF=async(t,{useRdfType:e=!1,useNativeTypes:n=!1,rdfDirection:r=null})=>{const i={},s={"@default":i},o={};for(const l of t){const d=l.graph.termType==="DefaultGraph"?"@default":l.graph.value;d in s||(s[d]={}),d!=="@default"&&!(d in i)&&(i[d]={"@id":d});const f=s[d],p=l.subject.value,h=l.predicate.value,m=l.object;p in f||(f[p]={"@id":p});const y=f[p],_=m.termType.endsWith("Node");if(_&&!(m.value in f)&&(f[m.value]={"@id":m.value}),h===mv&&!e&&_){Ah.addValue(y,"@type",m.value,{propertyIsArray:!0});continue}const v=_v(m,n,r);if(Ah.addValue(y,h,v,{propertyIsArray:!0}),_)if(m.value===Ql){const T=f[m.value];"usages"in T||(T.usages=[]),T.usages.push({node:y,property:h,value:v})}else m.value in o?o[m.value]=!1:o[m.value]={node:y,property:h,value:v}}for(const l in s){const d=s[l];if(!(Ql in d))continue;const f=d[Ql];if(!!f.usages){for(let p of f.usages){let h=p.node,m=p.property,y=p.value;const _=[],v=[];let T=Object.keys(h).length;for(;m===Wl&&wo.isObject(o[h["@id"]])&&wo.isArray(h[Vl])&&h[Vl].length===1&&wo.isArray(h[Wl])&&h[Wl].length===1&&(T===3||T===4&&wo.isArray(h["@type"])&&h["@type"].length===1&&h["@type"][0]===gv)&&(_.push(h[Vl][0]),v.push(h["@id"]),p=o[h["@id"]],h=p.node,m=p.property,y=p.value,T=Object.keys(h).length,!!Zl.isBlankNode(h)););delete y["@id"],y["@list"]=_.reverse();for(const I of v)delete d[I]}delete f.usages}}const a=[],c=Object.keys(i).sort();for(const l of c){const d=i[l];if(l in s){const f=d["@graph"]=[],p=s[l],h=Object.keys(p).sort();for(const m of h){const y=p[m];Zl.isSubjectReference(y)||f.push(y)}}Zl.isSubjectReference(d)||a.push(d)}return a};function _v(t,e,n){if(t.termType.endsWith("Node"))return{"@id":t.value};const r={"@value":t.value};if(t.language)r["@language"]=t.language;else{let i=t.datatype.value;if(i||(i=Xl),i===yv){i="@json";try{r["@value"]=JSON.parse(r["@value"])}catch(s){throw new pv("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:r["@value"],cause:s})}}if(e){if(i===Sh)r["@value"]==="true"?r["@value"]=!0:r["@value"]==="false"&&(r["@value"]=!1);else if(wo.isNumeric(r["@value"]))if(i===Mh){const s=parseInt(r["@value"],10);s.toFixed(0)===r["@value"]&&(r["@value"]=s)}else i===jh&&(r["@value"]=parseFloat(r["@value"]));[Sh,Mh,jh,Xl].includes(i)||(r["@type"]=i)}else if(n==="i18n-datatype"&&i.startsWith("https://www.w3.org/ns/i18n#")){const[,s,o]=i.split(/[#_]/);s.length>0&&(r["@language"]=s,s.match(wv)||console.warn(`@language must be valid BCP47: ${s}`)),r["@direction"]=o}else i!==Xl&&(r["@type"]=i)}return r}var vv=function t(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((n,r,i)=>{const s=i===0?"":",",o=r===void 0||typeof r=="symbol"?null:r;return n+s+t(o)},"")+"]":"{"+Object.keys(e).sort().reduce((n,r,i)=>{if(e[r]===void 0||typeof e[r]=="symbol")return n;const s=n.length===0?"":",";return n+s+t(r)+":"+t(e[r])},"")+"}"};const{createNodeMap:Tv}=qc,{isKeyword:Ev}=Ji,Ch=zr,Iv=vv,fo=zn,Dv=tr,{RDF_FIRST:Rv,RDF_REST:xv,RDF_NIL:Ov,RDF_TYPE:Nv,RDF_JSON_LITERAL:Av,RDF_LANGSTRING:Sv,XSD_BOOLEAN:jv,XSD_DOUBLE:Lh,XSD_INTEGER:Mv,XSD_STRING:Cv}=Kd,{isAbsolute:bc}=yi,sm={};var Lv=sm;sm.toRDF=(t,e)=>{const n=new Dv.IdentifierIssuer("_:b"),r={"@default":{}};Tv(t,r,"@default",n);const i=[],s=Object.keys(r).sort();for(const o of s){let a;if(o==="@default")a={termType:"DefaultGraph",value:""};else if(bc(o))o.startsWith("_:")?a={termType:"BlankNode"}:a={termType:"NamedNode"},a.value=o;else continue;$v(i,r[o],a,n,e)}return i};function $v(t,e,n,r,i){const s=Object.keys(e).sort();for(const o of s){const a=e[o],c=Object.keys(a).sort();for(let l of c){const d=a[l];if(l==="@type")l=Nv;else if(Ev(l))continue;for(const f of d){const p={termType:o.startsWith("_:")?"BlankNode":"NamedNode",value:o};if(!bc(o))continue;const h={termType:l.startsWith("_:")?"BlankNode":"NamedNode",value:l};if(!bc(l)||h.termType==="BlankNode"&&!i.produceGeneralizedRdf)continue;const m=Xu(f,r,t,n,i.rdfDirection);m&&t.push({subject:p,predicate:h,object:m,graph:n})}}}}function kv(t,e,n,r,i){const s={termType:"NamedNode",value:Rv},o={termType:"NamedNode",value:xv},a={termType:"NamedNode",value:Ov},c=t.pop(),l=c?{termType:"BlankNode",value:e.getId()}:a;let d=l;for(const f of t){const p=Xu(f,e,n,r,i),h={termType:"BlankNode",value:e.getId()};n.push({subject:d,predicate:s,object:p,graph:r}),n.push({subject:d,predicate:o,object:h,graph:r}),d=h}if(c){const f=Xu(c,e,n,r,i);n.push({subject:d,predicate:s,object:f,graph:r}),n.push({subject:d,predicate:o,object:a,graph:r})}return l}function Xu(t,e,n,r,i){const s={};if(Ch.isValue(t)){s.termType="Literal",s.value=void 0,s.datatype={termType:"NamedNode"};let o=t["@value"];const a=t["@type"]||null;if(a==="@json")s.value=Iv(o),s.datatype.value=Av;else if(fo.isBoolean(o))s.value=o.toString(),s.datatype.value=a||jv;else if(fo.isDouble(o)||a===Lh)fo.isDouble(o)||(o=parseFloat(o)),s.value=o.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),s.datatype.value=a||Lh;else if(fo.isNumber(o))s.value=o.toFixed(0),s.datatype.value=a||Mv;else if(i==="i18n-datatype"&&"@direction"in t){const c="https://www.w3.org/ns/i18n#"+(t["@language"]||"")+`_${t["@direction"]}`;s.datatype.value=c,s.value=o}else"@language"in t?(s.value=o,s.datatype.value=a||Sv,s.language=t["@language"]):(s.value=o,s.datatype.value=a||Cv)}else if(Ch.isList(t)){const o=kv(t["@list"],e,n,r,i);s.termType=o.termType,s.value=o.value}else{const o=fo.isObject(t)?t["@id"]:t;s.termType=o.startsWith("_:")?"BlankNode":"NamedNode",s.value=o}return s.termType==="NamedNode"&&!bc(s.value)?null:s}const{isKeyword:Ku}=Ji,jn=zr,Ye=zn,qt=tr,$h=yi,Ro=vr,{createNodeMap:Pv,mergeNodeMapGraphs:Uv}=qc,Mn={};var Fv=Mn;Mn.frameMergedOrDefault=(t,e,n)=>{const r={options:n,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},i=new qt.IdentifierIssuer("_:b");Pv(t,r.graphMap,"@default",i),n.merged&&(r.graphMap["@merged"]=Uv(r.graphMap),r.graph="@merged"),r.subjects=r.graphMap[r.graph];const s=[];Mn.frame(r,Object.keys(r.subjects).sort(),e,s),n.pruneBlankNodeIdentifiers&&(n.bnodesToClear=Object.keys(r.bnodeMap).filter(o=>r.bnodeMap[o].length===1));// remove @preserve from results
return n.link={},Qa(s,n)};Mn.frame=(t,e,n,r,i=null)=>{om(n),n=n[0];const s=t.options,o={embed:ja(n,s,"embed"),explicit:ja(n,s,"explicit"),requireAll:ja(n,s,"requireAll")};t.link.hasOwnProperty(t.graph)||(t.link[t.graph]={});const a=t.link[t.graph],c=qv(t,e,n,o),l=Object.keys(c).sort();for(const d of l){const f=c[d];if(i===null?t.uniqueEmbeds={[t.graph]:{}}:t.uniqueEmbeds[t.graph]=t.uniqueEmbeds[t.graph]||{},o.embed==="@link"&&d in a){Ri(r,i,a[d]);continue}const p={"@id":d};if(d.indexOf("_:")===0&&qt.addValue(t.bnodeMap,d,p,{propertyIsArray:!0}),a[d]=p,(o.embed==="@first"||o.embed==="@last")&&t.is11)throw new Ro("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:n});if(!(!t.embedded&&t.uniqueEmbeds[t.graph].hasOwnProperty(d))){if(t.embedded&&(o.embed==="@never"||Bv(f,t.graph,t.subjectStack))){Ri(r,i,p);continue}if(t.embedded&&(o.embed=="@first"||o.embed=="@once")&&t.uniqueEmbeds[t.graph].hasOwnProperty(d)){Ri(r,i,p);continue}if(o.embed==="@last"&&d in t.uniqueEmbeds[t.graph]&&Yv(t,d),t.uniqueEmbeds[t.graph][d]={parent:r,property:i},t.subjectStack.push({subject:f,graph:t.graph}),d in t.graphMap){let h=!1,m=null;"@graph"in n?(m=n["@graph"][0],h=!(d==="@merged"||d==="@default"),Ye.isObject(m)||(m={})):(h=t.graph!=="@merged",m={}),h&&Mn.frame({...t,graph:d,embedded:!1},Object.keys(t.graphMap[d]).sort(),[m],p,"@graph")}"@included"in n&&Mn.frame({...t,embedded:!1},e,n["@included"],p,"@included");for(const h of Object.keys(f).sort()){if(Ku(h)){if(p[h]=qt.clone(f[h]),h==="@type")for(const m of f["@type"])m.indexOf("_:")===0&&qt.addValue(t.bnodeMap,m,p,{propertyIsArray:!0});continue}if(!(o.explicit&&!(h in n)))for(const m of f[h]){const y=h in n?n[h]:kh(o);if(jn.isList(m)){const _=n[h]&&n[h][0]&&n[h][0]["@list"]?n[h][0]["@list"]:kh(o),v={"@list":[]};Ri(p,h,v);const T=m["@list"];for(const I of T)jn.isSubjectReference(I)?Mn.frame({...t,embedded:!0},[I["@id"]],_,v,"@list"):Ri(v,"@list",qt.clone(I))}else jn.isSubjectReference(m)?Mn.frame({...t,embedded:!0},[m["@id"]],y,p,h):Ju(y[0],m)&&Ri(p,h,qt.clone(m))}}for(const h of Object.keys(n).sort()){if(h==="@type"){if(!Ye.isObject(n[h][0])||!("@default"in n[h][0]))continue}else if(Ku(h))continue;const m=n[h][0]||{};if(!ja(m,s,"omitDefault")&&!(h in p)){let _="@null";"@default"in m&&(_=qt.clone(m["@default"])),Ye.isArray(_)||(_=[_]),p[h]=[{"@preserve":_}]}}for(const h of Object.keys(n["@reverse"]||{}).sort()){const m=n["@reverse"][h];for(const y of Object.keys(t.subjects))qt.getValues(t.subjects[y],h).some(v=>v["@id"]===d)&&(p["@reverse"]=p["@reverse"]||{},qt.addValue(p["@reverse"],h,[],{propertyIsArray:!0}),Mn.frame({...t,embedded:!0},[y],m,p["@reverse"][h],i))}Ri(r,i,p),t.subjectStack.pop()}}};Mn.cleanupNull=(t,e)=>{if(Ye.isArray(t))return t.map(r=>Mn.cleanupNull(r,e)).filter(r=>r);if(t==="@null")return null;if(Ye.isObject(t)){if("@id"in t){const n=t["@id"];if(e.link.hasOwnProperty(n)){const r=e.link[n].indexOf(t);if(r!==-1)return e.link[n][r];e.link[n].push(t)}else e.link[n]=[t]}for(const n in t)t[n]=Mn.cleanupNull(t[n],e)}return t};function kh(t){const e={};for(const n in t)t[n]!==void 0&&(e["@"+n]=[t[n]]);return[e]}function Bv(t,e,n){for(let r=n.length-1;r>=0;--r){const i=n[r];if(i.graph===e&&i.subject["@id"]===t["@id"])return!0}return!1}function ja(t,e,n){const r="@"+n;let i=r in t?t[r][0]:e[n];if(n==="embed"){if(i===!0)i="@once";else if(i===!1)i="@never";else if(i!=="@always"&&i!=="@never"&&i!=="@link"&&i!=="@first"&&i!=="@last"&&i!=="@once")throw new Ro("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:t})}return i}function om(t){if(!Ye.isArray(t)||t.length!==1||!Ye.isObject(t[0]))throw new Ro("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:t});if("@id"in t[0]){for(const e of qt.asArray(t[0]["@id"]))if(!(Ye.isObject(e)||$h.isAbsolute(e))||Ye.isString(e)&&e.indexOf("_:")===0)throw new Ro("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:t})}if("@type"in t[0]){for(const e of qt.asArray(t[0]["@type"]))if(!(Ye.isObject(e)||$h.isAbsolute(e))||Ye.isString(e)&&e.indexOf("_:")===0)throw new Ro("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:t})}}function qv(t,e,n,r){const i={};for(const s of e){const o=t.graphMap[t.graph][s];am(t,o,n,r)&&(i[s]=o)}return i}function am(t,e,n,r){let i=!0,s=!1;for(const o in n){let a=!1;const c=qt.getValues(e,o),l=qt.getValues(n,o).length===0;if(o==="@id"){if(Ye.isEmptyObject(n["@id"][0]||{})?a=!0:n["@id"].length>=0&&(a=n["@id"].includes(c[0])),!r.requireAll)return a}else if(o==="@type"){if(i=!1,l){if(c.length>0)return!1;a=!0}else if(n["@type"].length===1&&Ye.isEmptyObject(n["@type"][0]))a=c.length>0;else for(const d of n["@type"])Ye.isObject(d)&&"@default"in d?a=!0:a=a||c.some(f=>f===d);if(!r.requireAll)return a}else{if(Ku(o))continue;{const d=qt.getValues(n,o)[0];let f=!1;if(d&&(om([d]),f="@default"in d),i=!1,c.length===0&&f)continue;if(c.length>0&&l)return!1;if(d===void 0){if(c.length>0)return!1;a=!0}else if(jn.isList(d)){const p=d["@list"][0];if(jn.isList(c[0])){const h=c[0]["@list"];jn.isValue(p)?a=h.some(m=>Ju(p,m)):(jn.isSubject(p)||jn.isSubjectReference(p))&&(a=h.some(m=>Ph(t,p,m,r)))}}else jn.isValue(d)?a=c.some(p=>Ju(d,p)):jn.isSubjectReference(d)?a=c.some(p=>Ph(t,d,p,r)):Ye.isObject(d)?a=c.length>0:a=!1}}if(!a&&r.requireAll)return!1;s=s||a}return i||s}function Yv(t,e){const n=t.uniqueEmbeds[t.graph],r=n[e],i=r.parent,s=r.property,o={"@id":e};if(Ye.isArray(i)){for(let c=0;c<i.length;++c)if(qt.compareValues(i[c],o)){i[c]=o;break}}else{const c=Ye.isArray(i[s]);qt.removeValue(i,s,o,{propertyIsArray:c}),qt.addValue(i,s,o,{propertyIsArray:c})}const a=c=>{const l=Object.keys(n);for(const d of l)d in n&&Ye.isObject(n[d].parent)&&n[d].parent["@id"]===c&&(delete n[d],a(d))};a(e)}/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function Qa(t,e){if(Ye.isArray(t))return t.map(n=>Qa(n,e));if(Ye.isObject(t)){// remove @preserve
if("@preserve"in t)return t["@preserve"][0];if(jn.isValue(t))return t;if(jn.isList(t))return t["@list"]=Qa(t["@list"],e),t;if("@id"in t){const n=t["@id"];if(e.link.hasOwnProperty(n)){const r=e.link[n].indexOf(t);if(r!==-1)return e.link[n][r];e.link[n].push(t)}else e.link[n]=[t]}for(const n in t){if(n==="@id"&&e.bnodesToClear.includes(t[n])){delete t["@id"];continue}t[n]=Qa(t[n],e)}}return t}function Ri(t,e,n){Ye.isObject(t)?qt.addValue(t,e,n,{propertyIsArray:!0}):t.push(n)}function Ph(t,e,n,r){if(!("@id"in n))return!1;const i=t.subjects[n["@id"]];return i&&am(t,i,e,r)}function Ju(t,e){const n=e["@value"],r=e["@type"],i=e["@language"],s=t["@value"]?Ye.isArray(t["@value"])?t["@value"]:[t["@value"]]:[],o=t["@type"]?Ye.isArray(t["@type"])?t["@type"]:[t["@type"]]:[],a=t["@language"]?Ye.isArray(t["@language"])?t["@language"]:[t["@language"]]:[];return s.length===0&&o.length===0&&a.length===0?!0:!(!(s.includes(n)||Ye.isEmptyObject(s[0]))||!(!r&&o.length===0||o.includes(r)||r&&Ye.isEmptyObject(o[0]))||!(!i&&a.length===0||a.includes(i)||i&&Ye.isEmptyObject(a[0])))}const ef=vr,{isArray:Wr,isObject:si,isString:cm,isUndefined:Kl}=zn,{isList:ed,isValue:Mr,isGraph:lm,isSimpleGraph:Uh,isSubjectReference:Jl}=zr,{expandIri:um,getContextValue:on,isKeyword:dm,process:eu,processingMode:zv}=Ji,{removeBase:Fh,prependBase:Gv}=yi,{addValue:bn,asArray:Ma,compareShortestLeast:Hv}=tr,he={};var Zv=he;he.compact=async({activeCtx:t,activeProperty:e=null,element:n,options:r={},compactionMap:i=()=>{}})=>{if(Wr(n)){let o=[];for(let a=0;a<n.length;++a){let c=await he.compact({activeCtx:t,activeProperty:e,element:n[a],options:r,compactionMap:i});c===null&&(c=await i({unmappedValue:n[a],activeCtx:t,activeProperty:e,parent:n,index:a,options:r}),c===void 0)||o.push(c)}return r.compactArrays&&o.length===1&&(on(t,e,"@container")||[]).length===0&&(o=o[0]),o}const s=on(t,e,"@context");if(Kl(s)||(t=await eu({activeCtx:t,localCtx:s,propagate:!0,overrideProtected:!0,options:r})),si(n)){if(r.link&&"@id"in n&&r.link.hasOwnProperty(n["@id"])){const h=r.link[n["@id"]];for(let m=0;m<h.length;++m)if(h[m].expanded===n)return h[m].compacted}if(Mr(n)||Jl(n)){const h=he.compactValue({activeCtx:t,activeProperty:e,value:n,options:r});return r.link&&Jl(n)&&(r.link.hasOwnProperty(n["@id"])||(r.link[n["@id"]]=[]),r.link[n["@id"]].push({expanded:n,compacted:h})),h}if(ed(n)&&(on(t,e,"@container")||[]).includes("@list"))return he.compact({activeCtx:t,activeProperty:e,element:n["@list"],options:r,compactionMap:i});const o=e==="@reverse",a={},c=t;!Mr(n)&&!Jl(n)&&(t=t.revertToPreviousContext());const l=on(c,e,"@context");Kl(l)||(t=await eu({activeCtx:t,localCtx:l,propagate:!0,overrideProtected:!0,options:r})),r.link&&"@id"in n&&(r.link.hasOwnProperty(n["@id"])||(r.link[n["@id"]]=[]),r.link[n["@id"]].push({expanded:n,compacted:a}));let d=n["@type"]||[];d.length>1&&(d=Array.from(d).sort());const f=t;for(const h of d){const m=he.compactIri({activeCtx:f,iri:h,relativeTo:{vocab:!0}}),y=on(c,m,"@context");Kl(y)||(t=await eu({activeCtx:t,localCtx:y,options:r,propagate:!1}))}const p=Object.keys(n).sort();for(const h of p){const m=n[h];if(h==="@id"){let y=Ma(m).map(v=>he.compactIri({activeCtx:t,iri:v,relativeTo:{vocab:!1},base:r.base}));y.length===1&&(y=y[0]);const _=he.compactIri({activeCtx:t,iri:"@id",relativeTo:{vocab:!0}});a[_]=y;continue}if(h==="@type"){let y=Ma(m).map(R=>he.compactIri({activeCtx:c,iri:R,relativeTo:{vocab:!0}}));y.length===1&&(y=y[0]);const _=he.compactIri({activeCtx:t,iri:"@type",relativeTo:{vocab:!0}}),I=(on(t,_,"@container")||[]).includes("@set")&&zv(t,1.1)||Wr(y)&&m.length===0;bn(a,_,y,{propertyIsArray:I});continue}if(h==="@reverse"){const y=await he.compact({activeCtx:t,activeProperty:"@reverse",element:m,options:r,compactionMap:i});for(const _ in y)if(t.mappings.has(_)&&t.mappings.get(_).reverse){const v=y[_],I=(on(t,_,"@container")||[]).includes("@set")||!r.compactArrays;bn(a,_,v,{propertyIsArray:I}),delete y[_]}if(Object.keys(y).length>0){const _=he.compactIri({activeCtx:t,iri:h,relativeTo:{vocab:!0}});bn(a,_,y)}continue}if(h==="@preserve"){const y=await he.compact({activeCtx:t,activeProperty:e,element:m,options:r,compactionMap:i});Wr(y)&&y.length===0||bn(a,h,y);continue}if(h==="@index"){if((on(t,e,"@container")||[]).includes("@index"))continue;const _=he.compactIri({activeCtx:t,iri:h,relativeTo:{vocab:!0}});bn(a,_,m);continue}if(h!=="@graph"&&h!=="@list"&&h!=="@included"&&dm(h)){const y=he.compactIri({activeCtx:t,iri:h,relativeTo:{vocab:!0}});bn(a,y,m);continue}if(!Wr(m))throw new ef("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(m.length===0){const y=he.compactIri({activeCtx:t,iri:h,value:m,relativeTo:{vocab:!0},reverse:o}),_=t.mappings.has(y)?t.mappings.get(y)["@nest"]:null;let v=a;_&&(Bh(t,_,r),si(a[_])||(a[_]={}),v=a[_]),bn(v,y,m,{propertyIsArray:!0})}for(const y of m){const _=he.compactIri({activeCtx:t,iri:h,value:y,relativeTo:{vocab:!0},reverse:o}),v=t.mappings.has(_)?t.mappings.get(_)["@nest"]:null;let T=a;v&&(Bh(t,v,r),si(a[v])||(a[v]={}),T=a[v]);const I=on(t,_,"@container")||[],R=lm(y),O=ed(y);let N;O?N=y["@list"]:R&&(N=y["@graph"]);let x=await he.compact({activeCtx:t,activeProperty:_,element:O||R?N:y,options:r,compactionMap:i});if(O)if(Wr(x)||(x=[x]),!I.includes("@list"))x={[he.compactIri({activeCtx:t,iri:"@list",relativeTo:{vocab:!0}})]:x},"@index"in y&&(x[he.compactIri({activeCtx:t,iri:"@index",relativeTo:{vocab:!0}})]=y["@index"]);else{bn(T,_,x,{valueIsArray:!0,allowDuplicate:!0});continue}if(R)if(I.includes("@graph")&&(I.includes("@id")||I.includes("@index")&&Uh(y))){let C;T.hasOwnProperty(_)?C=T[_]:T[_]=C={};const $=(I.includes("@id")?y["@id"]:y["@index"])||he.compactIri({activeCtx:t,iri:"@none",relativeTo:{vocab:!0}});bn(C,$,x,{propertyIsArray:!r.compactArrays||I.includes("@set")})}else I.includes("@graph")&&Uh(y)?(Wr(x)&&x.length>1&&(x={"@included":x}),bn(T,_,x,{propertyIsArray:!r.compactArrays||I.includes("@set")})):(Wr(x)&&x.length===1&&r.compactArrays&&(x=x[0]),x={[he.compactIri({activeCtx:t,iri:"@graph",relativeTo:{vocab:!0}})]:x},"@id"in y&&(x[he.compactIri({activeCtx:t,iri:"@id",relativeTo:{vocab:!0}})]=y["@id"]),"@index"in y&&(x[he.compactIri({activeCtx:t,iri:"@index",relativeTo:{vocab:!0}})]=y["@index"]),bn(T,_,x,{propertyIsArray:!r.compactArrays||I.includes("@set")}));else if(I.includes("@language")||I.includes("@index")||I.includes("@id")||I.includes("@type")){let C;T.hasOwnProperty(_)?C=T[_]:T[_]=C={};let $;if(I.includes("@language"))Mr(x)&&(x=x["@value"]),$=y["@language"];else if(I.includes("@index")){const te=on(t,_,"@index")||"@index",q=he.compactIri({activeCtx:t,iri:te,relativeTo:{vocab:!0}});if(te==="@index")$=y["@index"],delete x[q];else{let de;if([$,...de]=Ma(x[te]||[]),!cm($))$=null;else switch(de.length){case 0:delete x[te];break;case 1:x[te]=de[0];break;default:x[te]=de;break}}}else if(I.includes("@id")){const te=he.compactIri({activeCtx:t,iri:"@id",relativeTo:{vocab:!0}});$=x[te],delete x[te]}else if(I.includes("@type")){const te=he.compactIri({activeCtx:t,iri:"@type",relativeTo:{vocab:!0}});let q;switch([$,...q]=Ma(x[te]||[]),q.length){case 0:delete x[te];break;case 1:x[te]=q[0];break;default:x[te]=q;break}Object.keys(x).length===1&&"@id"in y&&(x=await he.compact({activeCtx:t,activeProperty:_,element:{"@id":y["@id"]},options:r,compactionMap:i}))}$||($=he.compactIri({activeCtx:t,iri:"@none",relativeTo:{vocab:!0}})),bn(C,$,x,{propertyIsArray:I.includes("@set")})}else{const C=!r.compactArrays||I.includes("@set")||I.includes("@list")||Wr(x)&&x.length===0||h==="@list"||h==="@graph";bn(T,_,x,{propertyIsArray:C})}}}return a}return n};he.compactIri=({activeCtx:t,iri:e,value:n=null,relativeTo:r={vocab:!1},reverse:i=!1,base:s=null})=>{if(e===null)return e;t.isPropertyTermScoped&&t.previousContext&&(t=t.previousContext);const o=t.getInverse();if(dm(e)&&e in o&&"@none"in o[e]&&"@type"in o[e]["@none"]&&"@none"in o[e]["@none"]["@type"])return o[e]["@none"]["@type"]["@none"];if(r.vocab&&e in o){const f=t["@language"]||"@none",p=[];si(n)&&"@index"in n&&!("@graph"in n)&&p.push("@index","@index@set"),si(n)&&"@preserve"in n&&(n=n["@preserve"][0]),lm(n)?("@index"in n&&p.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n&&p.push("@graph@id","@graph@id@set"),p.push("@graph","@graph@set","@set"),"@index"in n||p.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n||p.push("@graph@id","@graph@id@set")):si(n)&&!Mr(n)&&p.push("@id","@id@set","@type","@set@type");let h="@language",m="@null";if(i)h="@type",m="@reverse",p.push("@set");else if(ed(n)){"@index"in n||p.push("@list");const _=n["@list"];if(_.length===0)h="@any",m="@none";else{let v=_.length===0?f:null,T=null;for(let I=0;I<_.length;++I){const R=_[I];let O="@none",N="@none";if(Mr(R))if("@direction"in R){const x=(R["@language"]||"").toLowerCase(),C=R["@direction"];O=`${x}_${C}`}else"@language"in R?O=R["@language"].toLowerCase():"@type"in R?N=R["@type"]:O="@null";else N="@id";if(v===null?v=O:O!==v&&Mr(R)&&(v="@none"),T===null?T=N:N!==T&&(T="@none"),v==="@none"&&T==="@none")break}v=v||"@none",T=T||"@none",T!=="@none"?(h="@type",m=T):m=v}}else{if(Mr(n))if("@language"in n&&!("@index"in n)){p.push("@language","@language@set"),m=n["@language"];const _=n["@direction"];_&&(m=`${m}_${_}`)}else"@direction"in n&&!("@index"in n)?m=`_${n["@direction"]}`:"@type"in n&&(h="@type",m=n["@type"]);else h="@type",m="@id";p.push("@set")}p.push("@none"),si(n)&&!("@index"in n)&&p.push("@index","@index@set"),Mr(n)&&Object.keys(n).length===1&&p.push("@language","@language@set");const y=Vv(t,e,n,p,h,m);if(y!==null)return y}if(r.vocab&&"@vocab"in t){const f=t["@vocab"];if(e.indexOf(f)===0&&e!==f){const p=e.substr(f.length);if(!t.mappings.has(p))return p}}let a=null;const c=[];let l=t.fastCurieMap;const d=e.length-1;for(let f=0;f<d&&e[f]in l;++f)l=l[e[f]],""in l&&c.push(l[""][0]);for(let f=c.length-1;f>=0;--f){const p=c[f],h=p.terms;for(const m of h){const y=m+":"+e.substr(p.iri.length);t.mappings.get(m)._prefix&&(!t.mappings.has(y)||n===null&&t.mappings.get(y)["@id"]===e)&&(a===null||Hv(y,a)<0)&&(a=y)}}if(a!==null)return a;for(const[f,p]of t.mappings)if(p&&p._prefix&&e.startsWith(f+":"))throw new ef(`Absolute IRI "${e}" confused with prefix "${f}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:t});return r.vocab?e:"@base"in t?t["@base"]?Fh(Gv(s,t["@base"]),e):e:Fh(s,e)};he.compactValue=({activeCtx:t,activeProperty:e,value:n,options:r})=>{if(Mr(n)){const a=on(t,e,"@type"),c=on(t,e,"@language"),l=on(t,e,"@direction"),d=on(t,e,"@container")||[],f="@index"in n&&!d.includes("@index");if(!f&&a!=="@none"&&(n["@type"]===a||"@language"in n&&n["@language"]===c&&"@direction"in n&&n["@direction"]===l||"@language"in n&&n["@language"]===c||"@direction"in n&&n["@direction"]===l))return n["@value"];const p=Object.keys(n).length,h=p===1||p===2&&"@index"in n&&!f,m="@language"in t,y=cm(n["@value"]),_=t.mappings.has(e)&&t.mappings.get(e)["@language"]===null;if(h&&a!=="@none"&&(!m||!y||_))return n["@value"];const v={};return f&&(v[he.compactIri({activeCtx:t,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?v[he.compactIri({activeCtx:t,iri:"@type",relativeTo:{vocab:!0}})]=he.compactIri({activeCtx:t,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(v[he.compactIri({activeCtx:t,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),"@direction"in n&&(v[he.compactIri({activeCtx:t,iri:"@direction",relativeTo:{vocab:!0}})]=n["@direction"]),v[he.compactIri({activeCtx:t,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],v}const i=um(t,e,{vocab:!0},r),s=on(t,e,"@type"),o=he.compactIri({activeCtx:t,iri:n["@id"],relativeTo:{vocab:s==="@vocab"},base:r.base});return s==="@id"||s==="@vocab"||i==="@graph"?o:{[he.compactIri({activeCtx:t,iri:"@id",relativeTo:{vocab:!0}})]:o}};function Vv(t,e,n,r,i,s){s===null&&(s="@null");const o=[];if((s==="@id"||s==="@reverse")&&si(n)&&"@id"in n){s==="@reverse"&&o.push("@reverse");const c=he.compactIri({activeCtx:t,iri:n["@id"],relativeTo:{vocab:!0}});t.mappings.has(c)&&t.mappings.get(c)&&t.mappings.get(c)["@id"]===n["@id"]?o.push.apply(o,["@vocab","@id"]):o.push.apply(o,["@id","@vocab"])}else{o.push(s);const c=o.find(l=>l.includes("_"));c&&o.push(c.replace(/^[^_]+_/,"_"))}o.push("@none");const a=t.inverse[e];for(const c of r){if(!(c in a))continue;const l=a[c][i];for(const d of o)if(d in l)return l[d]}return null}function Bh(t,e,n){if(um(t,e,{vocab:!0},n)!=="@nest")throw new ef("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}var Wv=t=>{class e{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(e,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(e.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:e}),e.compact=function(n,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):t.compact(n,r)},e.expand=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):t.expand(n)},e.flatten=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):t.flatten(n)},e};/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2019 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const qh=Xd,Yh=P_,Xr=tr,xr=Q_,tu=Xr.IdentifierIssuer,Qr=vr,Qv=Qg,Ca=K_,{expand:Xv}=av,{flatten:Kv}=hv,{fromRDF:Jv}=bv,{toRDF:eT}=Lv,{frameMergedOrDefault:tT,cleanupNull:nT}=Fv,{isArray:gs,isObject:xi,isString:ir}=zn,{isSubjectReference:rT}=zr,{expandIri:iT,getInitialContext:La,process:zh,processingMode:nu}=Ji,{compact:sT,compactIri:oT}=Zv,{createNodeMap:aT,createMergedNodeMap:cT,mergeNodeMaps:lT}=qc,fm=function(t){const e={},r=new Qv({max:100});t.compact=async function(s,o,a){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(o===null)throw new Qr("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(s===null)return null;a=i(a,{base:ir(s)?s:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new tu("_:b"),contextResolver:new xr({sharedCache:r})}),a.link&&(a.skipExpansion=!0),a.compactToRelative||delete a.base;let c;a.skipExpansion?c=s:c=await t.expand(s,a);const l=await t.processContext(La(a),o,a);let d=await sT({activeCtx:l,element:c,options:a,compactionMap:a.compactionMap});a.compactArrays&&!a.graph&&gs(d)?d.length===1?d=d[0]:d.length===0&&(d={}):a.graph&&xi(d)&&(d=[d]),xi(o)&&"@context"in o&&(o=o["@context"]),o=Xr.clone(o),gs(o)||(o=[o]);const f=o;o=[];for(let h=0;h<f.length;++h)(!xi(f[h])||Object.keys(f[h]).length>0)&&o.push(f[h]);const p=o.length>0;if(o.length===1&&(o=o[0]),gs(d)){const h=oT({activeCtx:l,iri:"@graph",relativeTo:{vocab:!0}}),m=d;d={},p&&(d["@context"]=o),d[h]=m}else if(xi(d)&&p){const h=d;d={"@context":o};for(const m in h)d[m]=h[m]}return d},t.expand=async function(s,o){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");o=i(o,{keepFreeFloatingNodes:!1,contextResolver:new xr({sharedCache:r})}),o.expansionMap===!1&&(o.expansionMap=void 0);const a={},c=[];if("expandContext"in o){const p=Xr.clone(o.expandContext);xi(p)&&"@context"in p?a.expandContext=p:a.expandContext={"@context":p},c.push(a.expandContext)}let l;if(!ir(s))a.input=Xr.clone(s);else{const p=await t.get(s,o);l=p.documentUrl,a.input=p.document,p.contextUrl&&(a.remoteContext={"@context":p.contextUrl},c.push(a.remoteContext))}"base"in o||(o.base=l||"");let d=La(o);for(const p of c)d=await zh({activeCtx:d,localCtx:p,options:o});let f=await Xv({activeCtx:d,element:a.input,options:o,expansionMap:o.expansionMap});return xi(f)&&"@graph"in f&&Object.keys(f).length===1?f=f["@graph"]:f===null&&(f=[]),gs(f)||(f=[f]),f},t.flatten=async function(s,o,a){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof o=="function"?o=null:o=o||null,a=i(a,{base:ir(s)?s:"",contextResolver:new xr({sharedCache:r})});const c=await t.expand(s,a),l=Kv(c);return o===null?l:(a.graph=!0,a.skipExpansion=!0,await t.compact(l,o,a))},t.frame=async function(s,o,a){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(a=i(a,{base:ir(s)?s:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new xr({sharedCache:r})}),ir(o)){const _=await t.get(o,a);if(o=_.document,_.contextUrl){let v=o["@context"];v?gs(v)?v.push(_.contextUrl):v=[v,_.contextUrl]:v=_.contextUrl,o["@context"]=v}}const c=o?o["@context"]||{}:{},l=await t.processContext(La(a),c,a);a.hasOwnProperty("omitGraph")||(a.omitGraph=nu(l,1.1)),a.hasOwnProperty("pruneBlankNodeIdentifiers")||(a.pruneBlankNodeIdentifiers=nu(l,1.1));const d=await t.expand(s,a),f={...a};f.isFrame=!0,f.keepFreeFloatingNodes=!0;const p=await t.expand(o,f),h=Object.keys(o).map(_=>iT(l,_,{vocab:!0}));f.merged=!h.includes("@graph"),f.is11=nu(l,1.1);const m=tT(d,p,f);f.graph=!a.omitGraph,f.skipExpansion=!0,f.link={},f.framing=!0;let y=await t.compact(m,c,f);return f.link={},y=nT(y,f),y},t.link=async function(s,o,a){const c={};return o&&(c["@context"]=o),c["@embed"]="@link",t.frame(s,c,a)},t.normalize=t.canonize=async function(s,o){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(o=i(o,{base:ir(s)?s:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new xr({sharedCache:r})}),"inputFormat"in o){if(o.inputFormat!=="application/n-quads"&&o.inputFormat!=="application/nquads")throw new Qr("Unknown canonicalization input format.","jsonld.CanonizeError");const l=Ca.parse(s);return qh.canonize(l,o)}const a={...o};delete a.format,a.produceGeneralizedRdf=!1;const c=await t.toRDF(s,a);return qh.canonize(c,o)},t.fromRDF=async function(s,o){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");o=i(o,{format:ir(s)?"application/n-quads":void 0});const{format:a}=o;let{rdfParser:c}=o;if(a){if(c=c||e[a],!c)throw new Qr("Unknown input format.","jsonld.UnknownFormat",{format:a})}else c=()=>s;const l=await c(s);return Jv(l,o)},t.toRDF=async function(s,o){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");o=i(o,{base:ir(s)?s:"",skipExpansion:!1,contextResolver:new xr({sharedCache:r})});let a;o.skipExpansion?a=s:a=await t.expand(s,o);const c=eT(a,o);if(o.format){if(o.format==="application/n-quads"||o.format==="application/nquads")return Ca.serialize(c);throw new Qr("Unknown output format.","jsonld.UnknownFormat",{format:o.format})}return c},t.createNodeMap=async function(s,o){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");o=i(o,{base:ir(s)?s:"",contextResolver:new xr({sharedCache:r})});const a=await t.expand(s,o);return cT(a,o)},t.merge=async function(s,o,a){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!gs(s))throw new TypeError('Could not merge, "docs" must be an array.');typeof o=="function"?o=null:o=o||null,a=i(a,{contextResolver:new xr({sharedCache:r})});const c=await Promise.all(s.map(_=>{const v={...a};return t.expand(_,v)}));let l=!0;"mergeNodes"in a&&(l=a.mergeNodes);const d=a.issuer||new tu("_:b"),f={"@default":{}};for(let _=0;_<c.length;++_){const v=Xr.relabelBlankNodes(c[_],{issuer:new tu("_:b"+_+"-")}),T=l||_===0?f:{"@default":{}};if(aT(v,T,"@default",d),T!==f)for(const I in T){const R=T[I];if(!(I in f)){f[I]=R;continue}const O=f[I];for(const N in R)N in O||(O[N]=R[N])}}const p=lT(f),h=[],m=Object.keys(p).sort();for(let _=0;_<m.length;++_){const v=p[m[_]];rT(v)||h.push(v)}return o===null?h:(a.graph=!0,a.skipExpansion=!0,await t.compact(h,o,a))},Object.defineProperty(t,"documentLoader",{get:()=>t._documentLoader,set:s=>t._documentLoader=s}),t.documentLoader=async s=>{throw new Qr("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:s})},t.get=async function(s,o){let a;typeof o.documentLoader=="function"?a=o.documentLoader:a=t.documentLoader;const c=await a(s);try{if(!c.document)throw new Qr("No remote document found at the given URL.","jsonld.NullRemoteDocument");ir(c.document)&&(c.document=JSON.parse(c.document))}catch(l){throw new Qr("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:l,remoteDoc:c})}return c},t.processContext=async function(s,o,a){return a=i(a,{base:"",contextResolver:new xr({sharedCache:r})}),o===null?La(a):(o=Xr.clone(o),xi(o)&&"@context"in o||(o={"@context":o}),zh({activeCtx:s,localCtx:o,options:a}))},t.getContextValue=Ji.getContextValue,t.documentLoaders={},t.useDocumentLoader=function(s){if(!(s in t.documentLoaders))throw new Qr('Unknown document loader type: "'+s+'"',"jsonld.UnknownDocumentLoader",{type:s});t.documentLoader=t.documentLoaders[s].apply(t,Array.prototype.slice.call(arguments,1))},t.registerRDFParser=function(s,o){e[s]=o},t.unregisterRDFParser=function(s){delete e[s]},t.registerRDFParser("application/n-quads",Ca.parse),t.registerRDFParser("application/nquads",Ca.parse),t.url=yi,t.util=Xr,Object.assign(t,Xr),t.promises=t,t.RequestQueue=Vg,t.JsonLdProcessor=Wv(t),Yh.setupGlobals(t),Yh.setupDocumentLoaders(t);function i(s,{documentLoader:o=t.documentLoader,...a}){return Object.assign({},{documentLoader:o},a,s)}return t},hm=function(){return fm(function(){return hm()})};fm(hm);const ho="http://www.w3.org/1999/02/22-rdf-syntax-ns#",po="http://www.w3.org/2001/XMLSchema#",ru="http://www.w3.org/2000/10/swap/";var en={xsd:{decimal:`${po}decimal`,boolean:`${po}boolean`,double:`${po}double`,integer:`${po}integer`,string:`${po}string`},rdf:{type:`${ho}type`,nil:`${ho}nil`,first:`${ho}first`,rest:`${ho}rest`,langString:`${ho}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${ru}reify#forSome`,forAll:`${ru}reify#forAll`},log:{implies:`${ru}log#implies`}};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Gh;var uT=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:ai):t=>(Gh||(Gh=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0)),dT=uT;const{xsd:$a}=en,fT=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Hh={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},hT=/[\x00-\x20<>\\"\{\}\|\^\`]/,pT={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},gT=/$0^/;class mT{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const n in this)!(n in pT)&&this[n]instanceof RegExp&&(this[n]=gT)}else this._n3Mode=e.n3!==!1;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let r=this._input,i=r.length;for(;;){let a,c;for(;a=this._newline.exec(r);)this._comments&&(c=this._comment.exec(a[0]))&&s("comment",c[1],"",this._line,a[0].length),r=r.substr(a[0].length,r.length),i=r.length,this._line++;if(!a&&(a=this._whitespace.exec(r))&&(r=r.substr(a[0].length,r.length)),this._endOfFile.test(r))return n&&(this._comments&&(c=this._comment.exec(r))&&s("comment",c[1],"",this._line,r.length),r=null,s("eof","","",this._line,0)),this._input=r;const l=this._line,d=r[0];let f="",p="",h="",m=null,y=0,_=!1;switch(d){case"^":if(r.length<3)break;if(r[1]==="^"){if(this._previousMarker="^^",r=r.substr(2),r[0]!=="<"){_=!0;break}}else{this._n3Mode&&(y=1,f="^");break}case"<":if(m=this._unescapedIri.exec(r))f="IRI",p=m[1];else if(m=this._iri.exec(r)){if(p=this._unescape(m[1]),p===null||hT.test(p))return o(this);f="IRI"}else r.length>1&&r[1]==="<"?(f="<<",y=2):this._n3Mode&&r.length>1&&r[1]==="="&&(f="inverse",y=2,p=">");break;case">":r.length>1&&r[1]===">"&&(f=">>",y=2);break;case"_":((m=this._blank.exec(r))||n&&(m=this._blank.exec(`${r} `)))&&(f="blank",h="_",p=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(r))p=m[1];else if({value:p,matchLength:y}=this._parseLiteral(r),p===null)return o(this);(m!==null||y!==0)&&(f="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(r))p=m[1];else if({value:p,matchLength:y}=this._parseLiteral(r),p===null)return o(this);(m!==null||y!==0)&&(f="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(r))&&(f="var",p=m[0]);break;case"@":this._previousMarker==="literal"&&(m=this._langcode.exec(r))?(f="langcode",p=m[1]):(m=this._keyword.exec(r))&&(f=m[0]);break;case".":if(r.length===1?n:r[1]<"0"||r[1]>"9"){f=".",y=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(r)||n&&(m=this._number.exec(`${r} `)))&&(f="literal",p=m[0],h=typeof m[1]=="string"?$a.double:typeof m[2]=="string"?$a.decimal:$a.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(r))?f=m[0].toUpperCase():_=!0;break;case"f":case"t":(m=this._boolean.exec(r))?(f="literal",p=m[0],h=$a.boolean):_=!0;break;case"a":(m=this._shortPredicates.exec(r))?(f="abbreviation",p="a"):_=!0;break;case"=":this._n3Mode&&r.length>1&&(f="abbreviation",r[1]!==">"?(y=1,p="="):(y=2,p=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(y=1,f=d);break;default:_=!0}if(_&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(m=this._prefix.exec(r))?(f="prefix",p=m[1]||""):((m=this._prefixed.exec(r))||n&&(m=this._prefixed.exec(`${r} `)))&&(f="prefixed",h=m[1]||"",p=this._unescape(m[2]))),this._previousMarker==="^^")switch(f){case"prefixed":f="type";break;case"IRI":f="typeIRI";break;default:f=""}if(!f)return n||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?o(this):this._input=r;const v=y||m[0].length,T=s(f,p,h,l,v);this.previousToken=T,this._previousMarker=f,r=r.substr(v,r.length)}function s(a,c,l,d,f){const p=r?i-r.length:i,h=p+f,m={type:a,value:c,prefix:l,line:d,start:p,end:h};return e(null,m),m}function o(a){e(a._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let n=!1;const r=e.replace(fT,(i,s,o,a)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof o=="string"){let c=Number.parseInt(o,16);return c<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return a in Hh?Hh[a]:(n=!0,"")});return n?null:r}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],r=n.length;let i=Math.max(this._literalClosingPos,r);for(;(i=e.indexOf(n,i))>0;){let s=0;for(;e[i-s-1]==="\\";)s++;if(s%2===0){const o=e.substring(r,i),a=o.split(/\r\n|\r|\n/).length-1,c=i+r;if(r===1&&a!==0||r===3&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:c}}i++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,n){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof n=="function")dT(()=>this._tokenizeToEnd(n,!0));else{const r=[];let i;if(this._tokenizeToEnd((s,o)=>s?i=s:r.push(o),!0),i)throw i;return r}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",r=>{this._input!==null&&r.length!==0&&(this._pendingBuffer&&(r=hi.Buffer.concat([this._pendingBuffer,r]),this._pendingBuffer=null),r[r.length-1]&128?this._pendingBuffer=r:(typeof this._input=="undefined"?this._input=this._readStartingBom(typeof r=="string"?r:r.toString()):this._input+=r,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}function pm(t){return!!t&&t.termType==="DefaultGraph"}const{rdf:yT,xsd:Si}=en;let sa,wT=0;const gm=/^"(.*".*)(?="[^"]*$)/,bT=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,td={namedNode:IT,blankNode:DT,variable:xT,literal:RT,defaultGraph:OT,quad:Zh,triple:Zh};var tf=td;class Tr{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Tr?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class mm extends Tr{get termType(){return"NamedNode"}}class Os extends Tr{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&e[n++]==="@"?e.substr(n).toLowerCase():""}get datatype(){return new mm(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,r=n<e.length?e[n]:"";return r==="^"?e.substr(n+2):r!=="@"?Si.string:yT.langString}equals(e){return e instanceof Os?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class _T extends Tr{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class vT extends Tr{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class TT extends Tr{constructor(){return super(""),sa||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}sa=new TT;function Cr(t,e){if(e=e||td,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===td)return new Os(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),t[n+1]==="@"?t.substr(n+2):e.namedNode(t.substr(n+3)));case"<":const r=bT.exec(t);return e.quad(Cr(ka(r[1]),e),Cr(ka(r[2]),e),Cr(ka(r[3]),e),r[4]&&Cr(ka(r[4]),e));default:return e.namedNode(t)}}function je(t){if(typeof t=="string")return t;if(t instanceof Tr&&t.termType!=="Quad")return t.id;if(!t)return sa.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==Si.string?`^^${t.datatype.value}`:""}`;case"Quad":return`<<${iu(je(t.subject))} ${iu(je(t.predicate))} ${iu(je(t.object))}${pm(t.graph)?"":` ${je(t.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${t.termType}`)}}class ET extends Tr{constructor(e,n,r,i){super(""),this._subject=e,this._predicate=n,this._object=r,this._graph=i||sa}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function iu(t){return t.replace(gm,(e,n)=>`"${n.replace(/"/g,'""')}`)}function ka(t){return t.replace(gm,(e,n)=>`"${n.replace(/""/g,'"')}`)}function IT(t){return new mm(t)}function DT(t){return new _T(t||`n3-${wT++}`)}function RT(t,e){if(typeof e=="string")return new Os(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return n===""&&(typeof t=="boolean"?n=Si.boolean:typeof t=="number"&&(Number.isFinite(t)?n=Number.isInteger(t)?Si.integer:Si.double:(n=Si.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),n===""||n===Si.string?new Os(`"${t}"`):new Os(`"${t}"^^${n}`)}function xT(t){return new vT(t)}function OT(){return sa}function Zh(t,e,n,r){return new ET(t,e,n,r)}let Vh=0;class nf{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&ym(this,e.factory);const n=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(n),i=/trig/.test(n),s=/triple/.test(n),o=/quad/.test(n),a=this._n3Mode=/n3/.test(n),c=s||o;(this._supportsNamedGraphs=!(r||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||i||s||a),this._supportsRDFStar=n===""||/star|\*$/.test(n),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new mT({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Vh=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,n,r,i,s){const o=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:i,object:s,graph:n,inverse:o?this._inversePredicate:!1,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.id.substr(2)}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let r;switch(e.type){case"IRI":case"typeIRI":const i=this._resolveIRI(e.value);if(i===null)return this._error("Invalid IRI",e);r=this._namedNode(i);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(s===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._namedNode(s+e.value);break;case"blank":r=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${n}`,e):(this._subject=null,n==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,r=null,i=this._readListItem;const s=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._blankNode(),this.RDF_FIRST,this._subject=n=this._blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),o.length!==0&&o[o.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;r=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(n=this._literal(e.value,this._namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((n=this._readEntity(e))===void 0)return}if(r===null&&(this._subject=r=this._blankNode()),s===null?a.predicate===null?a.subject=r:a.object=r:this._emit(s,this.RDF_REST,r,this._graph),n!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,r,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,n,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const r=this._readEntity(e);if(r===void 0)return;n=this._literal(this._literalValue,r),e=null;break;case"langcode":n=this._literal(this._literalValue,e.value),e=null;break}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const r=this._completeLiteral(e);if(!!r)return this._object=r.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),r.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,r=this._graph;const i=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:if(this._supportsQuads&&this._graph===null&&(r=this._readEntity(e))!==void 0){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(i!==null){const o=this._predicate,a=this._object;s?this._emit(a,o,i,r):this._emit(i,o,a,r)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n=e.type==="IRI"&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if((n=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,r=n.length&&n[n.length-1];if(r&&r.type==="item"){const i=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,r;const i=this._blankNode();if((r=this._readEntity(e))!==void 0)return this._predicate===null?(n=this._subject,this._subject=i):(n=this._object,this._object=i),this._emit(n,r,i,this._graph),this._readPath}_readBackwardPath(e){const n=this._blankNode();let r,i;if((r=this._readEntity(e))!==void 0)return this._predicate===null?(i=this._subject,this._subject=n):(i=this._object,this._object=n),this._emit(n,r,i,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const n=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,r,i){this._callback(null,this._quad(e,n,r,i||this.DEFAULTGRAPH))}_error(e,n){const r=new Error(`${e} on line ${n.line}.`);r.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=su}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let r="",i=-1,s=-1,o=0,a="/";for(;i<n;){switch(a){case":":if(s<0&&e[++i]==="/"&&e[++i]==="/")for(;(s=i+1)<n&&e[s]!=="/";)i=s;break;case"?":case"#":i=n;break;case"/":if(e[i+1]===".")switch(a=e[++i+1],a){case"/":r+=e.substring(o,i-1),o=i+1;break;case void 0:case"?":case"#":return r+e.substring(o,i)+e.substr(i+1);case".":if(a=e[++i+1],a===void 0||a==="/"||a==="?"||a==="#"){if(r+=e.substring(o,i-2),(o=r.lastIndexOf("/"))>=s&&(r=r.substr(0,o)),a!=="/")return`${r}/${e.substr(i+1)}`;o=i+1}}}a=e[++i]}return r+e.substring(o)}parse(e,n,r){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Vh++}_`,this._prefixCallback=r||su,this._inversePredicate=!1,this._quantified=Object.create(null),!n){const i=[];let s;if(this._callback=(o,a)=>{o?s=o:a&&i.push(a)},this._lexer.tokenize(e).every(o=>this._readCallback=this._readCallback(o)),s)throw s;return i}this._callback=n,this._lexer.tokenize(e,(i,s)=>{i!==null?(this._callback(i),this._callback=su):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function su(){}function ym(t,e){const n=e.namedNode;t._namedNode=n,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=n(en.rdf.first),t.RDF_REST=n(en.rdf.rest),t.RDF_NIL=n(en.rdf.nil),t.N3_FORALL=n(en.r.forAll),t.N3_FORSOME=n(en.r.forSome),t.ABBREVIATIONS={a:n(en.rdf.type),"=":n(en.owl.sameAs),">":n(en.log.implies)},t.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}ym(nf.prototype,tf);const go=tf.defaultGraph(),{rdf:NT,xsd:ms}=en,Wh=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Qh=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,AT={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class mo extends Tr{equals(){return!1}}class wm{constructor(e,n){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(n=e,e=null),n=n||{},this._lists=n.lists,e)this._outputStream=e,this._endStream=n.end===void 0?!0:!!n.end;else{let r="";this._outputStream={write(i,s,o){r+=i,o&&o()},end:i=>{i&&i(null,r)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(n.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=go,this._prefixIRIs=Object.create(null),n.prefixes&&this.addPrefixes(n.prefixes),n.baseIRI&&(this._baseMatcher=new RegExp(`^${Kh(n.baseIRI)}${n.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=n.baseIRI.length))}get _inDefaultGraph(){return go.equals(this._graph)}_write(e,n){this._outputStream.write(e,"utf8",n)}_writeQuad(e,n,r,i,s){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(go.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),e.equals(this._subject)?n.equals(this._predicate)?this._write(`, ${this._encodeObject(r)}`,s):this._write(`;
    ${this._encodePredicate(this._predicate=n)} ${this._encodeObject(r)}`,s):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=n)} ${this._encodeObject(r)}`,s)}catch(o){s&&s(o)}}_writeQuadLine(e,n,r,i,s){delete this._prefixMatch,this._write(this.quadToString(e,n,r,i),s)}quadToString(e,n,r,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(n)} ${this._encodeObject(r)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(e){return e.map(n=>this.quadToString(n.subject,n.predicate,n.object,n.graph)).join("")}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let n=e.value;this._baseMatcher&&this._baseMatcher.test(n)&&(n=n.substr(this._baseLength)),Wh.test(n)&&(n=n.replace(Qh,Xh));const r=this._prefixRegex.exec(n);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:n:`<${n}>`}_encodeLiteral(e){let n=e.value;if(Wh.test(n)&&(n=n.replace(Qh,Xh)),e.language)return`"${n}"@${e.language}`;if(this._lineMode){if(e.datatype.value===ms.string)return`"${n}"`}else switch(e.datatype.value){case ms.string:return`"${n}"`;case ms.boolean:if(n==="true"||n==="false")return n;break;case ms.integer:if(/^[+-]?\d+$/.test(n))return n;break;case ms.decimal:if(/^[+-]?\d*\.\d+$/.test(n))return n;break;case ms.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(n))return n;break}return`"${n}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===NT.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:n,object:r,graph:i}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(n)} ${this._encodeObject(r)}${pm(i)?"":` ${this._encodeIriOrBlank(i)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,n,r,i,s){r===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,n):typeof i=="function"?this._writeQuad(e,n,r,go,i):this._writeQuad(e,n,r,i||go,s)}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}addPrefix(e,n,r){const i={};i[e]=n,this.addPrefixes(i,r)}addPrefixes(e,n){if(!this._prefixIRIs)return n&&n();let r=!1;for(let i in e){let s=e[i];typeof s!="string"&&(s=s.value),r=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[s]=i+=":",this._write(`@prefix ${i} <${s}>.
`)}if(r){let i="",s="";for(const o in this._prefixIRIs)i+=i?`|${o}`:o,s+=(s?"|":"")+this._prefixIRIs[o];i=Kh(i),this._prefixRegex=new RegExp(`^(?:${s})[^/]*$|^(${i})([a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(r?`
`:"",n)}blank(e,n){let r=e,i,s;switch(e===void 0?r=[]:e.termType?r=[{predicate:e,object:n}]:"length"in e||(r=[e]),s=r.length){case 0:return new mo("[]");case 1:if(i=r[0],!(i.object instanceof mo))return new mo(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let o="[";for(let a=0;a<s;a++)i=r[a],i.predicate.equals(e)?o+=`, ${this._encodeObject(i.object)}`:(o+=`${(a?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new mo(`${o}
]`)}}list(e){const n=e&&e.length||0,r=new Array(n);for(let i=0;i<n;i++)r[i]=this._encodeObject(e[i]);return new mo(`(${r.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let n=e&&((r,i)=>{n=null,e(r,i)});if(this._endStream)try{return this._outputStream.end(n)}catch{}n&&n()}}function Xh(t){let e=AT[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}function Kh(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var Fs={exports:{}},bm=vp.exports.EventEmitter,ST={},jT=Object.freeze(Object.defineProperty({__proto__:null,default:ST},Symbol.toStringTag,{value:"Module"})),_m=Tw(jT);function Jh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jh(Object(n),!0).forEach(function(r){CT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jh(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CT(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ep(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $T(t,e,n){return e&&ep(t.prototype,e),n&&ep(t,n),t}var kT=hi,Xa=kT.Buffer,PT=_m,nd=PT.inspect,UT=nd&&nd.custom||"inspect";function FT(t,e,n){Xa.prototype.copy.call(t,e,n)}var BT=function(){function t(){LT(this,t),this.head=null,this.tail=null,this.length=0}return $T(t,[{key:"push",value:function(n){var r={data:n,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}},{key:"unshift",value:function(n){var r={data:n,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}},{key:"shift",value:function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(n){if(this.length===0)return"";for(var r=this.head,i=""+r.data;r=r.next;)i+=n+r.data;return i}},{key:"concat",value:function(n){if(this.length===0)return Xa.alloc(0);for(var r=Xa.allocUnsafe(n>>>0),i=this.head,s=0;i;)FT(i.data,r,s),s+=i.data.length,i=i.next;return r}},{key:"consume",value:function(n,r){var i;return n<this.head.data.length?(i=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):n===this.head.data.length?i=this.shift():i=r?this._getString(n):this._getBuffer(n),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var r=this.head,i=1,s=r.data;for(n-=s.length;r=r.next;){var o=r.data,a=n>o.length?o.length:n;if(a===o.length?s+=o:s+=o.slice(0,n),n-=a,n===0){a===o.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(n){var r=Xa.allocUnsafe(n),i=this.head,s=1;for(i.data.copy(r),n-=i.data.length;i=i.next;){var o=i.data,a=n>o.length?o.length:n;if(o.copy(r,r.length-n,0,a),n-=a,n===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,r}},{key:UT,value:function(n,r){return nd(this,MT({},r,{depth:0,customInspect:!1}))}}]),t}();function qT(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Le.nextTick(rd,this,t)):Le.nextTick(rd,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?n._writableState?n._writableState.errorEmitted?Le.nextTick(Ka,n):(n._writableState.errorEmitted=!0,Le.nextTick(tp,n,s)):Le.nextTick(tp,n,s):e?(Le.nextTick(Ka,n),e(s)):Le.nextTick(Ka,n)}),this)}function tp(t,e){rd(t,e),Ka(t)}function Ka(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function YT(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function rd(t,e){t.emit("error",e)}function zT(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}var vm={destroy:qT,undestroy:YT,errorOrDestroy:zT},es={};function GT(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Tm={};function Gn(t,e,n){n||(n=Error);function r(s,o,a){return typeof e=="string"?e:e(s,o,a)}var i=function(s){GT(o,s);function o(a,c,l){return s.call(this,r(a,c,l))||this}return o}(n);i.prototype.name=n.name,i.prototype.code=t,Tm[t]=i}function np(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map(function(r){return String(r)}),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function HT(t,e,n){return t.substr(!n||n<0?0:+n,e.length)===e}function ZT(t,e,n){return(n===void 0||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}function VT(t,e,n){return typeof n!="number"&&(n=0),n+e.length>t.length?!1:t.indexOf(e,n)!==-1}Gn("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Gn("ERR_INVALID_ARG_TYPE",function(t,e,n){var r;typeof e=="string"&&HT(e,"not ")?(r="must not be",e=e.replace(/^not /,"")):r="must be";var i;if(ZT(t," argument"))i="The ".concat(t," ").concat(r," ").concat(np(e,"type"));else{var s=VT(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(r," ").concat(np(e,"type"))}return i+=". Received type ".concat(typeof n),i},TypeError);Gn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Gn("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Gn("ERR_STREAM_PREMATURE_CLOSE","Premature close");Gn("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Gn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Gn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Gn("ERR_STREAM_WRITE_AFTER_END","write after end");Gn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Gn("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Gn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");es.codes=Tm;var WT=es.codes.ERR_INVALID_OPT_VALUE;function QT(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function XT(t,e,n,r){var i=QT(e,r,n);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=r?n:"highWaterMark";throw new WT(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var Em={getHighWaterMark:XT},Vi={exports:{}};typeof Object.create=="function"?Vi.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Vi.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}};var KT=JT;function JT(t,e){if(ou("noDeprecation"))return t;var n=!1;function r(){if(!n){if(ou("throwDeprecation"))throw new Error(e);ou("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}return r}function ou(t){try{if(!ai.localStorage)return!1}catch{return!1}var e=ai.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var Im=ut;function Dm(t){var e=this;this.next=null,this.entry=null,this.finish=function(){R1(e,t)}}var Ns;ut.WritableState=oa;var e1={deprecate:KT},Rm=bm,Yc=hi.Buffer,t1=ai.Uint8Array||function(){};function n1(t){return Yc.from(t)}function r1(t){return Yc.isBuffer(t)||t instanceof t1}var rf=vm,i1=Em,s1=i1.getHighWaterMark,wi=es.codes,o1=wi.ERR_INVALID_ARG_TYPE,a1=wi.ERR_METHOD_NOT_IMPLEMENTED,c1=wi.ERR_MULTIPLE_CALLBACK,l1=wi.ERR_STREAM_CANNOT_PIPE,u1=wi.ERR_STREAM_DESTROYED,d1=wi.ERR_STREAM_NULL_VALUES,f1=wi.ERR_STREAM_WRITE_AFTER_END,h1=wi.ERR_UNKNOWN_ENCODING,Bs=rf.errorOrDestroy;Vi.exports(ut,Rm);function p1(){}function oa(t,e,n){Ns=Ns||Vs,t=t||{},typeof n!="boolean"&&(n=e instanceof Ns),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=s1(this,t,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var r=t.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){v1(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Dm(this)}oa.prototype.getBuffer=function(){for(var e=this.bufferedRequest,n=[];e;)n.push(e),e=e.next;return n};(function(){try{Object.defineProperty(oa.prototype,"buffer",{get:e1.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Ja;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Ja=Function.prototype[Symbol.hasInstance],Object.defineProperty(ut,Symbol.hasInstance,{value:function(e){return Ja.call(this,e)?!0:this!==ut?!1:e&&e._writableState instanceof oa}})):Ja=function(e){return e instanceof this};function ut(t){Ns=Ns||Vs;var e=this instanceof Ns;if(!e&&!Ja.call(ut,this))return new ut(t);this._writableState=new oa(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),Rm.call(this)}ut.prototype.pipe=function(){Bs(this,new l1)};function g1(t,e){var n=new f1;Bs(t,n),Le.nextTick(e,n)}function m1(t,e,n,r){var i;return n===null?i=new d1:typeof n!="string"&&!e.objectMode&&(i=new o1("chunk",["string","Buffer"],n)),i?(Bs(t,i),Le.nextTick(r,i),!1):!0}ut.prototype.write=function(t,e,n){var r=this._writableState,i=!1,s=!r.objectMode&&r1(t);return s&&!Yc.isBuffer(t)&&(t=n1(t)),typeof e=="function"&&(n=e,e=null),s?e="buffer":e||(e=r.defaultEncoding),typeof n!="function"&&(n=p1),r.ending?g1(this,n):(s||m1(this,r,t,n))&&(r.pendingcb++,i=w1(this,r,s,t,e,n)),i};ut.prototype.cork=function(){this._writableState.corked++};ut.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&xm(this,t))};ut.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new h1(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(ut.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function y1(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Yc.from(e,n)),e}Object.defineProperty(ut.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function w1(t,e,n,r,i,s){if(!n){var o=y1(e,r,i);r!==o&&(n=!0,i="buffer",r=o)}var a=e.objectMode?1:r.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else id(t,e,!1,a,r,i,s);return c}function id(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new u1("write")):n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function b1(t,e,n,r,i){--e.pendingcb,n?(Le.nextTick(i,r),Le.nextTick(Bo,t,e),t._writableState.errorEmitted=!0,Bs(t,r)):(i(r),t._writableState.errorEmitted=!0,Bs(t,r),Bo(t,e))}function _1(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function v1(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(typeof i!="function")throw new c1;if(_1(n),e)b1(t,n,r,e,i);else{var s=Om(n)||t.destroyed;!s&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&xm(t,n),r?Le.nextTick(rp,t,n,s,i):rp(t,n,s,i)}}function rp(t,e,n,r){n||T1(t,e),e.pendingcb--,r(),Bo(t,e)}function T1(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function xm(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),s=e.corkedRequestsFree;s.entry=n;for(var o=0,a=!0;n;)i[o]=n,n.isBuf||(a=!1),n=n.next,o+=1;i.allBuffers=a,id(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new Dm(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,d=n.callback,f=e.objectMode?1:c.length;if(id(t,e,!1,f,c,l,d),n=n.next,e.bufferedRequestCount--,e.writing)break}n===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}ut.prototype._write=function(t,e,n){n(new a1("_write()"))};ut.prototype._writev=null;ut.prototype.end=function(t,e,n){var r=this._writableState;return typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null),t!=null&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||D1(this,r,n),this};Object.defineProperty(ut.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Om(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function E1(t,e){t._final(function(n){e.pendingcb--,n&&Bs(t,n),e.prefinished=!0,t.emit("prefinish"),Bo(t,e)})}function I1(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,Le.nextTick(E1,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Bo(t,e){var n=Om(e);if(n&&(I1(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return n}function D1(t,e,n){e.ending=!0,Bo(t,e),n&&(e.finished?Le.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function R1(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree.next=t}Object.defineProperty(ut.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});ut.prototype.destroy=rf.destroy;ut.prototype._undestroy=rf.undestroy;ut.prototype._destroy=function(t,e){e(t)};var x1=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},Vs=mr,Nm=Sm,sd=Im;Vi.exports(mr,Nm);for(var ip=x1(sd.prototype),au=0;au<ip.length;au++){var cu=ip[au];mr.prototype[cu]||(mr.prototype[cu]=sd.prototype[cu])}function mr(t){if(!(this instanceof mr))return new mr(t);Nm.call(this,t),sd.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",O1)))}Object.defineProperty(mr.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(mr.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(mr.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function O1(){this._writableState.ended||Le.nextTick(N1,this)}function N1(t){t.end()}Object.defineProperty(mr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var sf={},od={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=hi,r=n.Buffer;function i(o,a){for(var c in o)a[c]=o[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s);function s(o,a,c){return r(o,a,c)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,c)},s.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=r(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(od,od.exports);var of=od.exports.Buffer,sp=of.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function A1(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function S1(t){var e=A1(t);if(typeof e!="string"&&(of.isEncoding===sp||!sp(t)))throw new Error("Unknown encoding: "+t);return e||t}sf.StringDecoder=aa;function aa(t){this.encoding=S1(t);var e;switch(this.encoding){case"utf16le":this.text=k1,this.end=P1,e=4;break;case"utf8":this.fillLast=C1,e=4;break;case"base64":this.text=U1,this.end=F1,e=3;break;default:this.write=B1,this.end=q1;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=of.allocUnsafe(e)}aa.prototype.write=function(t){if(t.length===0)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""};aa.prototype.end=$1;aa.prototype.text=L1;aa.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function lu(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function j1(t,e,n){var r=e.length-1;if(r<n)return 0;var i=lu(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||i===-2?0:(i=lu(e[r]),i>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||i===-2?0:(i=lu(e[r]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function M1(t,e,n){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function C1(t){var e=this.lastTotal-this.lastNeed,n=M1(this,t);if(n!==void 0)return n;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function L1(t,e){var n=j1(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function $1(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function k1(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function P1(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function U1(t,e){var n=(t.length-e)%3;return n===0?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function F1(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function B1(t){return t.toString(this.encoding)}function q1(t){return t&&t.length?this.write(t):""}var op=es.codes.ERR_STREAM_PREMATURE_CLOSE;function Y1(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r)}}}function z1(){}function G1(t){return t.setHeader&&typeof t.abort=="function"}function Am(t,e,n){if(typeof e=="function")return Am(t,null,e);e||(e={}),n=Y1(n||z1);var r=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,r||n.call(t)},c=t._readableState&&t._readableState.endEmitted,l=function(){r=!1,c=!0,i||n.call(t)},d=function(m){n.call(t,m)},f=function(){var m;if(r&&!c)return(!t._readableState||!t._readableState.ended)&&(m=new op),n.call(t,m);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(m=new op),n.call(t,m)},p=function(){t.req.on("finish",a)};return G1(t)?(t.on("complete",a),t.on("abort",f),t.req?p():t.on("request",p)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",l),t.on("finish",a),e.error!==!1&&t.on("error",d),t.on("close",f),function(){t.removeListener("complete",a),t.removeListener("abort",f),t.removeListener("request",p),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",l),t.removeListener("error",d),t.removeListener("close",f)}}var af=Am,Pa;function ei(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var H1=af,ti=Symbol("lastResolve"),Oi=Symbol("lastReject"),xo=Symbol("error"),_c=Symbol("ended"),Ci=Symbol("lastPromise"),cf=Symbol("handlePromise"),Li=Symbol("stream");function oi(t,e){return{value:t,done:e}}function Z1(t){var e=t[ti];if(e!==null){var n=t[Li].read();n!==null&&(t[Ci]=null,t[ti]=null,t[Oi]=null,e(oi(n,!1)))}}function V1(t){Le.nextTick(Z1,t)}function W1(t,e){return function(n,r){t.then(function(){if(e[_c]){n(oi(void 0,!0));return}e[cf](n,r)},r)}}var Q1=Object.getPrototypeOf(function(){}),X1=Object.setPrototypeOf((Pa={get stream(){return this[Li]},next:function(){var e=this,n=this[xo];if(n!==null)return Promise.reject(n);if(this[_c])return Promise.resolve(oi(void 0,!0));if(this[Li].destroyed)return new Promise(function(o,a){Le.nextTick(function(){e[xo]?a(e[xo]):o(oi(void 0,!0))})});var r=this[Ci],i;if(r)i=new Promise(W1(r,this));else{var s=this[Li].read();if(s!==null)return Promise.resolve(oi(s,!1));i=new Promise(this[cf])}return this[Ci]=i,i}},ei(Pa,Symbol.asyncIterator,function(){return this}),ei(Pa,"return",function(){var e=this;return new Promise(function(n,r){e[Li].destroy(null,function(i){if(i){r(i);return}n(oi(void 0,!0))})})}),Pa),Q1),K1=function(e){var n,r=Object.create(X1,(n={},ei(n,Li,{value:e,writable:!0}),ei(n,ti,{value:null,writable:!0}),ei(n,Oi,{value:null,writable:!0}),ei(n,xo,{value:null,writable:!0}),ei(n,_c,{value:e._readableState.endEmitted,writable:!0}),ei(n,cf,{value:function(s,o){var a=r[Li].read();a?(r[Ci]=null,r[ti]=null,r[Oi]=null,s(oi(a,!1))):(r[ti]=s,r[Oi]=o)},writable:!0}),n));return r[Ci]=null,H1(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=r[Oi];s!==null&&(r[Ci]=null,r[ti]=null,r[Oi]=null,s(i)),r[xo]=i;return}var o=r[ti];o!==null&&(r[Ci]=null,r[ti]=null,r[Oi]=null,o(oi(void 0,!0))),r[_c]=!0}),e.on("readable",V1.bind(null,r)),r},J1=K1,eE=function(){throw new Error("Readable.from is not available in the browser")},Sm=xe,As;xe.ReadableState=Mm;vp.exports.EventEmitter;var jm=function(e,n){return e.listeners(n).length},ca=bm,zc=hi.Buffer,tE=ai.Uint8Array||function(){};function nE(t){return zc.from(t)}function rE(t){return zc.isBuffer(t)||t instanceof tE}var uu=_m,ye;uu&&uu.debuglog?ye=uu.debuglog("stream"):ye=function(){};var iE=BT,lf=vm,sE=Em,oE=sE.getHighWaterMark,Gc=es.codes,aE=Gc.ERR_INVALID_ARG_TYPE,cE=Gc.ERR_STREAM_PUSH_AFTER_EOF,lE=Gc.ERR_METHOD_NOT_IMPLEMENTED,uE=Gc.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Ss,du,fu;Vi.exports(xe,ca);var Oo=lf.errorOrDestroy,hu=["error","close","destroy","pause","resume"];function dE(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}function Mm(t,e,n){As=As||Vs,t=t||{},typeof n!="boolean"&&(n=e instanceof As),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=oE(this,t,"readableHighWaterMark",n),this.buffer=new iE,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Ss||(Ss=sf.StringDecoder),this.decoder=new Ss(t.encoding),this.encoding=t.encoding)}function xe(t){if(As=As||Vs,!(this instanceof xe))return new xe(t);var e=this instanceof As;this._readableState=new Mm(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),ca.call(this)}Object.defineProperty(xe.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});xe.prototype.destroy=lf.destroy;xe.prototype._undestroy=lf.undestroy;xe.prototype._destroy=function(t,e){e(t)};xe.prototype.push=function(t,e){var n=this._readableState,r;return n.objectMode?r=!0:typeof t=="string"&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=zc.from(t,e),e=""),r=!0),Cm(this,t,e,!1,r)};xe.prototype.unshift=function(t){return Cm(this,t,null,!0,!1)};function Cm(t,e,n,r,i){ye("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,pE(t,s);else{var o;if(i||(o=fE(s,e)),o)Oo(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==zc.prototype&&(e=nE(e)),r)s.endEmitted?Oo(t,new uE):pu(t,s,e,!0);else if(s.ended)Oo(t,new cE);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||e.length!==0?pu(t,s,e,!1):ad(t,s)):pu(t,s,e,!1)}else r||(s.reading=!1,ad(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function pu(t,e,n,r){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&Hc(t)),ad(t,e)}function fE(t,e){var n;return!rE(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(n=new aE("chunk",["string","Buffer","Uint8Array"],e)),n}xe.prototype.isPaused=function(){return this._readableState.flowing===!1};xe.prototype.setEncoding=function(t){Ss||(Ss=sf.StringDecoder);var e=new Ss(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";n!==null;)r+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),r!==""&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var ap=1073741824;function hE(t){return t>=ap?t=ap:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function cp(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=hE(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}xe.prototype.read=function(t){ye("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return ye("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?gu(this):Hc(this),null;if(t=cp(t,e),t===0&&e.ended)return e.length===0&&gu(this),null;var r=e.needReadable;ye("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,ye("length less than watermark",r)),e.ended||e.reading?(r=!1,ye("reading or ended",r)):r&&(ye("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=cp(n,e)));var i;return t>0?i=km(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&gu(this)),i!==null&&this.emit("data",i),i};function pE(t,e){if(ye("onEofChunk"),!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?Hc(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,Lm(t)))}}function Hc(t){var e=t._readableState;ye("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(ye("emitReadable",e.flowing),e.emittedReadable=!0,Le.nextTick(Lm,t))}function Lm(t){var e=t._readableState;ye("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,uf(t)}function ad(t,e){e.readingMore||(e.readingMore=!0,Le.nextTick(gE,t,e))}function gE(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var n=e.length;if(ye("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}xe.prototype._read=function(t){Oo(this,new lE("_read()"))};xe.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t);break}r.pipesCount+=1,ye("pipe count=%d opts=%j",r.pipesCount,e);var i=(!e||e.end!==!1)&&t!==Le.stdout&&t!==Le.stderr,s=i?a:y;r.endEmitted?Le.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(_,v){ye("onunpipe"),_===n&&v&&v.hasUnpiped===!1&&(v.hasUnpiped=!0,d())}function a(){ye("onend"),t.end()}var c=mE(n);t.on("drain",c);var l=!1;function d(){ye("cleanup"),t.removeListener("close",h),t.removeListener("finish",m),t.removeListener("drain",c),t.removeListener("error",p),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",y),n.removeListener("data",f),l=!0,r.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c()}n.on("data",f);function f(_){ye("ondata");var v=t.write(_);ye("dest.write",v),v===!1&&((r.pipesCount===1&&r.pipes===t||r.pipesCount>1&&Pm(r.pipes,t)!==-1)&&!l&&(ye("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function p(_){ye("onerror",_),y(),t.removeListener("error",p),jm(t,"error")===0&&Oo(t,_)}dE(t,"error",p);function h(){t.removeListener("finish",m),y()}t.once("close",h);function m(){ye("onfinish"),t.removeListener("close",h),y()}t.once("finish",m);function y(){ye("unpipe"),n.unpipe(t)}return t.emit("pipe",n),r.flowing||(ye("pipe resume"),n.resume()),t};function mE(t){return function(){var n=t._readableState;ye("pipeOnDrain",n.awaitDrain),n.awaitDrain&&n.awaitDrain--,n.awaitDrain===0&&jm(t,"data")&&(n.flowing=!0,uf(t))}}xe.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Pm(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)};xe.prototype.on=function(t,e){var n=ca.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,ye("on readable",r.length,r.reading),r.length?Hc(this):r.reading||Le.nextTick(yE,this)),n};xe.prototype.addListener=xe.prototype.on;xe.prototype.removeListener=function(t,e){var n=ca.prototype.removeListener.call(this,t,e);return t==="readable"&&Le.nextTick($m,this),n};xe.prototype.removeAllListeners=function(t){var e=ca.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Le.nextTick($m,this),e};function $m(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function yE(t){ye("readable nexttick read 0"),t.read(0)}xe.prototype.resume=function(){var t=this._readableState;return t.flowing||(ye("resume"),t.flowing=!t.readableListening,wE(this,t)),t.paused=!1,this};function wE(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Le.nextTick(bE,t,e))}function bE(t,e){ye("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),uf(t),e.flowing&&!e.reading&&t.read(0)}xe.prototype.pause=function(){return ye("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ye("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function uf(t){var e=t._readableState;for(ye("flow",e.flowing);e.flowing&&t.read()!==null;);}xe.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;t.on("end",function(){if(ye("wrapped end"),n.decoder&&!n.ended){var o=n.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(ye("wrapped data"),n.decoder&&(o=n.decoder.write(o)),!(n.objectMode&&o==null)&&!(!n.objectMode&&(!o||!o.length))){var a=e.push(o);a||(r=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<hu.length;s++)t.on(hu[s],this.emit.bind(this,hu[s]));return this._read=function(o){ye("wrapped _read",o),r&&(r=!1,t.resume())},this};typeof Symbol=="function"&&(xe.prototype[Symbol.asyncIterator]=function(){return du===void 0&&(du=J1),du(this)});Object.defineProperty(xe.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(xe.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(xe.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});xe._fromList=km;Object.defineProperty(xe.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function km(t,e){if(e.length===0)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.first():n=e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function gu(t){var e=t._readableState;ye("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Le.nextTick(_E,e,t))}function _E(t,e){if(ye("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}typeof Symbol=="function"&&(xe.from=function(t,e){return fu===void 0&&(fu=eE),fu(xe,t,e)});function Pm(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}var Um=Br,Zc=es.codes,vE=Zc.ERR_METHOD_NOT_IMPLEMENTED,TE=Zc.ERR_MULTIPLE_CALLBACK,EE=Zc.ERR_TRANSFORM_ALREADY_TRANSFORMING,IE=Zc.ERR_TRANSFORM_WITH_LENGTH_0,Vc=Vs;Vi.exports(Br,Vc);function DE(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(r===null)return this.emit("error",new TE);n.writechunk=null,n.writecb=null,e!=null&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Br(t){if(!(this instanceof Br))return new Br(t);Vc.call(this,t),this._transformState={afterTransform:DE.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",RE)}function RE(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,n){lp(t,e,n)}):lp(this,null,null)}Br.prototype.push=function(t,e){return this._transformState.needTransform=!1,Vc.prototype.push.call(this,t,e)};Br.prototype._transform=function(t,e,n){n(new vE("_transform()"))};Br.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Br.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Br.prototype._destroy=function(t,e){Vc.prototype._destroy.call(this,t,function(n){e(n)})};function lp(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new IE;if(t._transformState.transforming)throw new EE;return t.push(null)}var xE=qo,Fm=Um;Vi.exports(qo,Fm);function qo(t){if(!(this instanceof qo))return new qo(t);Fm.call(this,t)}qo.prototype._transform=function(t,e,n){n(null,t)};var mu;function OE(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Bm=es.codes,NE=Bm.ERR_MISSING_ARGS,AE=Bm.ERR_STREAM_DESTROYED;function up(t){if(t)throw t}function SE(t){return t.setHeader&&typeof t.abort=="function"}function jE(t,e,n,r){r=OE(r);var i=!1;t.on("close",function(){i=!0}),mu===void 0&&(mu=af),mu(t,{readable:e,writable:n},function(o){if(o)return r(o);i=!0,r()});var s=!1;return function(o){if(!i&&!s){if(s=!0,SE(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();r(o||new AE("pipe"))}}}function dp(t){t()}function ME(t,e){return t.pipe(e)}function CE(t){return!t.length||typeof t[t.length-1]!="function"?up:t.pop()}function LE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=CE(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new NE("streams");var i,s=e.map(function(o,a){var c=a<e.length-1,l=a>0;return jE(o,c,l,function(d){i||(i=d),d&&s.forEach(dp),!c&&(s.forEach(dp),r(i))})});return e.reduce(ME)}var $E=LE;(function(t,e){e=t.exports=Sm,e.Stream=e,e.Readable=e,e.Writable=Im,e.Duplex=Vs,e.Transform=Um,e.PassThrough=xE,e.finished=af,e.pipeline=$E})(Fs,Fs.exports);class kE{constructor(e,n){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!n&&e&&!e[0]&&(n=e,e=null),n=n||{},this._factory=n.factory||tf,e&&this.addQuads(e)}get size(){let e=this._size;if(e!==null)return e;e=0;const n=this._graphs;let r,i;for(const s in n)for(const o in r=n[s].subjects)for(const a in i=r[o])e+=Object.keys(i[a]).length;return this._size=e}_addToIndex(e,n,r,i){const s=e[n]||(e[n]={}),o=s[r]||(s[r]={}),a=i in o;return a||(o[i]=null),!a}_removeFromIndex(e,n,r,i){const s=e[n],o=s[r];delete o[i];for(const a in o)return;delete s[r];for(const a in s)return;delete e[n]}*_findInIndex(e,n,r,i,s,o,a,c){let l,d,f;const p=this._entities,h=Cr(c,this._factory),m={subject:null,predicate:null,object:null};n&&((l=e,e={})[n]=l[n]);for(const y in e)if(d=e[y]){m[s]=Cr(p[y],this._factory),r&&((l=d,d={})[r]=l[r]);for(const _ in d)if(f=d[_]){m[o]=Cr(p[_],this._factory);const v=i?i in f?[i]:[]:Object.keys(f);for(let T=0;T<v.length;T++)m[a]=Cr(p[v[T]],this._factory),yield this._factory.quad(m.subject,m.predicate,m.object,h)}}}_loop(e,n){for(const r in e)n(r)}_loopByKey0(e,n,r){let i,s;if(i=e[n])for(s in i)r(s)}_loopByKey1(e,n,r){let i,s;for(i in e)s=e[i],s[n]&&r(i)}_loopBy2Keys(e,n,r,i){let s,o,a;if((s=e[n])&&(o=s[r]))for(a in o)i(a)}_countInIndex(e,n,r,i){let s=0,o,a,c;n&&((o=e,e={})[n]=o[n]);for(const l in e)if(a=e[l]){r&&((o=a,a={})[r]=o[r]);for(const d in a)(c=a[d])&&(i?i in c&&s++:s+=Object.keys(c).length)}return s}_getGraphs(e){if(!_n(e))return this._graphs;const n={};return n[e]=this._graphs[e],n}_uniqueEntities(e){const n=Object.create(null);return r=>{r in n||(n[r]=!0,e(Cr(this._entities[r],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,n,r,i){n||(i=e.graph,r=e.object,n=e.predicate,e=e.subject),e=je(e),n=je(n),r=je(r),i=je(i);let s=this._graphs[i];s||(s=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(s));const o=this._ids,a=this._entities;e=o[e]||(o[a[++this._id]=e]=this._id),n=o[n]||(o[a[++this._id]=n]=this._id),r=o[r]||(o[a[++this._id]=r]=this._id);const c=this._addToIndex(s.subjects,e,n,r);return this._addToIndex(s.predicates,n,r,e),this._addToIndex(s.objects,r,e,n),this._size=null,c}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}delete(e){return this.removeQuad(e),this}has(e,n,r,i){return e&&e.subject&&({subject:e,predicate:n,object:r,graph:i}=e),!this.readQuads(e,n,r,i).next().done}import(e){return e.on("data",n=>{this.addQuad(n)}),e}removeQuad(e,n,r,i){n||(i=e.graph,r=e.object,n=e.predicate,e=e.subject),e=je(e),n=je(n),r=je(r),i=je(i);const s=this._ids,o=this._graphs;let a,c,l;if(!(e=s[e])||!(n=s[n])||!(r=s[r])||!(a=o[i])||!(c=a.subjects[e])||!(l=c[n])||!(r in l))return!1;this._removeFromIndex(a.subjects,e,n,r),this._removeFromIndex(a.predicates,n,r,e),this._removeFromIndex(a.objects,r,e,n),this._size!==null&&this._size--;for(e in a.subjects)return!0;return delete o[i],!0}removeQuads(e){for(let n=0;n<e.length;n++)this.removeQuad(e[n])}remove(e){return e.on("data",n=>{this.removeQuad(n)}),e}removeMatches(e,n,r,i){const s=new Fs.exports.Readable({objectMode:!0});return s._read=()=>{for(const o of this.readQuads(e,n,r,i))s.push(o);s.push(null)},this.remove(s)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,n,r,i){return[...this.readQuads(e,n,r,i)]}*readQuads(e,n,r,i){e=e&&je(e),n=n&&je(n),r=r&&je(r),i=i&&je(i);const s=this._getGraphs(i),o=this._ids;let a,c,l,d;if(!(_n(e)&&!(c=o[e])||_n(n)&&!(l=o[n])||_n(r)&&!(d=o[r])))for(const f in s)(a=s[f])&&(c?d?yield*this._findInIndex(a.objects,d,c,l,"object","subject","predicate",f):yield*this._findInIndex(a.subjects,c,l,null,"subject","predicate","object",f):l?yield*this._findInIndex(a.predicates,l,d,null,"predicate","object","subject",f):d?yield*this._findInIndex(a.objects,d,null,null,"object","subject","predicate",f):yield*this._findInIndex(a.subjects,null,null,null,"subject","predicate","object",f))}match(e,n,r,i){return new df(this,e,n,r,i)}countQuads(e,n,r,i){e=e&&je(e),n=n&&je(n),r=r&&je(r),i=i&&je(i);const s=this._getGraphs(i),o=this._ids;let a=0,c,l,d,f;if(_n(e)&&!(l=o[e])||_n(n)&&!(d=o[n])||_n(r)&&!(f=o[r]))return 0;for(const p in s)(c=s[p])&&(e?r?a+=this._countInIndex(c.objects,f,l,d):a+=this._countInIndex(c.subjects,l,d,f):n?a+=this._countInIndex(c.predicates,d,f,l):a+=this._countInIndex(c.objects,f,l,d));return a}forEach(e,n,r,i,s){this.some(o=>(e(o),!1),n,r,i,s)}every(e,n,r,i,s){let o=!1;const a=!this.some(c=>(o=!0,!e(c)),n,r,i,s);return o&&a}some(e,n,r,i,s){for(const o of this.readQuads(n,r,i,s))if(e(o))return!0;return!1}getSubjects(e,n,r){const i=[];return this.forSubjects(s=>{i.push(s)},e,n,r),i}forSubjects(e,n,r,i){n=n&&je(n),r=r&&je(r),i=i&&je(i);const s=this._ids,o=this._getGraphs(i);let a,c,l;if(e=this._uniqueEntities(e),!(_n(n)&&!(c=s[n])||_n(r)&&!(l=s[r])))for(i in o)(a=o[i])&&(c?l?this._loopBy2Keys(a.predicates,c,l,e):this._loopByKey1(a.subjects,c,e):l?this._loopByKey0(a.objects,l,e):this._loop(a.subjects,e))}getPredicates(e,n,r){const i=[];return this.forPredicates(s=>{i.push(s)},e,n,r),i}forPredicates(e,n,r,i){n=n&&je(n),r=r&&je(r),i=i&&je(i);const s=this._ids,o=this._getGraphs(i);let a,c,l;if(e=this._uniqueEntities(e),!(_n(n)&&!(c=s[n])||_n(r)&&!(l=s[r])))for(i in o)(a=o[i])&&(c?l?this._loopBy2Keys(a.objects,l,c,e):this._loopByKey0(a.subjects,c,e):l?this._loopByKey1(a.predicates,l,e):this._loop(a.predicates,e))}getObjects(e,n,r){const i=[];return this.forObjects(s=>{i.push(s)},e,n,r),i}forObjects(e,n,r,i){n=n&&je(n),r=r&&je(r),i=i&&je(i);const s=this._ids,o=this._getGraphs(i);let a,c,l;if(e=this._uniqueEntities(e),!(_n(n)&&!(c=s[n])||_n(r)&&!(l=s[r])))for(i in o)(a=o[i])&&(c?l?this._loopBy2Keys(a.subjects,c,l,e):this._loopByKey1(a.objects,c,e):l?this._loopByKey0(a.predicates,l,e):this._loop(a.objects,e))}getGraphs(e,n,r){const i=[];return this.forGraphs(s=>{i.push(s)},e,n,r),i}forGraphs(e,n,r,i){for(const s in this._graphs)this.some(o=>(e(o.graph),!0),n,r,i,s)}createBlankNode(e){let n,r;if(e)for(n=e=`_:${e}`,r=1;this._ids[n];)n=e+r++;else do n=`_:b${this._blankNodeIndex++}`;while(this._ids[n]);return this._ids[n]=++this._id,this._entities[this._id]=n,this._factory.blankNode(n.substr(2))}extractLists({remove:e=!1,ignoreErrors:n=!1}={}){const r={},i=n?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},s=this.getQuads(null,en.rdf.rest,en.rdf.nil,null),o=e?[...s]:[];return s.forEach(a=>{const c=[];let l=!1,d,f;const p=a.graph;let h=a.subject;for(;h&&!l;){const m=this.getQuads(null,null,h,null),y=this.getQuads(h,null,null,null);let _,v=null,T=null,I=null;for(let R=0;R<y.length&&!l;R++)_=y[R],_.graph.equals(p)?d?l=i(h,"has non-list arcs out"):_.predicate.value===en.rdf.first?v?l=i(h,"has multiple rdf:first arcs"):o.push(v=_):_.predicate.value===en.rdf.rest?T?l=i(h,"has multiple rdf:rest arcs"):o.push(T=_):m.length?l=i(h,"can't be subject and object"):(d=_,f="subject"):l=i(h,"not confined to single graph");for(let R=0;R<m.length&&!l;++R)_=m[R],d?l=i(h,"can't have coreferences"):_.predicate.value===en.rdf.rest?I?l=i(h,"has incoming rdf:rest arcs"):I=_:(d=_,f="object");v?c.unshift(v.object):l=i(h,"has no list head"),h=I&&I.subject}l?e=!1:d&&(r[d[f].value]=c)}),e&&this.removeQuads(o),r}*[Symbol.iterator](){yield*this.readQuads()}}function _n(t){return typeof t=="string"||t instanceof String}class df extends Fs.exports.Readable{constructor(e,n,r,i,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:n,predicate:r,object:i,graph:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:n,object:r,predicate:i,subject:s}=this,o=this._filtered=new kE({factory:e._factory});for(const a of e.readQuads(s,i,r,n))o.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,n,r,i){return new df(this.filtered,e,n,r,i)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class tx extends Fs.exports.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;const n=new nf(e);let r,i;n.parse({on:(s,o)=>{switch(s){case"data":r=o;break;case"end":i=o;break}}},(s,o)=>{s&&this.emit("error",s)||o&&this.push(o)},(s,o)=>{this.emit("prefix",s,o)}),this._transform=(s,o,a)=>{r(s),a()},this._flush=s=>{i(),s()}}import(e){return e.on("data",n=>{this.write(n)}),e.on("end",()=>{this.end()}),e.on("error",n=>{this.emit("error",n)}),this}}class nx extends Fs.exports.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const n=this._writer=new wm({write:(r,i,s)=>{this.push(r),s&&s()},end:r=>{this.push(null),r&&r()}},e);this._transform=(r,i,s)=>{n.addQuad(r,s)},this._flush=r=>{n.end(r)}}import(e){return e.on("data",n=>{this.write(n)}),e.on("end",()=>{this.end()}),e.on("error",n=>{this.emit("error",n)}),e.on("prefix",(n,r)=>{this._writer.addPrefix(n,r)}),this}}function Wc(t){const e=t;return typeof e=="object"&&typeof e.internal_resourceInfo=="object"}function la(t){const e=t;return typeof e=="object"&&typeof e.internal_resourceInfo=="object"&&typeof e.internal_resourceInfo.linkedResources=="object"}function Ws(t){const e=t;return typeof e.internal_changeLog=="object"&&Array.isArray(e.internal_changeLog.additions)&&Array.isArray(e.internal_changeLog.deletions)}class ua extends Error{}function ae(t){return typeof t=="string"?t:t.value}const qm=async(t,e)=>{if(typeof window=="object"&&typeof require!="function")return await window.fetch(t,e);if(typeof require!="function"){const i=(await vw(()=>import("./userStore-17b06846.js").then(function(s){return s.c}),["immutable/chunks/userStore-17b06846.js","immutable/chunks/index-b2bed869.js","immutable/chunks/index-6d6fbed6.js"])).default;return i(t,e)}let n;return n=require("cross-fetch"),await n(t,e)};function ff(t){var e,n,r,i,s;const o=(n=(e=t.headers.get("Content-Type"))===null||e===void 0?void 0:e.split(";"))!==null&&n!==void 0?n:[],a=o.length>0&&["text/turtle","application/ld+json"].includes(o[0]),c={sourceIri:t.url,isRawData:!a,contentLocation:(r=t.headers.get("Content-Location"))!==null&&r!==void 0?r:void 0,contentType:(i=t.headers.get("Content-Type"))!==null&&i!==void 0?i:void 0,linkedResources:{},location:(s=t.headers.get("Location"))!==null&&s!==void 0?s:void 0},l=t.headers.get("Link");if(l){const f=Rb.parse(l),p=f.get("rel","acl");p.length===1&&(c.aclUrl=new URL(p[0].uri,c.sourceIri).href),c.linkedResources=f.refs.reduce((h,m)=>{var y,_;return(y=h[_=m.rel])!==null&&y!==void 0||(h[_]=[]),h[m.rel].push(new URL(m.uri,c.sourceIri).href),h},c.linkedResources)}const d=t.headers.get("WAC-Allow");return d&&(c.permissions=PE(d)),c}function PE(t){function e(r){const i=r.split(" ");return i.includes("write")?{read:i.includes("read"),append:!0,write:!0,control:i.includes("control")}:{read:i.includes("read"),append:i.includes("append"),write:!1,control:i.includes("control")}}function n(r,i){const s=r.split(",").map(a=>a.split("=")).filter(a=>a.length===2&&a[0].trim()===i);if(s.length!==1)return"";const o=s[0][1].trim();return o.charAt(0)!=='"'||o.charAt(o.length-1)!=='"'?"":o.substring(1,o.length-1)}return{user:e(n(t,"user")),public:e(n(t,"public"))}}function da(t){let e;return typeof t.slice=="function"?e=Object.assign(t.slice(),Object.assign({},t)):e=Object.assign({},t),e}function fa(t){return!t.ok}function UE(t){return t.status===401||t.status===403}const un={type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"},FE={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Container:"http://www.w3.org/ns/ldp#Container",Resource:"http://www.w3.org/ns/ldp#Resource",contains:"http://www.w3.org/ns/ldp#contains"},j={AccessControlResource:"http://www.w3.org/ns/solid/acp#AccessControlResource",Policy:"http://www.w3.org/ns/solid/acp#Policy",AccessControl:"http://www.w3.org/ns/solid/acp#AccessControl",Read:"http://www.w3.org/ns/solid/acp#Read",Append:"http://www.w3.org/ns/solid/acp#Append",Write:"http://www.w3.org/ns/solid/acp#Write",Rule:"http://www.w3.org/ns/solid/acp#Rule",Matcher:"http://www.w3.org/ns/solid/acp#Matcher",accessControl:"http://www.w3.org/ns/solid/acp#accessControl",memberAccessControl:"http://www.w3.org/ns/solid/acp#memberAccessControl",apply:"http://www.w3.org/ns/solid/acp#apply",applyMembers:"http://www.w3.org/ns/solid/acp#applyMembers",allow:"http://www.w3.org/ns/solid/acp#allow",deny:"http://www.w3.org/ns/solid/acp#deny",allOf:"http://www.w3.org/ns/solid/acp#allOf",anyOf:"http://www.w3.org/ns/solid/acp#anyOf",noneOf:"http://www.w3.org/ns/solid/acp#noneOf",access:"http://www.w3.org/ns/solid/acp#access",accessMembers:"http://www.w3.org/ns/solid/acp#accessMembers",agent:"http://www.w3.org/ns/solid/acp#agent",group:"http://www.w3.org/ns/solid/acp#group",client:"http://www.w3.org/ns/solid/acp#client",PublicAgent:"http://www.w3.org/ns/solid/acp#PublicAgent",AuthenticatedAgent:"http://www.w3.org/ns/solid/acp#AuthenticatedAgent",CreatorAgent:"http://www.w3.org/ns/solid/acp#CreatorAgent"},bi={PublicOidcClient:"http://www.w3.org/ns/solid/terms#PublicOidcClient"},Qe={fetch:qm};async function ha(t,e=Object.assign(Object.assign({},Qe),{ignoreAuthenticationErrors:!1})){var n;const i=await Object.assign(Object.assign({},Qe),e).fetch(t,{method:"HEAD"});return Ym(i,{ignoreAuthenticationErrors:(n=e.ignoreAuthenticationErrors)!==null&&n!==void 0?n:!1})}function Ym(t,e={ignoreAuthenticationErrors:!1}){if(fa(t)&&(!UE(t)||!e.ignoreAuthenticationErrors))throw new pa(`Fetching the metadata of the Resource at [${t.url}] failed: [${t.status}] [${t.statusText}].`,t);return{internal_resourceInfo:ff(t)}}function BE(t){var e;return(e=t.internal_resourceInfo.contentType)!==null&&e!==void 0?e:null}function ie(t){return Wc(t)?t.internal_resourceInfo.sourceIri:null}const Bi=ie;function qE(t){return t.internal_resourceInfo.linkedResources}class pa extends ua{constructor(e,n){super(e),this.response=n}get statusCode(){return this.response.status}get statusText(){return this.response.statusText}}const fp={fetch:qm};async function zm(t,e=fp){const n=Object.assign(Object.assign({},fp),e),r=ae(t),i=await n.fetch(r,n.init);if(fa(i))throw new pa(`Fetching the File failed: [${i.status}] [${i.statusText}].`,i);const s=ff(i),o=await i.blob();return Object.assign(o,{internal_resourceInfo:s})}kg.dataset;const vc="https://inrupt.com/.well-known/sdk-local-node/",P=Object.freeze;function Jn(t){return t.substring(0,vc.length)===vc}function Yn(t){return t.substring(vc.length)}function YE(t){return`${vc}${t}`}function Qc(t){return typeof t=="string"&&t.substring(0,2)==="_:"}function hf(t){return t.substring(2)}function Gm(t){return`_:${t.value}`}const Ze={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",date:"http://www.w3.org/2001/XMLSchema#date",time:"http://www.w3.org/2001/XMLSchema#time",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function zE(t){return t?"true":"false"}function Hm(t){return t==="true"||t==="1"?!0:t==="false"||t==="0"?!1:null}function GE(t){let e,n;if(t.millisecond&&(t.millisecond<10?e="00"+t.millisecond:t.millisecond<100?e="0"+t.millisecond:e=t.millisecond),typeof t.timezoneHourOffset=="number"){const r=Math.abs(t.timezoneHourOffset)<10?"0"+Math.abs(t.timezoneHourOffset):Math.abs(t.timezoneHourOffset);n=t.timezoneHourOffset>=0?"+"+r:"-"+r,t.timezoneMinuteOffset?n=n+":"+(t.timezoneMinuteOffset<10?"0"+t.timezoneMinuteOffset:t.timezoneMinuteOffset):n=n+":00"}return(t.hour<10?"0"+t.hour:t.hour)+":"+(t.minute<10?"0"+t.minute:t.minute)+":"+(t.second<10?"0"+t.second:t.second)+(t.millisecond?"."+e:"")+(n||"")}function HE(t){if(!/\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(t))return null;const[n,r]=gf(t),[i,s,o]=n.split(":");let a=Number.parseInt(i,10),c=Number.parseInt(s,10);const[l,d]=o.split("."),f=Number.parseInt(l,10),p=d?Number.parseInt(d,10):void 0;c>=60&&(a=a+1,c=c-60);const h={hour:a,minute:c,second:f};if(typeof p=="number"&&(h.millisecond=p),typeof r=="string"){const[m,y]=Zm(r);if(typeof m!="number"||m>24||typeof y!="number"||y>59)return null;h.timezoneHourOffset=m,h.timezoneMinuteOffset=y}return h}function ZE(t){return t.toISOString()}function pf(t){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(t))return null;const[n,r]=t.split("T"),[i,s]=n.charAt(0)==="-"?[-1,n.substring(1)]:[1,n],[o,a,c]=s.split("-"),l=Number.parseInt(o,10)*i,d=Number.parseInt(a,10)-1,f=Number.parseInt(c,10),[p,h]=gf(r),[m,y]=typeof h=="string"?Zm(h):[0,0],[_,v,T]=p.split(":"),I=Number.parseInt(_,10)+m,R=Number.parseInt(v,10)+y,[O,N]=T.split("."),x=Number.parseInt(O,10),C=N?Number.parseInt(N,10):0,$=new Date(Date.UTC(l,d,f,I,R,x,C));return l>=0&&l<100&&$.setUTCFullYear($.getUTCFullYear()-1900),$}function VE(t){const e=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),[i,s]=gf(t.toISOString());return`${e}-${String(n).padStart(2,"0")}-${String(r).padStart(2,"0")}${s}`}function WE(t){if(!/-?\d{4,}-\d\d-\d\d(Z|(\+|-)\d\d:\d\d)?/.test(t))return null;const n=t,[r,i]=n.charAt(0)==="-"?[-1,n.substring(1)]:[1,n],[s,o,a]=i.split("-"),c=a.length>2?a.substring(0,2):a,l=Number.parseInt(s,10)*r,d=Number.parseInt(o,10)-1,f=Number.parseInt(c,10),p=12,h=new Date(Date.UTC(l,d,f,p));return l>=0&&l<100&&h.setUTCFullYear(h.getUTCFullYear()-1900),h}function gf(t){if(t.endsWith("Z"))return[t.substring(0,t.length-1),"Z"];const e=t.split("+"),n=t.split("-");return e.length===1&&n.length===1?[e[0],void 0]:e.length>n.length?[e[0],"+"+e[1]]:[n[0],"-"+n[1]]}function Zm(t){if(t==="Z")return[0,0];const e=t.charAt(0)==="+"?1:-1,[n,r]=t.substring(1).split(":"),i=Number.parseInt(n,10),s=Number.parseInt(r,10);return[i*e,s*e]}function QE(t){return t.toString()}function Vm(t){const e=Number.parseFloat(t);return Number.isNaN(e)?null:e}function XE(t){return t.toString()}function Wm(t){const e=Number.parseInt(t,10);return Number.isNaN(e)?null:e}function cd(t){return t.toLowerCase()}function St(t){return Qm(t)&&t.termType==="NamedNode"}function KE(t){return Qm(t)&&t.termType==="Literal"}function Qm(t){return t!==null&&typeof t=="object"&&typeof t.termType=="string"&&typeof t.value=="string"&&typeof t.equals=="function"}function hp(t){return St(t)&&Jn(t.value)}function rt(t){const e=ae(t);if(typeof URL!="function")return!0;try{new URL(e)}catch{return!1}return!0}function pp(t,e){return ln.namedNode(ga(Yn(t.value),e))}function ga(t,e){if(typeof URL!="function")throw new Error("The URL interface is not available, so an IRI cannot be determined.");const n=new URL(e);return n.hash=t,n.href}const ln=Fc;function gp(t,e,n={}){var r;if(!["NamedNode","DefaultGraph"].includes(e.graph.termType))throw new Error(`Cannot parse Quads with nodes of type [${e.graph.termType}] as their Graph node.`);const s=e.graph.termType==="DefaultGraph"?"default":e.graph.value,o=(r=t.graphs[s])!==null&&r!==void 0?r:{};return P(Object.assign(Object.assign({},t),{graphs:P(Object.assign(Object.assign({},t.graphs),{[s]:JE(o,e,n)}))}))}function JE(t,e,n){var r;if(!["NamedNode","BlankNode"].includes(e.subject.termType))throw new Error(`Cannot parse Quads with nodes of type [${e.subject.termType}] as their Subject node.`);const s=e.subject.termType==="BlankNode"?`_:${e.subject.value}`:e.subject.value,o=(r=t[s])!==null&&r!==void 0?r:{type:"Subject",url:s,predicates:{}};return P(Object.assign(Object.assign({},t),{[s]:eI(o,e,n)}))}function eI(t,e,n){return P(Object.assign(Object.assign({},t),{predicates:tI(t.predicates,e,n)}))}function tI(t,e,n){var r;if(!["NamedNode"].includes(e.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${e.predicate.termType}] as their Predicate node.`);const s=e.predicate.value,o=(r=t[s])!==null&&r!==void 0?r:{};return P(Object.assign(Object.assign({},t),{[s]:Xm(o,e,n)}))}function Xm(t,e,n){var r,i,s,o,a,c,l,d;if(e.object.termType==="NamedNode"){const f=P([...(r=t.namedNodes)!==null&&r!==void 0?r:[],e.object.value]);return P(Object.assign(Object.assign({},t),{namedNodes:f}))}if(e.object.termType==="Literal"){if(e.object.datatype.value===Ze.langString){const h=e.object.language.toLowerCase(),m=P([...(s=(i=t.langStrings)===null||i===void 0?void 0:i[h])!==null&&s!==void 0?s:[],e.object.value]),y=P(Object.assign(Object.assign({},(o=t.langStrings)!==null&&o!==void 0?o:{}),{[h]:m}));return P(Object.assign(Object.assign({},t),{langStrings:y}))}const f=P([...(c=(a=t.literals)===null||a===void 0?void 0:a[e.object.datatype.value])!==null&&c!==void 0?c:[],e.object.value]),p=P(Object.assign(Object.assign({},(l=t.literals)!==null&&l!==void 0?l:{}),{[e.object.datatype.value]:f}));return P(Object.assign(Object.assign({},t),{literals:p}))}if(e.object.termType==="BlankNode"){const f=Km(e.object,n),p=P([...(d=t.blankNodes)!==null&&d!==void 0?d:[],f]);return P(Object.assign(Object.assign({},t),{blankNodes:p}))}throw new Error(`Objects of type [${e.object.termType}] are not supported.`)}function Km(t,e){var n,r;if(((n=e.chainBlankNodes)!==null&&n!==void 0?n:[]).find(l=>l.equals(t))===void 0)return Gm(t);const o=((r=e.otherQuads)!==null&&r!==void 0?r:[]).filter(l=>l.subject.equals(t)),a=o.filter(l=>!zo(l.object)).reduce((l,d)=>{var f;if(!["NamedNode"].includes(d.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${d.predicate.termType}] as their Predicate node.`);const h=(f=l[d.predicate.value])!==null&&f!==void 0?f:{};return P(Object.assign(Object.assign({},l),{[d.predicate.value]:Xm(h,d,e)}))},{});return o.filter(l=>zo(l.object)).reduce((l,d)=>{var f,p;if(!["NamedNode"].includes(d.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${d.predicate.termType}] as their Predicate node.`);const m=(f=l[d.predicate.value])!==null&&f!==void 0?f:{},y=(p=m.blankNodes)!==null&&p!==void 0?p:[];return P(Object.assign(Object.assign({},l),{[d.predicate.value]:Object.assign(Object.assign({},m),{blankNodes:[...y,Km(d.object,e)]})}))},a)}function nI(t){const e=t.map(o=>o.subject).filter(zo),n=t.map(o=>o.object).filter(zo);function r(o){return o.every(a=>o.every(c=>a.equals(c)))}const i=[];return n.forEach(o=>{i.push(...Jm(o,t))}),e.concat(n).filter(o=>{if(i.some(c=>c.equals(o)))return!1;const a=t.filter(c=>c.object.equals(o)).map(c=>c.subject);return a.length>0&&r(a)})}function rI(t,e={}){var n;const r=[],i=(n=e.dataFactory)!==null&&n!==void 0?n:Fc;return Object.keys(t.graphs).forEach(s=>{const o=t.graphs[s],a=s==="default"?i.defaultGraph():i.namedNode(s);Object.keys(o).forEach(c=>{const l=o[c].predicates,d=Qc(c)?i.blankNode(hf(c)):i.namedNode(c);r.push(...Yo(l,d,a,e))})}),r}function Yo(t,e,n,r={}){var i;const s=[],o=(i=r.dataFactory)!==null&&i!==void 0?i:Fc;return Object.keys(t).forEach(a=>{var c,l,d,f;const p=o.namedNode(a),h=(c=t[a].langStrings)!==null&&c!==void 0?c:{},m=(l=t[a].namedNodes)!==null&&l!==void 0?l:[],y=(d=t[a].literals)!==null&&d!==void 0?d:{},_=(f=t[a].blankNodes)!==null&&f!==void 0?f:[];Object.keys(y).forEach(I=>{const R=o.namedNode(I);y[I].forEach(N=>{const x=o.literal(N,R);s.push(o.quad(e,p,x,n))})}),Object.keys(h).forEach(I=>{h[I].forEach(O=>{const N=o.literal(O,I);s.push(o.quad(e,p,N,n))})}),m.forEach(I=>{const R=o.namedNode(I);s.push(o.quad(e,p,R,n))}),_.forEach(I=>{if(Qc(I)){const R=o.blankNode(hf(I));s.push(o.quad(e,p,R,n))}else{const R=o.blankNode(),O=o.quad(e,p,R,n),N=Yo(I,R,n);s.push(O),s.push(...N)}})}),s}function Jm(t,e,n=[]){if(n.find(a=>a.equals(t))!==void 0)return n;const r=e.filter(a=>a.subject.equals(t)&&zo(a.object)).map(a=>a.object);if(r.length===0)return[];const i=[...n,t],s=r.map(a=>Jm(a,e,i)),o=[];for(const a of s)o.push(...a);return o}function zo(t){return t.termType==="BlankNode"}const iI=()=>{const t=[],e=[],n=[];return{onQuad:r=>{t.push(r)},onError:r=>{n.push(r)},onComplete:r=>{e.push(r)},parse:async(r,i)=>{(await sI(ie(i))).parse(r,(o,a,c)=>{o?n.forEach(l=>l(o)):a?t.forEach(l=>l(a)):e.forEach(l=>l())})}}};async function sI(t){return new nf({format:"text/turtle",baseIRI:t})}async function ld(t){const e="text/turtle",n=new wm({format:e}),r=t.map(o=>ln.quad(o.subject,o.predicate,o.object,void 0));return n.addQuads(r),await new Promise((o,a)=>{n.end((c,l)=>{if(c)return a(c);o(l)})})}function ud(t){var e,n,r,i,s,o,a,c;if(St(t))return`<${t.value}> (URL)`;if(KE(t)){if(!St(t.datatype))return`[${t.value}] (RDF/JS Literal of unknown type)`;let l;switch(t.datatype.value){case Ze.boolean:return l=(n=(e=Hm(t.value))===null||e===void 0?void 0:e.valueOf())!==null&&n!==void 0?n:`Invalid data: \`${t.value}\``,l+" (boolean)";case Ze.dateTime:return l=(i=(r=pf(t.value))===null||r===void 0?void 0:r.toUTCString())!==null&&i!==void 0?i:`Invalid data: \`${t.value}\``,l+" (datetime)";case Ze.decimal:return l=(o=(s=Vm(t.value))===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:`Invalid data: \`${t.value}\``,l+" (decimal)";case Ze.integer:return l=(c=(a=Wm(t.value))===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:`Invalid data: \`${t.value}\``,l+" (integer)";case Ze.langString:return`"${t.value}" (${t.language} string)`;case Ze.string:return`"${t.value}" (string)`;default:return`[${t.value}] (RDF/JS Literal of type: \`${t.datatype.value}\`)`}}return t.termType==="BlankNode"?`[${t.value}] (RDF/JS BlankNode)`:t.termType==="Quad"?"??? (nested RDF* Quad)":t.termType==="Variable"?`?${t.value} (RDF/JS Variable)`:t}function le(t){if(!ma(t))throw new yI(t)}function oI(t,e){const n=Ws(t)?t.internal_changeLog:{additions:[],deletions:[]},[r,i]=e.filter(s=>!ty(s)).reduce(([s,o],a)=>typeof o.find(l=>l.equals(a))!="undefined"?[s,o.filter(l=>!l.equals(a))]:[s.concat(a),o],[n.additions,n.deletions]);return P(Object.assign(Object.assign({},t),{internal_changeLog:{additions:r,deletions:i}}))}function ey(t,e){const n=Ws(t)?t.internal_changeLog:{additions:[],deletions:[]},[r,i]=e.filter(s=>!ty(s)).reduce(([s,o],a)=>typeof s.find(l=>l.equals(a))!="undefined"?[s.filter(l=>!l.equals(a)),o]:[s,o.concat(a)],[n.additions,n.deletions]);return P(Object.assign(Object.assign({},t),{internal_changeLog:{additions:r,deletions:i}}))}function aI(t){return Ws(t)?t:P(Object.assign(Object.assign({},t),{internal_changeLog:{additions:[],deletions:[]}}))}function ty(t){return t.subject.termType==="BlankNode"||t.object.termType==="BlankNode"}function cI(t,e){var n,r,i;if(le(t),!rt(e))throw new Wt(e);const s=ae(e),o=(i=(r=(n=t.predicates[s])===null||n===void 0?void 0:n.namedNodes)===null||r===void 0?void 0:r[0])!==null&&i!==void 0?i:null;return o===null?null:Jn(o)?`#${Yn(o)}`:o}function lI(t,e){var n,r,i;if(le(t),!rt(e))throw new Wt(e);const s=ae(e);return(i=(r=(n=t.predicates[s])===null||n===void 0?void 0:n.namedNodes)===null||r===void 0?void 0:r.map(o=>Jn(o)?`#${Yn(o)}`:o))!==null&&i!==void 0?i:[]}const ce=lI;function uI(t,e){le(t);const n=ry(t,e,Ze.dateTime);return n===null?null:pf(n)}function ny(t,e){return le(t),ry(t,e,Ze.string)}function dI(t,e){return le(t),gI(t,e,Ze.string)}function fI(t,e){return ce(t,e).map(r=>ln.namedNode(r))}function hI(t,e){var n,r,i,s;if(le(t),!rt(e))throw new Wt(e);const o=ae(e);let a=[];const c=(r=(n=t.predicates[o])===null||n===void 0?void 0:n.langStrings)!==null&&r!==void 0?r:{},l=Object.keys(c);for(const p of l){const m=c[p].map(y=>ln.literal(y,p));a=a.concat(m)}const d=(s=(i=t.predicates[o])===null||i===void 0?void 0:i.literals)!==null&&s!==void 0?s:{},f=Object.keys(d);for(const p of f){const h=d[p],m=ln.namedNode(p),y=h.map(_=>ln.literal(_,m));a=a.concat(y)}return a}function pI(t,e){var n,r;le(t);const i=fI(t,e),s=hI(t,e),o=ae(e),c=((r=(n=t.predicates[o])===null||n===void 0?void 0:n.blankNodes)!==null&&r!==void 0?r:[]).map(d=>{const f=Qc(d)?hf(d):void 0;return ln.blankNode(f)});return i.concat(s).concat(c)}function ry(t,e,n){var r,i,s,o;if(!rt(e))throw new Wt(e);const a=ae(e);return(o=(s=(i=(r=t.predicates[a])===null||r===void 0?void 0:r.literals)===null||i===void 0?void 0:i[n])===null||s===void 0?void 0:s[0])!==null&&o!==void 0?o:null}function gI(t,e,n){var r,i,s;if(!rt(e))throw new Wt(e);const o=ae(e);return[...(s=(i=(r=t.predicates[o])===null||r===void 0?void 0:r.literals)===null||i===void 0?void 0:i[n])!==null&&s!==void 0?s:[]]}function ke(t,e,n={}){var r;if(!rt(e))throw new iy(e);const i=typeof n.scope!="undefined"?ae(n.scope):"default",s=(r=t.graphs[i])!==null&&r!==void 0?r:{},o=ae(e),a=Jn(o)&&la(t)?ga(Yn(o),ie(t)):o,c=s[a];return typeof c=="undefined"?null:c}function _i(t,e={acceptBlankNodes:!1}){var n;const r=typeof e.scope!="undefined"?ae(e.scope):"default",i=(n=t.graphs[r])!==null&&n!==void 0?n:{};return Object.values(i).filter(s=>!Qc(s.url)||e.acceptBlankNodes)}function Vt(t,e){var n;const r=Qs(e)&&la(t)?ga(Yn(e.url),ie(t)):e.url,i=t.graphs.default,s=P(Object.assign(Object.assign({},i),{[r]:P(Object.assign(Object.assign({},e),{url:r}))})),o=P(Object.assign(Object.assign({},t.graphs),{default:s})),a=ln.namedNode(r),c=(n=t.graphs.default[r])===null||n===void 0?void 0:n.predicates,l=typeof c!="undefined"?Yo(c,a,ln.defaultGraph()):[],d=Yo(e.predicates,a,ln.defaultGraph());return oI(ey(P(Object.assign(Object.assign({},t),{graphs:o})),l),d)}function Gr(t,e){var n;let r;St(e)?r=e.value:typeof e=="string"?r=Jn(e)&&la(t)?ga(Yn(e),ie(t)):e:Qs(e)?r=e.url:r=ya(e);const i=t.graphs.default,s=Object.assign({},i);delete s[r];const o=P(Object.assign(Object.assign({},t.graphs),{default:P(s)})),a=ln.namedNode(r),c=(n=t.graphs.default[r])===null||n===void 0?void 0:n.predicates,l=typeof c!="undefined"?Yo(c,a,ln.defaultGraph()):[];return ey(P(Object.assign(Object.assign({},t),{graphs:o})),l)}function dn(t={}){var e;if(typeof t.url!="undefined"){const s=t.url;if(!rt(s))throw new iy(s);return P({type:"Subject",predicates:P({}),url:s})}const n=(e=t.name)!==null&&e!==void 0?e:wI(),r=YE(n);return P({type:"Subject",predicates:P({}),url:r})}function ma(t){return typeof t=="object"&&t!==null&&typeof t.type=="string"&&t.type==="Subject"}function Er(t,e){if(Qs(t)){if(typeof e=="undefined")throw new Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return ga(Yn(t.url),e)}return t.url}const ya=Er;function mI(t){let e="";Qs(t)?e+=`## Thing (no URL yet \u2014 identifier: \`#${Yn(t.url)}\`)
`:e+=`## Thing: ${t.url}
`;const n=Object.keys(t.predicates);if(n.length===0)e+=`
<empty>
`;else for(const r of n)e+=`
Property: ${r}
`,pI(t,r).forEach(s=>{e+=`- ${ud(s)}
`});return e}function Qs(t){return Jn(t.url)}class yI extends ua{constructor(e){const n=`Expected a Thing, but received: [${e}].`;super(n),this.receivedValue=e}}class Wt extends ua{constructor(e){const n=St(e)?e.value:e,r=`Expected a valid URL to identify a property, but received: [${n}].`;super(r),this.receivedProperty=n}}class mf extends ua{constructor(e){const n=St(e)?e.value:e,r=`Expected a valid URL value, but received: [${n}].`;super(r),this.receivedValue=n}}class iy extends ua{constructor(e){const n=St(e)?e.value:e,r=`Expected a valid URL to identify a Thing, but received: [${n}].`;super(r),this.receivedValue=n}}const wI=()=>Date.now().toString()+Math.random().toString().substring(2);function _s(t){const e=new URL(t);return e.hash="",e.href}function sy(){return P({type:"Dataset",graphs:{default:{}}})}async function bI(t,e={}){if(fa(t))throw new pa(`Fetching the SolidDataset at [${t.url}] failed: [${t.status}] [${t.statusText}].`,t);const n=Ym(t),r=Object.assign({"text/turtle":iI()},e.parsers),i=BE(n);if(i===null)throw new Error(`Could not determine the content type of the Resource at [${ie(n)}].`);const s=i.split(";")[0],o=r[s];if(typeof o=="undefined")throw new Error(`The Resource at [${ie(n)}] has a MIME type of [${s}], but the only parsers available are for the following MIME types: [${Object.keys(r).join(", ")}].`);const a=await t.text();return await new Promise((l,d)=>{let f=P({graphs:P({default:P({})}),type:"Dataset"});const p=[],h=[];o.onError(m=>{d(new Error(`Encountered an error parsing the Resource at [${ie(n)}] with content type [${i}]: ${m}`))}),o.onQuad(m=>{h.push(m),m.subject.termType==="BlankNode"||m.object.termType==="BlankNode"?p.push(m):f=gp(f,m)}),o.onComplete(async()=>{const y=p.length<=20?nI(p):[];f=p.filter(T=>y.every(I=>!I.equals(T.subject))).reduce((T,I)=>gp(T,I,{otherQuads:h,chainBlankNodes:y}),f);const v=P(Object.assign(Object.assign({},f),n));l(v)}),o.parse(a,n)})}async function Hr(t,e=Qe){var n;t=ae(t);const r=Object.assign(Object.assign({},Qe),e),i=Object.keys((n=e.parsers)!==null&&n!==void 0?n:{}),s=i.length>0?i.join(", "):"text/turtle",o=await r.fetch(t,{headers:{Accept:s}});if(fa(o))throw new pa(`Fetching the Resource at [${t}] failed: [${o.status}] [${o.statusText}].`,o);return await bI(o,e)}async function _I(t){const e=t.internal_changeLog.deletions.length>0?`DELETE DATA {${(await ld(t.internal_changeLog.deletions.map(dd))).trim()}};`:"",n=t.internal_changeLog.additions.length>0?`INSERT DATA {${(await ld(t.internal_changeLog.additions.map(dd))).trim()}};`:"";return{method:"PATCH",body:`${e} ${n}`,headers:{"Content-Type":"application/sparql-update"}}}async function vI(t){return{method:"PUT",body:await ld(rI(t).map(dd)),headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:`<${FE.Resource}>; rel="type"`}}}async function Tc(t,e,n=Qe){t=ae(t);const r=Object.assign(Object.assign({},Qe),n),i=aI(e),s=mp(i,t)?await _I(i):await vI(i),o=await r.fetch(t,s);if(fa(o)){const d=mp(i,t)?`The changes that were sent to the Pod are listed below.

`+II(i):`The SolidDataset that was sent to the Pod is listed below.

`+EI(i);throw new pa(`Storing the Resource at [${t}] failed: [${o.status}] [${o.statusText}].

`+d,o)}const a=Object.assign(Object.assign({},ff(o)),{isRawData:!1}),c=P(Object.assign(Object.assign({},e),{internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:a}));return xI(c)}function TI(t,e){return _s(t.internal_resourceInfo.sourceIri)===_s(e)}function mp(t,e){return Ws(t)&&Wc(t)&&typeof t.internal_resourceInfo.sourceIri=="string"&&TI(t,e)}function EI(t){let e="";Wc(t)?e+=`# SolidDataset: ${ie(t)}
`:e+=`# SolidDataset (no URL yet)
`;const n=_i(t);return n.length===0?e+=`
<empty>
`:n.forEach(r=>{e+=`
`+mI(r),Ws(t)&&(e+=`
`+RI(t,r)+`
`)}),e}function II(t){if(!Wc(t))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!Ws(t)||t.internal_changeLog.additions.length===0&&t.internal_changeLog.deletions.length===0)return`## Changes compared to ${ie(t)}

This SolidDataset has not been modified since it was fetched from ${ie(t)}.
`;let e=`## Changes compared to ${ie(t)}
`;const n=DI(t);return Object.keys(n).forEach(r=>{e+=`
### Thing: ${r}
`;const i=n[r];Object.keys(i).forEach(s=>{e+=`
Property: ${s}
`;const o=i[s].deleted,a=i[s].added;o.length>0&&(e+=`- Removed:
`,o.forEach(c=>e+=`  - ${ud(c)}
`)),a.length>0&&(e+=`- Added:
`,a.forEach(c=>e+=`  - ${ud(c)}
`))})}),e}function DI(t){const e={};return t.internal_changeLog.deletions.forEach(n=>{var r,i,s;const o=hp(n.subject)?pp(n.subject,ie(t)):n.subject;if(!St(o)||!St(n.predicate))return;const a=ae(o),c=ae(n.predicate);(r=e[a])!==null&&r!==void 0||(e[a]={}),(i=(s=e[a])[c])!==null&&i!==void 0||(s[c]={added:[],deleted:[]}),e[a][c].deleted.push(n.object)}),t.internal_changeLog.additions.forEach(n=>{var r,i,s;const o=hp(n.subject)?pp(n.subject,ie(t)):n.subject;if(!St(o)||!St(n.predicate))return;const a=ae(o),c=ae(n.predicate);(r=e[a])!==null&&r!==void 0||(e[a]={}),(i=(s=e[a])[c])!==null&&i!==void 0||(s[c]={added:[],deleted:[]}),e[a][c].added.push(n.object)}),e}function RI(t,e){const n=ln.namedNode(e.url),r=t.internal_changeLog.additions.reduce((a,c)=>c.subject.equals(n)?a+1:a,0),i=t.internal_changeLog.deletions.reduce((a,c)=>c.subject.equals(n)?a+1:a,0),s=r===1?"1 new value added":r+" new values added",o=i===1?"1 value removed":i+" values removed";return`(${s} / ${o})`}function dd(t){const e=St(t.subject)?yp(t.subject):t.subject,n=St(t.object)?yp(t.object):t.object;return ln.quad(e,t.predicate,n,t.graph)}function yp(t){return Jn(t.value)?ln.namedNode("#"+Yn(t.value)):t}function xI(t){const e=ie(t),n=t.graphs.default,i=Object.keys(n).reduce((o,a)=>{const c=OI(o[a],e),l=Jn(a)?`${e}#${Yn(a)}`:a,d=Object.assign({},o);return delete d[a],d[l]=c,P(d)},n),s=P(Object.assign(Object.assign({},t.graphs),{default:i}));return P(Object.assign(Object.assign({},t),{graphs:s}))}function OI(t,e){const r=Object.keys(t.predicates).reduce((i,s)=>{var o;const a=(o=i[s].namedNodes)!==null&&o!==void 0?o:[];if(a.every(d=>!Jn(d)))return i;const c=P(a.map(d=>Jn(d)?`${e}#${Yn(d)}`:d)),l=P(Object.assign(Object.assign({},i[s]),{namedNodes:c}));return P(Object.assign(Object.assign({},i),{[s]:l}))},t.predicates);return P(Object.assign(Object.assign({},t),{predicates:r,url:Jn(t.url)?`${e}#${Yn(t.url)}`:t.url}))}function NI(t){const e=sy();return Object.assign(Object.assign({},e),{internal_resourceInfo:{sourceIri:ae(t),isRawData:!1,contentType:"text/turtle",linkedResources:{}}})}const Xc=(t,e,n)=>{var r,i;if(le(t),!rt(e))throw new Wt(e);if(!ma(n)&&!rt(n))throw new mf(n);const s=ae(e),o=(r=t.predicates[s])!==null&&r!==void 0?r:{},a=(i=o.namedNodes)!==null&&i!==void 0?i:[];let c;St(n)?c=n.value:typeof n=="string"?c=n:Qs(n)?c=n.url:c=ya(n);const l=P(a.concat(ae(c))),d=P(Object.assign(Object.assign({},o),{namedNodes:l})),f=P(Object.assign(Object.assign({},t.predicates),{[s]:d}));return P(Object.assign(Object.assign({},t),{predicates:f}))},ue=Xc,oy=(t,e,n)=>(le(t),vi(t,e,zE(n),Ze.boolean)),ay=(t,e,n)=>(le(t),vi(t,e,ZE(n),Ze.dateTime)),cy=(t,e,n)=>(le(t),vi(t,e,VE(n),Ze.date)),ly=(t,e,n)=>(le(t),vi(t,e,GE(n),Ze.time)),uy=(t,e,n)=>(le(t),vi(t,e,QE(n),Ze.decimal)),dy=(t,e,n)=>(le(t),vi(t,e,XE(n),Ze.integer));function Ec(t,e,n,r){var i,s,o;if(le(t),!rt(e))throw new Wt(e);const a=ae(e),c=cd(r),l=(i=t.predicates[a])!==null&&i!==void 0?i:{},d=(s=l.langStrings)!==null&&s!==void 0?s:{},f=(o=d[c])!==null&&o!==void 0?o:[],p=P(f.concat(n)),h=P(Object.assign(Object.assign({},d),{[c]:p})),m=P(Object.assign(Object.assign({},l),{langStrings:h})),y=P(Object.assign(Object.assign({},t.predicates),{[a]:m}));return P(Object.assign(Object.assign({},t),{predicates:y}))}const yf=(t,e,n)=>(le(t),vi(t,e,n,Ze.string));function wf(t,e,n){return Xc(t,e,n.value)}function bf(t,e,n){if(le(t),!rt(e))throw new Wt(e);return n.datatype.value===Ze.langString?Ec(t,e,n.value,n.language):vi(t,e,n.value,n.datatype.value)}function fy(t,e,n){var r,i;if(n.termType==="NamedNode")return wf(t,e,n);if(n.termType==="Literal")return bf(t,e,n);if(n.termType==="BlankNode"){if(le(t),!rt(e))throw new Wt(e);const s=ae(e),o=(r=t.predicates[s])!==null&&r!==void 0?r:{},a=(i=o.blankNodes)!==null&&i!==void 0?i:[],c=P(a.concat(Gm(n))),l=P(Object.assign(Object.assign({},o),{blankNodes:c})),d=P(Object.assign(Object.assign({},t.predicates),{[s]:l}));return P(Object.assign(Object.assign({},t),{predicates:d}))}throw new Error(`Term type [${n.termType}] is not supported by @inrupt/solid-client.`)}function vi(t,e,n,r){var i,s,o;if(le(t),!rt(e))throw new Wt(e);const a=ae(e),c=(i=t.predicates[a])!==null&&i!==void 0?i:{},l=(s=c.literals)!==null&&s!==void 0?s:{},d=(o=l[r])!==null&&o!==void 0?o:[],f=P(d.concat(n)),p=P(Object.assign(Object.assign({},l),{[r]:f})),h=P(Object.assign(Object.assign({},c),{literals:p})),m=P(Object.assign(Object.assign({},t.predicates),{[a]:h}));return P(Object.assign(Object.assign({},t),{predicates:m}))}function dt(t,e){if(le(t),!rt(e))throw new Wt(e);const n=ae(e),r=Object.assign({},t.predicates);return delete r[n],P(Object.assign(Object.assign({},t),{predicates:P(r)}))}const _f=(t,e,n)=>{var r,i,s;if(le(t),!rt(e))throw new Wt(e);const o=ae(e);if(!ma(n)&&!rt(n))throw new mf(n);const a=St(n)?n.value:typeof n=="string"?n:ya(n),c=P((s=(i=(r=t.predicates[o])===null||r===void 0?void 0:r.namedNodes)===null||i===void 0?void 0:i.filter(f=>f.toLowerCase()!==a.toLowerCase()))!==null&&s!==void 0?s:[]),l=P(Object.assign(Object.assign({},t.predicates[o]),{namedNodes:c})),d=P(Object.assign(Object.assign({},t.predicates),{[o]:l}));return P(Object.assign(Object.assign({},t),{predicates:d}))},Pe=_f,AI=(t,e,n)=>(le(t),ts(t,e,Ze.boolean,r=>Hm(r)===n)),SI=(t,e,n)=>(le(t),ts(t,e,Ze.dateTime,r=>{var i;return((i=pf(r))===null||i===void 0?void 0:i.getTime())===n.getTime()})),jI=(t,e,n)=>(le(t),ts(t,e,Ze.date,function(r){const i=WE(r);return i?i.getFullYear()===n.getFullYear()&&i.getMonth()===n.getMonth()&&i.getDate()===n.getDate():!1})),MI=(t,e,n)=>(le(t),ts(t,e,Ze.time,function(r){const i=HE(r);return i?i.hour===n.hour&&i.minute===n.minute&&i.second===n.second&&i.millisecond===n.millisecond&&i.timezoneHourOffset===n.timezoneHourOffset&&i.timezoneMinuteOffset===n.timezoneMinuteOffset:!1})),CI=(t,e,n)=>(le(t),ts(t,e,Ze.decimal,r=>Vm(r)===n)),LI=(t,e,n)=>(le(t),ts(t,e,Ze.integer,r=>Wm(r)===n));function fd(t,e,n,r){var i,s;if(le(t),!rt(e))throw new Wt(e);const o=ae(e),a=(s=(i=t.predicates[o])===null||i===void 0?void 0:i.langStrings)!==null&&s!==void 0?s:{},c=Object.keys(a).find(m=>cd(m)===cd(r)&&Array.isArray(a[m])&&a[m].length>0);if(typeof c!="string")return t;const l=a[c],d=P(l.filter(m=>m!==n)),f=P(Object.assign(Object.assign({},a),{[c]:d})),p=P(Object.assign(Object.assign({},t.predicates[o]),{langStrings:f})),h=P(Object.assign(Object.assign({},t.predicates),{[o]:p}));return P(Object.assign(Object.assign({},t),{predicates:h}))}const hy=(t,e,n)=>(le(t),ts(t,e,Ze.string,r=>r===n));function $I(t,e,n){return _f(t,e,n.value)}function kI(t,e,n){var r,i,s;if(le(t),!rt(e))throw new Wt(e);const o=n.datatype.value;if(o===Ze.langString)return fd(t,e,n.value,n.language);const a=ae(e),c=(r=t.predicates[a])!==null&&r!==void 0?r:{},l=(i=c.literals)!==null&&i!==void 0?i:{},d=(s=l[o])!==null&&s!==void 0?s:[],f=P(d.filter(_=>_!==n.value)),p=P(Object.assign(Object.assign({},l),{[o]:f})),h=P(Object.assign(Object.assign({},c),{literals:p})),m=P(Object.assign(Object.assign({},t.predicates),{[a]:h}));return P(Object.assign(Object.assign({},t),{predicates:m}))}function ts(t,e,n,r){var i,s,o;if(!rt(e))throw new Wt(e);const a=ae(e),c=(i=t.predicates[a])!==null&&i!==void 0?i:{},l=(s=c.literals)!==null&&s!==void 0?s:{},d=(o=l[n])!==null&&o!==void 0?o:[],f=P(d.filter(_=>!r(_))),p=P(Object.assign(Object.assign({},l),{[n]:f})),h=P(Object.assign(Object.assign({},c),{literals:p})),m=P(Object.assign(Object.assign({},t.predicates),{[a]:h}));return P(Object.assign(Object.assign({},t),{predicates:m}))}const Ti=(t,e,n)=>{if(le(t),!rt(e))throw new Wt(e);if(!ma(n)&&!rt(n))throw new mf(n);return Xc(dt(t,e),e,n)},xn=Ti,PI=(t,e,n)=>(le(t),oy(dt(t,e),e,n)),UI=(t,e,n)=>(le(t),ay(dt(t,e),e,n)),FI=(t,e,n)=>(le(t),cy(dt(t,e),e,n)),BI=(t,e,n)=>(le(t),ly(dt(t,e),e,n)),qI=(t,e,n)=>(le(t),uy(dt(t,e),e,n)),YI=(t,e,n)=>(le(t),dy(dt(t,e),e,n));function wp(t,e,n,r){return le(t),Ec(dt(t,e),e,n,r)}const zI=(t,e,n)=>(le(t),yf(dt(t,e),e,n));function GI(t,e,n){return le(t),wf(dt(t,e),e,n)}function HI(t,e,n){return le(t),bf(dt(t,e),e,n)}function ZI(t,e,n){if(le(t),!rt(e))throw new Wt(e);return fy(dt(t,e),e,n)}function kn(t=dn()){let e=ma(t)?t:dn(t);function n(o){return(a,c)=>(e=o(e,a,c),s)}function r(o){return(a,c)=>(e=o(e,a,c),s)}function i(o){return(a,c)=>(e=o(e,a,c),s)}const s={build:()=>e,addUrl:n(Xc),addIri:n(ue),addBoolean:n(oy),addDatetime:n(ay),addDate:n(cy),addTime:n(ly),addDecimal:n(uy),addInteger:n(dy),addStringNoLocale:n(yf),addStringEnglish:(o,a)=>(e=Ec(e,o,a,"en"),s),addStringWithLocale:(o,a,c)=>(e=Ec(e,o,a,c),s),addNamedNode:n(wf),addLiteral:n(bf),addTerm:n(fy),setUrl:r(Ti),setIri:r(xn),setBoolean:r(PI),setDatetime:r(UI),setDate:r(FI),setTime:r(BI),setDecimal:r(qI),setInteger:r(YI),setStringNoLocale:r(zI),setStringEnglish:(o,a)=>(e=wp(e,o,a,"en"),s),setStringWithLocale:(o,a,c)=>(e=wp(e,o,a,c),s),setNamedNode:r(GI),setLiteral:r(HI),setTerm:r(ZI),removeAll:o=>(e=dt(e,o),s),removeUrl:i(_f),removeIri:i(Pe),removeBoolean:i(AI),removeDatetime:i(SI),removeDate:i(jI),removeTime:i(MI),removeDecimal:i(CI),removeInteger:i(LI),removeStringNoLocale:i(hy),removeStringEnglish:(o,a)=>kn(fd(e,o,a,"en")),removeStringWithLocale:(o,a,c)=>kn(fd(e,o,a,c)),removeNamedNode:i($I),removeLiteral:i(kI)};return s}function py(t){const e=qE(t).type;return Array.isArray(e)&&e.includes(j.AccessControlResource)}async function vf(t,e=Qe){if(!ns(t))return{resourceAcl:null,fallbackAcl:null};try{const n=await gy(t,e);return n===null?{resourceAcl:null,fallbackAcl:await my(t,e)}:{resourceAcl:n,fallbackAcl:null}}catch(n){if(n instanceof hd)return{resourceAcl:null,fallbackAcl:null};throw n}}async function gy(t,e=Qe){if(!ns(t))return null;try{const n=await Hr(t.internal_resourceInfo.aclUrl,e);if(py(n))throw new hd(t,n);return P(Object.assign(Object.assign({},n),{internal_accessTo:ie(t)}))}catch(n){if(n instanceof hd)throw n;return null}}async function my(t,e=Qe){const n=new URL(ie(t)),r=n.pathname;if(r==="/")return null;const i=VI(r),s=new URL(i,n.origin).href,o=await ha(s,e);if(!ns(o))return null;const a=await gy(o,e);return a===null?my(o,e):a}function VI(t){const e=t.substring(t.length-1)==="/"?t.substring(0,t.length-1):t;return t.substring(0,e.lastIndexOf("/"))+"/"}const Pn={read:"http://www.w3.org/ns/auth/acl#Read",append:"http://www.w3.org/ns/auth/acl#Append",write:"http://www.w3.org/ns/auth/acl#Write",control:"http://www.w3.org/ns/auth/acl#Control"};function Tf(t,e){return Object.assign(da(t),{internal_acl:e})}class hd extends Error{constructor(e,n){super(`[${Bi(e)}] is governed by Access Control Policies in [${Bi(n)}] rather than by Web Access Control.`)}}function ns(t){return typeof t.internal_resourceInfo.aclUrl=="string"}kg.dataset;function pe(t){if(!Ks(t))throw new Error(`An Access Control Resource for [${ie(t)}] is not available. This could be because the current user is not allowed to see it, or because their Pod Server does not support Access Control Resources.`);return t.internal_acp.acr}function Qt(t,e){return Object.assign(da(t),{internal_acp:Object.assign(Object.assign({},t.internal_acp),{acr:e})})}function yy(t){let e=dn(t);return e=xn(e,un.type,j.AccessControl),e}function WI(t,e,n){const r=pe(t),i=ke(r,e,n);return i===null||!ce(i,un.type).includes(j.AccessControl)?null:i}function qr(t,e){const n=pe(t),r=_i(n,e),i=r.filter(o=>ce(o,un.type).includes(j.AccessControl)),s=r.filter(o=>ce(o,j.accessControl).length>0).map(o=>{const a=ce(o,j.accessControl)[0];return dn({url:a})});return i.concat(s)}function rs(t,e){const n=pe(t),r=Vt(n,e);return Qt(t,r)}function wy(t,e){return ue(t,j.apply,e)}function by(t){return ce(t,j.apply)}function _y(t,e){return Pe(t,j.apply,e)}function vy(t){return dt(t,j.apply)}function Ty(t,e){return ue(t,j.applyMembers,e)}function pd(t){return ce(t,j.applyMembers)}function QI(t,e){return Pe(t,j.applyMembers,e)}function Ey(t){return dt(t,j.applyMembers)}function Iy(t){const e=qr(t);return e.length===0?yy():e[0]}function wa(t){return la(t)&&Array.isArray(t.internal_resourceInfo.linkedResources[j.accessControl])&&t.internal_resourceInfo.linkedResources[j.accessControl].length===1}function Kc(t,e){var n;const r=pe(t),i=ie(r);let s=(n=ke(r,i))!==null&&n!==void 0?n:dn({url:i});s=ue(s,j.access,e);const o=Vt(r,s);return Qt(t,o)}function Ef(t,e){var n;const r=pe(t),i=ie(r);let s=(n=ke(r,i))!==null&&n!==void 0?n:dn({url:i});s=ue(s,j.accessMembers,e);const o=Vt(r,s);return Qt(t,o)}function is(t){const e=pe(t),n=ie(e),r=ke(e,n);return r===null?[]:ce(r,j.access)}function ba(t){const e=pe(t),n=ie(e),r=ke(e,n);return r===null?[]:ce(r,j.accessMembers)}function Jc(t,e){const n=pe(t),r=ie(n),i=ke(n,r);if(i===null)return t;const s=Pe(i,j.access,e),o=Vt(n,s);return Qt(t,o)}function If(t,e){const n=pe(t),r=ie(n),i=ke(n,r);if(i===null)return t;const s=Pe(i,j.accessMembers,e),o=Vt(n,s);return Qt(t,o)}function el(t){const e=pe(t),n=ie(e),r=ke(e,n);if(r===null)return t;const i=dt(r,j.access),s=Vt(e,i);return Qt(t,s)}function tl(t){const e=pe(t),n=ie(e),r=ke(e,n);if(r===null)return t;const i=dt(r,j.accessMembers),s=Vt(e,i);return Qt(t,s)}function Df(t,e){const n=Iy(t),r=wy(n,e);return rs(t,r)}function Dy(t,e){const n=Iy(t),r=Ty(n,e);return rs(t,r)}function Xs(t){const n=qr(t).map(i=>by(i)),r=new Set;return n.forEach(i=>{i.forEach(s=>r.add(s))}),Array.from(r)}function nl(t){const n=qr(t).map(i=>pd(i)),r=new Set;return n.forEach(i=>{i.forEach(s=>r.add(s))}),Array.from(r)}function Rf(t,e){return qr(t).map(s=>_y(s,e)).reduce(rs,t)}function Ry(t,e){return qr(t).map(s=>QI(s,e)).reduce(rs,t)}function xf(t){return qr(t).map(i=>vy(i)).reduce(rs,t)}function Of(t){return qr(t).map(i=>Ey(i)).reduce(rs,t)}function xy(t){let e=`# Access controls for ${ie(t)}
`;const n=Xs(t),r=nl(t),i=is(t),s=ba(t);return n.length===0&&r.length===0&&i.length===0&&s.length===0&&(e+=`
<no policies specified yet>
`),n.length>0&&(e+=`
The following policies apply to this resource:
- `,e+=n.join(`
- `)+`
`),i.length>0&&(e+=`
The following policies apply to the access control resource for this resource:
- `,e+=i.join(`
- `)+`
`),r.length>0&&(e+=`
The following policies apply to the children of this resource:
- `,e+=r.join(`
- `)+`
`),s.length>0&&(e+=`
The following policies apply to the access control resources for children of this resource:
- `,e+=s.join(`
- `)+`
`),e}const Ot="http://www.w3.org/ns/solid/acp#",Ne={AccessControl:Ot.concat("AccessControl"),AccessControlResource:Ot.concat("AccessControlResource"),AuthenticatedAgent:Ot.concat("AuthenticatedAgent"),CreatorAgent:Ot.concat("CreatorAgent"),Matcher:Ot.concat("Matcher"),Policy:Ot.concat("Policy"),PublicAgent:Ot.concat("PublicAgent"),access:Ot.concat("access"),accessControl:Ot.concat("accessControl"),agent:Ot.concat("agent"),allOf:Ot.concat("allOf"),allow:Ot.concat("allow"),anyOf:Ot.concat("anyOf"),apply:Ot.concat("apply"),client:Ot.concat("client"),deny:Ot.concat("deny"),memberAccessControl:Ot.concat("memberAccessControl"),noneOf:Ot.concat("noneOf"),vc:Ot.concat("vc")},Ua="http://www.w3.org/ns/auth/acl#",js={Append:Ua.concat("Append"),Control:Ua.concat("Control"),Read:Ua.concat("Read"),Write:Ua.concat("Write")},XI="http://www.w3.org/ns/solid/vc#SolidAccessGrant";function _a(t){const e=pe(t),n=ie(e);return ke(e,n)}const gd="defaultAccessControl",md="defaultAcrAccessControl",yd="defaultMemberAccessControl",wd="defaultMemberAcrAccessControl";function Oy(t,e){const n=pe(t);return ie(n).concat("#").concat(e)}function Ir(t,e){const n=pe(t),r=Oy(t,e),i=ke(n,r);return i===null||typeof i=="undefined"?dn({url:r}):i}function Ny(t,e){const n=ce(t,e);return{read:n.includes(js.Read),append:n.includes(js.Append),write:n.includes(js.Write),controlRead:!1,controlWrite:!1}}function KI(t,e){return Object.assign(da(t),{internal_acp:{acr:e}})}function JI(t,e,n){let r=dt(t,n);return(e.read||e.controlRead)&&(r=ue(r,n,js.Read)),e.append&&(r=ue(r,n,js.Append)),(e.write||e.controlWrite)&&(r=ue(r,n,js.Write)),r}const Ay="defaultVcPolicy",Sy="defaultVcMatcher";function eD(t,e){var n,r;let i=pe(t);const s=`${Bi(i)}#${Ay}`,o=`${Bi(i)}#${Sy}`;let a=Ir(t,"defaultAccessControl"),c=(n=_a(t))!==null&&n!==void 0?n:kn({url:Bi(i)}).addIri(Ne.accessControl,a).build();ce(c,Ne.accessControl).includes(ya(a))||(c=ue(c,Ne.accessControl,a));let l=ke(i,s);l===null&&(l=kn({url:s}).addIri(un.type,Ne.Policy).addIri(Ne.anyOf,o).build(),a=ue(a,Ne.apply,l));const d=(r=ke(i,o))!==null&&r!==void 0?r:kn({url:o}).addIri(un.type,Ne.Matcher).addIri(Ne.vc,XI).build(),f=Ny(l,Ne.allow);return l=JI(l,Object.assign(Object.assign({},f),e),Ne.allow),i=[c,a,l,d].reduce(Vt,i),KI(t,i)}const yu={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},wu=(t,e,n)=>ce(t,e).includes(ya(n));function tD(t){const e=pe(t),n=Ir(t,"defaultAccessControl"),r=_a(t);if(r===null||!wu(r,Ne.accessControl,n))return yu;const i=`${Bi(e)}#${Ay}`,s=ke(e,i);if(s===null||!wu(n,Ne.apply,s))return yu;const o=`${Bi(e)}#${Sy}`,a=ke(e,o);return a===null||!wu(s,Ne.anyOf,a)?yu:Ny(s,Ne.allow)}async function rl(t,e=Qe){const n=ae(t),r=Object.assign(Object.assign({},Qe),e),i=await Hr(n,r),s=await ss(i,r);return Object.assign(Object.assign({},i),s)}async function il(t,e=Qe){const n=ae(t),r=Object.assign(Object.assign({},Qe),e),i=await zm(n,r),s=await ss(i,r);return Object.assign(i,s)}async function sl(t,e=Qe){const n=ae(t),r=Object.assign(Object.assign({},Qe),e),i=await ha(n,r),s=await ss(i,r);return Object.assign(Object.assign({},i),s)}async function ol(t,e=Qe){const n=ae(t),r=Object.assign(Object.assign({},Qe),e),i=await Hr(n,r);if(ns(i)){const s=await vf(i,r);return Tf(i,s)}else{const s=await ss(i,r);return Object.assign(Object.assign({},i),s)}}async function al(t,e=Qe){const n=ae(t),r=Object.assign(Object.assign({},Qe),e),i=await zm(n,r);if(ns(i)){const s=await vf(i,r);return Tf(i,s)}else{const s=await ss(i,r);return Object.assign(i,s)}}async function cl(t,e=Qe){const n=ae(t),r=Object.assign(Object.assign({},Qe),e),i=await ha(n,r);if(ns(i)){const s=await vf(i,r);return Tf(i,s)}else{const s=await ss(i,r);return Object.assign(Object.assign({},i),s)}}async function ll(t,e=Qe){const n=pe(t),r=Object.assign(Object.assign({},Qe),e),i=await Tc(ie(n),n,r);return Qt(t,i)}function Ks(t){return typeof t.internal_acp=="object"&&t.internal_acp!==null&&typeof t.internal_acp.acr=="object"&&t.internal_acp.acr!==null}async function ss(t,e){let n;if(wa(t))n=t.internal_resourceInfo.linkedResources[j.accessControl][0];else if(ns(t)){const o=await ha(t.internal_resourceInfo.aclUrl,e);py(o)&&(n=ie(o))}if(typeof n!="string")return{internal_acp:{acr:null}};let r;try{r=await Hr(n,e)}catch{return{internal_acp:{acr:null}}}return{internal_acp:{acr:Object.assign(Object.assign({},r),{accessTo:ie(t)})}}}function ul(t){const e=Xs(t).map(_s).concat(nl(t).map(_s)).concat(is(t).map(_s)).concat(ba(t).map(_s));return Array.from(new Set(e))}async function jy(t,e=Qe){const n=ae(t),r=Object.assign(Object.assign({},Qe),e),i=await ha(n,r);return Ks(await ss(i,r))}function nD(t){return la(t)?[j.accessControl,"acl"].map(n=>{if(Array.isArray(t.internal_resourceInfo.linkedResources[n])&&t.internal_resourceInfo.linkedResources[n].length===1)return t.internal_resourceInfo.linkedResources[n][0]}).find(n=>n!==void 0):void 0}function Nf(t){return ce(t,un.type).includes(j.Rule)}function Af(t,e){return ue(t,j.allOf,e)}function Sf(t,e){return Pe(t,j.allOf,e)}function jf(t,e){return xn(t,j.allOf,e)}function dl(t){return ce(t,j.allOf)}function Mf(t,e){return ue(t,j.anyOf,e)}function Cf(t,e){return Pe(t,j.anyOf,e)}function Lf(t,e){return xn(t,j.anyOf,e)}function fl(t){return ce(t,j.anyOf)}function $f(t,e){return ue(t,j.noneOf,e)}function kf(t,e){return Pe(t,j.noneOf,e)}function Pf(t,e){return xn(t,j.noneOf,e)}function Js(t){return ce(t,j.noneOf)}function Uf(t){const e=ae(t);let n=dn({url:e});return n=Ti(n,un.type,j.Rule),n}function rD(t,e){const n=pe(t),r=new URL(ie(n));r.hash=`#${e}`;let i=dn({url:r.href});return i=Ti(i,un.type,j.Rule),i}function Ff(t,e){const n=ke(t,e);return n===null||cI(n,un.type)!==j.Rule?null:n}function My(t,e){const n=pe(t),r=ie(n),i=new URL(r);i.hash=`#${e}`;const s=ke(n,i.href);return s===null||!Nf(s)?null:s}function Bf(t){return _i(t).filter(Nf)}function iD(t){const e=pe(t);return _i(e).filter(Nf)}function qf(t,e){return Gr(t,e)}function sD(t,e){const n=pe(t);let r;if(typeof e=="string")try{new URL(e),r=e}catch{const c=new URL(ie(n));c.hash=`#${e}`,r=c.href}else St(e)?r=ae(e):r=Er(e);const i=My(t,new URL(r).hash.substring(1));if(i===null)return t;const s=Gr(n,i);return Qt(t,s)}function Yf(t,e){return Vt(t,e)}function oD(t,e){const n=pe(t),r=Vt(n,e);return Qt(t,r)}function hl(t){return ce(t,j.agent).filter(e=>e!==j.PublicAgent&&e!==j.AuthenticatedAgent&&e!==j.CreatorAgent)}function zf(t,e){const n=va(t),r=Ta(t),i=Ea(t);let s=xn(t,j.agent,e);return n&&(s=Qf(s)),r&&(s=Xf(s)),i&&(s=Kf(s)),s}function Gf(t,e){return ue(t,j.agent,e)}function Hf(t,e){return Pe(t,j.agent,e)}function pl(t){return ce(t,j.group)}function Zf(t,e){return xn(t,j.group,e)}function Vf(t,e){return ue(t,j.group,e)}function Wf(t,e){return Pe(t,j.group,e)}function va(t){return ce(t,j.agent).filter(e=>e===j.PublicAgent).length>0}function Qf(t){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return ue(t,j.agent,j.PublicAgent)}function Cy(t){return Pe(t,j.agent,j.PublicAgent)}function Ta(t){return ce(t,j.agent).filter(e=>e===j.AuthenticatedAgent).length>0}function Xf(t){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return ue(t,j.agent,j.AuthenticatedAgent)}function Ly(t){return Pe(t,j.agent,j.AuthenticatedAgent)}function Ea(t){return ce(t,j.agent).filter(e=>e===j.CreatorAgent).length>0}function Kf(t){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return ue(t,j.agent,j.CreatorAgent)}function $y(t){return Pe(t,j.agent,j.CreatorAgent)}function ky(t){return ce(t,j.client).filter(e=>e!==bi.PublicOidcClient)}function aD(t,e){const n=Jf(t);let r=xn(t,j.client,e);return n&&(r=Py(r)),r}function cD(t,e){return ue(t,j.client,e)}function lD(t,e){return Pe(t,j.client,e)}function Jf(t){return ce(t,j.client).filter(e=>e===bi.PublicOidcClient).length>0}function Py(t){return ue(t,j.client,bi.PublicOidcClient)}function uD(t){return Pe(t,j.client,bi.PublicOidcClient)}function eh(t){let e=`## Rule: ${Er(t)}

`,n="";va(t)&&(n+=`- Everyone
`),Ta(t)&&(n+=`- All authenticated agents
`),Ea(t)&&(n+=`- The creator of this resource
`),Jf(t)&&(n+=`- Users of any client application
`);const r=hl(t);r.length>0&&(n+=`- The following agents:
  - `,n+=r.join(`
  - `)+`
`);const i=pl(t);i.length>0&&(n+=`- Members of the following groups:
  - `,n+=i.join(`
  - `)+`
`);const s=ky(t);return s.length>0&&(n+=`- Users of the following client applications:
  - `,n+=s.join(`
  - `)+`
`),e+=n.length>0?`This rule applies to:
`+n:`<empty>
`,e}function eo(t){return ce(t,un.type).includes(j.Policy)}function gl(t){const e=ae(t);let n=dn({url:e});return n=Ti(n,un.type,j.Policy),n}function ml(t,e){const n=ke(t,e);return n===null||!eo(n)?null:n}function yl(t){return _i(t).filter(r=>!Qs(r)&&eo(r))}function wl(t,e){return Gr(t,e)}function bl(t,e){return Vt(t,e)}function dD(t,e){let n=dt(t,j.allow);return e.read===!0&&(n=ue(n,j.allow,Pn.read)),e.append===!0&&(n=ue(n,j.allow,Pn.append)),e.write===!0&&(n=ue(n,j.allow,Pn.write)),n}function th(t,e){let n=dt(t,j.allow);return e.read===!0&&(n=ue(n,j.allow,j.Read)),e.append===!0&&(n=ue(n,j.allow,j.Append)),e.write===!0&&(n=ue(n,j.allow,j.Write)),n}function fD(t){const e=ce(t,j.allow);return{read:e.includes(Pn.read),append:e.includes(Pn.append),write:e.includes(Pn.write)}}function _l(t){const e=ce(t,j.allow);return{read:e.includes(j.Read),append:e.includes(j.Append),write:e.includes(j.Write)}}function hD(t,e){let n=dt(t,j.deny);return e.read===!0&&(n=ue(n,j.deny,Pn.read)),e.append===!0&&(n=ue(n,j.deny,Pn.append)),e.write===!0&&(n=ue(n,j.deny,Pn.write)),n}function nh(t,e){let n=dt(t,j.deny);return e.read===!0&&(n=ue(n,j.deny,j.Read)),e.append===!0&&(n=ue(n,j.deny,j.Append)),e.write===!0&&(n=ue(n,j.deny,j.Write)),n}function pD(t){const e=ce(t,j.deny);return{read:e.includes(Pn.read),append:e.includes(Pn.append),write:e.includes(Pn.write)}}function vl(t){const e=ce(t,j.deny);return{read:e.includes(j.Read),append:e.includes(j.Append),write:e.includes(j.Write)}}function Uy(t,e){const n=pe(t),r=new URL(ie(n));r.hash=`#${e}`;let i=dn({url:r.href});return i=Ti(i,un.type,j.Policy),i}function rh(t,e){const n=pe(t),r=ie(n),i=new URL(r);i.hash=`#${e}`;const s=ke(n,i.href);return!Xs(t).includes(i.href)||s===null||!eo(s)?null:s}function ih(t,e){const n=pe(t),r=ie(n),i=new URL(r);i.hash=`#${e}`;const s=ke(n,i.href);return!is(t).includes(i.href)||s===null||!eo(s)?null:s}function Fy(t){const e=pe(t);return Xs(t).map(s=>ke(e,s)).filter(s=>s!==null&&eo(s))}function By(t){const e=pe(t);return is(t).map(s=>ke(e,s)).filter(s=>s!==null&&eo(s))}function qy(t,e){const n=pe(t);let r=e;if(typeof r=="string")try{new URL(r)}catch{const l=new URL(ie(n));l.hash=`#${e}`,r=l.href}let i;if(typeof r=="string"?i=r:St(r)?i=ae(r):i=Er(r,ie(n)),rh(t,new URL(i).hash.substring(1))===null)return t;const o=Gr(n,r),a=Qt(t,o);return Rf(a,i)}function Yy(t,e){const n=pe(t);let r=e;if(typeof r=="string")try{new URL(r)}catch{const l=new URL(ie(n));l.hash=`#${e}`,r=l.href}let i;if(typeof r=="string"?i=r:St(r)?i=ae(r):i=Er(r,ie(n)),ih(t,new URL(i).hash.substring(1))===null)return t;const o=Gr(n,r),a=Qt(t,o);return Jc(a,i)}function gD(t,e){const n=pe(t),r=Vt(n,e),i=Qt(t,r),s=Er(e,ie(n));return Df(i,s)}function mD(t,e){const n=pe(t),r=Vt(n,e),i=Qt(t,r),s=Er(e,ie(n));return Kc(i,s)}function sh(t){function e(c,l){return l?"denied":c?"allowed":"unspecified"}const n=_l(t),r=vl(t);let i=`## Policy: ${Er(t)}

`;i+=`- Read: ${e(n.read,r.read)}
`,i+=`- Append: ${e(n.append,r.append)}
`,i+=`- Write: ${e(n.write,r.write)}
`;const s=dl(t),o=fl(t),a=Js(t);return s.length===0&&o.length===0&&a.length===0&&(i+=`
<no rules specified yet>
`),s.length>0&&(i+=`
All of these rules should match:
`,i+="- "+s.join(`
- `)+`
`),o.length>0&&(i+=`
At least one of these rules should match:
`,i+="- "+o.join(`
- `)+`
`),a.length>0&&(i+=`
None of these rules should match:
`,i+="- "+a.join(`
- `)+`
`),i}function Ia(t){const e=new URL("access-control-resource",t).href;return Object.assign(Object.assign({},NI(e)),{accessTo:t})}function Tl(t,e=Ia(ie(t))){return Object.assign(da(t),{internal_acp:{acr:e,aprs:{}}})}const yD={getFileWithAccessDatasets:al,getFileWithAcr:il,getReferencedPolicyUrlAll:ul,getResourceInfoWithAccessDatasets:cl,getResourceInfoWithAcr:sl,getSolidDatasetWithAccessDatasets:ol,getSolidDatasetWithAcr:rl,hasAccessibleAcr:Ks,saveAcrFor:ll},wD={acrAsMarkdown:xy,addAcrPolicyUrl:Kc,addMemberAcrPolicyUrl:Ef,addMemberPolicyUrl:Dy,addPolicyUrl:Df,getAcrPolicyUrlAll:is,getMemberAcrPolicyUrlAll:ba,getMemberPolicyUrlAll:nl,getPolicyUrlAll:Xs,hasLinkedAcr:wa,removeAcrPolicyUrl:Jc,removeAcrPolicyUrlAll:el,removeMemberAcrPolicyUrl:If,removeMemberAcrPolicyUrlAll:tl,removeMemberPolicyUrl:Ry,removeMemberPolicyUrlAll:Of,removePolicyUrl:Rf,removePolicyUrlAll:xf},bD={createPolicy:gl,getAllowModes:_l,getDenyModes:vl,getPolicy:ml,getPolicyAll:yl,policyAsMarkdown:sh,removePolicy:wl,setAllowModes:th,setDenyModes:nh,setPolicy:bl},_D={addAgent:Gf,addForbiddenRuleUrl:$f,addGroup:Vf,addOptionalRuleUrl:Mf,addRequiredRuleUrl:Af,createRule:Uf,getAgentAll:hl,getForbiddenRuleUrlAll:Js,getGroupAll:pl,getOptionalRuleUrlAll:fl,getRequiredRuleUrlAll:dl,getRule:Ff,getRuleAll:Bf,hasAuthenticated:Ta,hasCreator:Ea,hasPublic:va,removeAgent:Hf,removeForbiddenRuleUrl:kf,removeGroup:Wf,removeOptionalRuleUrl:Cf,removeRequiredRuleUrl:Sf,removeRule:qf,ruleAsMarkdown:eh,setAgent:zf,setForbiddenRuleUrl:Pf,setGroup:Zf,setOptionalRuleUrl:Lf,setRequiredRuleUrl:jf,setRule:Yf},vD={addMockAcrTo:Tl,mockAcrFor:Ia};function zy(t,e){return e?Qf(t):Cy(t)}function Gy(t,e){return e?Xf(t):Ly(t)}function Hy(t,e){return e?Kf(t):$y(t)}const TD={getForbiddenRuleurlAll:Js,setPublic:zy,setAuthenticated:Gy,setCreator:Hy};Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},yD),wD),bD),_D),vD),TD);const ED={getFileWithAccessDatasets:al,getFileWithAcr:il,getReferencedPolicyUrlAll:ul,getResourceInfoWithAccessDatasets:cl,getResourceInfoWithAcr:sl,getSolidDatasetWithAccessDatasets:ol,getSolidDatasetWithAcr:rl,hasAccessibleAcr:Ks,saveAcrFor:ll},ID={createPolicy:gl,getAllowModes:_l,getDenyModes:vl,getPolicy:ml,getPolicyAll:yl,policyAsMarkdown:sh,removePolicy:wl,setAllowModes:th,setDenyModes:nh,setPolicy:bl},DD={addAgent:Gf,addForbiddenRuleUrl:$f,addGroup:Vf,addOptionalRuleUrl:Mf,addRequiredRuleUrl:Af,createRule:Uf,getAgentAll:hl,getForbiddenRuleUrlAll:Js,getGroupAll:pl,getOptionalRuleUrlAll:fl,getRequiredRuleUrlAll:dl,getRule:Ff,getRuleAll:Bf,hasAuthenticated:Ta,hasCreator:Ea,hasPublic:va,removeAgent:Hf,removeForbiddenRuleUrl:kf,removeGroup:Wf,removeOptionalRuleUrl:Cf,removeRequiredRuleUrl:Sf,removeRule:qf,ruleAsMarkdown:eh,setAgent:zf,setForbiddenRuleUrl:Pf,setGroup:Zf,setOptionalRuleUrl:Lf,setRequiredRuleUrl:jf,setRule:Yf},RD={addMockAcrTo:Tl,mockAcrFor:Ia},xD={hasLinkedAcr:wa,addAcrPolicyUrl:Kc,addMemberAcrPolicyUrl:Ef,getAcrPolicyUrlAll:is,getMemberAcrPolicyUrlAll:ba,removeAcrPolicyUrl:Jc,removeAcrPolicyUrlAll:el,removeMemberAcrPolicyUrl:If,removeMemberAcrPolicyUrlAll:tl},OD={createControl:yy,getControl:WI,getAllControl:qr,getControlAll:qr,setControl:rs,removeControl:ND,addPolicyUrl:wy,getPolicyUrlAll:by,removePolicyUrl:_y,removePolicyUrlAll:vy,addMemberPolicyUrl:Ty,getMemberPolicyUrlAll:pd,removeMemberPolicyUrl:pd,removeMemberPolicyUrlAll:Ey,getForbiddenRuleurlAll:Js,setPublic:zy,setAuthenticated:Gy,setCreator:Hy};Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ED),ID),DD),RD),xD),OD);function ND(t,e){const n=pe(t),r=Gr(n,e);return Qt(t,r)}const AD={getFileWithAccessDatasets:al,getFileWithAcr:il,getLinkedAcrUrl:nD,getReferencedPolicyUrlAll:ul,getResourceInfoWithAccessDatasets:cl,getResourceInfoWithAcr:sl,getSolidDatasetWithAccessDatasets:ol,getSolidDatasetWithAcr:rl,hasAccessibleAcr:Ks,saveAcrFor:ll,isAcpControlled:jy},SD={acrAsMarkdown:xy,addAcrPolicyUrl:Kc,addMemberAcrPolicyUrl:Ef,addMemberPolicyUrl:Dy,addPolicyUrl:Df,getAcrPolicyUrlAll:is,getMemberAcrPolicyUrlAll:ba,getMemberPolicyUrlAll:nl,getPolicyUrlAll:Xs,hasLinkedAcr:wa,removeAcrPolicyUrl:Jc,removeAcrPolicyUrlAll:el,removeMemberAcrPolicyUrl:If,removeMemberAcrPolicyUrlAll:tl,removeMemberPolicyUrl:Ry,removeMemberPolicyUrlAll:Of,removePolicyUrl:Rf,removePolicyUrlAll:xf},jD={createPolicy:gl,getAllowModes:_l,getDenyModes:vl,getPolicy:ml,getPolicyAll:yl,policyAsMarkdown:sh,removePolicy:wl,setAllowModes:th,setDenyModes:nh,setPolicy:bl,createResourcePolicyFor:Uy,getResourceAcrPolicy:ih,getResourceAcrPolicyAll:By,getResourcePolicy:rh,getResourcePolicyAll:Fy,removeResourceAcrPolicy:Yy,removeResourcePolicy:qy,setResourceAcrPolicy:mD,setResourcePolicy:gD},MD={addAgent:Gf,addGroup:Vf,createRule:Uf,getAgentAll:hl,getGroupAll:pl,getRule:Ff,getRuleAll:Bf,removeAgent:Hf,removeGroup:Wf,removeRule:qf,ruleAsMarkdown:eh,setAgent:zf,setGroup:Zf,setRule:Yf,addClient:cD,getClientAll:ky,hasAnyClient:Jf,removeClient:lD,setAnyClient:Py,setClient:aD,removeAnyClient:uD,hasAuthenticated:Ta,hasCreator:Ea,hasPublic:va,setAuthenticated:Xf,setCreator:Kf,setPublic:Qf,removeAuthenticated:Ly,removeCreator:$y,removePublic:Cy,getAnyOfRuleUrlAll:fl,addAnyOfRuleUrl:Mf,removeAnyOfRuleUrl:Cf,setAnyOfRuleUrl:Lf,getAllOfRuleUrlAll:dl,addAllOfRuleUrl:Af,removeAllOfRuleUrl:Sf,setAllOfRuleUrl:jf,getNoneOfRuleUrlAll:Js,addNoneOfRuleUrl:$f,removeNoneOfRuleUrl:kf,setNoneOfRuleUrl:Pf,createResourceRuleFor:rD,getResourceRule:My,getResourceRuleAll:iD,removeResourceRule:sD,setResourceRule:oD},CD={addMockAcrTo:Tl,mockAcrFor:Ia};Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},AD),SD),jD),MD),CD);function Dr(t,e){return Object.assign(da(t),{internal_acp:Object.assign(Object.assign({},t.internal_acp),{acr:Vt(t.internal_acp.acr,e)})})}function bp(t){return t.includes("Member")?Ne.memberAccessControl:Ne.accessControl}function El(t,e){const n=Oy(t,e),r=pe(t);let i=_a(t);return(i===null||typeof i=="undefined")&&(i=dn({url:ie(r)})),ce(i,bp(e)).includes(n)?t:(i=kn(i).addUrl(bp(e),n).build(),Dr(t,i))}function LD(t,e){const n=El(t,md),r=Ir(n,md);return Dr(n,kn(r).addUrl(Ne.access,e).build())}function $D(t,e){const n=El(t,wd),r=Ir(n,wd);return Dr(n,kn(r).addUrl(Ne.access,e).build())}function kD(t,e){const n=El(t,yd),r=Ir(n,yd);return Dr(n,kn(r).addUrl(Ne.apply,e).build())}function PD(t,e){const n=El(t,gd),r=Ir(n,gd);return Dr(n,kn(r).addUrl(Ne.apply,e).build())}function Zy(t){const e=_a(t);return e===null?[]:ce(e,Ne.accessControl)}function Il(t,e,n){const r=pe(t);return Array.from(new Set(e.map(i=>{const s=ke(r,i);return s!==null?ce(s,n):[]}).reduce((i,s)=>i.concat(s),[])))}function UD(t){return Il(t,Zy(t),Ne.access)}function Vy(t){const e=_a(t);return e===null?[]:ce(e,Ne.memberAccessControl)}function FD(t){return Il(t,Vy(t),Ne.access)}function BD(t){return Il(t,Vy(t),Ne.apply)}function qD(t){return Il(t,Zy(t),Ne.apply)}function YD(t,e){const n=Ir(t,md);return Dr(t,Pe(n,Ne.access,e))}function zD(t,e){const n=Ir(t,wd);return Dr(t,Pe(n,Ne.access,e))}function GD(t,e){const n=Ir(t,yd);return Dr(t,Pe(n,Ne.apply,e))}function HD(t,e){const n=Ir(t,gd);return Dr(t,Pe(n,Ne.apply,e))}function ZD(t,e){return Dr(t,e)}function Dl(t){return ce(t,un.type).includes(j.Matcher)}function VD(t,e){return ue(t,j.allOf,e)}function WD(t,e){return Pe(t,j.allOf,e)}function QD(t,e){return xn(t,j.allOf,e)}function XD(t){return ce(t,j.allOf)}function KD(t,e){return ue(t,j.anyOf,e)}function JD(t,e){return Pe(t,j.anyOf,e)}function eR(t,e){return xn(t,j.anyOf,e)}function tR(t){return ce(t,j.anyOf)}function nR(t,e){return ue(t,j.noneOf,e)}function rR(t,e){return Pe(t,j.noneOf,e)}function iR(t,e){return xn(t,j.noneOf,e)}function sR(t){return ce(t,j.noneOf)}function oR(t){const e=ae(t);let n=dn({url:e});return n=Ti(n,un.type,j.Matcher),n}function aR(t,e){const n=pe(t),r=new URL(ie(n));r.hash=`#${e}`;let i=dn({url:r.href});return i=Ti(i,un.type,j.Matcher),i}function cR(t,e){const n=ke(t,e);return n===null||!Dl(n)?null:n}function Wy(t,e){const n=pe(t),r=ie(n),i=new URL(r);i.hash=`#${e}`;const s=ke(n,i.href);return s===null||!Dl(s)?null:s}function lR(t){return _i(t).filter(Dl)}function uR(t){const e=pe(t);return _i(e).filter(Dl)}function dR(t,e){return Gr(t,e)}function fR(t,e){const n=pe(t);let r;if(typeof e=="string")try{new URL(e),r=e}catch{const c=new URL(ie(n));c.hash=`#${e}`,r=c.href}else St(e)?r=ae(e):r=Er(e);const i=Wy(t,new URL(r).hash.substring(1));if(i===null)return t;const s=Gr(n,i);return Qt(t,s)}function hR(t,e){return Vt(t,e)}function pR(t,e){const n=pe(t),r=Vt(n,e);return Qt(t,r)}function gR(t){return ce(t,j.agent).filter(e=>e!==j.PublicAgent&&e!==j.AuthenticatedAgent&&e!==j.CreatorAgent)}function mR(t,e){const n=Qy(t),r=Ky(t),i=ew(t);let s=xn(t,j.agent,e);return n&&(s=Xy(s)),r&&(s=Jy(s)),i&&(s=tw(s)),s}function yR(t,e){return ue(t,j.agent,e)}function wR(t,e){return Pe(t,j.agent,e)}function Qy(t){return ce(t,j.agent).filter(e=>e===j.PublicAgent).length>0}function Xy(t){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return ue(t,j.agent,j.PublicAgent)}function bR(t){return Pe(t,j.agent,j.PublicAgent)}function Ky(t){return ce(t,j.agent).filter(e=>e===j.AuthenticatedAgent).length>0}function Jy(t){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return ue(t,j.agent,j.AuthenticatedAgent)}function _R(t){return Pe(t,j.agent,j.AuthenticatedAgent)}function ew(t){return ce(t,j.agent).filter(e=>e===j.CreatorAgent).length>0}function tw(t){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return ue(t,j.agent,j.CreatorAgent)}function vR(t){return Pe(t,j.agent,j.CreatorAgent)}function TR(t){return ce(t,j.client).filter(e=>e!==bi.PublicOidcClient).concat(dI(t,j.client))}function ER(t,e){const n=nw(t);let r=xn(t,j.client,e);return n&&(r=rw(r)),r}function IR(t,e){return rt(e)?ue(t,j.client,e):yf(t,j.client,e)}function DR(t,e){return rt(e)?Pe(t,j.client,e):hy(t,j.client,e)}function nw(t){return ce(t,j.client).filter(e=>e===bi.PublicOidcClient).length>0}function rw(t){return ue(t,j.client,bi.PublicOidcClient)}function RR(t){return Pe(t,j.client,bi.PublicOidcClient)}const xR={getFileWithAccessDatasets:al,getFileWithAcr:il,getReferencedPolicyUrlAll:ul,getResourceInfoWithAccessDatasets:cl,getResourceInfoWithAcr:sl,getSolidDatasetWithAccessDatasets:ol,getSolidDatasetWithAcr:rl,hasAccessibleAcr:Ks,saveAcrFor:ll,isAcpControlled:jy,getVcAccess:tD,setVcAccess:eD},OR={addAcrPolicyUrl:LD,addMemberAcrPolicyUrl:$D,addMemberPolicyUrl:kD,addPolicyUrl:PD,getAcrPolicyUrlAll:UD,getMemberAcrPolicyUrlAll:FD,getMemberPolicyUrlAll:BD,getPolicyUrlAll:qD,hasLinkedAcr:wa,removeAcrPolicyUrl:YD,removeAcrPolicyUrlAll:el,removeMemberAcrPolicyUrl:zD,removeMemberAcrPolicyUrlAll:tl,removeMemberPolicyUrl:GD,removeMemberPolicyUrlAll:Of,removePolicyUrl:HD,removePolicyUrlAll:xf},NR={createPolicy:gl,getAllowModes:fD,getDenyModes:pD,getPolicy:ml,getPolicyAll:yl,removePolicy:wl,setAllowModes:dD,setDenyModes:hD,setPolicy:bl,createResourcePolicyFor:Uy,getResourceAcrPolicy:ih,getResourceAcrPolicyAll:By,getResourcePolicy:rh,getResourcePolicyAll:Fy,removeResourceAcrPolicy:Yy,removeResourcePolicy:qy,setResourcePolicy:ZD},AR={addAgent:yR,createMatcher:oR,getAgentAll:gR,getMatcher:cR,getMatcherAll:lR,removeAgent:wR,removeMatcher:dR,setAgent:mR,setMatcher:hR,addClient:IR,getClientAll:TR,hasAnyClient:nw,removeClient:DR,setAnyClient:rw,setClient:ER,removeAnyClient:RR,hasAuthenticated:Ky,hasCreator:ew,hasPublic:Qy,setAuthenticated:Jy,setCreator:tw,setPublic:Xy,removeAuthenticated:_R,removeCreator:vR,removePublic:bR,getAnyOfMatcherUrlAll:tR,addAnyOfMatcherUrl:KD,removeAnyOfMatcherUrl:JD,setAnyOfMatcherUrl:eR,getAllOfMatcherUrlAll:XD,addAllOfMatcherUrl:VD,removeAllOfMatcherUrl:WD,setAllOfMatcherUrl:QD,getNoneOfMatcherUrlAll:sR,addNoneOfMatcherUrl:nR,removeNoneOfMatcherUrl:rR,setNoneOfMatcherUrl:iR,createResourceMatcherFor:aR,getResourceMatcher:Wy,getResourceMatcherAll:uR,removeResourceMatcher:fR,setResourceMatcher:pR},SR={addMockAcrTo:Tl,mockAcrFor:Ia};Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},xR),OR),NR),AR),SR);var iw="http://www.w3.org/1999/02/22-rdf-syntax-ns#";function st(t){return iw+t}var jR={PREFIX:"rdf",NAMESPACE:iw,PREFIX_AND_NAMESPACE:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#"},NS:st,Property:st("Property"),HTML:st("HTML"),langString:st("langString"),PlainLiteral:st("PlainLiteral"),Statement:st("Statement"),Bag:st("Bag"),Seq:st("Seq"),Alt:st("Alt"),List:st("List"),XMLLiteral:st("XMLLiteral"),JSON:st("JSON"),CompoundLiteral:st("CompoundLiteral"),type:st("type"),subject:st("subject"),predicate:st("predicate"),object:st("object"),value:st("value"),nil:st("nil"),first:st("first"),rest:st("rest"),language:st("language"),direction:st("direction")};let sw="";Ew.subscribe(t=>{sw=t.storageLocation});const Te={event_type:"https://schema.org/Event",startDate_type:"https://schema.org/startDate",endDate_type:"https://schema.org/endDate",about_type:"https://schema.org/about",location_type:"https://schema.org/location",text_data_type:"https://schema.org/Text",keywords_type:"https://schema.org/keywords",url_type:"https://schema.org/URL",description_type:"https://schema.org/description"};Te.event={self:Te.event_type,startDate:Te.startDate_type,endDate:Te.endDate_type,about:Te.about_type,location:Te.location_type,activityType:Te.description_type,notifyOnWeather:Te.keywords_type};function _p(t){let e="#";return t.includes(e)||(e="/"),t.substring(t.lastIndexOf(e)+1)}function to(t){return`${sw}/${t}`}function MR(t,e){return Er(e,to(t))}function CR(t="https://schema.org/Thing",e={},n=""){n||(n=Date.now().toString());const r=kn(dn({name:n})).setUrl(jR.type,t);return ow(r,e)}function ow(t,e){return Object.keys(e).forEach(r=>{const i=e[r];if(!!i)switch(r){case Te.startDate_type:case Te.endDate_type:t.setDatetime(r,new Date(i));break;default:t.setStringNoLocale(r,i)}}),t.build()}function LR(t,e){const n=uI(t,e);let r=n==null?void 0:n.toString();return n||(r=ny(t,e)||""),r||""}function aw(t,e){const n={};return n.self="https://schema.org/Event",Object.entries(e).forEach(([i,s])=>{if(i!="self")switch(s){case Te.startDate_type:case Te.endDate_type:n[i]=LR(t,s);break;default:n[i]=ny(t,s)||"";break}}),n.url=t.url,n}async function $R(t,e){const n=to(t),r=await Hr(n,{fetch:ci.fetch});return ke(r,`${n}#${e}`)}async function oh(t,e){const n=to(t);let r;try{return r=await Hr(n,{fetch:ci.fetch}),r=Vt(r,e),await Tc(n,r,{fetch:ci.fetch}),e}catch{return r=sy(),await Tc(n,r,{fetch:ci.fetch}),oh(t,e)}}async function kR(t,e,n){const r=to(t),i=await Hr(r,{fetch:ci.fetch}),s=ke(i,`${r}#${e}`);if(!s)return;const o=ow(kn(s),n);return oh(t,o)}async function PR(t,e){const n=to(t);let r=await Hr(n,{fetch:ci.fetch});const i=ke(r,`${n}#${e}`);if(!!i)return r=Gr(r,i),Tc(n,r,{fetch:ci.fetch})}function UR(t){return MR("calendar",t)}async function cw(t){return $R("calendar",t)}async function FR(t){if(!Te.event)return;const e=await cw(t);if(!!e)return aw(e,Te.event)}async function lw(t){if(!Te.event)throw Error("shema.event not defined");return aw(t,Te.event)}async function ec(t="",e,n,r="",i="",s="",o=""){if(!Te.event)return;const a=CR(Te.event.self,{[Te.event.about]:t,[Te.event.startDate]:e,[Te.event.endDate]:n,[Te.event.location]:r,[Te.event.activityType]:i,[Te.event.notifyOnWeather]:s},o);return oh("calendar",a)}async function uw(t,e){return kR("calendar",t,e)}async function dw(t){return PR("calendar",t)}async function fw(t){const e=await Hr(to(t),{fetch:ci.fetch});return _i(e,{})}async function rx(){const t=new Date,e=new Date;e.setHours(e.getHours()+2),await ec("2 hours, starting now!",t,e,"here","random","specificid"),await ec("2 hours, starting now!",t,e,"here"),await ec("2 hours, starting now!",t,e);const n=await fw("calendar");console.log(n);const r=n[0].url.split("#")[1],i=n[2].url.split("#")[1];if(console.log("Specifically get first event"),console.log(await cw(n[0].url.split("#")[1])),!Te.event)return;await uw(r,{[Te.event.startDate]:new Date,[Te.event.endDate]:new Date,[Te.event.location]:"Everywhere"}),await dw(i);const s=await FR(r);console.log(s),console.log(await lw(n[2]))}const ri="Europe/Brussels";class ah extends Ng{constructor(e,n,r,i,s,o,a=[]){super(),this.url=e,this.title=n,this.actitityType=r,this.notifyOnWeather=i,this.location=s,this.dates=o,this.times=a}get isAllDay(){return this.times.length===0}set isAllDay(e){if(e){this.setToAllDay();return}const n=An.Now.plainTimeISO(ri),r=An.Now.plainTimeISO(ri);this.times=[{from:n,to:r}]}setToAllDay(){this.times=[]}get notifyOnWeatherString(){return Array.from(this.notifyOnWeather).join(",")}static new(e=[],n=[]){return new ah("","Go to work","Work",new Set(["Sun"]),"Brussels",e,n)}}class vs extends Ng{constructor(e,n,r,i,s,o,a){super(),this.url=e,this.title=n,this.actitityType=r,this.notifyOnWeather=i,this.location=s,this.date=o,this.time=a}get isAllDay(){return!this.time||!this.time.from||!this.time.to}set isAllDay(e){if(e){this.setToAllDay();return}const n=An.Now.plainTimeISO(ri),r=An.Now.plainTimeISO(ri).add({hours:1});this.time={from:n,to:r}}setToAllDay(){this.time=void 0}get notifyOnWeatherString(){return Array.from(this.notifyOnWeather).join(",")}toZonedTime(e,n){var o;const r=(o=e.target)==null?void 0:o.value;if(!r)return this.time=void 0;const i=r.split(":"),s=An.PlainTime.from({hour:parseInt(i[0]),minute:parseInt(i[1])});this.time?this.time[n]=s:this.time=n=="from"?{from:s,to:s.add({hours:1})}:{from:s.subtract({hours:1}),to:s}}setDate(e){var o;const n=(o=e.target)==null?void 0:o.value,r=new Date(n).getTime(),s=An.Instant.fromEpochMilliseconds(r).toZonedDateTimeISO(ri);this.date=s.toPlainDate()}static new(e=An.Now.plainDateISO(ri),n){return new vs("","Go to work","Work",new Set(["Sun","Rain"]),"Brussels",e,n)}static fromSolid(e){const n=e.url||"",r=e.about||"",i=e.activityType||"Work",s=e.location||"";let o;e.notifyOnWeather?o=new Set(e.notifyOnWeather.split(",")):o=new Set(["Sun"]);let a=An.Now.plainDateISO(ri);if(e.startDate){const c=new Date(e.startDate);a=new An.PlainDate(c.getFullYear(),c.getMonth()+1,c.getDate())}if(e.startDate&&e.endDate&&e.startDate!=e.endDate){const c=new Date(e.startDate),l=new Date(e.endDate),d=new An.PlainTime(c.getHours(),c.getMinutes(),c.getSeconds()),f=new An.PlainTime(l.getHours(),l.getMinutes(),l.getSeconds()),p={from:d,to:f};return new vs(n,r,i,o,s,a,p)}return new vs(n,r,i,o,s,a)}static async init(){const n=(await fw("calendar")).map(async s=>await lw(s)),i=(await Promise.all(n)).map(s=>vs.fromSolid(s));ch.set(i)}}function hw(){const{subscribe:t,set:e,update:n}=Ep([]);return{subscribe:t,set:e,add:async(r,i,s,o)=>{var a,c;if("dates"in r?i=i!=null?i:r.dates[0]:i=i!=null?i:r.date,"times"in r&&r.times.length?(s=s!=null?s:r.times[0].from,o=o!=null?o:r.times[0].to):"time"in r&&(s=s!=null?s:(a=r.time)==null?void 0:a.from,o=o!=null?o:(c=r.time)==null?void 0:c.to),i&&s&&o){const l=new Date(i.toString()+"T"+s.toString({smallestUnit:"second"})),d=new Date(i.toString()+"T"+o.toString({smallestUnit:"second"})),f=await ec(r.title,l,d,r.location,r.actitityType,r.notifyOnWeatherString);r.url=UR(f)}n(l=>[...l,r])},deleteActivity:r=>{dw(_p(r.url)),n(i=>i.filter(s=>!s.equals(r)))},updateActivity:r=>{if(!Te.event)return;const i="dates"in r?r.dates[0]:r.date,s="times"in r?r.times[0]:r.time;let o=null,a=null;s!=null&&(o=new Date(i.toString()+"T"+s.from.toString({smallestUnit:"second"})),a=new Date(i.toString()+"T"+s.to.toString({smallestUnit:"second"})));const c={};o&&(c[Te.event.startDate]=o.toString()),a&&(c[Te.event.endDate]=a.toString()),r.title&&(c[Te.event.about]=r.title),r.location&&(c[Te.event.location]=r.location),r.actitityType&&(c[Te.event.activityType]=r.actitityType),r.notifyOnWeather&&(c[Te.event.notifyOnWeather]=r.notifyOnWeatherString);const l=_p(r.url);uw(l,c),n(d=>d.map(f=>f==r?r:f))},reset:()=>e([])}}const ch=hw(),ix=Tp(ch,t=>t.reduce((e,n)=>{const r=n.date.toString();return r in e?e[r].push(n):e[r]=[n],e},{})),sx=Tp(ch,t=>t.filter(e=>An.Now.plainDateISO(ri).until(e.date).days<=0)),ox=hw();function pw(t){const{subscribe:e,set:n}=Ep();return{subscribe:e,set:n,edit:r=>{n({editMode:!0,activity:r})},new:()=>{n({editMode:!1,activity:t()})},reset:()=>n(void 0)}}const ax=pw(()=>ah.new()),cx=pw(()=>vs.new());export{vs as P,ri as T,ah as U,ox as a,cx as b,sx as c,rx as d,ix as e,ax as m,ch as p,An as t,Iw as u};
