import{S as U,i as Z,s as J,w as B,x as M,y as R,q as k,o as A,B as j,e as $,t as b,k as V,c as D,a as T,h as w,d as h,m as q,b as W,g as E,K as _,j as I,M as pe,E as Y,l as L,v as z,J as re,n as H,p as Q,Z as me,$ as _e}from"../chunks/index-d2039bb9.js";import{t as K,i as ae,e as ge,T as ye,P as ne,b as le}from"../chunks/calendarEvents-5b5396b8.js";import{B as de}from"../chunks/Button-f4d5fd62.js";import"../chunks/preload-helper-ed63bd61.js";import"../chunks/userStore-1328782f.js";import"../chunks/index-ae43794d.js";function ve(l){let e,r,a;return{c(){e=b(l[2]),r=b("-"),a=b(l[1])},l(t){e=w(t,l[2]),r=w(t,"-"),a=w(t,l[1])},m(t,i){E(t,e,i),E(t,r,i),E(t,a,i)},p(t,i){i&4&&I(e,t[2]),i&2&&I(a,t[1])},d(t){t&&h(e),t&&h(r),t&&h(a)}}}function be(l){let e;return{c(){e=b("All day")},l(r){e=w(r,"All day")},m(r,a){E(r,e,a)},p:Y,d(r){r&&h(e)}}}function we(l){let e,r,a=l[0].title+"",t,i,n;function o(c,f){return c[0].isAllDay?be:ve}let s=o(l),u=s(l);return{c(){e=$("div"),r=$("span"),t=b(a),i=V(),n=$("span"),u.c(),this.h()},l(c){e=D(c,"DIV",{class:!0});var f=T(e);r=D(f,"SPAN",{class:!0});var m=T(r);t=w(m,a),m.forEach(h),i=q(f),n=D(f,"SPAN",{class:!0});var g=T(n);u.l(g),g.forEach(h),f.forEach(h),this.h()},h(){W(r,"class","text-lg text-bol"),W(n,"class","text-sm"),W(e,"class","flex justify-between items-end mb-2")},m(c,f){E(c,e,f),_(e,r),_(r,t),_(e,i),_(e,n),u.m(n,null)},p(c,f){f&1&&a!==(a=c[0].title+"")&&I(t,a),s===(s=o(c))&&u?u.p(c,f):(u.d(1),u=s(c),u&&(u.c(),u.m(n,null)))},d(c){c&&h(e),u.d()}}}function ke(l){let e,r;return e=new de({props:{focused:!0,$$slots:{default:[we]},$$scope:{ctx:l}}}),e.$on("click",l[3]),{c(){B(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,t){R(e,a,t),r=!0},p(a,[t]){const i={};t&23&&(i.$$scope={dirty:t,ctx:a}),e.$set(i)},i(a){r||(k(e.$$.fragment,a),r=!0)},o(a){A(e.$$.fragment,a),r=!1},d(a){j(e,a)}}}function $e(l,e,r){let a,t,{activity:i}=e;function n(o){pe.call(this,l,o)}return l.$$set=o=>{"activity"in o&&r(0,i=o.activity)},l.$$.update=()=>{var o,s;l.$$.dirty&1&&r(2,a=(o=i.time)==null?void 0:o.from.toString({smallestUnit:"minute"})),l.$$.dirty&1&&r(1,t=(s=i.time)==null?void 0:s.to.toString({smallestUnit:"minute"}))},[i,t,a,n]}class De extends U{constructor(e){super(),Z(this,e,$e,ke,J,{activity:0})}}function se(l){let e,r,a=l[0].minimumTemperature+"",t,i,n=l[0].maximumTemperature+"",o,s,u,c,f,m;return{c(){e=$("div"),r=$("span"),t=b(a),i=b("-"),o=b(n),s=b("\xB0C"),u=V(),c=$("div"),f=$("div"),m=b("\u{1F324}"),this.h()},l(g){e=D(g,"DIV",{class:!0});var p=T(e);r=D(p,"SPAN",{class:!0});var y=T(r);t=w(y,a),i=w(y,"-"),o=w(y,n),s=w(y,"\xB0C"),y.forEach(h),u=q(p),c=D(p,"DIV",{class:!0});var C=T(c);f=D(C,"DIV",{class:!0});var S=T(f);m=w(S,"\u{1F324}"),S.forEach(h),C.forEach(h),p.forEach(h),this.h()},h(){W(r,"class","text-lg"),W(f,"class","absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"),W(c,"class","absolute h-6 aspect-square rounded-full bg-blue-700 -right-1 -top-1"),W(e,"class","bg-blue-200 rounded-md min-h-4 p-3 select-none relative")},m(g,p){E(g,e,p),_(e,r),_(r,t),_(r,i),_(r,o),_(r,s),_(e,u),_(e,c),_(c,f),_(f,m)},p(g,p){p&1&&a!==(a=g[0].minimumTemperature+"")&&I(t,a),p&1&&n!==(n=g[0].maximumTemperature+"")&&I(o,n)},d(g){g&&h(e)}}}function Te(l){let e,r=l[0]&&se(l);return{c(){r&&r.c(),e=L()},l(a){r&&r.l(a),e=L()},m(a,t){r&&r.m(a,t),E(a,e,t)},p(a,[t]){a[0]?r?r.p(a,t):(r=se(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:Y,o:Y,d(a){r&&r.d(a),a&&h(e)}}}function We(l,e,r){let{day:a}=e,{weather:t}=e,i;return z(()=>{if(K.Now.plainDateISO().until(a).days<0)return;const s=t.getWeatherDataFor(a);!s||r(0,i=s)}),l.$$set=n=>{"day"in n&&r(1,a=n.day),"weather"in n&&r(2,t=n.weather)},[i,a,t]}class Ae extends U{constructor(e){super(),Z(this,e,We,Te,J,{day:1,weather:2})}}function oe(l,e,r){const a=l.slice();return a[9]=e[r],a}function ie(l,e,r){const a=l.slice();return a[12]=e[r],a}function Ee(l){let e,r;function a(){return l[8](l[9])}return e=new de({props:{filled:!0,$$slots:{default:[Oe]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){B(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,i){R(e,t,i),r=!0},p(t,i){l=t;const n={};i&32768&&(n.$$scope={dirty:i,ctx:l}),e.$set(n)},i(t){r||(k(e.$$.fragment,t),r=!0)},o(t){A(e.$$.fragment,t),r=!1},d(t){j(e,t)}}}function Se(l){let e,r,a=l[2][l[9].toString()],t=[];for(let n=0;n<a.length;n+=1)t[n]=ce(ie(l,a,n));const i=n=>A(t[n],1,1,()=>{t[n]=null});return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=L()},l(n){for(let o=0;o<t.length;o+=1)t[o].l(n);e=L()},m(n,o){for(let s=0;s<t.length;s+=1)t[s].m(n,o);E(n,e,o),r=!0},p(n,o){if(o&6){a=n[2][n[9].toString()];let s;for(s=0;s<a.length;s+=1){const u=ie(n,a,s);t[s]?(t[s].p(u,o),k(t[s],1)):(t[s]=ce(u),t[s].c(),k(t[s],1),t[s].m(e.parentNode,e))}for(H(),s=a.length;s<t.length;s+=1)i(s);Q()}},i(n){if(!r){for(let o=0;o<a.length;o+=1)k(t[o]);r=!0}},o(n){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)A(t[o]);r=!1},d(n){me(t,n),n&&h(e)}}}function Oe(l){let e;return{c(){e=b("Create event")},l(r){e=w(r,"Create event")},m(r,a){E(r,e,a)},d(r){r&&h(e)}}}function ce(l){let e,r;function a(){return l[7](l[12])}return e=new De({props:{activity:l[12]}}),e.$on("click",a),{c(){B(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,i){R(e,t,i),r=!0},p(t,i){l=t;const n={};i&6&&(n.activity=l[12]),e.$set(n)},i(t){r||(k(e.$$.fragment,t),r=!0)},o(t){A(e.$$.fragment,t),r=!1},d(t){j(e,t)}}}function ue(l){let e,r,a,t=l[4][l[9].dayOfWeek-1]+"",i,n,o=ae.DateTimeFormat("gb-GB").format(l[9])+"",s,u,c,f,m,g,p,y,C,S;f=new Ae({props:{weather:l[0],day:l[9]}});const ee=[Se,Ee],O=[];function te(d,v){return v&6&&(g=null),g==null&&(g=d[9].toString()in d[2]),g?0:1}return p=te(l,-1),y=O[p]=ee[p](l),{c(){e=$("div"),r=$("div"),a=$("span"),i=b(t),n=V(),s=b(o),u=V(),c=$("div"),B(f.$$.fragment),m=V(),y.c(),C=V(),this.h()},l(d){e=D(d,"DIV",{class:!0});var v=T(e);r=D(v,"DIV",{class:!0});var F=T(r);a=D(F,"SPAN",{class:!0});var N=T(a);i=w(N,t),N.forEach(h),n=q(F),s=w(F,o),F.forEach(h),u=q(v),c=D(v,"DIV",{class:!0});var G=T(c);M(f.$$.fragment,G),m=q(G),y.l(G),G.forEach(h),C=q(v),v.forEach(h),this.h()},h(){W(a,"class","font-lg"),W(r,"class","py-2 svelte-9qm4p1"),re(r,"today",l[9].equals(l[3])),W(c,"class","flex flex-col gap-4 my-4"),W(e,"class","grow max-w-xs")},m(d,v){E(d,e,v),_(e,r),_(r,a),_(a,i),_(r,n),_(r,s),_(e,u),_(e,c),R(f,c,null),_(c,m),O[p].m(c,null),_(e,C),S=!0},p(d,v){(!S||v&2)&&t!==(t=d[4][d[9].dayOfWeek-1]+"")&&I(i,t),(!S||v&2)&&o!==(o=ae.DateTimeFormat("gb-GB").format(d[9])+"")&&I(s,o),v&10&&re(r,"today",d[9].equals(d[3]));const F={};v&1&&(F.weather=d[0]),v&2&&(F.day=d[9]),f.$set(F);let N=p;p=te(d,v),p===N?O[p].p(d,v):(H(),A(O[N],1,1,()=>{O[N]=null}),Q(),y=O[p],y?y.p(d,v):(y=O[p]=ee[p](d),y.c()),k(y,1),y.m(c,null))},i(d){S||(k(f.$$.fragment,d),k(y),S=!0)},o(d){A(f.$$.fragment,d),A(y),S=!1},d(d){d&&h(e),j(f),O[p].d()}}}function Fe(l){let e,r,a=l[1],t=[];for(let n=0;n<a.length;n+=1)t[n]=ue(oe(l,a,n));const i=n=>A(t[n],1,1,()=>{t[n]=null});return{c(){e=$("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=D(n,"DIV",{class:!0});var o=T(e);for(let s=0;s<t.length;s+=1)t[s].l(o);o.forEach(h),this.h()},h(){W(e,"class","m-4 flex gap-3 container mx-auto")},m(n,o){E(n,e,o);for(let s=0;s<t.length;s+=1)t[s].m(e,null);r=!0},p(n,[o]){if(o&63){a=n[1];let s;for(s=0;s<a.length;s+=1){const u=oe(n,a,s);t[s]?(t[s].p(u,o),k(t[s],1)):(t[s]=ue(u),t[s].c(),k(t[s],1),t[s].m(e,null))}for(H(),s=a.length;s<t.length;s+=1)i(s);Q()}},i(n){if(!r){for(let o=0;o<a.length;o+=1)k(t[o]);r=!0}},o(n){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)A(t[o]);r=!1},d(n){n&&h(e),me(t,n)}}}function Ie(l,e,r){let a;_e(l,ge,m=>r(2,a=m));let{startOfWeek:t}=e,{weather:i}=e;const n=K.Now.plainDateISO(ye),o=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];let s=[];function u(m){le.set({editMode:!1,activity:ne.new(m)})}z(()=>{ne.init()});const c=m=>le.edit(m),f=m=>u(m);return l.$$set=m=>{"startOfWeek"in m&&r(6,t=m.startOfWeek),"weather"in m&&r(0,i=m.weather)},l.$$.update=()=>{l.$$.dirty&64&&t&&r(1,s=o.map((m,g)=>t.add({days:g})))},[i,s,a,n,o,u,t,c,f]}class Ce extends U{constructor(e){super(),Z(this,e,Ie,Fe,J,{startOfWeek:6,weather:0})}}function he(l){if(l.length==0)throw Error(`Array is empty for: ${l}`);return l[0]["@value"]}function P(l){return parseInt(""+he(l))}function fe(l){return parseFloat(""+he(l))}class X{constructor(e,r,a,t,i,n){this.id=e,this.clouds=r,this.minimumTemperature=a,this.maximumTemperature=t,this.feelsLikeTemperature=i,this.temperature=n}get temporalDate(){const e=new Date(this.id*1e3);return new K.PlainDate(e.getFullYear(),e.getMonth()+1,e.getDate())}static fromRDF(e){const r=P(e["http://schema.org/identifier"]),a=P(e["ex:clouds"]),t=P(e["ex:minimumTemperature"]),i=P(e["ex:maximumTemperature"]),n=P(e["https://uri.fiware.org/ns/data-models#feelsLikeTemperature"]),o=P(e["https://uri.fiware.org/ns/data-models#temperature"]);return new X(r,a,t,i,n,o)}}class x{constructor(e,r){this.geoCoordinates=e,this.days=r}getWeatherDataFor(e){return this.days.find(r=>r.temporalDate.equals(e))}static fromRDF(e){const r={longitude:0,latitude:0},a=[];return e.forEach(t=>{const i=t["@type"][0];if(i=="https://uri.fiware.org/ns/data-models#WeatherForcecast"){const n=X.fromRDF(t);a.push(n)}if(i=="http://schema.org/GeoCoordinates"){const n=t;r.latitude=fe(n["http://schema.org/latitude"]),r.longitude=fe(n["http://schema.org/longitude"])}}),new x(r,a)}}function Ne(l){let e,r;return e=new Ce({props:{startOfWeek:l[0],weather:l[1]}}),{c(){B(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,t){R(e,a,t),r=!0},p(a,[t]){const i={};t&1&&(i.startOfWeek=a[0]),t&2&&(i.weather=a[1]),e.$set(i)},i(a){r||(k(e.$$.fragment,a),r=!0)},o(a){A(e.$$.fragment,a),r=!1},d(a){j(e,a)}}}const Ge=async({fetch:l})=>{const r=await l("https://idlab.osoc.be/weather/Brussels");return{status:r.status,props:{rdfWeatherArray:r.ok&&await r.json()}}};function Pe(l,e,r){let{rdfWeatherArray:a}=e;const t=K.Now.plainDateISO();let i,n;function o(){return r(0,i=t.subtract({days:t.dayOfWeek-1})),i}return z(async()=>{r(1,n=x.fromRDF(a)),o()}),l.$$set=s=>{"rdfWeatherArray"in s&&r(2,a=s.rdfWeatherArray)},[i,n,a]}class Le extends U{constructor(e){super(),Z(this,e,Pe,Ne,J,{rdfWeatherArray:2})}}export{Le as default,Ge as load};
