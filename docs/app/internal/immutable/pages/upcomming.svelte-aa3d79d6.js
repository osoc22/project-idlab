import{S as Z,i as J,s as K,w as B,x as M,y as R,q as k,o as A,B as j,e as $,t as b,k as V,c as D,a as T,h as w,d,m as q,b as W,g as E,K as _,j as I,M as _e,E as z,l as U,v as H,J as ae,n as Q,p as X,Z as he,$ as ge}from"../chunks/index-d2039bb9.js";import{t as Y,i as ne,e as ye,T as ve,P as le,b as se}from"../chunks/calendarEvents-5b5396b8.js";import{B as de}from"../chunks/Button-f4d5fd62.js";import"../chunks/preload-helper-ed63bd61.js";import"../chunks/userStore-1328782f.js";import"../chunks/index-ae43794d.js";function be(l){let e,r,a;return{c(){e=b(l[2]),r=b("-"),a=b(l[1])},l(t){e=w(t,l[2]),r=w(t,"-"),a=w(t,l[1])},m(t,i){E(t,e,i),E(t,r,i),E(t,a,i)},p(t,i){i&4&&I(e,t[2]),i&2&&I(a,t[1])},d(t){t&&d(e),t&&d(r),t&&d(a)}}}function we(l){let e;return{c(){e=b("All day")},l(r){e=w(r,"All day")},m(r,a){E(r,e,a)},p:z,d(r){r&&d(e)}}}function ke(l){let e,r,a=l[0].title+"",t,i,n;function o(c,f){return c[0].isAllDay?we:be}let s=o(l),u=s(l);return{c(){e=$("div"),r=$("span"),t=b(a),i=V(),n=$("span"),u.c(),this.h()},l(c){e=D(c,"DIV",{class:!0});var f=T(e);r=D(f,"SPAN",{class:!0});var m=T(r);t=w(m,a),m.forEach(d),i=q(f),n=D(f,"SPAN",{class:!0});var g=T(n);u.l(g),g.forEach(d),f.forEach(d),this.h()},h(){W(r,"class","text-lg text-bol"),W(n,"class","text-sm"),W(e,"class","flex justify-between items-end mb-2")},m(c,f){E(c,e,f),_(e,r),_(r,t),_(e,i),_(e,n),u.m(n,null)},p(c,f){f&1&&a!==(a=c[0].title+"")&&I(t,a),s===(s=o(c))&&u?u.p(c,f):(u.d(1),u=s(c),u&&(u.c(),u.m(n,null)))},d(c){c&&d(e),u.d()}}}function $e(l){let e,r;return e=new de({props:{focused:!0,$$slots:{default:[ke]},$$scope:{ctx:l}}}),e.$on("click",l[3]),{c(){B(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,t){R(e,a,t),r=!0},p(a,[t]){const i={};t&23&&(i.$$scope={dirty:t,ctx:a}),e.$set(i)},i(a){r||(k(e.$$.fragment,a),r=!0)},o(a){A(e.$$.fragment,a),r=!1},d(a){j(e,a)}}}function De(l,e,r){let a,t,{activity:i}=e;function n(o){_e.call(this,l,o)}return l.$$set=o=>{"activity"in o&&r(0,i=o.activity)},l.$$.update=()=>{var o,s;l.$$.dirty&1&&r(2,a=(o=i.time)==null?void 0:o.from.toString({smallestUnit:"minute"})),l.$$.dirty&1&&r(1,t=(s=i.time)==null?void 0:s.to.toString({smallestUnit:"minute"}))},[i,t,a,n]}class Te extends Z{constructor(e){super(),J(this,e,De,$e,K,{activity:0})}}function oe(l){let e,r,a=l[0].minimumTemperature+"",t,i,n=l[0].maximumTemperature+"",o,s,u,c,f,m;return{c(){e=$("div"),r=$("span"),t=b(a),i=b("-"),o=b(n),s=b("\xB0C"),u=V(),c=$("div"),f=$("div"),m=b("\u{1F324}"),this.h()},l(g){e=D(g,"DIV",{class:!0});var p=T(e);r=D(p,"SPAN",{class:!0});var y=T(r);t=w(y,a),i=w(y,"-"),o=w(y,n),s=w(y,"\xB0C"),y.forEach(d),u=q(p),c=D(p,"DIV",{class:!0});var C=T(c);f=D(C,"DIV",{class:!0});var S=T(f);m=w(S,"\u{1F324}"),S.forEach(d),C.forEach(d),p.forEach(d),this.h()},h(){W(r,"class","text-lg"),W(f,"class","absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"),W(c,"class","absolute h-6 aspect-square rounded-full bg-blue-700 -right-1 -top-1"),W(e,"class","bg-blue-200 rounded-md min-h-4 p-3 select-none relative")},m(g,p){E(g,e,p),_(e,r),_(r,t),_(r,i),_(r,o),_(r,s),_(e,u),_(e,c),_(c,f),_(f,m)},p(g,p){p&1&&a!==(a=g[0].minimumTemperature+"")&&I(t,a),p&1&&n!==(n=g[0].maximumTemperature+"")&&I(o,n)},d(g){g&&d(e)}}}function We(l){let e,r=l[0]&&oe(l);return{c(){r&&r.c(),e=U()},l(a){r&&r.l(a),e=U()},m(a,t){r&&r.m(a,t),E(a,e,t)},p(a,[t]){a[0]?r?r.p(a,t):(r=oe(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:z,o:z,d(a){r&&r.d(a),a&&d(e)}}}function Ae(l,e,r){let{day:a}=e,{weather:t}=e,i;return H(()=>{if(Y.Now.plainDateISO().until(a).days<0)return;const s=t.getWeatherDataFor(a);!s||r(0,i=s)}),l.$$set=n=>{"day"in n&&r(1,a=n.day),"weather"in n&&r(2,t=n.weather)},[i,a,t]}class Ee extends Z{constructor(e){super(),J(this,e,Ae,We,K,{day:1,weather:2})}}function ie(l,e,r){const a=l.slice();return a[9]=e[r],a}function ce(l,e,r){const a=l.slice();return a[12]=e[r],a}function Se(l){let e,r;function a(){return l[8](l[9])}return e=new de({props:{filled:!0,$$slots:{default:[Fe]},$$scope:{ctx:l}}}),e.$on("click",a),{c(){B(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,i){R(e,t,i),r=!0},p(t,i){l=t;const n={};i&32768&&(n.$$scope={dirty:i,ctx:l}),e.$set(n)},i(t){r||(k(e.$$.fragment,t),r=!0)},o(t){A(e.$$.fragment,t),r=!1},d(t){j(e,t)}}}function Oe(l){let e,r,a=l[2][l[9].toString()],t=[];for(let n=0;n<a.length;n+=1)t[n]=ue(ce(l,a,n));const i=n=>A(t[n],1,1,()=>{t[n]=null});return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=U()},l(n){for(let o=0;o<t.length;o+=1)t[o].l(n);e=U()},m(n,o){for(let s=0;s<t.length;s+=1)t[s].m(n,o);E(n,e,o),r=!0},p(n,o){if(o&6){a=n[2][n[9].toString()];let s;for(s=0;s<a.length;s+=1){const u=ce(n,a,s);t[s]?(t[s].p(u,o),k(t[s],1)):(t[s]=ue(u),t[s].c(),k(t[s],1),t[s].m(e.parentNode,e))}for(Q(),s=a.length;s<t.length;s+=1)i(s);X()}},i(n){if(!r){for(let o=0;o<a.length;o+=1)k(t[o]);r=!0}},o(n){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)A(t[o]);r=!1},d(n){he(t,n),n&&d(e)}}}function Fe(l){let e;return{c(){e=b("Create event")},l(r){e=w(r,"Create event")},m(r,a){E(r,e,a)},d(r){r&&d(e)}}}function ue(l){let e,r;function a(){return l[7](l[12])}return e=new Te({props:{activity:l[12]}}),e.$on("click",a),{c(){B(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,i){R(e,t,i),r=!0},p(t,i){l=t;const n={};i&6&&(n.activity=l[12]),e.$set(n)},i(t){r||(k(e.$$.fragment,t),r=!0)},o(t){A(e.$$.fragment,t),r=!1},d(t){j(e,t)}}}function fe(l){let e,r,a,t=l[4][l[9].dayOfWeek-1]+"",i,n,o=ne.DateTimeFormat("gb-GB").format(l[9])+"",s,u,c,f,m,g,p,y,C,S;f=new Ee({props:{weather:l[0],day:l[9]}});const te=[Oe,Se],O=[];function re(h,v){return v&6&&(g=null),g==null&&(g=h[9].toString()in h[2]),g?0:1}return p=re(l,-1),y=O[p]=te[p](l),{c(){e=$("div"),r=$("div"),a=$("span"),i=b(t),n=V(),s=b(o),u=V(),c=$("div"),B(f.$$.fragment),m=V(),y.c(),C=V(),this.h()},l(h){e=D(h,"DIV",{class:!0});var v=T(e);r=D(v,"DIV",{class:!0});var F=T(r);a=D(F,"SPAN",{class:!0});var N=T(a);i=w(N,t),N.forEach(d),n=q(F),s=w(F,o),F.forEach(d),u=q(v),c=D(v,"DIV",{class:!0});var G=T(c);M(f.$$.fragment,G),m=q(G),y.l(G),G.forEach(d),C=q(v),v.forEach(d),this.h()},h(){W(a,"class","font-lg"),W(r,"class","py-2 svelte-9qm4p1"),ae(r,"today",l[9].equals(l[3])),W(c,"class","flex flex-col gap-4 my-4"),W(e,"class","grow max-w-xs")},m(h,v){E(h,e,v),_(e,r),_(r,a),_(a,i),_(r,n),_(r,s),_(e,u),_(e,c),R(f,c,null),_(c,m),O[p].m(c,null),_(e,C),S=!0},p(h,v){(!S||v&2)&&t!==(t=h[4][h[9].dayOfWeek-1]+"")&&I(i,t),(!S||v&2)&&o!==(o=ne.DateTimeFormat("gb-GB").format(h[9])+"")&&I(s,o),v&10&&ae(r,"today",h[9].equals(h[3]));const F={};v&1&&(F.weather=h[0]),v&2&&(F.day=h[9]),f.$set(F);let N=p;p=re(h,v),p===N?O[p].p(h,v):(Q(),A(O[N],1,1,()=>{O[N]=null}),X(),y=O[p],y?y.p(h,v):(y=O[p]=te[p](h),y.c()),k(y,1),y.m(c,null))},i(h){S||(k(f.$$.fragment,h),k(y),S=!0)},o(h){A(f.$$.fragment,h),A(y),S=!1},d(h){h&&d(e),j(f),O[p].d()}}}function Ie(l){let e,r,a=l[1],t=[];for(let n=0;n<a.length;n+=1)t[n]=fe(ie(l,a,n));const i=n=>A(t[n],1,1,()=>{t[n]=null});return{c(){e=$("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=D(n,"DIV",{class:!0});var o=T(e);for(let s=0;s<t.length;s+=1)t[s].l(o);o.forEach(d),this.h()},h(){W(e,"class","m-4 flex gap-3 container mx-auto")},m(n,o){E(n,e,o);for(let s=0;s<t.length;s+=1)t[s].m(e,null);r=!0},p(n,[o]){if(o&63){a=n[1];let s;for(s=0;s<a.length;s+=1){const u=ie(n,a,s);t[s]?(t[s].p(u,o),k(t[s],1)):(t[s]=fe(u),t[s].c(),k(t[s],1),t[s].m(e,null))}for(Q(),s=a.length;s<t.length;s+=1)i(s);X()}},i(n){if(!r){for(let o=0;o<a.length;o+=1)k(t[o]);r=!0}},o(n){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)A(t[o]);r=!1},d(n){n&&d(e),he(t,n)}}}function Ce(l,e,r){let a;ge(l,ye,m=>r(2,a=m));let{startOfWeek:t}=e,{weather:i}=e;const n=Y.Now.plainDateISO(ve),o=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];let s=[];function u(m){se.set({editMode:!1,activity:le.new(m)})}H(()=>{le.init()});const c=m=>se.edit(m),f=m=>u(m);return l.$$set=m=>{"startOfWeek"in m&&r(6,t=m.startOfWeek),"weather"in m&&r(0,i=m.weather)},l.$$.update=()=>{l.$$.dirty&64&&t&&r(1,s=o.map((m,g)=>t.add({days:g})))},[i,s,a,n,o,u,t,c,f]}class Ne extends Z{constructor(e){super(),J(this,e,Ce,Ie,K,{startOfWeek:6,weather:0})}}function pe(l){if(l.length==0)throw Error(`Array is empty for: ${l}`);return l[0]["@value"]}function P(l){return parseInt(""+pe(l))}function me(l){return parseFloat(""+pe(l))}class x{constructor(e,r,a,t,i,n){this.id=e,this.clouds=r,this.minimumTemperature=a,this.maximumTemperature=t,this.feelsLikeTemperature=i,this.temperature=n}get temporalDate(){const e=new Date(this.id*1e3);return new Y.PlainDate(e.getFullYear(),e.getMonth()+1,e.getDate())}static fromRDF(e){const r=P(e["http://schema.org/identifier"]),a=P(e["ex:clouds"]),t=P(e["ex:minimumTemperature"]),i=P(e["ex:maximumTemperature"]),n=P(e["https://uri.fiware.org/ns/data-models#feelsLikeTemperature"]),o=P(e["https://uri.fiware.org/ns/data-models#temperature"]);return new x(r,a,t,i,n,o)}}class ee{constructor(e,r){this.geoCoordinates=e,this.days=r}getWeatherDataFor(e){return this.days.find(r=>r.temporalDate.equals(e))}static fromRDF(e){const r={longitude:0,latitude:0},a=[];return e.forEach(t=>{const i=t["@type"][0];if(i=="https://uri.fiware.org/ns/data-models#WeatherForcecast"){const n=x.fromRDF(t);a.push(n)}if(i=="http://schema.org/GeoCoordinates"){const n=t;r.latitude=me(n["http://schema.org/latitude"]),r.longitude=me(n["http://schema.org/longitude"])}}),new ee(r,a)}}function Pe(l){let e,r;return e=new Ne({props:{startOfWeek:l[0],weather:l[1]}}),{c(){B(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,t){R(e,a,t),r=!0},p(a,[t]){const i={};t&1&&(i.startOfWeek=a[0]),t&2&&(i.weather=a[1]),e.$set(i)},i(a){r||(k(e.$$.fragment,a),r=!0)},o(a){A(e.$$.fragment,a),r=!1},d(a){j(e,a)}}}let L;const Le=async({fetch:l})=>{if(L)return L;const r=await l("https://idlab.osoc.be/weather/Brussels");return L={status:r.status,props:{rdfWeatherArray:r.ok&&await r.json()}},L};function Ve(l,e,r){let{rdfWeatherArray:a=[]}=e;const t=Y.Now.plainDateISO();let i,n;function o(){return r(0,i=t.subtract({days:t.dayOfWeek-1})),i}return H(async()=>{r(1,n=ee.fromRDF(a)),o()}),l.$$set=s=>{"rdfWeatherArray"in s&&r(2,a=s.rdfWeatherArray)},[i,n,a]}class Ue extends Z{constructor(e){super(),J(this,e,Ve,Pe,K,{rdfWeatherArray:2})}}export{Ue as default,Le as load};
