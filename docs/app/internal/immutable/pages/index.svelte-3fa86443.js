import{S as Ps,i as Ns,s as Os,I as Ag,e as $t,c as Bt,a as Nn,d as Ye,b as Tt,N as ud,g as Nt,O as vs,J as xg,K as Ig,L as Rg,q as _t,o as Dt,P as $d,w as ii,x as oi,f as ty,y as si,B as ai,t as qt,k as Rn,h as Vt,m as kn,M as We,j as so,Q as Fl,G as $_,l as Io,n as _a,p as wa,R as gp,T as LE,U as UE,E as ld,v as B_,V as H_}from"../chunks/index-c44973d7.js";import{d as jE,w as K_,_ as $E}from"../chunks/preload-helper-6e9beaf0.js";function BE(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function HE(t){let e,n,r,i;const o=t[2].default,s=Ag(o,t,t[1],null);return{c(){e=$t("div"),s&&s.c(),this.h()},l(a){e=Bt(a,"DIV",{class:!0});var c=Nn(e);s&&s.l(c),c.forEach(Ye),this.h()},h(){Tt(e,"class","button svelte-7olpod"),ud(e,"filled",t[0])},m(a,c){Nt(a,e,c),s&&s.m(e,null),n=!0,r||(i=vs(e,"click",t[3]),r=!0)},p(a,[c]){s&&s.p&&(!n||c&2)&&xg(s,o,a,a[1],n?Rg(o,a[1],c,null):Ig(a[1]),null),c&1&&ud(e,"filled",a[0])},i(a){n||(_t(s,a),n=!0)},o(a){Dt(s,a),n=!1},d(a){a&&Ye(e),s&&s.d(a),r=!1,i()}}}function KE(t,e,n){let{$$slots:r={},$$scope:i}=e,{filled:o=!1}=e;function s(a){$d.call(this,t,a)}return t.$$set=a=>{"filled"in a&&n(0,o=a.filled),"$$scope"in a&&n(1,i=a.$$scope)},[o,i,r,s]}class is extends Ps{constructor(e){super(),Ns(this,e,KE,HE,Os,{filled:0})}}class T extends Array{constructor(e,n){if(super(e),this.sign=n,Object.setPrototypeOf(this,T.prototype),e>T.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var n=Math.floor,r=Number.isFinite;if(typeof e=="number"){if(e===0)return T.__zero();if(T.__isOneDigitInt(e))return 0>e?T.__oneDigit(-e,!0):T.__oneDigit(e,!1);if(!r(e)||n(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return T.__fromDouble(e)}if(typeof e=="string"){const i=T.__fromString(e);if(i===null)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return i}if(typeof e=="boolean")return e===!0?T.__oneDigit(1,!1):T.__zero();if(typeof e=="object"){if(e.constructor===T)return e;const i=T.__toPrimitive(e);return T.BigInt(i)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const n of this)e.push((n&&(n>>>0).toString(16))+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(e&e-1)==0?T.__toStringBasePowerOfTwo(this,e):T.__toStringGeneric(this,e,!1)}valueOf(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}static toNumber(e){const n=e.length;if(n===0)return 0;if(n===1){const b=e.__unsignedDigit(0);return e.sign?-b:b}const r=e.__digit(n-1),i=T.__clz30(r),o=30*n-i;if(1024<o)return e.sign?-1/0:1/0;let s=o-1,a=r,c=n-1;const u=i+3;let l=u===32?0:a<<u;l>>>=12;const d=u-12;let p=12<=u?0:a<<20+u,g=20+u;for(0<d&&0<c&&(c--,a=e.__digit(c),l|=a>>>30-d,p=a<<d+2,g=d+2);0<g&&0<c;)c--,a=e.__digit(c),p|=30<=g?a<<g-30:a>>>30-g,g-=30;const y=T.__decideRounding(e,g,c,a);if((y===1||y===0&&(1&p)==1)&&(p=p+1>>>0,p===0&&(l++,l>>>20!=0&&(l=0,s++,1023<s))))return e.sign?-1/0:1/0;const w=e.sign?-2147483648:0;return s=s+1023<<20,T.__kBitConversionInts[1]=w|s|l,T.__kBitConversionInts[0]=p,T.__kBitConversionDouble[0]}static unaryMinus(e){if(e.length===0)return e;const n=e.__copy();return n.sign=!e.sign,n}static bitwiseNot(e){return e.sign?T.__absoluteSubOne(e).__trim():T.__absoluteAddOne(e,!0)}static exponentiate(e,n){if(n.sign)throw new RangeError("Exponent must be positive");if(n.length===0)return T.__oneDigit(1,!1);if(e.length===0)return e;if(e.length===1&&e.__digit(0)===1)return e.sign&&(1&n.__digit(0))==0?T.unaryMinus(e):e;if(1<n.length)throw new RangeError("BigInt too big");let r=n.__unsignedDigit(0);if(r===1)return e;if(r>=T.__kMaxLengthBits)throw new RangeError("BigInt too big");if(e.length===1&&e.__digit(0)===2){const s=1+(0|r/30),a=e.sign&&(1&r)!=0,c=new T(s,a);c.__initializeDigits();const u=1<<r%30;return c.__setDigit(s-1,u),c}let i=null,o=e;for((1&r)!=0&&(i=e),r>>=1;r!==0;r>>=1)o=T.multiply(o,o),(1&r)!=0&&(i===null?i=o:i=T.multiply(i,o));return i}static multiply(e,n){if(e.length===0)return e;if(n.length===0)return n;let r=e.length+n.length;30<=e.__clzmsd()+n.__clzmsd()&&r--;const i=new T(r,e.sign!==n.sign);i.__initializeDigits();for(let o=0;o<e.length;o++)T.__multiplyAccumulate(n,e.__digit(o),i,o);return i.__trim()}static divide(e,n){if(n.length===0)throw new RangeError("Division by zero");if(0>T.__absoluteCompare(e,n))return T.__zero();const r=e.sign!==n.sign,i=n.__unsignedDigit(0);let o;if(n.length===1&&32767>=i){if(i===1)return r===e.sign?e:T.unaryMinus(e);o=T.__absoluteDivSmall(e,i,null)}else o=T.__absoluteDivLarge(e,n,!0,!1);return o.sign=r,o.__trim()}static remainder(e,n){if(n.length===0)throw new RangeError("Division by zero");if(0>T.__absoluteCompare(e,n))return e;const r=n.__unsignedDigit(0);if(n.length===1&&32767>=r){if(r===1)return T.__zero();const o=T.__absoluteModSmall(e,r);return o===0?T.__zero():T.__oneDigit(o,e.sign)}const i=T.__absoluteDivLarge(e,n,!1,!0);return i.sign=e.sign,i.__trim()}static add(e,n){const r=e.sign;return r===n.sign?T.__absoluteAdd(e,n,r):0<=T.__absoluteCompare(e,n)?T.__absoluteSub(e,n,r):T.__absoluteSub(n,e,!r)}static subtract(e,n){const r=e.sign;return r===n.sign?0<=T.__absoluteCompare(e,n)?T.__absoluteSub(e,n,r):T.__absoluteSub(n,e,!r):T.__absoluteAdd(e,n,r)}static leftShift(e,n){return n.length===0||e.length===0?e:n.sign?T.__rightShiftByAbsolute(e,n):T.__leftShiftByAbsolute(e,n)}static signedRightShift(e,n){return n.length===0||e.length===0?e:n.sign?T.__leftShiftByAbsolute(e,n):T.__rightShiftByAbsolute(e,n)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,n){return 0>T.__compareToBigInt(e,n)}static lessThanOrEqual(e,n){return 0>=T.__compareToBigInt(e,n)}static greaterThan(e,n){return 0<T.__compareToBigInt(e,n)}static greaterThanOrEqual(e,n){return 0<=T.__compareToBigInt(e,n)}static equal(e,n){if(e.sign!==n.sign||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e.__digit(r)!==n.__digit(r))return!1;return!0}static notEqual(e,n){return!T.equal(e,n)}static bitwiseAnd(e,n){var r=Math.max;if(!e.sign&&!n.sign)return T.__absoluteAnd(e,n).__trim();if(e.sign&&n.sign){const i=r(e.length,n.length)+1;let o=T.__absoluteSubOne(e,i);const s=T.__absoluteSubOne(n);return o=T.__absoluteOr(o,s,o),T.__absoluteAddOne(o,!0,o).__trim()}return e.sign&&([e,n]=[n,e]),T.__absoluteAndNot(e,T.__absoluteSubOne(n)).__trim()}static bitwiseXor(e,n){var r=Math.max;if(!e.sign&&!n.sign)return T.__absoluteXor(e,n).__trim();if(e.sign&&n.sign){const s=r(e.length,n.length),a=T.__absoluteSubOne(e,s),c=T.__absoluteSubOne(n);return T.__absoluteXor(a,c,a).__trim()}const i=r(e.length,n.length)+1;e.sign&&([e,n]=[n,e]);let o=T.__absoluteSubOne(n,i);return o=T.__absoluteXor(o,e,o),T.__absoluteAddOne(o,!0,o).__trim()}static bitwiseOr(e,n){var r=Math.max;const i=r(e.length,n.length);if(!e.sign&&!n.sign)return T.__absoluteOr(e,n).__trim();if(e.sign&&n.sign){let s=T.__absoluteSubOne(e,i);const a=T.__absoluteSubOne(n);return s=T.__absoluteAnd(s,a,s),T.__absoluteAddOne(s,!0,s).__trim()}e.sign&&([e,n]=[n,e]);let o=T.__absoluteSubOne(n,i);return o=T.__absoluteAndNot(o,e,o),T.__absoluteAddOne(o,!0,o).__trim()}static asIntN(e,n){var r=Math.floor;if(n.length===0)return n;if(e=r(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return T.__zero();if(e>=T.__kMaxLengthBits)return n;const i=0|(e+29)/30;if(n.length<i)return n;const o=n.__unsignedDigit(i-1),s=1<<(e-1)%30;if(n.length===i&&o<s)return n;if((o&s)!==s)return T.__truncateToNBits(e,n);if(!n.sign)return T.__truncateAndSubFromPowerOfTwo(e,n,!0);if((o&s-1)==0){for(let a=i-2;0<=a;a--)if(n.__digit(a)!==0)return T.__truncateAndSubFromPowerOfTwo(e,n,!1);return n.length===i&&o===s?n:T.__truncateToNBits(e,n)}return T.__truncateAndSubFromPowerOfTwo(e,n,!1)}static asUintN(e,n){var r=Math.floor;if(n.length===0)return n;if(e=r(e),0>e)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(e===0)return T.__zero();if(n.sign){if(e>T.__kMaxLengthBits)throw new RangeError("BigInt too big");return T.__truncateAndSubFromPowerOfTwo(e,n,!1)}if(e>=T.__kMaxLengthBits)return n;const i=0|(e+29)/30;if(n.length<i)return n;const o=e%30;return n.length==i&&(o===0||n.__digit(i-1)>>>o==0)?n:T.__truncateToNBits(e,n)}static ADD(e,n){if(e=T.__toPrimitive(e),n=T.__toPrimitive(n),typeof e=="string")return typeof n!="string"&&(n=n.toString()),e+n;if(typeof n=="string")return e.toString()+n;if(e=T.__toNumeric(e),n=T.__toNumeric(n),T.__isBigInt(e)&&T.__isBigInt(n))return T.add(e,n);if(typeof e=="number"&&typeof n=="number")return e+n;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,n){return T.__compare(e,n,0)}static LE(e,n){return T.__compare(e,n,1)}static GT(e,n){return T.__compare(e,n,2)}static GE(e,n){return T.__compare(e,n,3)}static EQ(e,n){for(;;){if(T.__isBigInt(e))return T.__isBigInt(n)?T.equal(e,n):T.EQ(n,e);if(typeof e=="number"){if(T.__isBigInt(n))return T.__equalToNumber(n,e);if(typeof n!="object")return e==n;n=T.__toPrimitive(n)}else if(typeof e=="string"){if(T.__isBigInt(n))return e=T.__fromString(e),e!==null&&T.equal(e,n);if(typeof n!="object")return e==n;n=T.__toPrimitive(n)}else if(typeof e=="boolean"){if(T.__isBigInt(n))return T.__equalToNumber(n,+e);if(typeof n!="object")return e==n;n=T.__toPrimitive(n)}else if(typeof e=="symbol"){if(T.__isBigInt(n))return!1;if(typeof n!="object")return e==n;n=T.__toPrimitive(n)}else if(typeof e=="object"){if(typeof n=="object"&&n.constructor!==T)return e==n;e=T.__toPrimitive(e)}else return e==n}}static NE(e,n){return!T.EQ(e,n)}static DataViewGetBigInt64(e,n,r=!1){return T.asIntN(64,T.DataViewGetBigUint64(e,n,r))}static DataViewGetBigUint64(e,n,r=!1){const[i,o]=r?[4,0]:[0,4],s=e.getUint32(n+i,r),a=e.getUint32(n+o,r),c=new T(3,!1);return c.__setDigit(0,1073741823&a),c.__setDigit(1,(268435455&s)<<2|a>>>30),c.__setDigit(2,s>>>28),c.__trim()}static DataViewSetBigInt64(e,n,r,i=!1){T.DataViewSetBigUint64(e,n,r,i)}static DataViewSetBigUint64(e,n,r,i=!1){r=T.asUintN(64,r);let o=0,s=0;if(0<r.length&&(s=r.__digit(0),1<r.length)){const u=r.__digit(1);s|=u<<30,o=u>>>2,2<r.length&&(o|=r.__digit(2)<<28)}const[a,c]=i?[4,0]:[0,4];e.setUint32(n+a,o,i),e.setUint32(n+c,s,i)}static __zero(){return new T(0,!1)}static __oneDigit(e,n){const r=new T(1,n);return r.__setDigit(0,e),r}__copy(){const e=new T(this.length,this.sign);for(let n=0;n<this.length;n++)e[n]=this[n];return e}__trim(){let e=this.length,n=this[e-1];for(;n===0;)e--,n=this[e-1],this.pop();return e===0&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,n,r,i){if(0<n)return-1;let o;if(0>n)o=-n-1;else{if(r===0)return-1;r--,i=e.__digit(r),o=29}let s=1<<o;if((i&s)==0)return-1;if(s-=1,(i&s)!=0)return 1;for(;0<r;)if(r--,e.__digit(r)!==0)return 1;return 0}static __fromDouble(e){T.__kBitConversionDouble[0]=e;const n=2047&T.__kBitConversionInts[1]>>>20,r=n-1023,i=(0|r/30)+1,o=new T(i,0>e);let s=1048575&T.__kBitConversionInts[1]|1048576,a=T.__kBitConversionInts[0];const c=20,u=r%30;let l,d=0;if(u<20){const p=c-u;d=p+32,l=s>>>p,s=s<<32-p|a>>>p,a<<=32-p}else if(u===20)d=32,l=s,s=a,a=0;else{const p=u-c;d=32-p,l=s<<p|a>>>32-p,s=a<<p,a=0}o.__setDigit(i-1,l);for(let p=i-2;0<=p;p--)0<d?(d-=30,l=s>>>2,s=s<<30|a>>>2,a<<=30):l=0,o.__setDigit(p,l);return o.__trim()}static __isWhitespace(e){return 13>=e&&9<=e||(159>=e?e==32:131071>=e?e==160||e==5760:196607>=e?(e&=131071,10>=e||e==40||e==41||e==47||e==95||e==4096):e==65279)}static __fromString(e,n=0){let r=0;const i=e.length;let o=0;if(o===i)return T.__zero();let s=e.charCodeAt(o);for(;T.__isWhitespace(s);){if(++o===i)return T.__zero();s=e.charCodeAt(o)}if(s===43){if(++o===i)return null;s=e.charCodeAt(o),r=1}else if(s===45){if(++o===i)return null;s=e.charCodeAt(o),r=-1}if(n===0){if(n=10,s===48){if(++o===i)return T.__zero();if(s=e.charCodeAt(o),s===88||s===120){if(n=16,++o===i)return null;s=e.charCodeAt(o)}else if(s===79||s===111){if(n=8,++o===i)return null;s=e.charCodeAt(o)}else if(s===66||s===98){if(n=2,++o===i)return null;s=e.charCodeAt(o)}}}else if(n===16&&s===48){if(++o===i)return T.__zero();if(s=e.charCodeAt(o),s===88||s===120){if(++o===i)return null;s=e.charCodeAt(o)}}if(r!=0&&n!==10)return null;for(;s===48;){if(++o===i)return T.__zero();s=e.charCodeAt(o)}const a=i-o;let c=T.__kMaxBitsPerChar[n],u=T.__kBitsPerCharTableMultiplier-1;if(a>1073741824/c)return null;const l=c*a+u>>>T.__kBitsPerCharTableShift,d=new T(0|(l+29)/30,!1),p=10>n?n:10,g=10<n?n-10:0;if((n&n-1)==0){c>>=T.__kBitsPerCharTableShift;const y=[],w=[];let b=!1;do{let E=0,S=0;for(;;){let R;if(s-48>>>0<p)R=s-48;else if((32|s)-97>>>0<g)R=(32|s)-87;else{b=!0;break}if(S+=c,E=E<<c|R,++o===i){b=!0;break}if(s=e.charCodeAt(o),30<S+c)break}y.push(E),w.push(S)}while(!b);T.__fillFromParts(d,y,w)}else{d.__initializeDigits();let y=!1,w=0;do{let b=0,E=1;for(;;){let R;if(s-48>>>0<p)R=s-48;else if((32|s)-97>>>0<g)R=(32|s)-87;else{y=!0;break}const F=E*n;if(1073741823<F)break;if(E=F,b=b*n+R,w++,++o===i){y=!0;break}s=e.charCodeAt(o)}u=30*T.__kBitsPerCharTableMultiplier-1;const S=0|(c*w+u>>>T.__kBitsPerCharTableShift)/30;d.__inplaceMultiplyAdd(E,b,S)}while(!y)}if(o!==i){if(!T.__isWhitespace(s))return null;for(o++;o<i;o++)if(s=e.charCodeAt(o),!T.__isWhitespace(s))return null}return d.sign=r==-1,d.__trim()}static __fillFromParts(e,n,r){let i=0,o=0,s=0;for(let a=n.length-1;0<=a;a--){const c=n[a],u=r[a];o|=c<<s,s+=u,s===30?(e.__setDigit(i++,o),s=0,o=0):30<s&&(e.__setDigit(i++,1073741823&o),s-=30,o=c>>>u-s)}if(o!==0){if(i>=e.length)throw new Error("implementation bug");e.__setDigit(i++,o)}for(;i<e.length;i++)e.__setDigit(i,0)}static __toStringBasePowerOfTwo(e,n){const r=e.length;let i=n-1;i=(85&i>>>1)+(85&i),i=(51&i>>>2)+(51&i),i=(15&i>>>4)+(15&i);const o=i,s=n-1,a=e.__digit(r-1),c=T.__clz30(a);let u=0|(30*r-c+o-1)/o;if(e.sign&&u++,268435456<u)throw new Error("string too long");const l=Array(u);let d=u-1,p=0,g=0;for(let w=0;w<r-1;w++){const b=e.__digit(w),E=(p|b<<g)&s;l[d--]=T.__kConversionChars[E];const S=o-g;for(p=b>>>S,g=30-S;g>=o;)l[d--]=T.__kConversionChars[p&s],p>>>=o,g-=o}const y=(p|a<<g)&s;for(l[d--]=T.__kConversionChars[y],p=a>>>o-g;p!==0;)l[d--]=T.__kConversionChars[p&s],p>>>=o;if(e.sign&&(l[d--]="-"),d!=-1)throw new Error("implementation bug");return l.join("")}static __toStringGeneric(e,n,r){const i=e.length;if(i===0)return"";if(i===1){let w=e.__unsignedDigit(0).toString(n);return r===!1&&e.sign&&(w="-"+w),w}const o=30*i-T.__clz30(e.__digit(i-1)),s=T.__kMaxBitsPerChar[n],a=s-1;let c=o*T.__kBitsPerCharTableMultiplier;c+=a-1,c=0|c/a;const u=c+1>>1,l=T.exponentiate(T.__oneDigit(n,!1),T.__oneDigit(u,!1));let d,p;const g=l.__unsignedDigit(0);if(l.length===1&&32767>=g){d=new T(e.length,!1),d.__initializeDigits();let w=0;for(let b=2*e.length-1;0<=b;b--){const E=w<<15|e.__halfDigit(b);d.__setHalfDigit(b,0|E/g),w=0|E%g}p=w.toString(n)}else{const w=T.__absoluteDivLarge(e,l,!0,!0);d=w.quotient;const b=w.remainder.__trim();p=T.__toStringGeneric(b,n,!0)}d.__trim();let y=T.__toStringGeneric(d,n,!0);for(;p.length<u;)p="0"+p;return r===!1&&e.sign&&(y="-"+y),y+p}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,n){const r=e.sign;if(r!==n.sign)return T.__unequalSign(r);const i=T.__absoluteCompare(e,n);return 0<i?T.__absoluteGreater(r):0>i?T.__absoluteLess(r):0}static __compareToNumber(e,n){if(T.__isOneDigitInt(n)){const r=e.sign,i=0>n;if(r!==i)return T.__unequalSign(r);if(e.length===0){if(i)throw new Error("implementation bug");return n===0?0:-1}if(1<e.length)return T.__absoluteGreater(r);const o=Math.abs(n),s=e.__unsignedDigit(0);return s>o?T.__absoluteGreater(r):s<o?T.__absoluteLess(r):0}return T.__compareToDouble(e,n)}static __compareToDouble(e,n){if(n!==n)return n;if(n===1/0)return-1;if(n===-1/0)return 1;const r=e.sign;if(r!==0>n)return T.__unequalSign(r);if(n===0)throw new Error("implementation bug: should be handled elsewhere");if(e.length===0)return-1;T.__kBitConversionDouble[0]=n;const i=2047&T.__kBitConversionInts[1]>>>20;if(i==2047)throw new Error("implementation bug: handled elsewhere");const o=i-1023;if(0>o)return T.__absoluteGreater(r);const s=e.length;let a=e.__digit(s-1);const c=T.__clz30(a),u=30*s-c,l=o+1;if(u<l)return T.__absoluteLess(r);if(u>l)return T.__absoluteGreater(r);let d=1048576|1048575&T.__kBitConversionInts[1],p=T.__kBitConversionInts[0];const g=20,y=29-c;if(y!==(0|(u-1)%30))throw new Error("implementation bug");let w,b=0;if(20>y){const E=g-y;b=E+32,w=d>>>E,d=d<<32-E|p>>>E,p<<=32-E}else if(y===20)b=32,w=d,d=p,p=0;else{const E=y-g;b=32-E,w=d<<E|p>>>32-E,d=p<<E,p=0}if(a>>>=0,w>>>=0,a>w)return T.__absoluteGreater(r);if(a<w)return T.__absoluteLess(r);for(let E=s-2;0<=E;E--){0<b?(b-=30,w=d>>>2,d=d<<30|p>>>2,p<<=30):w=0;const S=e.__unsignedDigit(E);if(S>w)return T.__absoluteGreater(r);if(S<w)return T.__absoluteLess(r)}if(d!==0||p!==0){if(b===0)throw new Error("implementation bug");return T.__absoluteLess(r)}return 0}static __equalToNumber(e,n){var r=Math.abs;return T.__isOneDigitInt(n)?n===0?e.length===0:e.length===1&&e.sign===0>n&&e.__unsignedDigit(0)===r(n):T.__compareToDouble(e,n)===0}static __comparisonResultToBool(e,n){return n===0?0>e:n===1?0>=e:n===2?0<e:n===3?0<=e:void 0}static __compare(e,n,r){if(e=T.__toPrimitive(e),n=T.__toPrimitive(n),typeof e=="string"&&typeof n=="string")switch(r){case 0:return e<n;case 1:return e<=n;case 2:return e>n;case 3:return e>=n}if(T.__isBigInt(e)&&typeof n=="string")return n=T.__fromString(n),n!==null&&T.__comparisonResultToBool(T.__compareToBigInt(e,n),r);if(typeof e=="string"&&T.__isBigInt(n))return e=T.__fromString(e),e!==null&&T.__comparisonResultToBool(T.__compareToBigInt(e,n),r);if(e=T.__toNumeric(e),n=T.__toNumeric(n),T.__isBigInt(e)){if(T.__isBigInt(n))return T.__comparisonResultToBool(T.__compareToBigInt(e,n),r);if(typeof n!="number")throw new Error("implementation bug");return T.__comparisonResultToBool(T.__compareToNumber(e,n),r)}if(typeof e!="number")throw new Error("implementation bug");if(T.__isBigInt(n))return T.__comparisonResultToBool(T.__compareToNumber(n,e),2^r);if(typeof n!="number")throw new Error("implementation bug");return r===0?e<n:r===1?e<=n:r===2?e>n:r===3?e>=n:void 0}__clzmsd(){return T.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,n,r){if(e.length<n.length)return T.__absoluteAdd(n,e,r);if(e.length===0)return e;if(n.length===0)return e.sign===r?e:T.unaryMinus(e);let i=e.length;(e.__clzmsd()===0||n.length===e.length&&n.__clzmsd()===0)&&i++;const o=new T(i,r);let s=0,a=0;for(;a<n.length;a++){const c=e.__digit(a)+n.__digit(a)+s;s=c>>>30,o.__setDigit(a,1073741823&c)}for(;a<e.length;a++){const c=e.__digit(a)+s;s=c>>>30,o.__setDigit(a,1073741823&c)}return a<o.length&&o.__setDigit(a,s),o.__trim()}static __absoluteSub(e,n,r){if(e.length===0)return e;if(n.length===0)return e.sign===r?e:T.unaryMinus(e);const i=new T(e.length,r);let o=0,s=0;for(;s<n.length;s++){const a=e.__digit(s)-n.__digit(s)-o;o=1&a>>>30,i.__setDigit(s,1073741823&a)}for(;s<e.length;s++){const a=e.__digit(s)-o;o=1&a>>>30,i.__setDigit(s,1073741823&a)}return i.__trim()}static __absoluteAddOne(e,n,r=null){const i=e.length;r===null?r=new T(i,n):r.sign=n;let o=1;for(let s=0;s<i;s++){const a=e.__digit(s)+o;o=a>>>30,r.__setDigit(s,1073741823&a)}return o!=0&&r.__setDigitGrow(i,1),r}static __absoluteSubOne(e,n){const r=e.length;n=n||r;const i=new T(n,!1);let o=1;for(let s=0;s<r;s++){const a=e.__digit(s)-o;o=1&a>>>30,i.__setDigit(s,1073741823&a)}if(o!=0)throw new Error("implementation bug");for(let s=r;s<n;s++)i.__setDigit(s,0);return i}static __absoluteAnd(e,n,r=null){let i=e.length,o=n.length,s=o;if(i<o){s=i;const u=e,l=i;e=n,i=o,n=u,o=l}let a=s;r===null?r=new T(a,!1):a=r.length;let c=0;for(;c<s;c++)r.__setDigit(c,e.__digit(c)&n.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteAndNot(e,n,r=null){const i=e.length,o=n.length;let s=o;i<o&&(s=i);let a=i;r===null?r=new T(a,!1):a=r.length;let c=0;for(;c<s;c++)r.__setDigit(c,e.__digit(c)&~n.__digit(c));for(;c<i;c++)r.__setDigit(c,e.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteOr(e,n,r=null){let i=e.length,o=n.length,s=o;if(i<o){s=i;const u=e,l=i;e=n,i=o,n=u,o=l}let a=i;r===null?r=new T(a,!1):a=r.length;let c=0;for(;c<s;c++)r.__setDigit(c,e.__digit(c)|n.__digit(c));for(;c<i;c++)r.__setDigit(c,e.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteXor(e,n,r=null){let i=e.length,o=n.length,s=o;if(i<o){s=i;const u=e,l=i;e=n,i=o,n=u,o=l}let a=i;r===null?r=new T(a,!1):a=r.length;let c=0;for(;c<s;c++)r.__setDigit(c,e.__digit(c)^n.__digit(c));for(;c<i;c++)r.__setDigit(c,e.__digit(c));for(;c<a;c++)r.__setDigit(c,0);return r}static __absoluteCompare(e,n){const r=e.length-n.length;if(r!=0)return r;let i=e.length-1;for(;0<=i&&e.__digit(i)===n.__digit(i);)i--;return 0>i?0:e.__unsignedDigit(i)>n.__unsignedDigit(i)?1:-1}static __multiplyAccumulate(e,n,r,i){if(n===0)return;const o=32767&n,s=n>>>15;let a=0,c=0;for(let u,l=0;l<e.length;l++,i++){u=r.__digit(i);const d=e.__digit(l),p=32767&d,g=d>>>15,y=T.__imul(p,o),w=T.__imul(p,s),b=T.__imul(g,o),E=T.__imul(g,s);u+=c+y+a,a=u>>>30,u&=1073741823,u+=((32767&w)<<15)+((32767&b)<<15),a+=u>>>30,c=E+(w>>>15)+(b>>>15),r.__setDigit(i,1073741823&u)}for(;a!=0||c!==0;i++){let u=r.__digit(i);u+=a+c,c=0,a=u>>>30,r.__setDigit(i,1073741823&u)}}static __internalMultiplyAdd(e,n,r,i,o){let s=r,a=0;for(let c=0;c<i;c++){const u=e.__digit(c),l=T.__imul(32767&u,n),d=T.__imul(u>>>15,n),p=l+((32767&d)<<15)+a+s;s=p>>>30,a=d>>>15,o.__setDigit(c,1073741823&p)}if(o.length>i)for(o.__setDigit(i++,s+a);i<o.length;)o.__setDigit(i++,0);else if(s+a!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,n,r){r>this.length&&(r=this.length);const i=32767&e,o=e>>>15;let s=0,a=n;for(let c=0;c<r;c++){const u=this.__digit(c),l=32767&u,d=u>>>15,p=T.__imul(l,i),g=T.__imul(l,o),y=T.__imul(d,i),w=T.__imul(d,o);let b=a+p+s;s=b>>>30,b&=1073741823,b+=((32767&g)<<15)+((32767&y)<<15),s+=b>>>30,a=w+(g>>>15)+(y>>>15),this.__setDigit(c,1073741823&b)}if(s!=0||a!==0)throw new Error("implementation bug")}static __absoluteDivSmall(e,n,r=null){r===null&&(r=new T(e.length,!1));let i=0;for(let o,s=2*e.length-1;0<=s;s-=2){o=(i<<15|e.__halfDigit(s))>>>0;const a=0|o/n;i=0|o%n,o=(i<<15|e.__halfDigit(s-1))>>>0;const c=0|o/n;i=0|o%n,r.__setDigit(s>>>1,a<<15|c)}return r}static __absoluteModSmall(e,n){let r=0;for(let i=2*e.length-1;0<=i;i--){const o=(r<<15|e.__halfDigit(i))>>>0;r=0|o%n}return r}static __absoluteDivLarge(e,n,r,i){const o=n.__halfDigitLength(),s=n.length,a=e.__halfDigitLength()-o;let c=null;r&&(c=new T(a+2>>>1,!1),c.__initializeDigits());const u=new T(o+2>>>1,!1);u.__initializeDigits();const l=T.__clz15(n.__halfDigit(o-1));0<l&&(n=T.__specialLeftShift(n,l,0));const d=T.__specialLeftShift(e,l,1),p=n.__halfDigit(o-1);let g=0;for(let y,w=a;0<=w;w--){y=32767;const b=d.__halfDigit(w+o);if(b!==p){const S=(b<<15|d.__halfDigit(w+o-1))>>>0;y=0|S/p;let R=0|S%p;const F=n.__halfDigit(o-2),M=d.__halfDigit(w+o-2);for(;T.__imul(y,F)>>>0>(R<<16|M)>>>0&&(y--,R+=p,!(32767<R)););}T.__internalMultiplyAdd(n,y,0,s,u);let E=d.__inplaceSub(u,w,o+1);E!==0&&(E=d.__inplaceAdd(n,w,o),d.__setHalfDigit(w+o,32767&d.__halfDigit(w+o)+E),y--),r&&(1&w?g=y<<15:c.__setDigit(w>>>1,g|y))}if(i)return d.__inplaceRightShift(l),r?{quotient:c,remainder:d}:d;if(r)return c;throw new Error("unreachable")}static __clz15(e){return T.__clz30(e)-15}__inplaceAdd(e,n,r){let i=0;for(let o=0;o<r;o++){const s=this.__halfDigit(n+o)+e.__halfDigit(o)+i;i=s>>>15,this.__setHalfDigit(n+o,32767&s)}return i}__inplaceSub(e,n,r){let i=0;if(1&n){n>>=1;let o=this.__digit(n),s=32767&o,a=0;for(;a<r-1>>>1;a++){const l=e.__digit(a),d=(o>>>15)-(32767&l)-i;i=1&d>>>15,this.__setDigit(n+a,(32767&d)<<15|32767&s),o=this.__digit(n+a+1),s=(32767&o)-(l>>>15)-i,i=1&s>>>15}const c=e.__digit(a),u=(o>>>15)-(32767&c)-i;if(i=1&u>>>15,this.__setDigit(n+a,(32767&u)<<15|32767&s),n+a+1>=this.length)throw new RangeError("out of bounds");(1&r)==0&&(o=this.__digit(n+a+1),s=(32767&o)-(c>>>15)-i,i=1&s>>>15,this.__setDigit(n+e.length,1073709056&o|32767&s))}else{n>>=1;let o=0;for(;o<e.length-1;o++){const l=this.__digit(n+o),d=e.__digit(o),p=(32767&l)-(32767&d)-i;i=1&p>>>15;const g=(l>>>15)-(d>>>15)-i;i=1&g>>>15,this.__setDigit(n+o,(32767&g)<<15|32767&p)}const s=this.__digit(n+o),a=e.__digit(o),c=(32767&s)-(32767&a)-i;i=1&c>>>15;let u=0;(1&r)==0&&(u=(s>>>15)-(a>>>15)-i,i=1&u>>>15),this.__setDigit(n+o,(32767&u)<<15|32767&c)}return i}__inplaceRightShift(e){if(e===0)return;let n=this.__digit(0)>>>e;const r=this.length-1;for(let i=0;i<r;i++){const o=this.__digit(i+1);this.__setDigit(i,1073741823&o<<30-e|n),n=o>>>e}this.__setDigit(r,n)}static __specialLeftShift(e,n,r){const i=e.length,o=new T(i+r,!1);if(n===0){for(let a=0;a<i;a++)o.__setDigit(a,e.__digit(a));return 0<r&&o.__setDigit(i,0),o}let s=0;for(let a=0;a<i;a++){const c=e.__digit(a);o.__setDigit(a,1073741823&c<<n|s),s=c>>>30-n}return 0<r&&o.__setDigit(i,s),o}static __leftShiftByAbsolute(e,n){const r=T.__toShiftAmount(n);if(0>r)throw new RangeError("BigInt too big");const i=0|r/30,o=r%30,s=e.length,a=o!==0&&e.__digit(s-1)>>>30-o!=0,c=s+i+(a?1:0),u=new T(c,e.sign);if(o===0){let l=0;for(;l<i;l++)u.__setDigit(l,0);for(;l<c;l++)u.__setDigit(l,e.__digit(l-i))}else{let l=0;for(let d=0;d<i;d++)u.__setDigit(d,0);for(let d=0;d<s;d++){const p=e.__digit(d);u.__setDigit(d+i,1073741823&p<<o|l),l=p>>>30-o}if(a)u.__setDigit(s+i,l);else if(l!==0)throw new Error("implementation bug")}return u.__trim()}static __rightShiftByAbsolute(e,n){const r=e.length,i=e.sign,o=T.__toShiftAmount(n);if(0>o)return T.__rightShiftByMaximum(i);const s=0|o/30,a=o%30;let c=r-s;if(0>=c)return T.__rightShiftByMaximum(i);let u=!1;if(i){if((e.__digit(s)&(1<<a)-1)!=0)u=!0;else for(let d=0;d<s;d++)if(e.__digit(d)!==0){u=!0;break}}u&&a===0&&~e.__digit(r-1)==0&&c++;let l=new T(c,i);if(a===0){l.__setDigit(c-1,0);for(let d=s;d<r;d++)l.__setDigit(d-s,e.__digit(d))}else{let d=e.__digit(s)>>>a;const p=r-s-1;for(let g=0;g<p;g++){const y=e.__digit(g+s+1);l.__setDigit(g,1073741823&y<<30-a|d),d=y>>>a}l.__setDigit(p,d)}return u&&(l=T.__absoluteAddOne(l,!0,l)),l.__trim()}static __rightShiftByMaximum(e){return e?T.__oneDigit(1,!0):T.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const n=e.__unsignedDigit(0);return n>T.__kMaxLengthBits?-1:n}static __toPrimitive(e,n="default"){if(typeof e!="object"||e.constructor===T)return e;if(typeof Symbol!="undefined"&&typeof Symbol.toPrimitive=="symbol"){const o=e[Symbol.toPrimitive];if(o){const s=o(n);if(typeof s!="object")return s;throw new TypeError("Cannot convert object to primitive value")}}const r=e.valueOf;if(r){const o=r.call(e);if(typeof o!="object")return o}const i=e.toString;if(i){const o=i.call(e);if(typeof o!="object")return o}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return T.__isBigInt(e)?e:+e}static __isBigInt(e){return typeof e=="object"&&e!==null&&e.constructor===T}static __truncateToNBits(e,n){const r=0|(e+29)/30,i=new T(r,n.sign),o=r-1;for(let a=0;a<o;a++)i.__setDigit(a,n.__digit(a));let s=n.__digit(o);if(e%30!=0){const a=32-e%30;s=s<<a>>>a}return i.__setDigit(o,s),i.__trim()}static __truncateAndSubFromPowerOfTwo(e,n,r){var i=Math.min;const o=0|(e+29)/30,s=new T(o,r);let a=0;const c=o-1;let u=0;for(const g=i(c,n.length);a<g;a++){const y=0-n.__digit(a)-u;u=1&y>>>30,s.__setDigit(a,1073741823&y)}for(;a<c;a++)s.__setDigit(a,0|1073741823&-u);let l=c<n.length?n.__digit(c):0;const d=e%30;let p;if(d==0)p=0-l-u,p&=1073741823;else{const g=32-d;l=l<<g>>>g;const y=1<<32-g;p=y-l-u,p&=y-1}return s.__setDigit(c,p),s.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,n){this[e]=0|n}__setDigitGrow(e,n){this[e]=0|n}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,n){const r=e>>>1,i=this.__digit(r),o=1&e?32767&i|n<<15:1073709056&i|32767&n;this.__setDigit(r,o)}static __digitPow(e,n){let r=1;for(;0<n;)1&n&&(r*=e),n>>>=1,e*=e;return r}static __isOneDigitInt(e){return(1073741823&e)===e}}T.__kMaxLength=33554432,T.__kMaxLengthBits=T.__kMaxLength<<5,T.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],T.__kBitsPerCharTableShift=5,T.__kBitsPerCharTableMultiplier=1<<T.__kBitsPerCharTableShift,T.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],T.__kBitConversionBuffer=new ArrayBuffer(8),T.__kBitConversionDouble=new Float64Array(T.__kBitConversionBuffer),T.__kBitConversionInts=new Int32Array(T.__kBitConversionBuffer),T.__clz30=Math.clz32?function(t){return Math.clz32(t)-2}:function(t){return t===0?30:0|29-(0|Math.log(t>>>0)/Math.LN2)},T.__imul=Math.imul||function(t,e){return 0|t*e};const mp={},WE={["Temporal.Duration"](t,e){const n=e.stylize(`${this[Symbol.toStringTag]} <${this}>`,"special");if(t<1)return n;const r=[];for(const i of["years","months","weeks","days","hours","minutes","seconds","milliseconds","microseconds","nanoseconds"])this[i]!==0&&r.push(`  ${i}: ${e.stylize(this[i],"number")}`);return n+` {
`+r.join(`,
`)+`
}`}};function qE(t,e){return e.stylize(`${this[Symbol.toStringTag]} <${this}>`,"special")}function Co(t,e){Object.defineProperty(t.prototype,Symbol.toStringTag,{value:e,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,Symbol.for("nodejs.util.inspect.custom"),{value:WE[e]||qE,writable:!1,enumerable:!1,configurable:!0});for(const n of Object.getOwnPropertyNames(t)){const r=Object.getOwnPropertyDescriptor(t,n);!r.configurable||!r.enumerable||(r.enumerable=!1,Object.defineProperty(t,n,r))}for(const n of Object.getOwnPropertyNames(t.prototype)){const r=Object.getOwnPropertyDescriptor(t.prototype,n);!r.configurable||!r.enumerable||(r.enumerable=!1,Object.defineProperty(t.prototype,n,r))}yp(e,t),yp(`${e}.prototype`,t.prototype)}function yp(t,e){const n=`%${t}%`;if(mp[n]!==void 0)throw new Error(`intrinsic ${t} already exists`);mp[n]=e}function Ce(t){return mp[t]}const De="slot-epochNanoSeconds",gs="slot-timezone-identifier",be="slot-year",Se="slot-month",Te="slot-day",Me="slot-hour",Le="slot-minute",Ue="slot-second",je="slot-millisecond",$e="slot-microsecond",Be="slot-nanosecond",ae="slot-calendar",W_="slot-date-brand",q_="slot-year-month-brand",V_="slot-month-day-brand",ur="slot-cached-instant",pt="slot-time-zone",mr="slot-years",$n="slot-months",Pr="slot-weeks",yr="slot-days",_r="slot-hours",wr="slot-minutes",vr="slot-seconds",br="slot-milliseconds",Er="slot-microseconds",Sr="slot-nanoseconds",bn="slot-calendar-identifier",G_=new WeakMap;function Po(t){G_.set(t,Object.create(null))}function kg(t){return G_.get(t)}function Kn(t,...e){if(!t||typeof t!="object")return!1;const n=kg(t);return!!n&&e.reduce((r,i)=>r&&i in n,!0)}function _(t,e){const n=kg(t)[e];if(n===void 0)throw new TypeError(`Missing internal slot ${e}`);return n}function Ze(t,e,n){kg(t)[e]=n}const bu=Array.prototype.includes,VE=Array.prototype.push,GE=globalThis.Intl.DateTimeFormat,zE=Array.prototype.sort,YE=Math.abs,JE=Math.floor,_p=Object.entries,ny=Object.keys,Zt={};class Bd{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: id is required");const n=Pe(e);if(!Q_(n))throw new RangeError(`invalid calendar identifier ${n}`);Po(this),Ze(this,bn,n),Object.defineProperty(this,"_repr_",{value:`${this[Symbol.toStringTag]} <${n}>`,writable:!1,enumerable:!1,configurable:!1})}get id(){if(!vn(this))throw new TypeError("invalid receiver");return Pe(this)}dateFromFields(e,n=void 0){if(!vn(this))throw new TypeError("invalid receiver");if(!Mt(e))throw new TypeError("invalid fields");const r=He(n);return Zt[_(this,bn)].dateFromFields(e,r,this)}yearMonthFromFields(e,n=void 0){if(!vn(this))throw new TypeError("invalid receiver");if(!Mt(e))throw new TypeError("invalid fields");const r=He(n);return Zt[_(this,bn)].yearMonthFromFields(e,r,this)}monthDayFromFields(e,n=void 0){if(!vn(this))throw new TypeError("invalid receiver");if(!Mt(e))throw new TypeError("invalid fields");const r=He(n);return Zt[_(this,bn)].monthDayFromFields(e,r,this)}fields(e){if(!vn(this))throw new TypeError("invalid receiver");const n=[],r=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(const i of e){if(typeof i!="string")throw new TypeError("invalid fields");if(!r.has(i))throw new RangeError(`invalid field name ${i}`);r.delete(i),VE.call(n,i)}return Zt[_(this,bn)].fields(n)}mergeFields(e,n){if(!vn(this))throw new TypeError("invalid receiver");return Zt[_(this,bn)].mergeFields(e,n)}dateAdd(e,n,r=void 0){if(!vn(this))throw new TypeError("invalid receiver");const i=Et(e),o=nc(n),s=He(r),a=Xn(s),{days:c}=tr(_(o,yr),_(o,_r),_(o,wr),_(o,vr),_(o,br),_(o,Er),_(o,Sr),"day");return Zt[_(this,bn)].dateAdd(i,_(o,mr),_(o,$n),_(o,Pr),c,a,this)}dateUntil(e,n,r=void 0){if(!vn(this))throw new TypeError("invalid receiver");const i=Et(e),o=Et(n),s=He(r),a=wi(s,"auto",["hour","minute","second","millisecond","microsecond","nanosecond"],"day"),{years:c,months:u,weeks:l,days:d}=Zt[_(this,bn)].dateUntil(i,o,a),p=Ce("%Temporal.Duration%");return new p(c,u,l,d,0,0,0,0,0,0)}year(e){let n=e;if(!vn(this))throw new TypeError("invalid receiver");return yt(n)||(n=Et(n)),Zt[_(this,bn)].year(n)}month(e){let n=e;if(!vn(this))throw new TypeError("invalid receiver");if(Gn(n))throw new TypeError("use monthCode on PlainMonthDay instead");return yt(n)||(n=Et(n)),Zt[_(this,bn)].month(n)}monthCode(e){let n=e;if(!vn(this))throw new TypeError("invalid receiver");return!yt(n)&&!Gn(n)&&(n=Et(n)),Zt[_(this,bn)].monthCode(n)}day(e){let n=e;if(!vn(this))throw new TypeError("invalid receiver");return Gn(n)||(n=Et(n)),Zt[_(this,bn)].day(n)}era(e){let n=e;if(!vn(this))throw new TypeError("invalid receiver");return yt(n)||(n=Et(n)),Zt[_(this,bn)].era(n)}eraYear(e){let n=e;if(!vn(this))throw new TypeError("invalid receiver");return yt(n)||(n=Et(n)),Zt[_(this,bn)].eraYear(n)}dayOfWeek(e){if(!vn(this))throw new TypeError("invalid receiver");const n=Et(e);return Zt[_(this,bn)].dayOfWeek(n)}dayOfYear(e){if(!vn(this))throw new TypeError("invalid receiver");const n=Et(e);return Zt[_(this,bn)].dayOfYear(n)}weekOfYear(e){if(!vn(this))throw new TypeError("invalid receiver");const n=Et(e);return Zt[_(this,bn)].weekOfYear(n)}daysInWeek(e){if(!vn(this))throw new TypeError("invalid receiver");const n=Et(e);return Zt[_(this,bn)].daysInWeek(n)}daysInMonth(e){let n=e;if(!vn(this))throw new TypeError("invalid receiver");return yt(n)||(n=Et(n)),Zt[_(this,bn)].daysInMonth(n)}daysInYear(e){let n=e;if(!vn(this))throw new TypeError("invalid receiver");return yt(n)||(n=Et(n)),Zt[_(this,bn)].daysInYear(n)}monthsInYear(e){let n=e;if(!vn(this))throw new TypeError("invalid receiver");return yt(n)||(n=Et(n)),Zt[_(this,bn)].monthsInYear(n)}inLeapYear(e){let n=e;if(!vn(this))throw new TypeError("invalid receiver");return yt(n)||(n=Et(n)),Zt[_(this,bn)].inLeapYear(n)}toString(){if(!vn(this))throw new TypeError("invalid receiver");return _(this,bn)}toJSON(){if(!vn(this))throw new TypeError("invalid receiver");return Pe(this)}static from(e){return nr(e)}}Co(Bd,"Temporal.Calendar");yp("Temporal.Calendar.from",Bd.from);Zt.iso8601={dateFromFields(t,e,n){const r=Xn(e);let i=er(t,[["day"],["month",void 0],["monthCode",void 0],["year"]]);i=Vl(i);let{year:o,month:s,day:a}=i;return{year:o,month:s,day:a}=gd(o,s,a,r),Vi(o,s,a,n)},yearMonthFromFields(t,e,n){const r=Xn(e);let i=er(t,[["month",void 0],["monthCode",void 0],["year"]]);i=Vl(i);let{year:o,month:s}=i;return{year:o,month:s}=WS(o,s,r),ku(o,s,n,1)},monthDayFromFields(t,e,n){const r=Xn(e);let i=er(t,[["day"],["month",void 0],["monthCode",void 0],["year",void 0]]);if(i.month!==void 0&&i.year===void 0&&i.monthCode===void 0)throw new TypeError("either year or monthCode required with month");const o=i.monthCode===void 0,s=1972;i=Vl(i);let{month:a,day:c,year:u}=i;return{month:a,day:c}=gd(o?u:s,a,c,r),Ru(a,c,n,s)},fields(t){return t},mergeFields(t,e){const n={};for(const i of ny(t))i==="month"||i==="monthCode"||(n[i]=t[i]);const r=ny(e);for(const i of r)n[i]=e[i];if(!bu.call(r,"month")&&!bu.call(r,"monthCode")){const{month:i,monthCode:o}=t;i!==void 0&&(n.month=i),o!==void 0&&(n.monthCode=o)}return n},dateAdd(t,e,n,r,i,o,s){let a=_(t,be),c=_(t,Se),u=_(t,Te);return{year:a,month:c,day:u}=ga(a,c,u,e,n,r,i,o),Vi(a,c,u,s)},dateUntil(t,e,n){return Wg(_(t,be),_(t,Se),_(t,Te),_(e,be),_(e,Se),_(e,Te),n)},year(t){return _(t,be)},era(){},eraYear(){},month(t){return _(t,Se)},monthCode(t){return es(_(t,Se))},day(t){return _(t,Te)},dayOfWeek(t){return kp(_(t,be),_(t,Se),_(t,Te))},dayOfYear(t){return wd(_(t,be),_(t,Se),_(t,Te))},weekOfYear(t){return e2(_(t,be),_(t,Se),_(t,Te))},daysInWeek(){return 7},daysInMonth(t){return rs(_(t,be),_(t,Se))},daysInYear(t){let e=t;return Kn(e,be)||(e=Et(e)),Rs(_(e,be))?366:365},monthsInYear(){return 12},inLeapYear(t){let e=t;return Kn(e,be)||(e=Et(e)),Rs(_(e,be))}};function Fg(t){if(!t.startsWith("M"))throw new RangeError(`Invalid month code: ${t}.  Month codes must start with M.`);const e=+t.slice(1);if(isNaN(e))throw new RangeError(`Invalid month code: ${t}`);return e}function es(t,e=!1){return`M${t.toString().padStart(2,"0")}${e?"L":""}`}function Vl(t,e=void 0,n=12){let{month:r,monthCode:i}=t;if(i===void 0){if(r===void 0)throw new TypeError("Either month or monthCode are required");e==="reject"&&lr(r,1,n),e==="constrain"&&(r=ri(r,1,n)),i=es(r)}else{const o=Fg(i);if(r!==void 0&&r!==o)throw new RangeError(`monthCode ${i} and month ${r} must match if both are present`);if(i!==es(o))throw new RangeError(`Invalid month code: ${i}`);if(r=o,r<1||r>n)throw new RangeError(`Invalid monthCode: ${i}`)}return{...t,month:r,monthCode:i}}class Qt{constructor(e){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),e!==void 0){let n=0;for(const r of e.map.entries()){if(++n>Qt.MAX_CACHE_ENTRIES)break;this.map.set(...r)}}}get(e){const n=this.map.get(e);return n&&(this.hits++,this.report()),this.calls++,n}set(e,n){this.map.set(e,n),this.misses++,this.report()}report(){}setObject(e){if(Qt.objectMap.get(e))throw new RangeError("object already cached");Qt.objectMap.set(e,this),this.report()}static getCacheForObject(e){let n=Qt.objectMap.get(e);return n||(n=new Qt,Qt.objectMap.set(e,n)),n}}Qt.objectMap=new WeakMap;Qt.MAX_CACHE_ENTRIES=1e3;function z_({isoYear:t,isoMonth:e,isoDay:n}){const r=Fa(t),i=zt(e),o=zt(n);return`${r}-${i}-${o}T00:00Z`}function ph(t,e){return{years:t.year-e.year,months:t.month-e.month,days:t.day-e.day}}class Rc{constructor(){this.eraLength="short",this.hasEra=!0}getFormatter(){return typeof this.formatter=="undefined"&&(this.formatter=new GE(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(e,n){const{year:r,month:i,day:o}=e,s=JSON.stringify({func:"isoToCalendarDate",isoYear:r,isoMonth:i,isoDay:o,id:this.id}),a=n.get(s);if(a)return a;const c=this.getFormatter();let u,l;try{l=z_({isoYear:r,isoMonth:i,isoDay:o}),u=c.formatToParts(new Date(l))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:r,isoMonth:i,isoDay:o})}`)}const d={};for(let{type:g,value:y}of u){if(g==="year"&&(d.eraYear=+y),g==="relatedYear"&&(d.eraYear=+y),g==="month"){const w=/^([0-9]*)(.*?)$/.exec(y);if(!w||w.length!=3||!w[1]&&!w[2])throw new RangeError(`Unexpected month: ${y}`);if(d.month=w[1]?+w[1]:1,d.month<1)throw new RangeError(`Invalid month ${y} from ${l}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(d.month>13)throw new RangeError(`Invalid month ${y} from ${l}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);w[2]&&(d.monthExtra=w[2])}g==="day"&&(d.day=+y),this.hasEra&&g==="era"&&y!=null&&y!==""&&(y=y.split(" (")[0],d.era=y.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(d.eraYear===void 0)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){const{era:g,eraYear:y}=this.reviseIntlEra(d,e);d.era=g,d.eraYear=y}this.checkIcuBugs&&this.checkIcuBugs(e);const p=this.adjustCalendarDate(d,n,"constrain",!0);if(p.year===void 0)throw new RangeError(`Missing year converting ${JSON.stringify(e)}`);if(p.month===void 0)throw new RangeError(`Missing month converting ${JSON.stringify(e)}`);if(p.day===void 0)throw new RangeError(`Missing day converting ${JSON.stringify(e)}`);return n.set(s,p),["constrain","reject"].forEach(g=>{const y=JSON.stringify({func:"calendarToIsoDate",year:p.year,month:p.month,day:p.day,overflow:g,id:this.id});n.set(y,e)}),p}validateCalendarDate(e){const{era:n,month:r,year:i,day:o,eraYear:s,monthCode:a,monthExtra:c}=e;if(c!==void 0)throw new RangeError("Unexpected `monthExtra` value");if(i===void 0&&s===void 0)throw new TypeError("year or eraYear is required");if(r===void 0&&a===void 0)throw new TypeError("month or monthCode is required");if(o===void 0)throw new RangeError("Missing day");if(a!==void 0){if(typeof a!="string")throw new RangeError(`monthCode must be a string, not ${typeof a}`);if(!/^M([01]?\d)(L?)$/.test(a))throw new RangeError(`Invalid monthCode: ${a}`)}if(this.constantEra){if(n!==void 0&&n!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${n}`);if(s!==void 0&&i!==void 0&&s!==i)throw new RangeError(`eraYear ${s} does not match year ${i}`)}}adjustCalendarDate(e,n=void 0,r="constrain",i=!1){if(this.calendarType==="lunisolar")throw new RangeError("Override required for lunisolar calendars");let o=e;if(this.validateCalendarDate(o),this.constantEra){const{year:u,eraYear:l}=o;o={...o,era:this.constantEra,year:u!==void 0?u:l,eraYear:l!==void 0?l:u}}const s=this.monthsInYear(o,n);let{month:a,monthCode:c}=o;return{month:a,monthCode:c}=Vl(o,r,s),{...o,month:a,monthCode:c}}regulateMonthDayNaive(e,n,r){const i=this.monthsInYear(e,r);let{month:o,day:s}=e;return n==="reject"?(lr(o,1,i),lr(s,1,this.maximumMonthLength(e))):(o=ri(o,1,i),s=ri(s,1,this.maximumMonthLength({...e,month:o}))),{...e,month:o,day:s}}calendarToIsoDate(e,n="constrain",r){const i=e;let o=this.adjustCalendarDate(e,r,n,!1);o=this.regulateMonthDayNaive(o,n,r);const{year:s,month:a,day:c}=o,u=JSON.stringify({func:"calendarToIsoDate",year:s,month:a,day:c,overflow:n,id:this.id});let l=r.get(u);if(l)return l;let d;if(i.year!==void 0&&i.month!==void 0&&i.day!==void 0&&(i.year!==o.year||i.month!==o.month||i.day!==o.day)&&(d=JSON.stringify({func:"calendarToIsoDate",year:i.year,month:i.month,day:i.day,overflow:n,id:this.id}),l=r.get(d),l))return l;let p=this.estimateIsoDate({year:s,month:a,day:c});const g=R=>{let F=this.addDaysIso(p,R);if(o.day>this.minimumMonthLength(o)){let M=this.isoToCalendarDate(F,r);for(;M.month!==a||M.year!==s;){if(n==="reject")throw new RangeError(`day ${c} does not exist in month ${a} of year ${s}`);F=this.addDaysIso(F,-1),M=this.isoToCalendarDate(F,r)}}return F};let y=0,w=this.isoToCalendarDate(p,r),b=ph(o,w);if(b.years!==0||b.months!==0||b.days!==0){const R=b.years*365+b.months*30+b.days;p=this.addDaysIso(p,R),w=this.isoToCalendarDate(p,r),b=ph(o,w),b.years===0&&b.months===0?p=g(b.days):y=this.compareCalendarDates(o,w)}let E=8,S=!1;for(;y;){p=this.addDaysIso(p,y*E);const R=w;w=this.isoToCalendarDate(p,r);const F=y;if(y=this.compareCalendarDates(o,w),y){if(b=ph(o,w),b.years===0&&b.months===0)p=g(b.days),y=0,S=o.day>this.minimumMonthLength(o);else if(F&&y!==F)if(E>1)E/=2;else{if(n==="reject")throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...i})}`);this.compareCalendarDates(w,R)>0&&(p=this.addDaysIso(p,-1)),S=!0,y=0}}}if(r.set(u,p),d&&r.set(d,p),o.year===void 0||o.month===void 0||o.day===void 0||o.monthCode===void 0||this.hasEra&&(o.era===void 0||o.eraYear===void 0))throw new RangeError("Unexpected missing property");if(!S){const R=JSON.stringify({func:"isoToCalendarDate",isoYear:p.year,isoMonth:p.month,isoDay:p.day,id:this.id});r.set(R,o)}return p}temporalToCalendarDate(e,n){const r={year:_(e,be),month:_(e,Se),day:_(e,Te)};return this.isoToCalendarDate(r,n)}compareCalendarDates(e,n){const r=er(e,[["day"],["month"],["year"]]),i=er(n,[["day"],["month"],["year"]]);return r.year!==i.year?ma(r.year-i.year):r.month!==i.month?ma(r.month-i.month):r.day!==i.day?ma(r.day-i.day):0}regulateDate(e,n="constrain",r){const i=this.calendarToIsoDate(e,n,r);return this.isoToCalendarDate(i,r)}addDaysIso(e,n){return ga(e.year,e.month,e.day,0,0,0,n,"constrain")}addDaysCalendar(e,n,r){const i=this.calendarToIsoDate(e,"constrain",r),o=this.addDaysIso(i,n);return this.isoToCalendarDate(o,r)}addMonthsCalendar(e,n,r,i){let o=e;const{day:s}=o;for(let a=0,c=YE(n);a<c;a++){const{month:u}=o,l=o,d=n<0?-Math.max(s,this.daysInPreviousMonth(o,i)):this.daysInMonth(o,i),p=this.calendarToIsoDate(o,"constrain",i);let g=this.addDaysIso(p,d);if(o=this.isoToCalendarDate(g,i),n>0){const y=this.monthsInYear(l,i);for(;o.month-1!==u%y;)g=this.addDaysIso(g,-1),o=this.isoToCalendarDate(g,i)}o.day!==s&&(o=this.regulateDate({...o,day:s},"constrain",i))}if(r==="reject"&&o.day!==s)throw new RangeError(`Day ${s} does not exist in resulting calendar month`);return o}addCalendar(e,{years:n=0,months:r=0,weeks:i=0,days:o=0},s,a){const{year:c,month:u,day:l}=e,d=this.addMonthsCalendar({year:c+n,month:u,day:l},r,s,a),p=o+i*7;return this.addDaysCalendar(d,p,a)}untilCalendar(e,n,r,i){let o=0,s=0,a=0,c=0;switch(r){case"day":o=this.calendarDaysUntil(e,n,i);break;case"week":{const u=this.calendarDaysUntil(e,n,i);o=u%7,s=(u-o)/7;break}case"month":case"year":{const u=n.year-e.year,l=n.month-e.month,d=n.day-e.day,p=this.compareCalendarDates(n,e);r==="year"&&u&&(c=l*p<0||l===0&&d*p<0?u-p:u);const g=c?this.addCalendar(e,{years:c},"constrain",i):e;let y,w=g;do a+=p,y=w,w=this.addMonthsCalendar(y,p,"constrain",i),w.day!==e.day&&(w=this.regulateDate({...w,day:e.day},"constrain",i));while(this.compareCalendarDates(n,w)*p>=0);a-=p,o=this.calendarDaysUntil(y,n,i);break}}return{years:c,months:a,weeks:s,days:o}}daysInMonth(e,n){const{day:r}=e,i=this.maximumMonthLength(e),o=this.minimumMonthLength(e);if(o===i)return o;const s=r<=i-o?i:o,a=this.calendarToIsoDate(e,"constrain",n),c=this.addDaysIso(a,s),u=this.isoToCalendarDate(c,n),l=this.addDaysIso(c,-u.day);return this.isoToCalendarDate(l,n).day}daysInPreviousMonth(e,n){const{day:r,month:i,year:o}=e;let a={year:i>1?o:o-1,month:i,day:1};const c=i>1?i-1:this.monthsInYear(a,n);a={...a,month:c};const u=this.minimumMonthLength(a),l=this.maximumMonthLength(a);if(u===l)return l;const d=this.calendarToIsoDate(e,"constrain",n),p=this.addDaysIso(d,-r);return this.isoToCalendarDate(p,n).day}startOfCalendarYear(e){return{year:e.year,month:1,day:1}}startOfCalendarMonth(e){return{year:e.year,month:e.month,day:1}}calendarDaysUntil(e,n,r){const i=this.calendarToIsoDate(e,"constrain",r),o=this.calendarToIsoDate(n,"constrain",r);return this.isoDaysUntil(i,o)}isoDaysUntil(e,n){return Wg(e.year,e.month,e.day,n.year,n.month,n.day,"day").days}monthDayFromFields(e,n,r){let{year:i,month:o,monthCode:s,day:a,era:c,eraYear:u}=e;if(s===void 0){if(i===void 0&&(c===void 0||u===void 0))throw new TypeError("`monthCode`, `year`, or `era` and `eraYear` is required");({monthCode:s,year:i}=this.adjustCalendarDate({year:i,month:o,monthCode:s,day:a,era:c,eraYear:u},r,n))}let l,d,p,g,y;const w={year:1972,month:1,day:1},{year:b}=this.isoToCalendarDate(w,r);for(let E=0;E<100;E++){const S=this.adjustCalendarDate({day:a,monthCode:s,year:b-E},r),R=this.calendarToIsoDate(S,"constrain",r),F=this.isoToCalendarDate(R,r);if({year:l,month:d,day:p}=R,F.monthCode===s&&F.day===a)return{month:d,day:p,year:l};n==="constrain"&&(g===void 0||F.monthCode===g.monthCode&&F.day>g.day)&&(g=F,y=R)}if(n==="constrain"&&y!==void 0)return y;throw new RangeError(`No recent ${this.id} year with monthCode ${s} and day ${a}`)}}class ZE extends Rc{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(e){const{year:n}=e;return(7*n+1)%19<7}monthsInYear(e){return this.inLeapYear(e)?13:12}minimumMonthLength(e){return this.minMaxMonthLength(e,"min")}maximumMonthLength(e){return this.minMaxMonthLength(e,"max")}minMaxMonthLength(e,n){const{month:r,year:i}=e,o=this.getMonthCode(i,r),s=_p(this.months).find(c=>c[1].monthCode===o);if(s===void 0)throw new RangeError(`unmatched Hebrew month: ${r}`);const a=s[1].days;return typeof a=="number"?a:a[n]}estimateIsoDate(e){const{year:n}=e;return{year:n-3760,month:1,day:1}}getMonthCode(e,n){return this.inLeapYear({year:e})?n===6?es(5,!0):es(n<6?n:n-1):es(n)}adjustCalendarDate(e,n,r="constrain",i=!1){let{year:o,eraYear:s,month:a,monthCode:c,day:u,monthExtra:l}=e;if(o===void 0&&s!==void 0&&(o=s),s===void 0&&o!==void 0&&(s=o),i){if(l){const p=this.months[l];if(!p)throw new RangeError(`Unrecognized month from formatToParts: ${l}`);a=this.inLeapYear({year:o})?p.leap:p.regular}return c=this.getMonthCode(o,a),{year:o,month:a,day:u,era:void 0,eraYear:s,monthCode:c}}else{if(this.validateCalendarDate(e),a===void 0)if(c.endsWith("L")){if(c!=="M05L")throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${c}`);if(a=6,!this.inLeapYear({year:o})){if(r==="reject")throw new RangeError(`Hebrew monthCode M05L is invalid in year ${o} which is not a leap year`);a=5,u=30,c="M05"}}else{a=Fg(c),this.inLeapYear({year:o})&&a>6&&a++;const d=this.monthsInYear({year:o});if(a<1||a>d)throw new RangeError(`Invalid monthCode: ${c}`)}else if(r==="reject"?(lr(a,1,this.monthsInYear({year:o})),lr(u,1,this.maximumMonthLength({year:o,month:a}))):(a=ri(a,1,this.monthsInYear({year:o})),u=ri(u,1,this.maximumMonthLength({year:o,month:a}))),c===void 0)c=this.getMonthCode(o,a);else if(this.getMonthCode(o,a)!==c)throw new RangeError(`monthCode ${c} doesn't correspond to month ${a} in Hebrew year ${o}`);return{...e,day:u,month:a,monthCode:c,year:o,eraYear:s}}}}class kc extends Rc{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(e,n){return this.daysInMonth({year:e.year,month:12,day:1},n)===30}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(e){const{year:n}=this.adjustCalendarDate(e);return{year:JE(n*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class Y_ extends kc{constructor(){super(...arguments),this.id="islamic"}}class QE extends kc{constructor(){super(...arguments),this.id="islamic-umalqura"}}class XE extends kc{constructor(){super(...arguments),this.id="islamic-tbla"}}class eS extends kc{constructor(){super(...arguments),this.id="islamic-civil"}}class tS extends kc{constructor(){super(...arguments),this.id="islamic-rgsa"}}class nS extends kc{constructor(){super(...arguments),this.id="islamicc"}}class rS extends Rc{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(e,n){return Y_.prototype.inLeapYear.call(this,e,n)}monthsInYear(){return 12}minimumMonthLength(e){const{month:n}=e;return n===12?29:n<=6?31:30}maximumMonthLength(e){const{month:n}=e;return n===12?30:n<=6?31:30}estimateIsoDate(e){const{year:n}=this.adjustCalendarDate(e);return{year:n+621,month:1,day:1}}}class iS extends Rc{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug=new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})!=="10/11/-79 Saka"}inLeapYear(e){return J_(e.year+78)}monthsInYear(){return 12}minimumMonthLength(e){return this.getMonthInfo(e).length}maximumMonthLength(e){return this.getMonthInfo(e).length}getMonthInfo(e){const{month:n}=e;let r=this.months[n];if(r===void 0)throw new RangeError(`Invalid month: ${n}`);return this.inLeapYear(e)&&r.leap&&(r=r.leap),r}estimateIsoDate(e){const n=this.adjustCalendarDate(e),r=this.getMonthInfo(n),i=n.year+78+(r.nextYear?1:0),o=r.month,s=r.day;return ga(i,o,s,0,0,0,n.day-1,"constrain")}checkIcuBugs(e){if(this.vulnerableToBceBug&&e.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function oS(t){let e=t;if(e.length===0)throw new RangeError("Invalid era data: eras are required");if(e.length===1&&e[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(e.length===1&&!e[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(e.filter(i=>i.reverseOf!=null).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");let n;e.forEach(i=>{if(i.isAnchor||!i.anchorEpoch&&!i.reverseOf){if(n)throw new RangeError("Invalid era data: cannot have multiple anchor eras");n=i,i.anchorEpoch={year:i.hasYearZero?0:1}}else if(!i.name)throw new RangeError("If era name is blank, it must be the anchor era")}),e=e.filter(i=>i.name),e.forEach(i=>{const{reverseOf:o}=i;if(o){const s=e.find(a=>a.name===o);if(s===void 0)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${o}`);i.reverseOf=s,i.anchorEpoch=s.anchorEpoch,i.isoEpoch=s.isoEpoch}i.anchorEpoch.month===void 0&&(i.anchorEpoch.month=1),i.anchorEpoch.day===void 0&&(i.anchorEpoch.day=1)}),zE.call(e,(i,o)=>{if(i.reverseOf)return 1;if(o.reverseOf)return-1;if(!i.isoEpoch||!o.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return o.isoEpoch.year-i.isoEpoch.year});const r=e[e.length-1].reverseOf;if(r&&r!==e[e.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return e.forEach((i,o)=>{i.genericName=`era${e.length-1-o}`}),{eras:e,anchorEra:n||e[0]}}function J_(t){return t%4===0&&(t%100!==0||t%400===0)}class Uu extends Rc{constructor(e,n){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=e;const{eras:r,anchorEra:i}=oS(n);this.anchorEra=i,this.eras=r}inLeapYear(e){const{year:n}=this.estimateIsoDate({month:1,day:1,year:e.year});return J_(n)}monthsInYear(){return 12}minimumMonthLength(e){const{month:n}=e;return n===2?this.inLeapYear(e)?29:28:[4,6,9,11].indexOf(n)>=0?30:31}maximumMonthLength(e){return this.minimumMonthLength(e)}completeEraYear(e){const n=(a,c)=>{const u=e[a];if(u!=null&&u!=c)throw new RangeError(`Input ${a} ${u} doesn't match calculated value ${c}`)},r=a=>{let c;const u={...e,year:a},l=this.eras.find((d,p)=>{if(p===this.eras.length-1){if(d.reverseOf){if(a>0)throw new RangeError(`Signed year ${a} is invalid for era ${d.name}`);return c=d.anchorEpoch.year-a,!0}return c=a-d.anchorEpoch.year+(d.hasYearZero?0:1),!0}return this.compareCalendarDates(u,d.anchorEpoch)>=0?(c=a-d.anchorEpoch.year+(d.hasYearZero?0:1),!0):!1});if(!l)throw new RangeError(`Year ${a} was not matched by any era`);return{eraYear:c,era:l.name}};let{year:i,eraYear:o,era:s}=e;if(i!=null)({eraYear:o,era:s}=r(i)),n("era",s),n("eraYear",o);else if(o!=null){const a=s===void 0?void 0:this.eras.find(c=>c.name===s||c.genericName===s);if(!a)throw new RangeError(`Era ${s} (ISO year ${o}) was not matched by any era`);if(o<1&&a.reverseOf)throw new RangeError(`Years in ${s} era must be positive, not ${i}`);a.reverseOf?i=a.anchorEpoch.year-o:i=o+a.anchorEpoch.year-(a.hasYearZero?0:1),n("year",i),{eraYear:o,era:s}=r(i)}else throw new RangeError("Either `year` or `eraYear` and `era` are required");return{...e,year:i,eraYear:o,era:s}}adjustCalendarDate(e,n,r="constrain"){let i=e;const{month:o,monthCode:s}=i;return o===void 0&&(i={...i,month:Fg(s)}),this.validateCalendarDate(i),i=this.completeEraYear(i),super.adjustCalendarDate(i,n,r)}estimateIsoDate(e){const n=this.adjustCalendarDate(e),{year:r,month:i,day:o}=n,{anchorEra:s}=this,a=r+s.isoEpoch.year-(s.hasYearZero?0:1);return gd(a,i,o,"constrain")}checkIcuBugs(e){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&Yo(e.year,e.month,e.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}}class Dg extends Uu{constructor(e,n){super(e,n)}inLeapYear(e){const{year:n}=e;return(n+1)%4===0}monthsInYear(){return 13}minimumMonthLength(e){const{month:n}=e;return n===13?this.inLeapYear(e)?6:5:30}maximumMonthLength(e){return this.minimumMonthLength(e)}}class sS extends Dg{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}}class aS extends Dg{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}}class cS extends Dg{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class uS extends Uu{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}}class lS extends Uu{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}}class dS extends Uu{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(e){let{era:n,eraYear:r}=e;return(n==="bc"||n==="b")&&(n="bce"),(n==="ad"||n==="a")&&(n="ce"),{era:n,eraYear:r}}}class fS extends Uu{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long"}reviseIntlEra(e,n){const{era:r,eraYear:i}=e,{year:o}=n;return this.eras.find(s=>s.name===r)?{era:r,eraYear:i}:o<1?{era:"bce",eraYear:1-o}:{era:"ce",eraYear:o}}}class Z_ extends Rc{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(e,n){const r=this.getMonthList(e.year,n);return _p(r).length===13}monthsInYear(e,n){return this.inLeapYear(e,n)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(e,n){if(e===void 0)throw new TypeError("Missing year");const r=JSON.stringify({func:"getMonthList",calendarYear:e,id:this.id}),i=n.get(r);if(i)return i;const o=this.getFormatter(),s=(b,E)=>{const S=z_({isoYear:b,isoMonth:2,isoDay:1}),R=new Date(S);R.setUTCDate(E+1);const F=o.formatToParts(R),M=F.find(Y=>Y.type==="month").value,P=+F.find(Y=>Y.type==="day").value;let D=F.find(Y=>Y.type==="relatedYear");if(D!==void 0)D=+D.value;else throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return{calendarMonthString:M,calendarDay:P,calendarYearToVerify:D}};let a=17,{calendarMonthString:c,calendarDay:u,calendarYearToVerify:l}=s(e,a);c!=="1"&&(a+=29,{calendarMonthString:c,calendarDay:u}=s(e,a)),a-=u-5;const d={};let p=1,g,y,w=!1;do({calendarMonthString:c,calendarDay:u,calendarYearToVerify:l}=s(e,a)),g&&(d[y].daysInMonth=g+30-u),l!==e?w=!0:(d[c]={monthIndex:p++},a+=30),g=u,y=c;while(!w);return d[y].daysInMonth=g+30-u,n.set(r,d),d}estimateIsoDate(e){const{year:n,month:r}=e;return{year:n,month:r>=12?12:r+1,day:1}}adjustCalendarDate(e,n,r="constrain",i=!1){let{year:o,month:s,monthExtra:a,day:c,monthCode:u,eraYear:l}=e;if(i){if(o=l,a&&a!=="bis")throw new RangeError(`Unexpected leap month suffix: ${a}`);const d=es(s,a!==void 0),p=`${s}${a||""}`,y=this.getMonthList(o,n)[p];if(y===void 0)throw new RangeError(`Unmatched month ${p} in Chinese year ${o}`);return s=y.monthIndex,{year:o,month:s,day:c,era:void 0,eraYear:l,monthCode:d}}else{if(this.validateCalendarDate(e),o===void 0&&(o=l),l===void 0&&(l=o),s===void 0){const d=this.getMonthList(o,n);let p=u.replace("L","bis").slice(1);p[0]==="0"&&(p=p.slice(1));let g=d[p];if(s=g&&g.monthIndex,s===void 0&&u.endsWith("L")&&!bu.call(["M01L","M12L","M13L"],u)&&r==="constrain"){let y=u.slice(1,-1);y[0]==="0"&&(y=y.slice(1)),g=d[y],g&&({daysInMonth:c,monthIndex:s}=g,u=es(y))}if(s===void 0)throw new RangeError(`Unmatched month ${u} in Chinese year ${o}`)}else if(u===void 0){const d=this.getMonthList(o,n),p=_p(d),g=p.length;r==="reject"?(lr(s,1,g),lr(c,1,this.maximumMonthLength())):(s=ri(s,1,g),c=ri(c,1,this.maximumMonthLength()));const y=p.find(([,w])=>w.monthIndex===s);if(y===void 0)throw new RangeError(`Invalid month ${s} in Chinese year ${o}`);u=es(y[0].replace("bis",""),y[0].indexOf("bis")!==-1)}else{const d=this.getMonthList(o,n);let p=u.replace("L","bis").slice(1);p[0]==="0"&&(p=p.slice(1));const g=d[p];if(!g)throw new RangeError(`Unmatched monthCode ${u} in Chinese year ${o}`);if(s!==g.monthIndex)throw new RangeError(`monthCode ${u} doesn't correspond to month ${s} in Chinese year ${o}`)}return{...e,year:o,eraYear:l,month:s,monthCode:u,day:c}}}}class hS extends Z_{constructor(){super(...arguments),this.id="chinese"}}class pS extends Z_{constructor(){super(...arguments),this.id="dangi"}}const gS={helper:void 0,dateFromFields(t,e,n){const r=Xn(e),i=new Qt,o=er(t,[["day"],["era",void 0],["eraYear",void 0],["month",void 0],["monthCode",void 0],["year",void 0]]),{year:s,month:a,day:c}=this.helper.calendarToIsoDate(o,r,i),u=Vi(s,a,c,n);return i.setObject(u),u},yearMonthFromFields(t,e,n){const r=Xn(e),i=new Qt,o=er(t,[["era",void 0],["eraYear",void 0],["month",void 0],["monthCode",void 0],["year",void 0]]),{year:s,month:a,day:c}=this.helper.calendarToIsoDate({...o,day:1},r,i),u=ku(s,a,n,c);return i.setObject(u),u},monthDayFromFields(t,e,n){const r=Xn(e),i=new Qt,o=er(t,[["day"],["era",void 0],["eraYear",void 0],["month",void 0],["monthCode",void 0],["year",void 0]]),{year:s,month:a,day:c}=this.helper.monthDayFromFields(o,r,i),u=Ru(a,c,n,s);return i.setObject(u),u},fields(t){let e=t;return bu.call(e,"year")&&(e=[...e,"era","eraYear"]),e},mergeFields(t,e){const n={...t},r={...e},{month:i,monthCode:o,year:s,era:a,eraYear:c,...u}=n,{month:l,monthCode:d,year:p,era:g,eraYear:y}=r;return l===void 0&&d===void 0&&(u.month=i,u.monthCode=o),p===void 0&&g===void 0&&y===void 0&&(u.year=s),{...u,...r}},dateAdd(t,e,n,r,i,o,s){const a=Qt.getCacheForObject(t),c=this.helper.temporalToCalendarDate(t,a),u=this.helper.addCalendar(c,{years:e,months:n,weeks:r,days:i},o,a),l=this.helper.calendarToIsoDate(u,"constrain",a),{year:d,month:p,day:g}=l,y=Vi(d,p,g,s);return new Qt(a).setObject(y),y},dateUntil(t,e,n){const r=Qt.getCacheForObject(t),i=Qt.getCacheForObject(e),o=this.helper.temporalToCalendarDate(t,r),s=this.helper.temporalToCalendarDate(e,i);return this.helper.untilCalendar(o,s,n,r)},year(t){const e=Qt.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,e).year},month(t){const e=Qt.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,e).month},day(t){const e=Qt.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,e).day},era(t){if(!this.helper.hasEra)return;const e=Qt.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,e).era},eraYear(t){if(!this.helper.hasEra)return;const e=Qt.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,e).eraYear},monthCode(t){const e=Qt.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,e).monthCode},dayOfWeek(t){return Zt.iso8601.dayOfWeek(t)},dayOfYear(t){const e=Qt.getCacheForObject(t),n=this.helper.isoToCalendarDate(t,e),r=this.helper.startOfCalendarYear(n);return this.helper.calendarDaysUntil(r,n,e)+1},weekOfYear(t){return Zt.iso8601.weekOfYear(t)},daysInWeek(t){return Zt.iso8601.daysInWeek(t)},daysInMonth(t){const e=Qt.getCacheForObject(t),n=this.helper.temporalToCalendarDate(t,e),r=this.helper.maximumMonthLength(n),i=this.helper.minimumMonthLength(n);if(r===i)return r;const o=this.helper.startOfCalendarMonth(n),s=this.helper.addMonthsCalendar(o,1,"constrain",e);return this.helper.calendarDaysUntil(o,s,e)},daysInYear(t){let e=t;Kn(e,be)||(e=Et(e));const n=Qt.getCacheForObject(e),r=this.helper.temporalToCalendarDate(e,n),i=this.helper.startOfCalendarYear(r),o=this.helper.addCalendar(i,{years:1},"constrain",n);return this.helper.calendarDaysUntil(i,o,n)},monthsInYear(t){const e=Qt.getCacheForObject(t),n=this.helper.temporalToCalendarDate(t,e);return this.helper.monthsInYear(n,e)},inLeapYear(t){let e=t;Kn(e,be)||(e=Et(e));const n=Qt.getCacheForObject(e),r=this.helper.temporalToCalendarDate(e,n);return this.helper.inLeapYear(r,n)}};for(const t of[ZE,rS,cS,sS,aS,hS,pS,uS,iS,lS,dS,fS,Y_,QE,XE,eS,tS,nS]){const e=new t;Zt[e.id]={...gS,helper:e}}const mS=Object.keys(Zt);function Q_(t){return bu.call(mS,t)}const ry=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,yS=/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/,_S=new RegExp(`(?:(?:${ry.source})(?:\\/(?:${ry.source}))*|Etc/GMT[-+]\\d{1,2}|${yS.source})`),iy=/[A-Za-z0-9]{3,8}/,wS=new RegExp(`(?:${iy.source}(?:-${iy.source})*)`),X_=/(?:[+\u2212-]\d{6}|\d{4})/,dd=/(?:0[1-9]|1[0-2])/,wp=/(?:0[1-9]|[12]\d|3[01])/,vS=new RegExp(`(${X_.source})(?:-(${dd.source})-(${wp.source})|(${dd.source})(${wp.source}))`),ew=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,tw=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,nw=new RegExp(`(?:([zZ])|(?:${tw.source})?)(?:\\[(${_S.source})\\])?`),rw=new RegExp(`\\[u-ca=(${wS.source})\\]`),bS=new RegExp(`^${vS.source}(?:(?:T|\\s+)${ew.source})?${nw.source}(?:${rw.source})?$`,"i"),ES=new RegExp(`^T?${ew.source}(?:${nw.source})?(?:${rw.source})?$`,"i"),SS=new RegExp(`^(${X_.source})-?(${dd.source})$`),TS=new RegExp(`^(?:--)?(${dd.source})-?(${wp.source})$`),gh=/(\d+)(?:[.,](\d{1,9}))?/,AS=/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/,xS=new RegExp(`(?:${gh.source}H)?(?:${gh.source}M)?(?:${gh.source}S)?`),IS=new RegExp(`^([+\u2212-])?P${AS.source}(?:T(?!$)${xS.source})?$`,"i"),iw=Array.prototype.push,ow=globalThis.Intl.DateTimeFormat,RS=Math.min,kS=Math.max,mt=Math.abs,Bn=Math.floor,Eu=Math.sign,Za=Math.trunc,ju=Number.isNaN,Zn=Number.isFinite,FS=Number,$u=String,DS=Number.MAX_SAFE_INTEGER,xt=Object.create,CS=Object.defineProperty,PS=Object.is,Cg=Reflect.apply,Sn=T.BigInt(0),Pg=T.BigInt(1),fa=T.BigInt(60),wt=T.BigInt(1e3),Ri=T.BigInt(1e6),ts=T.BigInt(1e9),NS=T.BigInt(-1),OS=86400,xs=T.multiply(T.BigInt(OS),ts),Su=T.multiply(T.BigInt(-86400),T.BigInt(1e17)),Tu=T.multiply(T.BigInt(86400),T.BigInt(1e17)),fd=-271821,hd=275760,sw=T.multiply(T.BigInt(-388152),T.BigInt(1e13)),MS=T.multiply(xs,T.BigInt(366*10)),aw=T.multiply(xs,T.BigInt(366*1)),cw=T.multiply(xs,T.BigInt(2*7));function uw(t){if(typeof t!="number"||!Zn(t))return!1;const e=mt(t);return Bn(e)===e}function Mt(t){return typeof t=="object"&&t!==null||typeof t=="function"}function Au(t){if(typeof t=="bigint")throw new TypeError("Cannot convert BigInt to number");return FS(t)}function vt(t){const e=Au(t);if(ju(e))return 0;const n=Za(e);return e===0?0:n}function Pe(t){if(typeof t=="symbol")throw new TypeError("Cannot convert a Symbol value to a String");return $u(t)}function At(t){const e=vt(t);if(!Zn(e))throw new RangeError("infinity is out of range");return e}function gc(t,e){const n=vt(t);if(!Zn(n))throw new RangeError("infinity is out of range");if(n<1)throw e!==void 0?new RangeError(`property '${e}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return n}function zn(t){const e=Au(t);if(ju(e))return 0;if(!Zn(e))throw new RangeError("infinity is out of range");if(!uw(e))throw new RangeError(`unsupported fractional value ${e}`);return vt(e)}function jn(t,e){const n=T.divide(t,e),r=T.remainder(t,e);return{quotient:n,remainder:r}}function Ng(t){return T.lessThan(t,Sn)?T.multiply(t,NS):t}const pd=new Map([["year",At],["month",gc],["monthCode",Pe],["day",gc],["hour",At],["minute",At],["second",At],["millisecond",At],["microsecond",At],["nanosecond",At],["years",zn],["months",zn],["weeks",zn],["days",zn],["hours",zn],["minutes",zn],["seconds",zn],["milliseconds",zn],["microseconds",zn],["nanoseconds",zn],["era",Pe],["eraYear",vt],["offset",Pe]]),mc=["year","month","week","day","hour","minute","second","millisecond","microsecond","nanosecond"],Hd=[["years","year"],["months","month"],["weeks","week"],["days","day"],["hours","hour"],["minutes","minute"],["seconds","second"],["milliseconds","millisecond"],["microseconds","microsecond"],["nanoseconds","nanosecond"]],oy=new Map;function lw(t){let e=oy.get(t);return e===void 0&&(e=new ow("en-us",{timeZone:$u(t),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),oy.set(t,e)),e}function Cn(t){return Kn(t,De)&&!Kn(t,pt,ae)}function mo(t){return Kn(t,gs)}function vn(t){return Kn(t,bn)}function on(t){return Kn(t,mr,$n,yr,_r,wr,vr,br,Er,Sr)}function nt(t){return Kn(t,W_)}function sn(t){return Kn(t,Me,Le,Ue,je,$e,Be)&&!Kn(t,be,Se,Te)}function Je(t){return Kn(t,be,Se,Te,Me,Le,Ue,je,$e,Be)}function yt(t){return Kn(t,q_)}function Gn(t){return Kn(t,V_)}function Re(t){return Kn(t,De,pt,ae)}function Fc(t){if(Kn(t,ae)||Kn(t,pt))throw new TypeError("with() does not support a calendar or timeZone property");if(t.calendar!==void 0)throw new TypeError("with() does not support a calendar property");if(t.timeZone!==void 0)throw new TypeError("with() does not support a timeZone property")}function dw(t){let{ianaName:e,offset:n,z:r}=HS(t);return e||(r?"UTC":n)}function Bu(t,e){return e==="never"||e==="auto"&&t==="iso8601"?"":`[u-ca=${t}]`}function No(t){const e=bS.exec(t);if(!e)throw new RangeError(`invalid ISO 8601 string: ${t}`);let n=e[1];if(n[0]==="\u2212"&&(n=`-${n.slice(1)}`),n==="-000000")throw new RangeError(`invalid ISO 8601 string: ${t}`);const r=vt(n),i=vt(e[2]||e[4]),o=vt(e[3]||e[5]),s=vt(e[6]),a=e[6]!==void 0,c=vt(e[7]||e[10]);let u=vt(e[8]||e[11]);u===60&&(u=59);const l=(e[9]||e[12])+"000000000",d=vt(l.slice(0,3)),p=vt(l.slice(3,6)),g=vt(l.slice(6,9));let y,w=!1;if(e[13])y=void 0,w=!0;else if(e[14]&&e[15]){const S=e[14]==="-"||e[14]==="\u2212"?"-":"+",R=e[15]||"00",F=e[16]||"00",M=e[17]||"00";let P=e[18]||"0";if(y=`${S}${R}:${F}`,+P){for(;P.endsWith("0");)P=P.slice(0,-1);y+=`:${M}.${P}`}else+M&&(y+=`:${M}`);y==="-00:00"&&(y="+00:00")}let b=e[19];if(b)try{b=Bg(b).toString()}catch{}const E=e[20];return{year:r,month:i,day:o,hasTime:a,hour:s,minute:c,second:u,millisecond:d,microsecond:p,nanosecond:g,ianaName:b,offset:y,z:w,calendar:E}}function LS(t){const e=No(t);if(!e.z&&!e.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return e}function US(t){const e=No(t);if(!e.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return e}function jS(t){return No(t)}function $S(t){return No(t)}function BS(t){const e=ES.exec(t);let n,r,i,o,s,a,c;if(e){n=vt(e[1]),r=vt(e[2]||e[5]),i=vt(e[3]||e[6]),i===60&&(i=59);const u=(e[4]||e[7])+"000000000";o=vt(u.slice(0,3)),s=vt(u.slice(3,6)),a=vt(u.slice(6,9)),c=e[15]}else{let u,l;if({hasTime:l,hour:n,minute:r,second:i,millisecond:o,microsecond:s,nanosecond:a,calendar:c,z:u}=No(t),!l)throw new RangeError(`time is missing in string: ${t}`);if(u)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(t))return{hour:n,minute:r,second:i,millisecond:o,microsecond:s,nanosecond:a,calendar:c};try{const{month:u,day:l}=hw(t);ko(1972,u,l)}catch{try{const{year:u,month:l}=fw(t);ko(u,l,1)}catch{return{hour:n,minute:r,second:i,millisecond:o,microsecond:s,nanosecond:a,calendar:c}}}throw new RangeError(`invalid ISO 8601 time-only string ${t}; may need a T prefix`)}function fw(t){const e=SS.exec(t);let n,r,i,o;if(e){let s=e[1];if(s[0]==="\u2212"&&(s=`-${s.slice(1)}`),s==="-000000")throw new RangeError(`invalid ISO 8601 string: ${t}`);n=vt(s),r=vt(e[2]),i=e[3]}else{let s;if({year:n,month:r,calendar:i,day:o,z:s}=No(t),s)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:n,month:r,calendar:i,referenceISODay:o}}function hw(t){const e=TS.exec(t);let n,r,i,o;if(e)n=vt(e[1]),r=vt(e[2]);else{let s;if({month:n,day:r,calendar:i,year:o,z:s}=No(t),s)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:n,day:r,calendar:i,referenceISOYear:o}}function HS(t){try{let e=Bg(t);if(e)return e=e.toString(),Xa(e)?{offset:e}:{ianaName:e}}catch{}try{const e=No(t);if(e.z||e.offset||e.ianaName)return e}catch{}throw new RangeError(`Invalid time zone: ${t}`)}function pw(t){const e=IS.exec(t);if(!e)throw new RangeError(`invalid duration: ${t}`);if(e.slice(2).every(b=>b===void 0))throw new RangeError(`invalid duration: ${t}`);const n=e[1]==="-"||e[1]==="\u2212"?-1:1,r=vt(e[2])*n,i=vt(e[3])*n,o=vt(e[4])*n,s=vt(e[5])*n,a=vt(e[6])*n;let c=e[7],u=vt(e[8])*n,l=e[9],d=vt(e[10])*n;const p=e[11]+"000000000";let g=vt(p.slice(0,3))*n,y=vt(p.slice(3,6))*n,w=vt(p.slice(6,9))*n;return c=c?n*vt(c)/10**c.length:0,l=l?n*vt(l)/10**l.length:0,{minutes:u,seconds:d,milliseconds:g,microseconds:y,nanoseconds:w}=qS(c,u,l,d,g,y,w),{years:r,months:i,weeks:o,days:s,hours:a,minutes:u,seconds:d,milliseconds:g,microseconds:y,nanoseconds:w}}function KS(t){const{year:e,month:n,day:r,hour:i,minute:o,second:s,millisecond:a,microsecond:c,nanosecond:u,offset:l,z:d}=LS(t),p=Is(e,n,r,i,o,s,a,c,u);if(p===null)throw new RangeError("DateTime outside of supported range");const g=d?0:ba(l);return T.subtract(p,T.BigInt(g))}function gd(t,e,n,r){let i=t,o=e,s=n;switch(r){case"reject":ko(i,o,s);break;case"constrain":({year:i,month:o,day:s}=Fw(i,o,s));break}return{year:i,month:o,day:s}}function du(t,e,n,r,i,o,s){let a=t,c=e,u=n,l=r,d=i,p=o;switch(s){case"reject":Qd(a,c,u,l,d,p);break;case"constrain":({hour:a,minute:c,second:u,millisecond:l,microsecond:d,nanosecond:p}=n2(a,c,u,l,d,p));break}return{hour:a,minute:c,second:u,millisecond:l,microsecond:d,nanosecond:p}}function WS(t,e,n){let r=t,i=e;const o=1;switch(n){case"reject":ko(r,i,o);break;case"constrain":({year:r,month:i}=Fw(r,i));break}return{year:r,month:i}}function qS(t,e,n,r,i,o,s){let a=t,c=e,u=n,l=r,d=i,p=o,g=s;if(a!==0){[c,u,l,d,p,g].forEach(w=>{if(w!==0)throw new RangeError("only the smallest unit can be fractional")});const y=a*60;c=Za(y),u=y%1}if(u!==0){[l,d,p,g].forEach(b=>{if(b!==0)throw new RangeError("only the smallest unit can be fractional")});const y=u*60;l=Za(y);const w=y%1;if(w!==0){const b=w*1e3;d=Za(b);const E=b%1;if(E!==0){const S=E*1e3;p=Za(S);const R=S%1;if(R!==0){const F=R*1e3;g=Za(F)}}}}return{minutes:c,seconds:l,milliseconds:d,microseconds:p,nanoseconds:g}}function gw(t){if(on(t))return{years:_(t,mr),months:_(t,$n),weeks:_(t,Pr),days:_(t,yr),hours:_(t,_r),minutes:_(t,wr),seconds:_(t,vr),milliseconds:_(t,br),microseconds:_(t,Er),nanoseconds:_(t,Sr)};const e=Ms(t,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"]);if(!e)throw new TypeError("invalid duration-like");const{years:n=0,months:r=0,weeks:i=0,days:o=0,hours:s=0,minutes:a=0,seconds:c=0,milliseconds:u=0,microseconds:l=0,nanoseconds:d=0}=e;return{years:n,months:r,weeks:i,days:o,hours:s,minutes:a,seconds:c,milliseconds:u,microseconds:l,nanoseconds:d}}function Wi(t,e=[]){let n;if(Mt(t))n=gw(t);else{const g=Pe(t);n=pw(g)}const{years:r,months:i,weeks:o,days:s,hours:a,minutes:c,seconds:u,milliseconds:l,microseconds:d,nanoseconds:p}=n;Nw(r,i,o,s,a,c,u,l,d,p);for(const g of e)if(n[g]!==0)throw new RangeError(`Duration field ${g} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return n}function Xn(t){return Oo(t,"overflow",["constrain","reject"],"constrain")}function xu(t){return Oo(t,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function On(t,e){return Oo(t,"roundingMode",["ceil","floor","trunc","halfExpand"],e)}function Hu(t){switch(t){case"ceil":return"floor";case"floor":return"ceil";default:return t}}function vp(t,e){return Oo(t,"offset",["prefer","use","ignore","reject"],e)}function Ku(t){return Oo(t,"calendarName",["auto","always","never"],"auto")}function VS(t){return Oo(t,"timeZoneName",["auto","never"],"auto")}function GS(t){return Oo(t,"offset",["auto","never"],"auto")}function ki(t,e,n){let r=1/0;e!==void 0&&(r=e),!n&&e!==void 0&&(r=e>1?e-1:1);const i=o2(t,"roundingIncrement",1,r,1);if(e!==void 0&&e%i!==0)throw new RangeError(`Rounding increment must divide evenly into ${e}`);return i}function Iu(t,e){return ki(t,{year:void 0,month:void 0,week:void 0,day:void 0,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[e],!1)}function Wu(t){switch(Rr(t,void 0,["year","month","week","day","hour"])){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}let n=t.fractionalSecondDigits;if(n===void 0&&(n="auto"),typeof n!="number"){const i=Pe(n);if(i==="auto")return{precision:"auto",unit:"nanosecond",increment:1};throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${i}`)}if(ju(n)||n<0||n>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${n}`);const r=Bn(n);switch(r){case 0:return{precision:r,unit:"second",increment:1};case 1:case 2:case 3:return{precision:r,unit:"millisecond",increment:10**(3-r)};case 4:case 5:case 6:return{precision:r,unit:"microsecond",increment:10**(6-r)};case 7:case 8:case 9:return{precision:r,unit:"nanosecond",increment:10**(9-r)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${n}`)}}function wi(t,e,n=[],r){const i=new Map(Hd.filter(([,a])=>!n.includes(a))),o=new Set(mc);for(const a of n)o.delete(a);const s=Oo(t,"largestUnit",["auto",...o,...i.keys()],e);return s==="auto"&&r!==void 0?r:i.has(s)?i.get(s):s}function Rr(t,e,n=[]){const r=new Map(Hd.filter(([,s])=>!n.includes(s))),i=new Set(mc);for(const s of n)i.delete(s);const o=Oo(t,"smallestUnit",[...i,...r.keys()],e);return r.has(o)?r.get(o):o}function zS(t){const e=new Map(Hd),n=Oo(t,"unit",[...e.values(),...e.keys()],void 0);return e.has(n)?e.get(n):n}function Yc(t){const e=t.relativeTo;if(e===void 0)return e;let n="option",r=!1,i,o,s,a,c,u,l,d,p,g,y,w;if(Mt(e)){if(Re(e)||nt(e))return e;if(Je(e))return pa(e);g=Dc(e);const b=hn(g,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),E=md(e,b),S=xt(null);S.overflow="constrain",{year:i,month:o,day:s,hour:a,minute:c,second:u,millisecond:l,microsecond:d,nanosecond:p}=qu(g,E,S),w=e.offset,w===void 0&&(n="wall"),y=e.timeZone}else{let b,E;({year:i,month:o,day:s,hour:a,minute:c,second:u,millisecond:l,microsecond:d,nanosecond:p,calendar:g,ianaName:b,offset:w,z:E}=No(Pe(e))),b&&(y=b),E?n="exact":w||(n="wall"),g||(g=An()),g=nr(g),r=!0}if(y){y=Mr(y);let b=0;n==="option"&&(b=ba(Pe(w)));const E=yd(i,o,s,a,c,u,l,d,p,n,b,y,"compatible","reject",r);return Yn(E,y,g)}return Vi(i,o,s,g)}function Fi(t,e){if(mc.indexOf(t)>mc.indexOf(e))throw new RangeError(`largestUnit ${t} cannot be smaller than smallestUnit ${e}`)}function bp(t,e,n,r,i,o,s,a,c,u){const l=new Map(Hd);for(const[d,p]of[["years",t],["months",e],["weeks",n],["days",r],["hours",i],["minutes",o],["seconds",s],["milliseconds",a],["microseconds",c],["nanoseconds",u]])if(p!==0)return l.get(d);return"nanosecond"}function qi(t,e){return mc.indexOf(t)>mc.indexOf(e)?e:t}function Ms(t,e){const n=t,r=e;let i=!1,o={};for(const s of r){const a=n[s];a!==void 0&&(i=!0,pd.has(s)?o[s]=pd.get(s)(a):o[s]=a)}return i?o:!1}function er(t,e){const n=t,r=e,i={};let o=!1;for(const s of r){const[a,c]=s;let u=n[a];if(u===void 0){if(s.length===1)throw new TypeError(`required property '${a}' missing or undefined`);u=c}else o=!0,pd.has(a)&&(u=pd.get(a)(u));i[a]=u}if(!o)throw new TypeError("no supported properties found");if(i.era===void 0!=(i.eraYear===void 0))throw new RangeError("properties 'era' and 'eraYear' must be provided together");return i}function Ep(t,e){const n=[["day",void 0],["month",void 0],["monthCode",void 0],["year",void 0]];return e.forEach(r=>{n.some(([i])=>i===r)||n.push([r,void 0])}),er(t,n)}function md(t,e){const n=[["day",void 0],["hour",0],["microsecond",0],["millisecond",0],["minute",0],["month",void 0],["monthCode",void 0],["nanosecond",0],["second",0],["year",void 0]];return e.forEach(r=>{n.some(([i])=>i===r)||n.push([r,void 0])}),er(t,n)}function ha(t,e){const n=[["day",void 0],["month",void 0],["monthCode",void 0],["year",void 0]];return e.forEach(r=>{n.some(([i])=>i===r)||n.push([r,void 0])}),er(t,n)}function Og(t){return er(t,[["hour",0],["microsecond",0],["millisecond",0],["minute",0],["nanosecond",0],["second",0]])}function Xr(t,e){const n=[["month",void 0],["monthCode",void 0],["year",void 0]];return e.forEach(r=>{n.some(([i])=>i===r)||n.push([r,void 0])}),er(t,n)}function YS(t,e){const n=[["day",void 0],["hour",0],["microsecond",0],["millisecond",0],["minute",0],["month",void 0],["monthCode",void 0],["nanosecond",0],["second",0],["year",void 0],["offset",void 0],["timeZone"]];return e.forEach(r=>{n.some(([i])=>i===r)||n.push([r,void 0])}),er(t,n)}function Et(t,e=xt(null)){let n=t;if(Mt(n)){if(nt(n))return n;if(Re(n)&&(n=vi(_(n,pt),_(n,ur),_(n,ae))),Je(n))return Vi(_(n,be),_(n,Se),_(n,Te),_(n,ae));const u=Dc(n),l=hn(u,["day","month","monthCode","year"]),d=Ep(n,l);return io(u,d,e)}Xn(e);const{year:r,month:i,day:o,calendar:s,z:a}=$S(Pe(n));if(a)throw new RangeError("Z designator not supported for PlainDate");const c=Ce("%Temporal.PlainDate%");return new c(r,i,o,s)}function qu(t,e,n){let{hour:r,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:c}=Og(e);const u=Xn(n),l=io(t,e,n),d=_(l,be),p=_(l,Se),g=_(l,Te);return{hour:r,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:c}=du(r,i,o,s,a,c,u),{year:d,month:p,day:g,hour:r,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:c}}function ms(t,e=xt(null)){let n,r,i,o,s,a,c,u,l,d;if(Mt(t)){if(Je(t))return t;if(Re(t))return vi(_(t,pt),_(t,ur),_(t,ae));if(nt(t))return Vr(_(t,be),_(t,Se),_(t,Te),0,0,0,0,0,0,_(t,ae));d=Dc(t);const p=hn(d,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),g=md(t,p);({year:n,month:r,day:i,hour:o,minute:s,second:a,millisecond:c,microsecond:u,nanosecond:l}=qu(d,g,e))}else{Xn(e);let p;if({year:n,month:r,day:i,hour:o,minute:s,second:a,millisecond:c,microsecond:u,nanosecond:l,calendar:d,z:p}=jS(Pe(t)),p)throw new RangeError("Z designator not supported for PlainDateTime");Cw(n,r,i,o,s,a,c,u,l),d===void 0&&(d=An()),d=nr(d)}return Vr(n,r,i,o,s,a,c,u,l,d)}function nc(t){let e,n,r,i,o,s,a,c,u,l;if(Mt(t)){if(on(t))return t;({years:e,months:n,weeks:r,days:i,hours:o,minutes:s,seconds:a,milliseconds:c,microseconds:u,nanoseconds:l}=gw(t))}else({years:e,months:n,weeks:r,days:i,hours:o,minutes:s,seconds:a,milliseconds:c,microseconds:u,nanoseconds:l}=pw(Pe(t)));const d=Ce("%Temporal.Duration%");return new d(e,n,r,i,o,s,a,c,u,l)}function oo(t){if(Cn(t))return t;if(Re(t)){const r=Ce("%Temporal.Instant%");return new r(_(t,De))}const e=KS(Pe(t)),n=Ce("%Temporal.Instant%");return new n(e)}function sy(t,e=xt(null)){if(Mt(t)){if(Gn(t))return t;let u,l;if(Kn(t,ae))u=_(t,ae),l=!1;else{let g=t.calendar;l=g===void 0,g===void 0&&(g=An()),u=nr(g)}const d=hn(u,["day","month","monthCode","year"]),p=ha(t,d);return l&&p.month!==void 0&&p.monthCode===void 0&&p.year===void 0&&(p.year=1972),yc(u,p,e)}Xn(e);let{month:n,day:r,referenceISOYear:i,calendar:o}=hw(Pe(t)),s=o;if(s===void 0&&(s=An()),s=nr(s),i===void 0)return ko(1972,n,r),Ru(n,r,s);const a=Ru(n,r,s,i),c=xt(null);return yc(s,a,c)}function vo(t,e="constrain"){let n=t,r,i,o,s,a,c,u;if(Mt(n)){if(sn(n))return n;if(Re(n)&&(n=vi(_(n,pt),_(n,ur),_(n,ae))),Je(n)){const d=Ce("%Temporal.PlainTime%");return new d(_(n,Me),_(n,Le),_(n,Ue),_(n,je),_(n,$e),_(n,Be))}if(u=Dc(n),Pe(u)!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");({hour:r,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:c}=Og(n)),{hour:r,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:c}=du(r,i,o,s,a,c,e)}else if({hour:r,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:c,calendar:u}=BS(Pe(n)),Qd(r,i,o,s,a,c),u!==void 0&&u!=="iso8601")throw new RangeError("PlainTime can only have iso8601 calendar");const l=Ce("%Temporal.PlainTime%");return new l(r,i,o,s,a,c)}function Wa(t,e=xt(null)){if(Mt(t)){if(yt(t))return t;const u=Dc(t),l=hn(u,["month","monthCode","year"]),d=Xr(t,l);return As(u,d,e)}Xn(e);let{year:n,month:r,referenceISODay:i,calendar:o}=fw(Pe(t)),s=o;if(s===void 0&&(s=An()),s=nr(s),i===void 0)return ko(n,r,1),ku(n,r,s);const a=ku(n,r,s,i),c=xt(null);return As(s,a,c)}function yd(t,e,n,r,i,o,s,a,c,u,l,d,p,g,y){const w=Ce("%Temporal.PlainDateTime%"),b=new w(t,e,n,r,i,o,s,a,c);if(u==="wall"||g==="ignore"){const R=Or(d,b,p);return _(R,De)}if(u==="exact"||g==="use"){const R=Is(t,e,n,r,i,o,s,a,c);if(R===null)throw new RangeError("ZonedDateTime outside of supported range");return T.subtract(R,T.BigInt(l))}const E=_d(d,b);for(const R of E){const F=uo(d,R),M=T.toNumber(ei(T.BigInt(F),6e10,"halfExpand"));if(F===l||y&&M===l)return _(R,De)}if(g==="reject"){const R=Hg(l),F=mo(d)?_(d,gs):"time zone";throw new RangeError(`Offset ${R} is invalid for ${b.toString()} in ${F}`)}const S=Ew(E,d,b,p);return _(S,De)}function qa(t,e=xt(null)){let n,r,i,o,s,a,c,u,l,d,p,g,y=!1,w="option";if(Mt(t)){if(Re(t))return t;g=Dc(t);const F=hn(g,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),M=YS(t,F);({year:n,month:r,day:i,hour:o,minute:s,second:a,millisecond:c,microsecond:u,nanosecond:l}=qu(g,M,e)),d=Mr(M.timeZone),p=M.offset,p===void 0?w="wall":p=Pe(p)}else{Xn(e);let F,M;if({year:n,month:r,day:i,hour:o,minute:s,second:a,millisecond:c,microsecond:u,nanosecond:l,ianaName:F,offset:p,z:M,calendar:g}=US(Pe(t)),!F)throw new RangeError("time zone ID required in brackets");M?w="exact":p||(w="wall");const P=Ce("%Temporal.TimeZone%");d=new P(F),g||(g=An()),g=nr(g),y=!0}let b=0;w==="option"&&(b=ba(p));const E=xu(e),S=vp(e,"reject"),R=yd(n,r,i,o,s,a,c,u,l,w,b,d,E,S,y);return Yn(R,d,g)}function mw(t,e,n,r,i){ko(e,n,r),Dw(e,n,r),Po(t),Ze(t,be,e),Ze(t,Se,n),Ze(t,Te,r),Ze(t,ae,i),Ze(t,W_,!0),CS(t,"_repr_",{value:`${t[Symbol.toStringTag]} <${Tp(t)}>`,writable:!1,enumerable:!1,configurable:!1})}function Vi(t,e,n,r=An()){const i=Ce("%Temporal.PlainDate%"),o=xt(i.prototype);return mw(o,t,e,n,r),o}function yw(t,e,n,r,i,o,s,a,c,u,l){Cw(e,n,r,i,o,s,a,c,u),Pw(e,n,r,i,o,s,a,c,u),Po(t),Ze(t,be,e),Ze(t,Se,n),Ze(t,Te,r),Ze(t,Me,i),Ze(t,Le,o),Ze(t,Ue,s),Ze(t,je,a),Ze(t,$e,c),Ze(t,Be,u),Ze(t,ae,l),Object.defineProperty(t,"_repr_",{value:`${t[Symbol.toStringTag]} <${Ap(t,"auto")}>`,writable:!1,enumerable:!1,configurable:!1})}function Vr(t,e,n,r,i,o,s,a,c,u=An()){const l=Ce("%Temporal.PlainDateTime%"),d=xt(l.prototype);return yw(d,t,e,n,r,i,o,s,a,c,u),d}function _w(t,e,n,r,i){ko(i,e,n),Dw(i,e,n),Po(t),Ze(t,Se,e),Ze(t,Te,n),Ze(t,be,i),Ze(t,ae,r),Ze(t,V_,!0),Object.defineProperty(t,"_repr_",{value:`${t[Symbol.toStringTag]} <${xp(t)}>`,writable:!1,enumerable:!1,configurable:!1})}function Ru(t,e,n=An(),r=1972){const i=Ce("%Temporal.PlainMonthDay%"),o=xt(i.prototype);return _w(o,t,e,n,r),o}function ww(t,e,n,r,i){ko(e,n,i),r2(e,n),Po(t),Ze(t,be,e),Ze(t,Se,n),Ze(t,Te,i),Ze(t,ae,r),Ze(t,q_,!0),Object.defineProperty(t,"_repr_",{value:`${t[Symbol.toStringTag]} <${Ip(t)}>`,writable:!1,enumerable:!1,configurable:!1})}function ku(t,e,n=An(),r=1){const i=Ce("%Temporal.PlainYearMonth%"),o=xt(i.prototype);return ww(o,t,e,n,r),o}function vw(t,e,n,r){ra(e),Po(t),Ze(t,De,e),Ze(t,pt,n),Ze(t,ae,r);const i=Ce("%Temporal.Instant%"),o=new i(_(t,De));Ze(t,ur,o),Object.defineProperty(t,"_repr_",{value:`${t[Symbol.toStringTag]} <${Rp(t,"auto")}>`,writable:!1,enumerable:!1,configurable:!1})}function Yn(t,e,n=An()){const r=Ce("%Temporal.ZonedDateTime%"),i=xt(r.prototype);return vw(i,t,e,n),i}function An(){const t=Ce("%Temporal.Calendar%");return new t("iso8601")}function hn(t,e){let n=e;t.fields&&(n=t.fields(n));const r=[];for(const i of n){if(typeof i!="string")throw new TypeError("bad return from calendar.fields()");iw.call(r,i)}return r}function va(t,e,n){const r=t.mergeFields;if(!r)return{...e,...n};const i=Reflect.apply(r,t,[e,n]);if(!Mt(i))throw new TypeError("bad return from calendar.mergeFields()");return i}function Ir(t,e,n,r,i){let o=i;o===void 0&&(o=t.dateAdd);const s=Cg(o,t,[e,n,r]);if(!nt(s))throw new TypeError("invalid result");return s}function Ro(t,e,n,r,i){let o=i;o===void 0&&(o=t.dateUntil);const s=Cg(o,t,[e,n,r]);if(!on(s))throw new TypeError("invalid result");return s}function Kd(t,e){const n=t.year(e);if(n===void 0)throw new RangeError("calendar year result must be an integer");return At(n)}function Wd(t,e){const n=t.month(e);if(n===void 0)throw new RangeError("calendar month result must be a positive integer");return gc(n)}function Vu(t,e){const n=t.monthCode(e);if(n===void 0)throw new RangeError("calendar monthCode result must be a string");return Pe(n)}function qd(t,e){const n=t.day(e);if(n===void 0)throw new RangeError("calendar day result must be a positive integer");return gc(n)}function Vd(t,e){let n=t.era(e);return n!==void 0&&(n=Pe(n)),n}function Gd(t,e){let n=t.eraYear(e);return n!==void 0&&(n=At(n)),n}function Mg(t,e){return t.dayOfWeek(e)}function Lg(t,e){return t.dayOfYear(e)}function Ug(t,e){return t.weekOfYear(e)}function jg(t,e){return t.daysInWeek(e)}function rc(t,e){return t.daysInMonth(e)}function zd(t,e){return t.daysInYear(e)}function Yd(t,e){return t.monthsInYear(e)}function Jd(t,e){return t.inLeapYear(e)}function nr(t){let e=t;if(Mt(e)){if(Kn(e,ae))return _(e,ae);if(!("calendar"in e)||(e=e.calendar,Mt(e)&&!("calendar"in e)))return e}const n=Pe(e),r=Ce("%Temporal.Calendar%");if(Q_(n))return new r(n);let i;try{({calendar:i}=No(n))}catch{throw new RangeError(`Invalid calendar: ${n}`)}return i||(i="iso8601"),new r(i)}function Dc(t){if(Kn(t,ae))return _(t,ae);const{calendar:e}=t;return e===void 0?An():nr(e)}function Gu(t,e){if(t===e)return!0;const n=Pe(t),r=Pe(e);return n===r}function bw(t,e){if(t===e)return e;const n=Pe(t),r=Pe(e);if(n===r||n==="iso8601")return e;if(r==="iso8601")return t;throw new RangeError("irreconcilable calendars")}function io(t,e,n){const r=t.dateFromFields(e,n);if(!nt(r))throw new TypeError("invalid result");return r}function As(t,e,n){const r=t.yearMonthFromFields(e,n);if(!yt(r))throw new TypeError("invalid result");return r}function yc(t,e,n){const r=t.monthDayFromFields(e,n);if(!Gn(r))throw new TypeError("invalid result");return r}function Mr(t){let e=t;if(Mt(e)){if(Re(e))return _(e,pt);if(!("timeZone"in e)||(e=e.timeZone,Mt(e)&&!("timeZone"in e)))return e}const n=Pe(e),r=dw(n),i=Ce("%Temporal.TimeZone%");return new i(r)}function mh(t,e){if(t===e)return!0;const n=Pe(t),r=Pe(e);return n===r}function pa(t){return Vi(_(t,be),_(t,Se),_(t,Te),_(t,ae))}function $g(t){const e=Ce("%Temporal.PlainTime%");return new e(_(t,Me),_(t,Le),_(t,Ue),_(t,je),_(t,$e),_(t,Be))}function uo(t,e){let n=t.getOffsetNanosecondsFor;if(typeof n!="function")throw new TypeError("getOffsetNanosecondsFor not callable");const r=Reflect.apply(n,t,[e]);if(typeof r!="number")throw new TypeError("bad return from getOffsetNanosecondsFor");if(!uw(r)||mt(r)>864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return r}function Sp(t,e){const n=uo(t,e);return Hg(n)}function vi(t,e,n){const r=_(e,De),i=uo(t,e);let{year:o,month:s,day:a,hour:c,minute:u,second:l,millisecond:d,microsecond:p,nanosecond:g}=Tw(r);return{year:o,month:s,day:a,hour:c,minute:u,second:l,millisecond:d,microsecond:p,nanosecond:g}=Rw(o,s,a,c,u,l,d,p,g+i),Vr(o,s,a,c,u,l,d,p,g,n)}function Or(t,e,n){const r=_d(t,e);return Ew(r,t,e,n)}function Ew(t,e,n,r){const i=Ce("%Temporal.Instant%"),o=t.length;if(o===1)return t[0];if(o)switch(r){case"compatible":case"earlier":return t[0];case"later":return t[o-1];case"reject":throw new RangeError("multiple instants found")}const s=_(n,be),a=_(n,Se),c=_(n,Te),u=_(n,Me),l=_(n,Le),d=_(n,Ue),p=_(n,je),g=_(n,$e),y=_(n,Be),w=Is(s,a,c,u,l,d,p,g,y);if(w===null)throw new RangeError("DateTime outside of supported range");const b=new i(T.subtract(w,xs)),E=new i(T.add(w,xs)),S=uo(e,b),F=uo(e,E)-S;switch(r){case"earlier":{const M=_(n,ae),P=Ce("%Temporal.PlainDateTime%"),D=Ed(s,a,c,u,l,d,p,g,y,M,0,0,0,0,0,0,0,0,0,-F,void 0),Y=new P(D.year,D.month,D.day,D.hour,D.minute,D.second,D.millisecond,D.microsecond,D.nanosecond,M);return _d(e,Y)[0]}case"compatible":case"later":{const M=_(n,ae),P=Ce("%Temporal.PlainDateTime%"),D=Ed(s,a,c,u,l,d,p,g,y,M,0,0,0,0,0,0,0,0,0,F,void 0),Y=new P(D.year,D.month,D.day,D.hour,D.minute,D.second,D.millisecond,D.microsecond,D.nanosecond,M),Q=_d(e,Y);return Q[Q.length-1]}case"reject":throw new RangeError("no such instant found")}}function _d(t,e){const n=t.getPossibleInstantsFor(e),r=[];for(const i of n){if(!Cn(i))throw new TypeError("bad return from getPossibleInstantsFor");iw.call(r,i)}return r}function Fa(t){let e;if(t<1e3||t>9999){const n=t<0?"-":"+",r=mt(t);e=n+`000000${r}`.slice(-6)}else e=`${t}`;return e}function zt(t){return`00${t}`.slice(-2)}function Zd(t,e,n,r,i){if(i==="minute")return"";const o=`:${zt(t)}`;let s=e*1e6+n*1e3+r,a;if(i==="auto"){if(s===0)return o;for(a=`${s}`.padStart(9,"0");a[a.length-1]==="0";)a=a.slice(0,-1)}else{if(i===0)return o;a=`${s}`.padStart(9,"0").slice(0,i)}return`${o}.${a}`}function yh(t,e,n){let r=e;if(r===void 0){const g=Ce("%Temporal.TimeZone%");r=new g("UTC")}const i=An(),o=vi(r,t,i),s=Fa(_(o,be)),a=zt(_(o,Se)),c=zt(_(o,Te)),u=zt(_(o,Me)),l=zt(_(o,Le)),d=Zd(_(o,Ue),_(o,je),_(o,$e),_(o,Be),n);let p="Z";if(e!==void 0){const g=uo(r,t);p=Sw(g)}return`${s}-${a}-${c}T${u}:${l}${d}${p}`}function Dl(t,e="auto",n=void 0){function r(Q){return Q<=DS?Q.toString(10):T.BigInt(Q).toString(10)}const i=_(t,mr),o=_(t,$n),s=_(t,Pr),a=_(t,yr),c=_(t,_r),u=_(t,wr);let l=_(t,vr),d=_(t,br),p=_(t,Er),g=_(t,Sr);const y=Hi(i,o,s,a,c,u,l,d,p,g);if(n){const{unit:Q,increment:B,roundingMode:se}=n;({seconds:l,milliseconds:d,microseconds:p,nanoseconds:g}=Di(0,0,0,0,0,0,l,d,p,g,B,Q,se))}const w=[];i&&w.push(`${r(mt(i))}Y`),o&&w.push(`${r(mt(o))}M`),s&&w.push(`${r(mt(s))}W`),a&&w.push(`${r(mt(a))}D`);const b=[];c&&b.push(`${r(mt(c))}H`),u&&b.push(`${r(mt(u))}M`);const E=[];let S=_c(0,0,0,l,d,p,g,0),R,F,M,P;({quotient:S,remainder:R}=jn(S,wt)),{quotient:S,remainder:F}=jn(S,wt),{quotient:P,remainder:M}=jn(S,wt);const D=mt(T.toNumber(M))*1e6+mt(T.toNumber(F))*1e3+mt(T.toNumber(R));let Y;if(e==="auto"){if(D!==0)for(Y=`${D}`.padStart(9,"0");Y[Y.length-1]==="0";)Y=Y.slice(0,-1)}else e!==0&&(Y=`${D}`.padStart(9,"0").slice(0,e));return Y&&E.unshift(".",Y),(!T.equal(P,Sn)||E.length||e!=="auto")&&E.unshift(Ng(P).toString()),E.length&&b.push(`${E.join("")}S`),b.length&&b.unshift("T"),!w.length&&!b.length?"PT0S":`${y<0?"-":""}P${w.join("")}${b.join("")}`}function Tp(t,e="auto"){const n=Fa(_(t,be)),r=zt(_(t,Se)),i=zt(_(t,Te)),o=Pe(_(t,ae)),s=Bu(o,e);return`${n}-${r}-${i}${s}`}function Ap(t,e,n="auto",r=void 0){let i=_(t,be),o=_(t,Se),s=_(t,Te),a=_(t,Me),c=_(t,Le),u=_(t,Ue),l=_(t,je),d=_(t,$e),p=_(t,Be);if(r){const{unit:M,increment:P,roundingMode:D}=r;({year:i,month:o,day:s,hour:a,minute:c,second:u,millisecond:l,microsecond:d,nanosecond:p}=qg(i,o,s,a,c,u,l,d,p,P,M,D))}const g=Fa(i),y=zt(o),w=zt(s),b=zt(a),E=zt(c),S=Zd(u,l,d,p,e),R=Pe(_(t,ae)),F=Bu(R,n);return`${g}-${y}-${w}T${b}:${E}${S}${F}`}function xp(t,e="auto"){const n=zt(_(t,Se)),r=zt(_(t,Te));let i=`${n}-${r}`;const o=_(t,ae),s=Pe(o);s!=="iso8601"&&(i=`${Fa(_(t,be))}-${i}`);const a=Bu(s,e);return a&&(i+=a),i}function Ip(t,e="auto"){const n=Fa(_(t,be)),r=zt(_(t,Se));let i=`${n}-${r}`;const o=_(t,ae),s=Pe(o);s!=="iso8601"&&(i+=`-${zt(_(t,Te))}`);const a=Bu(s,e);return a&&(i+=a),i}function Rp(t,e,n="auto",r="auto",i="auto",o=void 0){let s=_(t,ur);if(o){const{unit:S,increment:R,roundingMode:F}=o,M=Sd(_(t,De),R,S,F),P=Ce("%Temporal.Instant%");s=new P(M)}const a=_(t,pt),c=An(),u=vi(a,s,c),l=Fa(_(u,be)),d=zt(_(u,Se)),p=zt(_(u,Te)),g=zt(_(u,Me)),y=zt(_(u,Le)),w=Zd(_(u,Ue),_(u,je),_(u,$e),_(u,Be),e);let b=`${l}-${d}-${p}T${g}:${y}${w}`;if(i!=="never"){const S=uo(a,s);b+=Sw(S)}r!=="never"&&(b+=`[${a}]`);const E=Pe(_(t,ae));return b+=Bu(E,n),b}function Xa(t){return Ow.test($u(t))}function ba(t){const e=Ow.exec($u(t));if(!e)throw new RangeError(`invalid time zone offset: ${t}`);const n=e[1]==="-"||e[1]==="\u2212"?-1:1,r=+e[2],i=+(e[3]||0),o=+(e[4]||0),s=+((e[5]||0)+"000000000").slice(0,9);return n*(((r*60+i)*60+o)*1e9+s)}function Bg(t){if(Xa(t)){const n=ba(t);return Hg(n)}return lw($u(t)).resolvedOptions().timeZone}function ns(t,e){const{year:n,month:r,day:i,hour:o,minute:s,second:a,millisecond:c,microsecond:u,nanosecond:l}=Aw(t,e),d=Is(n,r,i,o,s,a,c,u,l);if(d===null)throw new RangeError("Date outside of supported range");return T.toNumber(T.subtract(d,t))}function Hg(t){const e=t<0?"-":"+",n=mt(t),r=n%1e9,i=Bn(n/1e9)%60,o=Bn(n/6e10)%60,s=Bn(n/36e11),a=zt(s),c=zt(o),u=zt(i);let l="";if(r){let d=`${r}`.padStart(9,"0");for(;d[d.length-1]==="0";)d=d.slice(0,-1);l=`:${u}.${d}`}else i&&(l=`:${u}`);return`${e}${a}:${c}${l}`}function Sw(t){let e=T.toNumber(ei(T.BigInt(t),6e10,"halfExpand"));const n=e<0?"-":"+";e=mt(e);const r=e/6e10%60,i=Bn(e/36e11),o=zt(i),s=zt(r);return`${n}${o}:${s}`}function Is(t,e,n,r,i,o,s,a,c){const u=new Date;u.setUTCHours(r,i,o,s),u.setUTCFullYear(t,e-1,n);const l=u.getTime();if(ju(l))return null;let d=T.multiply(T.BigInt(l),Ri);return d=T.add(d,T.multiply(T.BigInt(a),wt)),d=T.add(d,T.BigInt(c)),T.lessThan(d,Su)||T.greaterThan(d,Tu)?null:d}function Tw(t){const{quotient:e,remainder:n}=jn(t,Ri);let r=T.toNumber(e),i=T.toNumber(n);i<0&&(i+=1e6,r-=1);const o=Bn(i/1e3)%1e3,s=i%1e3,a=new Date(r),c=a.getUTCFullYear(),u=a.getUTCMonth()+1,l=a.getUTCDate(),d=a.getUTCHours(),p=a.getUTCMinutes(),g=a.getUTCSeconds(),y=a.getUTCMilliseconds();return{epochMilliseconds:r,year:c,month:u,day:l,hour:d,minute:p,second:g,millisecond:y,microsecond:o,nanosecond:s}}function Aw(t,e){const{epochMilliseconds:n,millisecond:r,microsecond:i,nanosecond:o}=Tw(t),{year:s,month:a,day:c,hour:u,minute:l,second:d}=QS(e,n);return Rw(s,a,c,u,l,d,r,i,o)}function ay(t,e){return T.lessThan(t,e)?e:t}function xw(){return T.add(Gg(),MS)}function JS(t,e){const n=T.add(t,aw),r=ay(xw(),n);let i=ay(sw,t);const o=ns(i,e);let s=i,a=o;for(;o===a&&T.lessThan(T.BigInt(i),r);)s=T.add(i,cw),a=ns(s,e),o===a&&(i=s);return o===a?null:Mw(u=>ns(u,e),i,s,o,a)}function Iw(t,e){const n=xw(),r=T.greaterThan(t,n),i=r?T.subtract(t,aw):sw;let o=T.subtract(t,Pg);const s=ns(o,e);let a=o,c=s;for(;s===c&&T.greaterThan(o,i);)a=T.subtract(o,cw),c=ns(a,e),s===c&&(o=a);if(s===c){if(r){const l=T.subtract(n,xs);return Iw(l,e)}return null}return Mw(l=>ns(l,e),a,o,c,s)}function ZS(t){const e=t.split(/[^\w]+/);if(e.length!==7)throw new RangeError(`expected 7 parts in "${t}`);const n=+e[0],r=+e[1];let i=+e[2];const o=e[3].toUpperCase();if(o==="B"||o==="BC")i=-i+1;else if(o!=="A"&&o!=="AD")throw new RangeError(`Unknown era ${o} in "${t}`);let s=+e[4];s===24&&(s=0);const a=+e[5],c=+e[6];if(!Zn(i)||!Zn(n)||!Zn(r)||!Zn(s)||!Zn(a)||!Zn(c))throw new RangeError(`Invalid number in "${t}`);return{year:i,month:n,day:r,hour:s,minute:a,second:c}}function QS(t,e){const r=lw(t).format(new Date(e));return ZS(r)}function XS(t,e,n,r,i,o,s,a,c,u){const l=Is(e,n,r,i,o,s,a,c,u);if(l===null)throw new RangeError("DateTime outside of supported range");let d=T.subtract(l,xs);T.lessThan(d,Su)&&(d=l);let p=T.add(l,xs);T.greaterThan(p,Tu)&&(p=l);const g=ns(d,t),y=ns(p,t);return(g===y?[g]:[g,y]).map(b=>{const E=T.subtract(l,T.BigInt(b)),S=Aw(E,t);if(!(e!==S.year||n!==S.month||r!==S.day||i!==S.hour||o!==S.minute||s!==S.second||a!==S.millisecond||c!==S.microsecond||u!==S.nanosecond))return E}).filter(b=>b!==void 0)}function Rs(t){if(t===void 0)return!1;const e=t%4===0,n=t%100===0,r=t%400===0;return e&&(!n||r)}function rs(t,e){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[Rs(t)?"leapyear":"standard"][e-1]}function kp(t,e,n){const r=e+(e<3?10:-2),i=t-(e<3?1:0),o=Bn(i/100),s=i-o*100,c=n,u=Bn(2.6*r-.2),l=s+Bn(s/4),d=Bn(o/4)-2*o,p=(c+u+l+d)%7;return p+(p<=0?7:0)}function wd(t,e,n){let r=n;for(let i=e-1;i>0;i--)r+=rs(t,i);return r}function e2(t,e,n){const r=wd(t,e,n),i=kp(t,e,n)||7,o=kp(t,1,1),s=Bn((r-i+10)/7);return s<1?o===5||o===6&&Rs(t-1)?53:52:s===53&&(Rs(t)?366:365)-r<4-i?1:s}function Hi(t,e,n,r,i,o,s,a,c,u){for(const l of[t,e,n,r,i,o,s,a,c,u])if(l!==0)return l<0?-1:1;return 0}function Gl(t,e){let n=t,r=e;if(!Zn(n)||!Zn(r))throw new RangeError("infinity is out of range");return r-=1,n+=Bn(r/12),r%=12,r<0&&(r+=12),r+=1,{year:n,month:r}}function Fu(t,e,n){let r=t,i=e,o=n;if(!Zn(o))throw new RangeError("infinity is out of range");({year:r,month:i}=Gl(r,i));let s=0,a=i>2?r:r-1;for(;s=Rs(a)?366:365,o<-s;)r-=1,a-=1,o+=s;for(a+=1;s=Rs(a)?366:365,o>s;)r+=1,a+=1,o-=s;for(;o<1;)({year:r,month:i}=Gl(r,i-1)),o+=rs(r,i);for(;o>rs(r,i);)o-=rs(r,i),{year:r,month:i}=Gl(r,i+1);return{year:r,month:i,day:o}}function Rw(t,e,n,r,i,o,s,a,c){const{deltaDays:u,hour:l,minute:d,second:p,millisecond:g,microsecond:y,nanosecond:w}=Go(r,i,o,s,a,c),{year:b,month:E,day:S}=Fu(t,e,n+u);return{year:b,month:E,day:S,hour:l,minute:d,second:p,millisecond:g,microsecond:y,nanosecond:w}}function Go(t,e,n,r,i,o){let s=t,a=e,c=n,u=r,l=i,d=o;if(!Zn(s)||!Zn(a)||!Zn(c)||!Zn(u)||!Zn(l)||!Zn(d))throw new RangeError("infinity is out of range");l+=Bn(d/1e3),d=Va(d,1e3),u+=Bn(l/1e3),l=Va(l,1e3),c+=Bn(u/1e3),u=Va(u,1e3),a+=Bn(c/60),c=Va(c,60),s+=Bn(a/60),a=Va(a,60);const p=Bn(s/24);return s=Va(s,24),{deltaDays:p,hour:s,minute:a,second:c,millisecond:u,microsecond:l,nanosecond:d}}function _c(t,e,n,r,i,o,s,a){const c=T.BigInt(t);let u=T.BigInt(s);t!==0&&(u=T.subtract(T.BigInt(s),T.BigInt(a)));const l=T.add(T.BigInt(e),T.multiply(c,T.BigInt(24))),d=T.add(T.BigInt(n),T.multiply(l,fa)),p=T.add(T.BigInt(r),T.multiply(d,fa)),g=T.add(T.BigInt(i),T.multiply(p,wt)),y=T.add(T.BigInt(o),T.multiply(g,wt));return T.add(T.BigInt(u),T.multiply(y,wt))}function Kg(t,e){const n=Ce("%Temporal.Instant%"),r=Eu(T.toNumber(t));let i=T.BigInt(t),o=864e11;if(r===0)return{days:0,nanoseconds:Sn,dayLengthNs:o};if(!Re(e)){let S;return{quotient:S,remainder:i}=jn(i,T.BigInt(o)),{days:T.toNumber(S),nanoseconds:i,dayLengthNs:o}}const s=_(e,De),a=_(e,ur),c=T.add(s,i),u=new n(c),l=_(e,pt),d=_(e,ae),p=vi(l,a,d),g=vi(l,u,d);let{days:y}=vd(_(p,be),_(p,Se),_(p,Te),_(p,Me),_(p,Le),_(p,Ue),_(p,je),_(p,$e),_(p,Be),_(g,be),_(g,Se),_(g,Te),_(g,Me),_(g,Le),_(g,Ue),_(g,je),_(g,$e),_(g,Be),d,"day"),w=_i(a,l,d,0,0,0,y,0,0,0,0,0,0);if(r===1)for(;y>0&&T.greaterThan(w,c);)--y,w=_i(a,l,d,0,0,0,y,0,0,0,0,0,0);i=T.subtract(c,w);let b=!1,E=new n(w);do{const S=_i(E,l,d,0,0,0,r,0,0,0,0,0,0),R=_(E,De);o=T.toNumber(T.subtract(S,R)),b=T.greaterThan(T.multiply(T.subtract(i,T.BigInt(o)),T.BigInt(r)),Sn),b&&(i=T.subtract(i,T.BigInt(o)),E=new n(S),y+=r)}while(b);return{days:y,nanoseconds:i,dayLengthNs:mt(o)}}function tr(t,e,n,r,i,o,s,a,c=void 0){let u=t,l,d,p,g,y,w;if(Re(c)){const D=_i(_(c,ur),_(c,pt),_(c,ae),0,0,0,u,e,n,r,i,o,s),Y=_(c,De);l=T.subtract(D,Y)}else l=_c(u,e,n,r,i,o,s,0);a==="year"||a==="month"||a==="week"||a==="day"?{days:u,nanoseconds:l}=Kg(l,c):u=0;const b=T.lessThan(l,Sn)?-1:1;switch(l=Ng(l),d=p=g=y=w=Sn,a){case"year":case"month":case"week":case"day":case"hour":({quotient:d,remainder:l}=jn(l,wt)),{quotient:p,remainder:d}=jn(d,wt),{quotient:g,remainder:p}=jn(p,wt),{quotient:y,remainder:g}=jn(g,fa),{quotient:w,remainder:y}=jn(y,fa);break;case"minute":({quotient:d,remainder:l}=jn(l,wt)),{quotient:p,remainder:d}=jn(d,wt),{quotient:g,remainder:p}=jn(p,wt),{quotient:y,remainder:g}=jn(g,fa);break;case"second":({quotient:d,remainder:l}=jn(l,wt)),{quotient:p,remainder:d}=jn(d,wt),{quotient:g,remainder:p}=jn(p,wt);break;case"millisecond":({quotient:d,remainder:l}=jn(l,wt)),{quotient:p,remainder:d}=jn(d,wt);break;case"microsecond":({quotient:d,remainder:l}=jn(l,wt));break;case"nanosecond":break;default:throw new Error("assert not reached")}const E=T.toNumber(w)*b,S=T.toNumber(y)*b,R=T.toNumber(g)*b,F=T.toNumber(p)*b,M=T.toNumber(d)*b,P=T.toNumber(l)*b;return{days:u,hours:E,minutes:S,seconds:R,milliseconds:F,microseconds:M,nanoseconds:P}}function Cl(t,e,n,r,i,o){let s=t,a=e,c=n,u=r;const l=Ce("%Temporal.Duration%"),d=Hi(s,a,c,u,0,0,0,0,0,0);let p,g;o&&(g=Et(o),p=_(g,ae));const y=new l(d),w=new l(0,d),b=new l(0,0,d);switch(i){case"year":break;case"month":{if(!p)throw new RangeError("a starting point is required for months balancing");const E=p.dateAdd,S=p.dateUntil;let R=g;for(;mt(s)>0;){const F=xt(null),M=Ir(p,R,y,F,E),P=xt(null);P.largestUnit="month";const D=Ro(p,R,M,P,S),Y=_(D,$n);R=M,a+=Y,s-=d}}break;case"week":if(!p)throw new RangeError("a starting point is required for weeks balancing");for(;mt(s)>0;){let E;({relativeTo:g,days:E}=Tr(p,g,y)),u+=E,s-=d}for(;mt(a)>0;){let E;({relativeTo:g,days:E}=Tr(p,g,w)),u+=E,a-=d}break;default:for(;mt(s)>0;){if(!p)throw new RangeError("a starting point is required for balancing calendar units");let E;({relativeTo:g,days:E}=Tr(p,g,y)),u+=E,s-=d}for(;mt(a)>0;){if(!p)throw new RangeError("a starting point is required for balancing calendar units");let E;({relativeTo:g,days:E}=Tr(p,g,w)),u+=E,a-=d}for(;mt(c)>0;){if(!p)throw new RangeError("a starting point is required for balancing calendar units");let E;({relativeTo:g,days:E}=Tr(p,g,b)),u+=E,c-=d}break}return{years:s,months:a,weeks:c,days:u}}function t2(t,e,n,r,i,o){let s=t,a=e,c=n,u=r;const l=Ce("%Temporal.Duration%"),d=Hi(s,a,c,u,0,0,0,0,0,0);if(d===0)return{years:s,months:a,weeks:c,days:u};let p,g;o&&(g=Et(o),p=_(g,ae));const y=new l(d),w=new l(0,d),b=new l(0,0,d);switch(i){case"year":{if(!p)throw new RangeError("a starting point is required for years balancing");let E,S;for({relativeTo:E,days:S}=Tr(p,g,y);mt(u)>=mt(S);)u-=S,s+=d,g=E,{relativeTo:E,days:S}=Tr(p,g,y);let R;for({relativeTo:E,days:R}=Tr(p,g,w);mt(u)>=mt(R);)u-=R,a+=d,g=E,{relativeTo:E,days:R}=Tr(p,g,w);const F=p.dateAdd,M=xt(null);E=Ir(p,g,y,M,F);const P=p.dateUntil,D=xt(null);D.largestUnit="month";let Y=Ro(p,g,E,D,P),Q=_(Y,$n);for(;mt(a)>=mt(Q);){a-=Q,s+=d,g=E;const B=xt(null);E=Ir(p,g,y,B,F);const se=xt(null);se.largestUnit="month",Y=Ro(p,g,E,se,P),Q=_(Y,$n)}break}case"month":{if(!p)throw new RangeError("a starting point is required for months balancing");let E,S;for({relativeTo:E,days:S}=Tr(p,g,w);mt(u)>=mt(S);)u-=S,a+=d,g=E,{relativeTo:E,days:S}=Tr(p,g,w);break}case"week":{if(!p)throw new RangeError("a starting point is required for weeks balancing");let E,S;for({relativeTo:E,days:S}=Tr(p,g,b);mt(u)>=mt(S);)u-=S,c+=d,g=E,{relativeTo:E,days:S}=Tr(p,g,b);break}}return{years:s,months:a,weeks:c,days:u}}function cy(t,e,n,r,i,o,s,a,c,u,l){if(Re(t)){const d=_(t,ur),p=_(t,pt),g=_(t,ae),y=uo(p,d),w=_i(d,p,g,e,n,r,i,o,s,a,c,u,l),b=Ce("%Temporal.Instant%"),E=new b(w);return uo(p,E)-y}return 0}function kw(t){const e=Ce("%Temporal.Duration%");return new e(-_(t,mr),-_(t,$n),-_(t,Pr),-_(t,yr),-_(t,_r),-_(t,wr),-_(t,vr),-_(t,br),-_(t,Er),-_(t,Sr))}function ri(t,e,n){return RS(n,kS(e,t))}function Fw(t,e,n){const r=ri(e,1,12),i=ri(n,1,rs(t,r));return{year:t,month:r,day:i}}function n2(t,e,n,r,i,o){const s=ri(t,0,23),a=ri(e,0,59),c=ri(n,0,59),u=ri(r,0,999),l=ri(i,0,999),d=ri(o,0,999);return{hour:s,minute:a,second:c,millisecond:u,microsecond:l,nanosecond:d}}function lr(t,e,n){if(t<e||t>n)throw new RangeError(`value out of range: ${e} <= ${t} <= ${n}`)}function ko(t,e,n){lr(e,1,12),lr(n,1,rs(t,e))}function Dw(t,e,n){Pw(t,e,n,12,0,0,0,0,0)}function Qd(t,e,n,r,i,o){lr(t,0,23),lr(e,0,59),lr(n,0,59),lr(r,0,999),lr(i,0,999),lr(o,0,999)}function Cw(t,e,n,r,i,o,s,a,c){ko(t,e,n),Qd(r,i,o,s,a,c)}function Pw(t,e,n,r,i,o,s,a,c){if(lr(t,fd,hd),t===fd&&Is(t,e,n+1,r,i,o,s,a,c-1)==null||t===hd&&Is(t,e,n-1,r,i,o,s,a,c+1)==null)throw new RangeError("DateTime outside of supported range")}function ra(t){if(T.lessThan(t,Su)||T.greaterThan(t,Tu))throw new RangeError("Instant outside of supported range")}function r2(t,e){lr(t,fd,hd),t===fd?lr(e,4,12):t===hd&&lr(e,1,9)}function Nw(t,e,n,r,i,o,s,a,c,u){const l=Hi(t,e,n,r,i,o,s,a,c,u);for(const d of[t,e,n,r,i,o,s,a,c,u]){if(!Zn(d))throw new RangeError("infinite values not allowed as duration fields");const p=Eu(d);if(p!==0&&p!==l)throw new RangeError("mixed-sign values not allowed as duration fields")}}function Wg(t,e,n,r,i,o,s){switch(s){case"year":case"month":{const a=-Yo(t,e,n,r,i,o);if(a===0)return{years:0,months:0,weeks:0,days:0};const c={year:t,month:e,day:n},u={year:r,month:i,day:o};let l=u.year-c.year,d=ga(t,e,n,l,0,0,0,"constrain"),p=-Yo(d.year,d.month,d.day,r,i,o);if(p===0)return s==="year"?{years:l,months:0,weeks:0,days:0}:{years:0,months:l*12,weeks:0,days:0};let g=u.month-c.month;if(p!==a&&(l-=a,g+=a*12),d=ga(t,e,n,l,g,0,0,"constrain"),p=-Yo(d.year,d.month,d.day,r,i,o),p===0)return s==="year"?{years:l,months:g,weeks:0,days:0}:{years:0,months:g+l*12,weeks:0,days:0};p!==a&&(g-=a,g===-a&&(l-=a,g=11*a),d=ga(t,e,n,l,g,0,0,"constrain"),p=-Yo(t,e,n,d.year,d.month,d.day));let y=0;return d.month===u.month?y=u.day-d.day:a<0?y=-d.day-(rs(u.year,u.month)-u.day):y=u.day+(rs(d.year,d.month)-d.day),s==="month"&&(g+=l*12,l=0),{years:l,months:g,weeks:0,days:y}}case"week":case"day":{let a,c,u;Yo(t,e,n,r,i,o)<0?(c={year:t,month:e,day:n},a={year:r,month:i,day:o},u=1):(c={year:r,month:i,day:o},a={year:t,month:e,day:n},u=-1);let l=wd(a.year,a.month,a.day)-wd(c.year,c.month,c.day);for(let p=c.year;p<a.year;++p)l+=Rs(p)?366:365;let d=0;return s==="week"&&(d=Bn(l/7),l%=7),d*=u,l*=u,{years:0,months:0,weeks:d,days:l}}default:throw new Error("assert not reached")}}function Fp(t,e,n,r,i,o,s,a,c,u,l,d){let p=s-t,g=a-e,y=c-n,w=u-r,b=l-i,E=d-o;const S=Hi(0,0,0,0,p,g,y,w,b,E);p*=S,g*=S,y*=S,w*=S,b*=S,E*=S;let R=0;return{deltaDays:R,hour:p,minute:g,second:y,millisecond:w,microsecond:b,nanosecond:E}=Go(p,g,y,w,b,E),R*=S,p*=S,g*=S,y*=S,w*=S,b*=S,E*=S,{deltaDays:R,hours:p,minutes:g,seconds:y,milliseconds:w,microseconds:b,nanoseconds:E}}function Du(t,e,n,r,i){const o=T.subtract(e,t),s=T.remainder(o,T.BigInt(864e11)),a=T.subtract(o,s),c=ei(s,zg[r]*n,i),u=T.add(a,c),l=T.toNumber(T.remainder(u,wt)),d=T.toNumber(T.remainder(T.divide(u,wt),wt)),p=T.toNumber(T.remainder(T.divide(u,Ri),wt));return{seconds:T.toNumber(T.divide(u,ts)),milliseconds:p,microseconds:d,nanoseconds:l}}function vd(t,e,n,r,i,o,s,a,c,u,l,d,p,g,y,w,b,E,S,R,F=xt(null)){let M=t,P=e,D=n,{deltaDays:Y,hours:Q,minutes:B,seconds:se,milliseconds:Ae,microseconds:xe,nanoseconds:re}=Fp(r,i,o,s,a,c,p,g,y,w,b,E);const ne=Hi(0,0,0,Y,Q,B,se,Ae,xe,re);({year:M,month:P,day:D}=Fu(M,P,D+Y)),Yo(u,l,d,M,P,D)===-ne&&({year:M,month:P,day:D}=Fu(M,P,D-ne),{hours:Q,minutes:B,seconds:se,milliseconds:Ae,microseconds:xe,nanoseconds:re}=tr(-ne,Q,B,se,Ae,xe,re,R));const we=Vi(M,P,D,S),qe=Vi(u,l,d,S),ve=qi("day",R),Oe={...F,largestUnit:ve};let{years:Ge,months:Xe,weeks:nn,days:bt}=Ro(S,we,qe,Oe);return{days:bt,hours:Q,minutes:B,seconds:se,milliseconds:Ae,microseconds:xe,nanoseconds:re}=tr(bt,Q,B,se,Ae,xe,re,R),{years:Ge,months:Xe,weeks:nn,days:bt,hours:Q,minutes:B,seconds:se,milliseconds:Ae,microseconds:xe,nanoseconds:re}}function Dp(t,e,n,r,i,o){const s=T.subtract(e,t);if(T.equal(s,Sn))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};const a=Ce("%Temporal.Instant%"),c=new a(t),u=new a(e),l=vi(n,c,r),d=vi(n,u,r);let{years:p,months:g,weeks:y,days:w}=vd(_(l,be),_(l,Se),_(l,Te),_(l,Me),_(l,Le),_(l,Ue),_(l,je),_(l,$e),_(l,Be),_(d,be),_(d,Se),_(d,Te),_(d,Me),_(d,Le),_(d,Ue),_(d,je),_(d,$e),_(d,Be),r,i,o);const b=_i(c,n,r,p,g,y,0,0,0,0,0,0,0);let E=T.subtract(e,b);const S=Yn(b,n,r);({nanoseconds:E,days:w}=Kg(E,S));const{hours:R,minutes:F,seconds:M,milliseconds:P,microseconds:D,nanoseconds:Y}=tr(0,0,0,0,0,0,T.toNumber(E),"hour");return{years:p,months:g,weeks:y,days:w,hours:R,minutes:F,seconds:M,milliseconds:P,microseconds:D,nanoseconds:Y}}function ga(t,e,n,r,i,o,s,a){let c=t,u=e,l=n,d=r,p=i,g=o,y=s;return c+=d,u+=p,{year:c,month:u}=Gl(c,u),{year:c,month:u,day:l}=gd(c,u,l,a),y+=7*g,l+=y,{year:c,month:u,day:l}=Fu(c,u,l),{year:c,month:u,day:l}}function Cp(t,e,n,r,i,o,s,a,c,u,l,d){let p=t,g=e,y=n,w=r,b=i,E=o;p+=s,g+=a,y+=c,w+=u,b+=l,E+=d;let S=0;return{deltaDays:S,hour:p,minute:g,second:y,millisecond:w,microsecond:b,nanosecond:E}=Go(p,g,y,w,b,E),{deltaDays:S,hour:p,minute:g,second:y,millisecond:w,microsecond:b,nanosecond:E}}function Pp(t,e,n,r,i,o,s,a,c,u,l,d,p,g,y,w,b,E,S,R,F){const M=bp(t,e,n,r,i,o,s,a,c,u),P=bp(l,d,p,g,y,w,b,E,S,R),D=qi(M,P);let Y,Q,B,se,Ae,xe,re,ne,ye,we;if(F)if(nt(F)){const qe=Ce("%Temporal.Duration%"),ve=_(F,ae),Oe=new qe(t,e,n,r,0,0,0,0,0,0),Ge=new qe(l,d,p,g,0,0,0,0,0,0),Xe=ve.dateAdd,nn=xt(null),bt=Ir(ve,F,Oe,nn,Xe),an=xt(null),hr=Ir(ve,bt,Ge,an,Xe),xn=qi("day",D),cn=xt(null);cn.largestUnit=xn,{years:Y,months:Q,weeks:B,days:se}=Ro(ve,F,hr,cn),{days:se,hours:Ae,minutes:xe,seconds:re,milliseconds:ne,microseconds:ye,nanoseconds:we}=tr(se,i+y,o+w,s+b,a+E,c+S,u+R,D)}else{const qe=Ce("%Temporal.Instant%"),ve=_(F,pt),Oe=_(F,ae),Ge=_i(_(F,ur),ve,Oe,t,e,n,r,i,o,s,a,c,u),Xe=_i(new qe(Ge),ve,Oe,l,d,p,g,y,w,b,E,S,R);D!=="year"&&D!=="month"&&D!=="week"&&D!=="day"?(Y=0,Q=0,B=0,se=0,{seconds:re,milliseconds:ne,microseconds:ye,nanoseconds:we}=Du(_(F,De),Xe,1,"nanosecond","halfExpand"),{hours:Ae,minutes:xe,seconds:re,milliseconds:ne,microseconds:ye,nanoseconds:we}=tr(0,0,0,re,ne,ye,we,D)):{years:Y,months:Q,weeks:B,days:se,hours:Ae,minutes:xe,seconds:re,milliseconds:ne,microseconds:ye,nanoseconds:we}=Dp(_(F,De),Xe,ve,Oe,D)}else{if(D==="year"||D==="month"||D==="week")throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");Y=Q=B=0,{days:se,hours:Ae,minutes:xe,seconds:re,milliseconds:ne,microseconds:ye,nanoseconds:we}=tr(r+g,i+y,o+w,s+b,a+E,c+S,u+R,D)}return Nw(Y,Q,B,se,Ae,xe,re,ne,ye,we),{years:Y,months:Q,weeks:B,days:se,hours:Ae,minutes:xe,seconds:re,milliseconds:ne,microseconds:ye,nanoseconds:we}}function bd(t,e,n,r,i,o,s){let a=Sn;a=T.add(a,T.BigInt(s)),a=T.add(a,T.multiply(T.BigInt(o),wt)),a=T.add(a,T.multiply(T.BigInt(i),Ri)),a=T.add(a,T.multiply(T.BigInt(r),ts)),a=T.add(a,T.multiply(T.BigInt(n),T.BigInt(60*1e9))),a=T.add(a,T.multiply(T.BigInt(e),T.BigInt(60*60*1e9)));const c=T.add(t,a);return ra(c),c}function Ed(t,e,n,r,i,o,s,a,c,u,l,d,p,g,y,w,b,E,S,R,F){let M=g,{deltaDays:P,hour:D,minute:Y,second:Q,millisecond:B,microsecond:se,nanosecond:Ae}=Cp(r,i,o,s,a,c,y,w,b,E,S,R);M+=P;const xe=Ce("%Temporal.Duration%"),re=Vi(t,e,n,u),ne=new xe(l,d,p,M,0,0,0,0,0,0),ye=Ir(u,re,ne,F);return{year:_(ye,be),month:_(ye,Se),day:_(ye,Te),hour:D,minute:Y,second:Q,millisecond:B,microsecond:se,nanosecond:Ae}}function _i(t,e,n,r,i,o,s,a,c,u,l,d,p,g){const y=Ce("%Temporal.Duration%");if(Hi(r,i,o,s,0,0,0,0,0,0)===0)return bd(_(t,De),a,c,u,l,d,p);const w=vi(e,t,n),b=Vi(_(w,be),_(w,Se),_(w,Te),n),E=new y(r,i,o,s,0,0,0,0,0,0),S=Ir(n,b,E,g),R=Vr(_(S,be),_(S,Se),_(S,Te),_(w,Me),_(w,Le),_(w,Ue),_(w,je),_(w,$e),_(w,Be),n),F=Or(e,R,"compatible");return bd(_(F,De),a,c,u,l,d,p)}function ei(t,e,n){if(e===1)return t;let{quotient:r,remainder:i}=jn(t,T.BigInt(e));if(T.equal(i,Sn))return t;const o=T.lessThan(i,Sn)?-1:1;switch(n){case"ceil":o>0&&(r=T.add(r,T.BigInt(o)));break;case"floor":o<0&&(r=T.add(r,T.BigInt(o)));break;case"trunc":break;case"halfExpand":T.toNumber(Ng(T.multiply(i,T.BigInt(2))))>=e&&(r=T.add(r,T.BigInt(o)));break}return T.multiply(r,T.BigInt(e))}function Sd(t,e,n,r){let i=T.remainder(t,T.BigInt(864e11));T.lessThan(i,Sn)&&(i=T.add(i,T.BigInt(864e11)));const o=T.subtract(t,i),s=ei(i,zg[n]*e,r);return T.add(o,s)}function qg(t,e,n,r,i,o,s,a,c,u,l,d,p=864e11){const{deltaDays:g,hour:y,minute:w,second:b,millisecond:E,microsecond:S,nanosecond:R}=Vg(r,i,o,s,a,c,u,l,d,p),{year:F,month:M,day:P}=Fu(t,e,n+g);return{year:F,month:M,day:P,hour:y,minute:w,second:b,millisecond:E,microsecond:S,nanosecond:R}}function Vg(t,e,n,r,i,o,s,a,c,u=864e11){let l=Sn;switch(a){case"day":case"hour":l=T.BigInt(t);case"minute":l=T.add(T.multiply(l,fa),T.BigInt(e));case"second":l=T.add(T.multiply(l,fa),T.BigInt(n));case"millisecond":l=T.add(T.multiply(l,wt),T.BigInt(r));case"microsecond":l=T.add(T.multiply(l,wt),T.BigInt(i));case"nanosecond":l=T.add(T.multiply(l,wt),T.BigInt(o))}const d=a==="day"?u:zg[a],p=ei(l,d*s,c),g=T.toNumber(T.divide(p,T.BigInt(d)));switch(a){case"day":return{deltaDays:g,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return Go(g,0,0,0,0,0);case"minute":return Go(t,g,0,0,0,0);case"second":return Go(t,e,g,0,0,0);case"millisecond":return Go(t,e,n,g,0,0);case"microsecond":return Go(t,e,n,r,g,0);case"nanosecond":return Go(t,e,n,r,i,g);default:throw new Error(`Invalid unit ${a}`)}}function zl(t,e){return Wg(_(t,be),_(t,Se),_(t,Te),_(e,be),_(e,Se),_(e,Te),"day").days}function Tr(t,e,n){const r=xt(null),i=Ir(t,e,n,r),o=zl(e,i);return{relativeTo:i,days:o}}function Np(t,e,n,r,i){const o=_(t,pt),s=_(t,ae),a=_i(_(t,ur),o,s,e,n,r,i,0,0,0,0,0,0);return Yn(a,o,s)}function Op(t,e,n,r,i,o,s,a,c,u,l,d,p,g){let y=t,w=e,b=n,E=r,S=i,R=o,F=s,M=a,P=c,D=u;if(!Re(g)||d==="year"||d==="month"||d==="week"||d==="day"||d==="nanosecond"&&l===1)return{years:y,months:w,weeks:b,days:E,hours:S,minutes:R,seconds:F,milliseconds:M,microseconds:P,nanoseconds:D};let Y=_c(0,S,R,F,M,P,D,0);const Q=Eu(T.toNumber(Y)),B=_(g,pt),se=_(g,ae),Ae=_i(_(g,ur),B,se,y,w,b,E,0,0,0,0,0,0),xe=Ce("%Temporal.Instant%"),re=_i(new xe(Ae),B,se,0,0,0,Q,0,0,0,0,0,0),ne=T.subtract(re,Ae);return T.greaterThanOrEqual(T.multiply(T.subtract(Y,ne),T.BigInt(Q)),Sn)&&({years:y,months:w,weeks:b,days:E}=Pp(y,w,b,E,0,0,0,0,0,0,0,0,0,Q,0,0,0,0,0,0,g),Y=Sd(T.subtract(Y,ne),l,d,p),{hours:S,minutes:R,seconds:F,milliseconds:M,microseconds:P,nanoseconds:D}=tr(0,0,0,0,0,0,T.toNumber(Y),"hour")),{years:y,months:w,weeks:b,days:E,hours:S,minutes:R,seconds:F,milliseconds:M,microseconds:P,nanoseconds:D}}function Di(t,e,n,r,i,o,s,a,c,u,l,d,p,g=void 0){let y=t,w=e,b=n,E=r,S=i,R=o,F=s,M=a,P=c,D=T.BigInt(u);const Y=Ce("%Temporal.Duration%");let Q,B,se=g;if(se){if(Re(se))B=se,se=Et(se);else if(!nt(se))throw new TypeError("starting point must be PlainDate or ZonedDateTime");Q=_(se,ae)}let Ae;if(d==="year"||d==="month"||d==="week"||d==="day"){D=_c(0,S,R,F,M,P,u,0);let re;B&&(re=Np(B,y,w,b,E));let ne,ye;({days:ne,nanoseconds:D,dayLengthNs:ye}=Kg(D,re)),Ae=T.BigInt(ye),E+=ne,S=R=F=M=P=0}let xe;switch(d){case"year":{if(!Q)throw new RangeError("A starting point is required for years rounding");const re=new Y(y),ne=Q.dateAdd,ye=xt(null),we=Ir(Q,se,re,ye,ne),qe=new Y(y,w,b),ve=xt(null),Oe=Ir(Q,se,qe,ve,ne),Ge=zl(we,Oe);se=we,E+=Ge;const Xe=xt(null),nn=Ir(Q,se,{days:E},Xe,ne),bt=xt(null);bt.largestUnit="year";const an=Ro(Q,se,nn,bt).years;y+=an;const hr=se,xn=xt(null);se=Ir(Q,se,{years:an},xn,ne),E-=zl(hr,se);const yn=new Y(E<0?-1:1);let{days:Pt}=Tr(Q,se,yn);Pt=mt(Pt);const X=T.multiply(T.BigInt(Pt),Ae);D=T.add(T.add(T.multiply(X,T.BigInt(y)),T.multiply(T.BigInt(E),Ae)),D);const N=ei(D,T.toNumber(T.multiply(X,T.BigInt(l))),p);xe=T.toNumber(D)/T.toNumber(X),y=T.toNumber(T.divide(N,X)),D=Sn,w=b=E=0;break}case"month":{if(!Q)throw new RangeError("A starting point is required for months rounding");const re=new Y(y,w),ne=Q.dateAdd,ye=xt(null),we=Ir(Q,se,re,ye,ne),qe=new Y(y,w,b),ve=xt(null),Oe=Ir(Q,se,qe,ve,ne),Ge=zl(we,Oe);se=we,E+=Ge;const Xe=Eu(E),nn=new Y(0,E<0?-1:1);let bt;for({relativeTo:se,days:bt}=Tr(Q,se,nn);mt(E)>=mt(bt);)w+=Xe,E-=bt,{relativeTo:se,days:bt}=Tr(Q,se,nn);bt=mt(bt);const an=T.multiply(T.BigInt(bt),Ae);D=T.add(T.add(T.multiply(an,T.BigInt(w)),T.multiply(T.BigInt(E),Ae)),D);const hr=ei(D,T.toNumber(T.multiply(an,T.BigInt(l))),p);xe=T.toNumber(D)/T.toNumber(an),w=T.toNumber(T.divide(hr,an)),D=Sn,b=E=0;break}case"week":{if(!Q)throw new RangeError("A starting point is required for weeks rounding");const re=Eu(E),ne=new Y(0,0,E<0?-1:1);let ye;for({relativeTo:se,days:ye}=Tr(Q,se,ne);mt(E)>=mt(ye);)b+=re,E-=ye,{relativeTo:se,days:ye}=Tr(Q,se,ne);ye=mt(ye);const we=T.multiply(T.BigInt(ye),Ae);D=T.add(T.add(T.multiply(we,T.BigInt(b)),T.multiply(T.BigInt(E),Ae)),D);const qe=ei(D,T.toNumber(T.multiply(we,T.BigInt(l))),p);xe=T.toNumber(D)/T.toNumber(we),b=T.toNumber(T.divide(qe,we)),D=Sn,E=0;break}case"day":{const re=Ae;D=T.add(T.multiply(re,T.BigInt(E)),D);const ne=ei(D,T.toNumber(T.multiply(re,T.BigInt(l))),p);xe=T.toNumber(D)/T.toNumber(re),E=T.toNumber(T.divide(ne,re)),D=Sn;break}case"hour":{let ne=T.multiply(T.BigInt(S),T.BigInt(36e11));ne=T.add(ne,T.multiply(T.BigInt(R),T.BigInt(6e10))),ne=T.add(ne,T.multiply(T.BigInt(F),ts)),ne=T.add(ne,T.multiply(T.BigInt(M),Ri)),ne=T.add(ne,T.multiply(T.BigInt(P),wt)),ne=T.add(ne,D),xe=T.toNumber(ne)/36e11;const ye=ei(ne,36e11*l,p);S=T.toNumber(T.divide(ye,T.BigInt(36e11))),D=Sn,R=F=M=P=0;break}case"minute":{let ne=T.multiply(T.BigInt(R),T.BigInt(6e10));ne=T.add(ne,T.multiply(T.BigInt(F),ts)),ne=T.add(ne,T.multiply(T.BigInt(M),Ri)),ne=T.add(ne,T.multiply(T.BigInt(P),wt)),ne=T.add(ne,D),xe=T.toNumber(ne)/6e10;const ye=ei(ne,6e10*l,p);R=T.toNumber(T.divide(ye,T.BigInt(6e10))),D=Sn,F=M=P=0;break}case"second":{let ne=T.multiply(T.BigInt(F),ts);ne=T.add(ne,T.multiply(T.BigInt(M),Ri)),ne=T.add(ne,T.multiply(T.BigInt(P),wt)),ne=T.add(ne,D),xe=T.toNumber(ne)/1e9;const ye=ei(ne,1e9*l,p);F=T.toNumber(T.divide(ye,T.BigInt(1e9))),D=Sn,M=P=0;break}case"millisecond":{let ne=T.multiply(T.BigInt(M),Ri);ne=T.add(ne,T.multiply(T.BigInt(P),wt)),ne=T.add(ne,D),xe=T.toNumber(ne)/1e6;const ye=ei(ne,1e6*l,p);M=T.toNumber(T.divide(ye,T.BigInt(1e6))),D=Sn,P=0;break}case"microsecond":{let ne=T.multiply(T.BigInt(P),wt);ne=T.add(ne,D),xe=T.toNumber(ne)/1e3;const ye=ei(ne,1e3*l,p);P=T.toNumber(T.divide(ye,T.BigInt(1e3))),D=Sn;break}case"nanosecond":{xe=T.toNumber(D),D=ei(D,l,p);break}}return{years:y,months:w,weeks:b,days:E,hours:S,minutes:R,seconds:F,milliseconds:M,microseconds:P,nanoseconds:T.toNumber(D),total:xe}}function Yo(t,e,n,r,i,o){for(const[s,a]of[[t,r],[e,i],[n,o]])if(s!==a)return ma(s-a);return 0}function Va(t,e){let n=t%e;return PS(n,-0)?0:(n<0&&(n+=e),n)}function Td(t){const e=fu(t);return typeof globalThis.BigInt!="undefined"?globalThis.BigInt(e.toString(10)):e}function fu(t){if(t instanceof T)return t;let e=t;if(typeof t=="object"){const n=t[Symbol.toPrimitive];n&&typeof n=="function"&&(e=Cg(n,t,["number"]))}switch(typeof e){case"undefined":case"object":case"number":case"symbol":default:throw new TypeError(`cannot convert ${typeof t} to bigint`);case"string":if(!e.match(/^\s*(?:[+-]?\d+\s*)?$/))throw new SyntaxError("invalid BigInt syntax");case"bigint":try{return T.BigInt(e.toString())}catch(n){throw n instanceof Error&&n.message.startsWith("Invalid integer")?new SyntaxError(n.message):n}case"boolean":return e?Pg:Sn}}const Gg=(()=>{let t=T.BigInt(Date.now()%1e6);return()=>{const e=T.BigInt(Date.now()),n=T.add(T.multiply(e,Ri),t);return t=T.divide(e,Ri),T.greaterThan(n,Tu)?Tu:T.lessThan(n,Su)?Su:n}})();function i2(){const t=new ow("en-us"),e=Ce("%Temporal.TimeZone%");return new e(dw(t.resolvedOptions().timeZone))}function ma(t){return t<0?-1:t>0?1:t}function He(t){if(t===void 0)return xt(null);if(Mt(t)&&t!==null)return t;throw new TypeError(`Options parameter must be an object, not ${t===null?"null":`${typeof t}`}`)}function wc(t,e){const n=xt(null);return n[t]=e,n}function Oo(t,e,n,r){let i=t[e];if(i!==void 0){if(i=Pe(i),!n.includes(i))throw new RangeError(`${e} must be one of ${n.join(", ")}, not ${i}`);return i}return r}function o2(t,e,n,r,i){let o=t[e];if(o===void 0)return i;const s=Au(o);if(ju(s)||s<n||s>r)throw new RangeError(`${e} must be between ${n} and ${r}, not ${s}`);return Bn(s)}const Ow=new RegExp(`^${tw.source}$`);function Mw(t,e,n,r=t(e),i=t(n)){let o=T.BigInt(e),s=T.BigInt(n),a=r,c=i;for(;T.greaterThan(T.subtract(s,o),Pg);){const u=T.divide(T.add(o,s),T.BigInt(2)),l=t(u);if(l===a)o=u,a=l;else if(l===c)s=u,c=l;else throw new Error(`invalid state in bisection ${a} - ${l} - ${c}`)}return s}const zg={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},Lw=Symbol("date"),Uw=Symbol("ym"),jw=Symbol("md"),$w=Symbol("time"),Bw=Symbol("datetime"),Hw=Symbol("zoneddatetime"),Kw=Symbol("instant"),Cc=Symbol("original"),Mp=Symbol("timezone"),Yl=Symbol("timezone-id-given"),hi=Symbol("calendar-id"),Ww=Symbol("locale"),Lp=Symbol("options"),hu=t=>({value:t,enumerable:!0,writable:!1,configurable:!0}),Da=globalThis.Intl.DateTimeFormat,Fo=Object.assign,s2=Object.prototype.hasOwnProperty,a2=Reflect.apply;function Js(t,e){let n=t[e];return typeof n=="function"&&(n=new Da(t[Ww],n(t[Lp])),t[e]=n),n}function Jc(t){let e=t[Mp];return typeof e=="string"&&(e=Mr(e),t[Mp]=e),e}function Ea(t=void 0,e={}){if(!(this instanceof Ea))return new Ea(t,e);const n=typeof e!="undefined",r=n?Fo({},e):{},i=new Da(t,r),o=i.resolvedOptions();if(n){const s=Fo({},o);for(const a in s)a2(s2,r,[a])||delete s[a];this[Lp]=s}else this[Lp]=r;this[Yl]=r.timeZone?r.timeZone:null,this[Ww]=o.locale,this[Cc]=i,this[Mp]=o.timeZone,this[hi]=o.calendar,this[Lw]=m2,this[Uw]=p2,this[jw]=g2,this[$w]=h2,this[Bw]=y2,this[Hw]=_2,this[Kw]=w2}Object.defineProperty(Ea,"name",{writable:!0,value:"DateTimeFormat"});Ea.supportedLocalesOf=function(t,e){return Da.supportedLocalesOf(t,e)};const Yg={resolvedOptions:hu(c2),format:hu(u2),formatRange:hu(d2)};"formatToParts"in Da.prototype&&(Yg.formatToParts=hu(l2));"formatRangeToParts"in Da.prototype&&(Yg.formatRangeToParts=hu(f2));Ea.prototype=Object.create(Da.prototype,Yg);Object.defineProperty(Ea,"prototype",{writable:!1,enumerable:!1,configurable:!1});const Ls=Ea;function c2(){return this[Cc].resolvedOptions()}function Xd(t,e){if(!e)return t;const n=t.resolvedOptions();return n.timeZone===e?t:((n.dateStyle||n.timeStyle)&&(delete n.weekday,delete n.era,delete n.year,delete n.month,delete n.day,delete n.hour,delete n.minute,delete n.second,delete n.timeZoneName,delete n.hourCycle,delete n.hour12,delete n.dayPeriod),new Da(n.locale,{...n,timeZone:e}))}function u2(t,...e){let{instant:n,formatter:r,timeZone:i}=bc(t,this);return n&&r?(r=Xd(r,i),r.format(n.epochMilliseconds)):this[Cc].format(t,...e)}function l2(t,...e){let{instant:n,formatter:r,timeZone:i}=bc(t,this);return n&&r?(r=Xd(r,i),r.formatToParts(n.epochMilliseconds)):this[Cc].formatToParts(t,...e)}function d2(t,e){if(vc(t)||vc(e)){if(!qw(t,e))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{instant:n,formatter:r,timeZone:i}=bc(t,this),{instant:o,formatter:s,timeZone:a}=bc(e,this);if(i&&a&&i!==a)throw new RangeError("cannot format range between different time zones");if(n&&o&&r&&s&&r===s)return Xd(r,i).formatRange(n.epochMilliseconds,o.epochMilliseconds)}return this[Cc].formatRange(t,e)}function f2(t,e){if(vc(t)||vc(e)){if(!qw(t,e))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{instant:n,formatter:r,timeZone:i}=bc(t,this),{instant:o,formatter:s,timeZone:a}=bc(e,this);if(i&&a&&i!==a)throw new RangeError("cannot format range between different time zones");if(n&&o&&r&&s&&r===s)return Xd(r,i).formatRangeToParts(n.epochMilliseconds,o.epochMilliseconds)}return this[Cc].formatRangeToParts(t,e)}function zu(t={},e={}){const n=Fo({},t);for(const r of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])n[r]=r in e?e[r]:n[r],(n[r]===!1||n[r]===void 0)&&delete n[r];return n}function h2(t){let e=zu(t,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return tf(e)||(e=Fo({},e,{hour:"numeric",minute:"numeric",second:"numeric"})),e}function p2(t){let e=zu(t,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in e||"month"in e||(e=Fo(e,{year:"numeric",month:"numeric"})),e}function g2(t){let e=zu(t,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in e||"day"in e||(e=Fo({},e,{month:"numeric",day:"numeric"})),e}function m2(t){let e=zu(t,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return ef(e)||(e=Fo({},e,{year:"numeric",month:"numeric",day:"numeric"})),e}function y2(t){let e=zu(t,{timeZoneName:!1});return!tf(e)&&!ef(e)&&(e=Fo({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function _2(t){let e=t;return!tf(e)&&!ef(e)&&(e=Fo({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),e.timeZoneName===void 0&&(e.timeZoneName="short")),e}function w2(t){let e=t;return!tf(e)&&!ef(e)&&(e=Fo({},e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),e}function ef(t){return"year"in t||"month"in t||"day"in t||"weekday"in t||"dateStyle"in t}function tf(t){return"hour"in t||"minute"in t||"second"in t||"timeStyle"in t||"dayPeriod"in t}function vc(t){return nt(t)||sn(t)||Je(t)||Re(t)||yt(t)||Gn(t)||Cn(t)}function qw(t,e){return!(!vc(t)||!vc(e)||sn(t)&&!sn(e)||nt(t)&&!nt(e)||Je(t)&&!Je(e)||Re(t)&&!Re(e)||yt(t)&&!yt(e)||Gn(t)&&!Gn(e)||Cn(t)&&!Cn(e))}function bc(t,e){const n=Ce("%Temporal.PlainDateTime%");if(sn(t)){const r=_(t,Me),i=_(t,Le),o=_(t,Ue),s=_(t,je),a=_(t,$e),c=_(t,Be),u=new n(1970,1,1,r,i,o,s,a,c,e[hi]);return{instant:Or(Jc(e),u,"compatible"),formatter:Js(e,$w)}}if(yt(t)){const r=_(t,be),i=_(t,Se),o=_(t,Te),s=Pe(_(t,ae));if(s!==e[hi])throw new RangeError(`cannot format PlainYearMonth with calendar ${s} in locale with calendar ${e[hi]}`);const a=new n(r,i,o,12,0,0,0,0,0,s);return{instant:Or(Jc(e),a,"compatible"),formatter:Js(e,Uw)}}if(Gn(t)){const r=_(t,be),i=_(t,Se),o=_(t,Te),s=Pe(_(t,ae));if(s!==e[hi])throw new RangeError(`cannot format PlainMonthDay with calendar ${s} in locale with calendar ${e[hi]}`);const a=new n(r,i,o,12,0,0,0,0,0,s);return{instant:Or(Jc(e),a,"compatible"),formatter:Js(e,jw)}}if(nt(t)){const r=_(t,be),i=_(t,Se),o=_(t,Te),s=Pe(_(t,ae));if(s!=="iso8601"&&s!==e[hi])throw new RangeError(`cannot format PlainDate with calendar ${s} in locale with calendar ${e[hi]}`);const a=new n(r,i,o,12,0,0,0,0,0,e[hi]);return{instant:Or(Jc(e),a,"compatible"),formatter:Js(e,Lw)}}if(Je(t)){const r=_(t,be),i=_(t,Se),o=_(t,Te),s=_(t,Me),a=_(t,Le),c=_(t,Ue),u=_(t,je),l=_(t,$e),d=_(t,Be),p=Pe(_(t,ae));if(p!=="iso8601"&&p!==e[hi])throw new RangeError(`cannot format PlainDateTime with calendar ${p} in locale with calendar ${e[hi]}`);let g=t;return p==="iso8601"&&(g=new n(r,i,o,s,a,c,u,l,d,e[hi])),{instant:Or(Jc(e),g,"compatible"),formatter:Js(e,Bw)}}if(Re(t)){const r=Pe(_(t,ae));if(r!=="iso8601"&&r!==e[hi])throw new RangeError(`cannot format ZonedDateTime with calendar ${r} in locale with calendar ${e[hi]}`);const i=_(t,pt),o=Pe(i);if(e[Yl]&&e[Yl]!==o)throw new RangeError(`timeZone option ${e[Yl]} doesn't match actual time zone ${o}`);return{instant:_(t,ur),formatter:Js(e,Hw),timeZone:o}}return Cn(t)?{instant:t,formatter:Js(e,Kw)}:{}}var uy=Object.freeze({__proto__:null,DateTimeFormat:Ls});const Zc=["year","month","week","day"],ly={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3};class xi{constructor(e){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const n=fu(e);ra(n),Po(this),Ze(this,De,n);{const r=yh(this,void 0,"auto");Object.defineProperty(this,"_repr_",{value:`${this[Symbol.toStringTag]} <${r}>`,writable:!1,enumerable:!1,configurable:!1})}}get epochSeconds(){if(!Cn(this))throw new TypeError("invalid receiver");const e=_(this,De);return T.toNumber(T.divide(e,ts))}get epochMilliseconds(){if(!Cn(this))throw new TypeError("invalid receiver");const e=T.BigInt(_(this,De));return T.toNumber(T.divide(e,Ri))}get epochMicroseconds(){if(!Cn(this))throw new TypeError("invalid receiver");const e=T.BigInt(_(this,De));return Td(T.divide(e,wt))}get epochNanoseconds(){if(!Cn(this))throw new TypeError("invalid receiver");return Td(T.BigInt(_(this,De)))}add(e){if(!Cn(this))throw new TypeError("invalid receiver");const{hours:n,minutes:r,seconds:i,milliseconds:o,microseconds:s,nanoseconds:a}=Wi(e,["years","months","weeks","days"]),c=bd(_(this,De),n,r,i,o,s,a);return new xi(c)}subtract(e){if(!Cn(this))throw new TypeError("invalid receiver");const{hours:n,minutes:r,seconds:i,milliseconds:o,microseconds:s,nanoseconds:a}=Wi(e,["years","months","weeks","days"]),c=bd(_(this,De),-n,-r,-i,-o,-s,-a);return new xi(c)}until(e,n=void 0){if(!Cn(this))throw new TypeError("invalid receiver");const r=oo(e),i=He(n),o=Rr(i,"nanosecond",Zc),s=qi("second",o),a=wi(i,"auto",Zc,s);Fi(a,o);const c=On(i,"trunc"),u=ki(i,ly[o],!1),l=_(this,De),d=_(r,De);let{seconds:p,milliseconds:g,microseconds:y,nanoseconds:w}=Du(l,d,u,o,c),b,E;({hours:b,minutes:E,seconds:p,milliseconds:g,microseconds:y,nanoseconds:w}=tr(0,0,0,p,g,y,w,a));const S=Ce("%Temporal.Duration%");return new S(0,0,0,0,b,E,p,g,y,w)}since(e,n=void 0){if(!Cn(this))throw new TypeError("invalid receiver");const r=oo(e),i=He(n),o=Rr(i,"nanosecond",Zc),s=qi("second",o),a=wi(i,"auto",Zc,s);Fi(a,o);const c=On(i,"trunc"),u=ki(i,ly[o],!1),l=_(r,De),d=_(this,De);let{seconds:p,milliseconds:g,microseconds:y,nanoseconds:w}=Du(l,d,u,o,c),b,E;({hours:b,minutes:E,seconds:p,milliseconds:g,microseconds:y,nanoseconds:w}=tr(0,0,0,p,g,y,w,a));const S=Ce("%Temporal.Duration%");return new S(0,0,0,0,b,E,p,g,y,w)}round(e){if(!Cn(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const n=typeof e=="string"?wc("smallestUnit",e):He(e),r=Rr(n,void 0,Zc);if(r===void 0)throw new RangeError("smallestUnit is required");const i=On(n,"halfExpand"),s=ki(n,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[r],!0),a=_(this,De),c=Sd(a,s,r,i);return new xi(c)}equals(e){if(!Cn(this))throw new TypeError("invalid receiver");const n=oo(e),r=_(this,De),i=_(n,De);return T.equal(T.BigInt(r),T.BigInt(i))}toString(e=void 0){if(!Cn(this))throw new TypeError("invalid receiver");const n=He(e);let r=n.timeZone;r!==void 0&&(r=Mr(r));const{precision:i,unit:o,increment:s}=Wu(n),a=On(n,"trunc"),c=_(this,De),u=Sd(c,s,o,a),l=new xi(u);return yh(l,r,i)}toJSON(){if(!Cn(this))throw new TypeError("invalid receiver");return yh(this,void 0,"auto")}toLocaleString(e=void 0,n=void 0){if(!Cn(this))throw new TypeError("invalid receiver");return new Ls(e,n).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(e){if(!Cn(this))throw new TypeError("invalid receiver");if(!Mt(e))throw new TypeError("invalid argument in toZonedDateTime");const n=e.calendar;if(n===void 0)throw new TypeError("missing calendar property in toZonedDateTime");const r=nr(n),i=e.timeZone;if(i===void 0)throw new TypeError("missing timeZone property in toZonedDateTime");const o=Mr(i);return Yn(_(this,De),o,r)}toZonedDateTimeISO(e){let n=e;if(!Cn(this))throw new TypeError("invalid receiver");if(Mt(n)){const o=n.timeZone;o!==void 0&&(n=o)}const r=Mr(n),i=An();return Yn(_(this,De),r,i)}static fromEpochSeconds(e){const n=Au(e),r=T.multiply(T.BigInt(n),ts);return ra(r),new xi(r)}static fromEpochMilliseconds(e){const n=Au(e),r=T.multiply(T.BigInt(n),Ri);return ra(r),new xi(r)}static fromEpochMicroseconds(e){const n=fu(e),r=T.multiply(n,wt);return ra(r),new xi(r)}static fromEpochNanoseconds(e){const n=fu(e);return ra(n),new xi(n)}static from(e){return Cn(e)?new xi(_(e,De)):oo(e)}static compare(e,n){const r=oo(e),i=oo(n),o=_(r,De),s=_(i,De);return T.lessThan(o,s)?-1:T.greaterThan(o,s)?1:0}}Co(xi,"Temporal.Instant");const Pl=["hour","minute","second","millisecond","microsecond","nanosecond"];class Yu{constructor(e,n,r,i=An()){const o=At(e),s=At(n),a=At(r),c=nr(i);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");mw(this,o,s,a,c)}get calendar(){if(!nt(this))throw new TypeError("invalid receiver");return _(this,ae)}get era(){if(!nt(this))throw new TypeError("invalid receiver");return Vd(_(this,ae),this)}get eraYear(){if(!nt(this))throw new TypeError("invalid receiver");return Gd(_(this,ae),this)}get year(){if(!nt(this))throw new TypeError("invalid receiver");return Kd(_(this,ae),this)}get month(){if(!nt(this))throw new TypeError("invalid receiver");return Wd(_(this,ae),this)}get monthCode(){if(!nt(this))throw new TypeError("invalid receiver");return Vu(_(this,ae),this)}get day(){if(!nt(this))throw new TypeError("invalid receiver");return qd(_(this,ae),this)}get dayOfWeek(){if(!nt(this))throw new TypeError("invalid receiver");return Mg(_(this,ae),this)}get dayOfYear(){if(!nt(this))throw new TypeError("invalid receiver");return Lg(_(this,ae),this)}get weekOfYear(){if(!nt(this))throw new TypeError("invalid receiver");return Ug(_(this,ae),this)}get daysInWeek(){if(!nt(this))throw new TypeError("invalid receiver");return jg(_(this,ae),this)}get daysInMonth(){if(!nt(this))throw new TypeError("invalid receiver");return rc(_(this,ae),this)}get daysInYear(){if(!nt(this))throw new TypeError("invalid receiver");return zd(_(this,ae),this)}get monthsInYear(){if(!nt(this))throw new TypeError("invalid receiver");return Yd(_(this,ae),this)}get inLeapYear(){if(!nt(this))throw new TypeError("invalid receiver");return Jd(_(this,ae),this)}with(e,n=void 0){if(!nt(this))throw new TypeError("invalid receiver");if(!Mt(e))throw new TypeError("invalid argument");Fc(e);const r=_(this,ae),i=hn(r,["day","month","monthCode","year"]),o=Ms(e,i);if(!o)throw new TypeError("invalid date-like");let s=Ep(this,i);s=va(r,s,o),s=Ep(s,i);const a=He(n);return io(r,s,a)}withCalendar(e){if(!nt(this))throw new TypeError("invalid receiver");const n=nr(e);return new Yu(_(this,be),_(this,Se),_(this,Te),n)}add(e,n=void 0){if(!nt(this))throw new TypeError("invalid receiver");const r=nc(e),i=He(n);return Ir(_(this,ae),this,r,i)}subtract(e,n=void 0){if(!nt(this))throw new TypeError("invalid receiver");const r=kw(nc(e)),i=He(n);return Ir(_(this,ae),this,r,i)}until(e,n=void 0){if(!nt(this))throw new TypeError("invalid receiver");const r=Et(e),i=_(this,ae),o=_(r,ae),s=Pe(i),a=Pe(o);if(s!==a)throw new RangeError(`cannot compute difference between dates of ${s} and ${a} calendars`);const c=He(n),u=Rr(c,"day",Pl),l=qi("day",u),d=wi(c,"auto",Pl,l);Fi(d,u);const p=On(c,"trunc"),g=ki(c,void 0,!1),y={...c,largestUnit:d},w=Ro(i,this,r,y);if(u==="day"&&g===1)return w;let{years:b,months:E,weeks:S,days:R}=w;({years:b,months:E,weeks:S,days:R}=Di(b,E,S,R,0,0,0,0,0,0,g,u,p,this));const F=Ce("%Temporal.Duration%");return new F(b,E,S,R,0,0,0,0,0,0)}since(e,n=void 0){if(!nt(this))throw new TypeError("invalid receiver");const r=Et(e),i=_(this,ae),o=_(r,ae),s=Pe(i),a=Pe(o);if(s!==a)throw new RangeError(`cannot compute difference between dates of ${s} and ${a} calendars`);const c=He(n),u=Rr(c,"day",Pl),l=qi("day",u),d=wi(c,"auto",Pl,l);Fi(d,u);const p=On(c,"trunc"),g=ki(c,void 0,!1),y={...c,largestUnit:d};let{years:w,months:b,weeks:E,days:S}=Ro(i,this,r,y);const R=Ce("%Temporal.Duration%");return u==="day"&&g===1?new R(-w,-b,-E,-S,0,0,0,0,0,0):({years:w,months:b,weeks:E,days:S}=Di(w,b,E,S,0,0,0,0,0,0,g,u,Hu(p),this),new R(-w,-b,-E,-S,0,0,0,0,0,0))}equals(e){if(!nt(this))throw new TypeError("invalid receiver");const n=Et(e);for(const r of[be,Se,Te]){const i=_(this,r),o=_(n,r);if(i!==o)return!1}return Gu(_(this,ae),_(n,ae))}toString(e=void 0){if(!nt(this))throw new TypeError("invalid receiver");const n=He(e),r=Ku(n);return Tp(this,r)}toJSON(){if(!nt(this))throw new TypeError("invalid receiver");return Tp(this)}toLocaleString(e=void 0,n=void 0){if(!nt(this))throw new TypeError("invalid receiver");return new Ls(e,n).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(e=void 0){if(!nt(this))throw new TypeError("invalid receiver");const n=_(this,be),r=_(this,Se),i=_(this,Te),o=_(this,ae);if(e===void 0)return Vr(n,r,i,0,0,0,0,0,0,o);const s=vo(e),a=_(s,Me),c=_(s,Le),u=_(s,Ue),l=_(s,je),d=_(s,$e),p=_(s,Be);return Vr(n,r,i,a,c,u,l,d,p,o)}toZonedDateTime(e){if(!nt(this))throw new TypeError("invalid receiver");let n,r;if(Mt(e)){const b=e.timeZone;b===void 0?n=Mr(e):(n=Mr(b),r=e.plainTime)}else n=Mr(e);const i=_(this,be),o=_(this,Se),s=_(this,Te),a=_(this,ae);let c=0,u=0,l=0,d=0,p=0,g=0;r!==void 0&&(r=vo(r),c=_(r,Me),u=_(r,Le),l=_(r,Ue),d=_(r,je),p=_(r,$e),g=_(r,Be));const y=Vr(i,o,s,c,u,l,d,p,g,a),w=Or(n,y,"compatible");return Yn(_(w,De),n,a)}toPlainYearMonth(){if(!nt(this))throw new TypeError("invalid receiver");const e=_(this,ae),n=hn(e,["monthCode","year"]),r=Xr(this,n);return As(e,r)}toPlainMonthDay(){if(!nt(this))throw new TypeError("invalid receiver");const e=_(this,ae),n=hn(e,["day","monthCode"]),r=ha(this,n);return yc(e,r)}getISOFields(){if(!nt(this))throw new TypeError("invalid receiver");return{calendar:_(this,ae),isoDay:_(this,Te),isoMonth:_(this,Se),isoYear:_(this,be)}}static from(e,n=void 0){const r=He(n);return nt(e)?(Xn(r),Vi(_(e,be),_(e,Se),_(e,Te),_(e,ae))):Et(e,r)}static compare(e,n){const r=Et(e),i=Et(n);return Yo(_(r,be),_(r,Se),_(r,Te),_(i,be),_(i,Se),_(i,Te))}}Co(Yu,"Temporal.PlainDate");class Ju{constructor(e,n,r,i=0,o=0,s=0,a=0,c=0,u=0,l=An()){const d=At(e),p=At(n),g=At(r),y=At(i),w=At(o),b=At(s),E=At(a),S=At(c),R=At(u),F=nr(l);if(arguments.length<3)throw new RangeError("missing argument: isoYear, isoMonth and isoDay are required");yw(this,d,p,g,y,w,b,E,S,R,F)}get calendar(){if(!Je(this))throw new TypeError("invalid receiver");return _(this,ae)}get year(){if(!Je(this))throw new TypeError("invalid receiver");return Kd(_(this,ae),this)}get month(){if(!Je(this))throw new TypeError("invalid receiver");return Wd(_(this,ae),this)}get monthCode(){if(!Je(this))throw new TypeError("invalid receiver");return Vu(_(this,ae),this)}get day(){if(!Je(this))throw new TypeError("invalid receiver");return qd(_(this,ae),this)}get hour(){if(!Je(this))throw new TypeError("invalid receiver");return _(this,Me)}get minute(){if(!Je(this))throw new TypeError("invalid receiver");return _(this,Le)}get second(){if(!Je(this))throw new TypeError("invalid receiver");return _(this,Ue)}get millisecond(){if(!Je(this))throw new TypeError("invalid receiver");return _(this,je)}get microsecond(){if(!Je(this))throw new TypeError("invalid receiver");return _(this,$e)}get nanosecond(){if(!Je(this))throw new TypeError("invalid receiver");return _(this,Be)}get era(){if(!Je(this))throw new TypeError("invalid receiver");return Vd(_(this,ae),this)}get eraYear(){if(!Je(this))throw new TypeError("invalid receiver");return Gd(_(this,ae),this)}get dayOfWeek(){if(!Je(this))throw new TypeError("invalid receiver");return Mg(_(this,ae),this)}get dayOfYear(){if(!Je(this))throw new TypeError("invalid receiver");return Lg(_(this,ae),this)}get weekOfYear(){if(!Je(this))throw new TypeError("invalid receiver");return Ug(_(this,ae),this)}get daysInWeek(){if(!Je(this))throw new TypeError("invalid receiver");return jg(_(this,ae),this)}get daysInYear(){if(!Je(this))throw new TypeError("invalid receiver");return zd(_(this,ae),this)}get daysInMonth(){if(!Je(this))throw new TypeError("invalid receiver");return rc(_(this,ae),this)}get monthsInYear(){if(!Je(this))throw new TypeError("invalid receiver");return Yd(_(this,ae),this)}get inLeapYear(){if(!Je(this))throw new TypeError("invalid receiver");return Jd(_(this,ae),this)}with(e,n=void 0){if(!Je(this))throw new TypeError("invalid receiver");if(!Mt(e))throw new TypeError("invalid argument");Fc(e);const r=He(n),i=_(this,ae),o=hn(i,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),s=Ms(e,o);if(!s)throw new TypeError("invalid date-time-like");let a=md(this,o);a=va(i,a,s),a=md(a,o);const{year:c,month:u,day:l,hour:d,minute:p,second:g,millisecond:y,microsecond:w,nanosecond:b}=qu(i,a,r);return Vr(c,u,l,d,p,g,y,w,b,i)}withPlainTime(e=void 0){if(!Je(this))throw new TypeError("invalid receiver");const n=_(this,be),r=_(this,Se),i=_(this,Te),o=_(this,ae);if(e===void 0)return Vr(n,r,i,0,0,0,0,0,0,o);const s=vo(e),a=_(s,Me),c=_(s,Le),u=_(s,Ue),l=_(s,je),d=_(s,$e),p=_(s,Be);return Vr(n,r,i,a,c,u,l,d,p,o)}withPlainDate(e){if(!Je(this))throw new TypeError("invalid receiver");const n=Et(e),r=_(n,be),i=_(n,Se),o=_(n,Te);let s=_(n,ae);const a=_(this,Me),c=_(this,Le),u=_(this,Ue),l=_(this,je),d=_(this,$e),p=_(this,Be);return s=bw(_(this,ae),s),Vr(r,i,o,a,c,u,l,d,p,s)}withCalendar(e){if(!Je(this))throw new TypeError("invalid receiver");const n=nr(e);return new Ju(_(this,be),_(this,Se),_(this,Te),_(this,Me),_(this,Le),_(this,Ue),_(this,je),_(this,$e),_(this,Be),n)}add(e,n=void 0){if(!Je(this))throw new TypeError("invalid receiver");const r=Wi(e),{years:i,months:o,weeks:s,days:a,hours:c,minutes:u,seconds:l,milliseconds:d,microseconds:p,nanoseconds:g}=r,y=He(n),w=_(this,ae),{year:b,month:E,day:S,hour:R,minute:F,second:M,millisecond:P,microsecond:D,nanosecond:Y}=Ed(_(this,be),_(this,Se),_(this,Te),_(this,Me),_(this,Le),_(this,Ue),_(this,je),_(this,$e),_(this,Be),w,i,o,s,a,c,u,l,d,p,g,y);return Vr(b,E,S,R,F,M,P,D,Y,w)}subtract(e,n=void 0){if(!Je(this))throw new TypeError("invalid receiver");const r=Wi(e),{years:i,months:o,weeks:s,days:a,hours:c,minutes:u,seconds:l,milliseconds:d,microseconds:p,nanoseconds:g}=r,y=He(n),w=_(this,ae),{year:b,month:E,day:S,hour:R,minute:F,second:M,millisecond:P,microsecond:D,nanosecond:Y}=Ed(_(this,be),_(this,Se),_(this,Te),_(this,Me),_(this,Le),_(this,Ue),_(this,je),_(this,$e),_(this,Be),w,-i,-o,-s,-a,-c,-u,-l,-d,-p,-g,y);return Vr(b,E,S,R,F,M,P,D,Y,w)}until(e,n=void 0){if(!Je(this))throw new TypeError("invalid receiver");const r=ms(e),i=_(this,ae),o=_(r,ae),s=Pe(i),a=Pe(o);if(s!==a)throw new RangeError(`cannot compute difference between dates of ${s} and ${a} calendars`);const c=He(n),u=Rr(c,"nanosecond"),l=qi("day",u),d=wi(c,"auto",[],l);Fi(d,u);const p=On(c,"trunc"),g=Iu(c,u);let{years:y,months:w,weeks:b,days:E,hours:S,minutes:R,seconds:F,milliseconds:M,microseconds:P,nanoseconds:D}=vd(_(this,be),_(this,Se),_(this,Te),_(this,Me),_(this,Le),_(this,Ue),_(this,je),_(this,$e),_(this,Be),_(r,be),_(r,Se),_(r,Te),_(r,Me),_(r,Le),_(r,Ue),_(r,je),_(r,$e),_(r,Be),i,d,c);const Y=pa(this);({years:y,months:w,weeks:b,days:E,hours:S,minutes:R,seconds:F,milliseconds:M,microseconds:P,nanoseconds:D}=Di(y,w,b,E,S,R,F,M,P,D,g,u,p,Y)),{days:E,hours:S,minutes:R,seconds:F,milliseconds:M,microseconds:P,nanoseconds:D}=tr(E,S,R,F,M,P,D,d);const Q=Ce("%Temporal.Duration%");return new Q(y,w,b,E,S,R,F,M,P,D)}since(e,n=void 0){if(!Je(this))throw new TypeError("invalid receiver");const r=ms(e),i=_(this,ae),o=_(r,ae),s=Pe(i),a=Pe(o);if(s!==a)throw new RangeError(`cannot compute difference between dates of ${s} and ${a} calendars`);const c=He(n),u=Rr(c,"nanosecond"),l=qi("day",u),d=wi(c,"auto",[],l);Fi(d,u);const p=On(c,"trunc"),g=Iu(c,u);let{years:y,months:w,weeks:b,days:E,hours:S,minutes:R,seconds:F,milliseconds:M,microseconds:P,nanoseconds:D}=vd(_(this,be),_(this,Se),_(this,Te),_(this,Me),_(this,Le),_(this,Ue),_(this,je),_(this,$e),_(this,Be),_(r,be),_(r,Se),_(r,Te),_(r,Me),_(r,Le),_(r,Ue),_(r,je),_(r,$e),_(r,Be),i,d,c);const Y=pa(this);({years:y,months:w,weeks:b,days:E,hours:S,minutes:R,seconds:F,milliseconds:M,microseconds:P,nanoseconds:D}=Di(y,w,b,E,S,R,F,M,P,D,g,u,Hu(p),Y)),{days:E,hours:S,minutes:R,seconds:F,milliseconds:M,microseconds:P,nanoseconds:D}=tr(E,S,R,F,M,P,D,d);const Q=Ce("%Temporal.Duration%");return new Q(-y,-w,-b,-E,-S,-R,-F,-M,-P,-D)}round(e){if(!Je(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const n=typeof e=="string"?wc("smallestUnit",e):He(e),r=Rr(n,void 0,["year","month","week"]);if(r===void 0)throw new RangeError("smallestUnit is required");const i=On(n,"halfExpand"),s=ki(n,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[r],!1);let a=_(this,be),c=_(this,Se),u=_(this,Te),l=_(this,Me),d=_(this,Le),p=_(this,Ue),g=_(this,je),y=_(this,$e),w=_(this,Be);return{year:a,month:c,day:u,hour:l,minute:d,second:p,millisecond:g,microsecond:y,nanosecond:w}=qg(a,c,u,l,d,p,g,y,w,s,r,i),Vr(a,c,u,l,d,p,g,y,w,_(this,ae))}equals(e){if(!Je(this))throw new TypeError("invalid receiver");const n=ms(e);for(const r of[be,Se,Te,Me,Le,Ue,je,$e,Be]){const i=_(this,r),o=_(n,r);if(i!==o)return!1}return Gu(_(this,ae),_(n,ae))}toString(e=void 0){if(!Je(this))throw new TypeError("invalid receiver");const n=He(e),{precision:r,unit:i,increment:o}=Wu(n),s=Ku(n),a=On(n,"trunc");return Ap(this,r,s,{unit:i,increment:o,roundingMode:a})}toJSON(){if(!Je(this))throw new TypeError("invalid receiver");return Ap(this,"auto")}toLocaleString(e=void 0,n=void 0){if(!Je(this))throw new TypeError("invalid receiver");return new Ls(e,n).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(e,n=void 0){if(!Je(this))throw new TypeError("invalid receiver");const r=Mr(e),i=He(n),o=xu(i),s=Or(r,this,o);return Yn(_(s,De),r,_(this,ae))}toPlainDate(){if(!Je(this))throw new TypeError("invalid receiver");return pa(this)}toPlainYearMonth(){if(!Je(this))throw new TypeError("invalid receiver");const e=_(this,ae),n=hn(e,["monthCode","year"]),r=Xr(this,n);return As(e,r)}toPlainMonthDay(){if(!Je(this))throw new TypeError("invalid receiver");const e=_(this,ae),n=hn(e,["day","monthCode"]),r=ha(this,n);return yc(e,r)}toPlainTime(){if(!Je(this))throw new TypeError("invalid receiver");return $g(this)}getISOFields(){if(!Je(this))throw new TypeError("invalid receiver");return{calendar:_(this,ae),isoDay:_(this,Te),isoHour:_(this,Me),isoMicrosecond:_(this,$e),isoMillisecond:_(this,je),isoMinute:_(this,Le),isoMonth:_(this,Se),isoNanosecond:_(this,Be),isoSecond:_(this,Ue),isoYear:_(this,be)}}static from(e,n=void 0){const r=He(n);return Je(e)?(Xn(r),Vr(_(e,be),_(e,Se),_(e,Te),_(e,Me),_(e,Le),_(e,Ue),_(e,je),_(e,$e),_(e,Be),_(e,ae))):ms(e,r)}static compare(e,n){const r=ms(e),i=ms(n);for(const o of[be,Se,Te,Me,Le,Ue,je,$e,Be]){const s=_(r,o),a=_(i,o);if(s!==a)return ma(s-a)}return 0}}Co(Ju,"Temporal.PlainDateTime");class bo{constructor(e=0,n=0,r=0,i=0,o=0,s=0,a=0,c=0,u=0,l=0){const d=zn(e),p=zn(n),g=zn(r),y=zn(i),w=zn(o),b=zn(s),E=zn(a),S=zn(c),R=zn(u),F=zn(l),M=Hi(d,p,g,y,w,b,E,S,R,F);for(const P of[d,p,g,y,w,b,E,S,R,F]){if(!Number.isFinite(P))throw new RangeError("infinite values not allowed as duration fields");const D=Math.sign(P);if(D!==0&&D!==M)throw new RangeError("mixed-sign values not allowed as duration fields")}Po(this),Ze(this,mr,d),Ze(this,$n,p),Ze(this,Pr,g),Ze(this,yr,y),Ze(this,_r,w),Ze(this,wr,b),Ze(this,vr,E),Ze(this,br,S),Ze(this,Er,R),Ze(this,Sr,F),Object.defineProperty(this,"_repr_",{value:`${this[Symbol.toStringTag]} <${Dl(this)}>`,writable:!1,enumerable:!1,configurable:!1})}get years(){if(!on(this))throw new TypeError("invalid receiver");return _(this,mr)}get months(){if(!on(this))throw new TypeError("invalid receiver");return _(this,$n)}get weeks(){if(!on(this))throw new TypeError("invalid receiver");return _(this,Pr)}get days(){if(!on(this))throw new TypeError("invalid receiver");return _(this,yr)}get hours(){if(!on(this))throw new TypeError("invalid receiver");return _(this,_r)}get minutes(){if(!on(this))throw new TypeError("invalid receiver");return _(this,wr)}get seconds(){if(!on(this))throw new TypeError("invalid receiver");return _(this,vr)}get milliseconds(){if(!on(this))throw new TypeError("invalid receiver");return _(this,br)}get microseconds(){if(!on(this))throw new TypeError("invalid receiver");return _(this,Er)}get nanoseconds(){if(!on(this))throw new TypeError("invalid receiver");return _(this,Sr)}get sign(){if(!on(this))throw new TypeError("invalid receiver");return Hi(_(this,mr),_(this,$n),_(this,Pr),_(this,yr),_(this,_r),_(this,wr),_(this,vr),_(this,br),_(this,Er),_(this,Sr))}get blank(){if(!on(this))throw new TypeError("invalid receiver");return Hi(_(this,mr),_(this,$n),_(this,Pr),_(this,yr),_(this,_r),_(this,wr),_(this,vr),_(this,br),_(this,Er),_(this,Sr))===0}with(e){if(!on(this))throw new TypeError("invalid receiver");const n=Ms(e,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"]);if(!n)throw new TypeError("invalid duration-like");const{years:r=_(this,mr),months:i=_(this,$n),weeks:o=_(this,Pr),days:s=_(this,yr),hours:a=_(this,_r),minutes:c=_(this,wr),seconds:u=_(this,vr),milliseconds:l=_(this,br),microseconds:d=_(this,Er),nanoseconds:p=_(this,Sr)}=n;return new bo(r,i,o,s,a,c,u,l,d,p)}negated(){if(!on(this))throw new TypeError("invalid receiver");return kw(this)}abs(){if(!on(this))throw new TypeError("invalid receiver");return new bo(Math.abs(_(this,mr)),Math.abs(_(this,$n)),Math.abs(_(this,Pr)),Math.abs(_(this,yr)),Math.abs(_(this,_r)),Math.abs(_(this,wr)),Math.abs(_(this,vr)),Math.abs(_(this,br)),Math.abs(_(this,Er)),Math.abs(_(this,Sr)))}add(e,n=void 0){if(!on(this))throw new TypeError("invalid receiver");let{years:r,months:i,weeks:o,days:s,hours:a,minutes:c,seconds:u,milliseconds:l,microseconds:d,nanoseconds:p}=Wi(e);const g=He(n),y=Yc(g);return{years:r,months:i,weeks:o,days:s,hours:a,minutes:c,seconds:u,milliseconds:l,microseconds:d,nanoseconds:p}=Pp(_(this,mr),_(this,$n),_(this,Pr),_(this,yr),_(this,_r),_(this,wr),_(this,vr),_(this,br),_(this,Er),_(this,Sr),r,i,o,s,a,c,u,l,d,p,y),new bo(r,i,o,s,a,c,u,l,d,p)}subtract(e,n=void 0){if(!on(this))throw new TypeError("invalid receiver");let{years:r,months:i,weeks:o,days:s,hours:a,minutes:c,seconds:u,milliseconds:l,microseconds:d,nanoseconds:p}=Wi(e);const g=He(n),y=Yc(g);return{years:r,months:i,weeks:o,days:s,hours:a,minutes:c,seconds:u,milliseconds:l,microseconds:d,nanoseconds:p}=Pp(_(this,mr),_(this,$n),_(this,Pr),_(this,yr),_(this,_r),_(this,wr),_(this,vr),_(this,br),_(this,Er),_(this,Sr),-r,-i,-o,-s,-a,-c,-u,-l,-d,-p,y),new bo(r,i,o,s,a,c,u,l,d,p)}round(e){if(!on(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");let n=_(this,mr),r=_(this,$n),i=_(this,Pr),o=_(this,yr),s=_(this,_r),a=_(this,wr),c=_(this,vr),u=_(this,br),l=_(this,Er),d=_(this,Sr),p=bp(n,r,i,o,s,a,c,u,l,d);const g=typeof e=="string"?wc("smallestUnit",e):He(e);let y=Rr(g,void 0),w=!0;y||(w=!1,y="nanosecond"),p=qi(p,y);let b=wi(g,void 0),E=!0;if(b||(E=!1,b=p),b==="auto"&&(b=p),!w&&!E)throw new RangeError("at least one of smallestUnit or largestUnit is required");Fi(b,y);const S=On(g,"halfExpand"),R=Iu(g,y);let F=Yc(g);return{years:n,months:r,weeks:i,days:o}=Cl(n,r,i,o,b,F),{years:n,months:r,weeks:i,days:o,hours:s,minutes:a,seconds:c,milliseconds:u,microseconds:l,nanoseconds:d}=Di(n,r,i,o,s,a,c,u,l,d,R,y,S,F),{years:n,months:r,weeks:i,days:o,hours:s,minutes:a,seconds:c,milliseconds:u,microseconds:l,nanoseconds:d}=Op(n,r,i,o,s,a,c,u,l,d,R,y,S,F),{years:n,months:r,weeks:i,days:o}=t2(n,r,i,o,b,F),Re(F)&&(F=Np(F,n,r,i,0)),{days:o,hours:s,minutes:a,seconds:c,milliseconds:u,microseconds:l,nanoseconds:d}=tr(o,s,a,c,u,l,d,b,F),new bo(n,r,i,o,s,a,c,u,l,d)}total(e){if(!on(this))throw new TypeError("invalid receiver");let n=_(this,mr),r=_(this,$n),i=_(this,Pr),o=_(this,yr),s=_(this,_r),a=_(this,wr),c=_(this,vr),u=_(this,br),l=_(this,Er),d=_(this,Sr);if(e===void 0)throw new TypeError("options argument is required");const p=typeof e=="string"?wc("unit",e):He(e),g=zS(p);if(g===void 0)throw new RangeError("unit option is required");const y=Yc(p);({years:n,months:r,weeks:i,days:o}=Cl(n,r,i,o,g,y));let w;Re(y)&&(w=Np(y,n,r,i,0)),{days:o,hours:s,minutes:a,seconds:c,milliseconds:u,microseconds:l,nanoseconds:d}=tr(o,s,a,c,u,l,d,g,w);const{total:b}=Di(n,r,i,o,s,a,c,u,l,d,1,g,"trunc",y);return b}toString(e=void 0){if(!on(this))throw new TypeError("invalid receiver");const n=He(e),{precision:r,unit:i,increment:o}=Wu(n);if(r==="minute")throw new RangeError('smallestUnit must not be "minute"');const s=On(n,"trunc");return Dl(this,r,{unit:i,increment:o,roundingMode:s})}toJSON(){if(!on(this))throw new TypeError("invalid receiver");return Dl(this)}toLocaleString(e=void 0,n=void 0){if(!on(this))throw new TypeError("invalid receiver");return typeof Intl!="undefined"&&typeof Intl.DurationFormat!="undefined"?new Intl.DurationFormat(e,n).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),Dl(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(e){return on(e)?new bo(_(e,mr),_(e,$n),_(e,Pr),_(e,yr),_(e,_r),_(e,wr),_(e,vr),_(e,br),_(e,Er),_(e,Sr)):nc(e)}static compare(e,n,r=void 0){const i=nc(e),o=nc(n),s=He(r),a=Yc(s),c=_(i,mr),u=_(i,$n),l=_(i,Pr);let d=_(i,yr);const p=_(i,_r),g=_(i,wr),y=_(i,vr),w=_(i,br),b=_(i,Er);let E=_(i,Sr);const S=_(o,mr),R=_(o,$n),F=_(o,Pr);let M=_(o,yr);const P=_(o,_r),D=_(o,wr),Y=_(o,vr),Q=_(o,br),B=_(o,Er);let se=_(o,Sr);const Ae=cy(a,c,u,l,d,p,g,y,w,b,E),xe=cy(a,S,R,F,M,P,D,Y,Q,B,se);(c!==0||S!==0||u!==0||R!==0||l!==0||F!==0)&&({days:d}=Cl(c,u,l,d,"day",a),{days:M}=Cl(S,R,F,M,"day",a));const re=_c(d,p,g,y,w,b,E,Ae),ne=_c(M,P,D,Y,Q,B,se,xe);return ma(T.toNumber(T.subtract(re,ne)))}}Co(bo,"Temporal.Duration");const v2=Object.create;class Jg{constructor(e,n,r=An(),i=1972){const o=At(e),s=At(n),a=nr(r),c=At(i);if(arguments.length<2)throw new RangeError("missing argument: isoMonth and isoDay are required");_w(this,o,s,a,c)}get monthCode(){if(!Gn(this))throw new TypeError("invalid receiver");return Vu(_(this,ae),this)}get day(){if(!Gn(this))throw new TypeError("invalid receiver");return qd(_(this,ae),this)}get calendar(){if(!Gn(this))throw new TypeError("invalid receiver");return _(this,ae)}with(e,n=void 0){if(!Gn(this))throw new TypeError("invalid receiver");if(!Mt(e))throw new TypeError("invalid argument");Fc(e);const r=_(this,ae),i=hn(r,["day","month","monthCode","year"]),o=Ms(e,i);if(!o)throw new TypeError("invalid month-day-like");let s=ha(this,i);s=va(r,s,o),s=ha(s,i);const a=He(n);return yc(r,s,a)}equals(e){if(!Gn(this))throw new TypeError("invalid receiver");const n=sy(e);for(const r of[Se,Te,be]){const i=_(this,r),o=_(n,r);if(i!==o)return!1}return Gu(_(this,ae),_(n,ae))}toString(e=void 0){if(!Gn(this))throw new TypeError("invalid receiver");const n=He(e),r=Ku(n);return xp(this,r)}toJSON(){if(!Gn(this))throw new TypeError("invalid receiver");return xp(this)}toLocaleString(e=void 0,n=void 0){if(!Gn(this))throw new TypeError("invalid receiver");return new Ls(e,n).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(e){if(!Gn(this))throw new TypeError("invalid receiver");if(!Mt(e))throw new TypeError("argument should be an object");const n=_(this,ae),r=hn(n,["day","monthCode"]),i=ha(this,r),o=hn(n,["year"]),s=[["year",void 0]];o.forEach(p=>{s.some(([g])=>g===p)||s.push([p,void 0])});const a=er(e,s);let c=va(n,i,a);const u=[...new Set([...r,...o])],l=[];u.forEach(p=>{l.some(([g])=>g===p)||l.push([p,void 0])}),c=er(c,l);const d=v2(null);return d.overflow="reject",io(n,c,d)}getISOFields(){if(!Gn(this))throw new TypeError("invalid receiver");return{calendar:_(this,ae),isoDay:_(this,Te),isoMonth:_(this,Se),isoYear:_(this,be)}}static from(e,n=void 0){const r=He(n);return Gn(e)?(Xn(r),Ru(_(e,Se),_(e,Te),_(e,ae),_(e,be))):sy(e,r)}}Co(Jg,"Temporal.PlainMonthDay");const Zg=()=>{const t=Ce("%Temporal.Instant%");return new t(Gg())},Vw=(t,e=Us())=>{const n=Mr(e),r=nr(t),i=Zg();return vi(n,i,r)},Qg=(t=Us())=>{const e=Mr(t),n=An(),r=Zg();return vi(e,r,n)},Gw=(t,e=Us())=>{const n=Mr(e),r=nr(t);return Yn(Gg(),n,r)},b2=(t=Us())=>Gw(An(),t),E2=(t,e=Us())=>pa(Vw(t,e)),S2=(t=Us())=>pa(Qg(t)),T2=(t=Us())=>$g(Qg(t)),Us=()=>i2(),zw={instant:Zg,plainDateTime:Vw,plainDateTimeISO:Qg,plainDate:E2,plainDateISO:S2,plainTimeISO:T2,timeZone:Us,zonedDateTime:Gw,zonedDateTimeISO:b2,[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(zw,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});const A2=Object.assign,Qc=["year","month","week","day"],_h={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3};function wh(t,e,n=void 0){let r=_(t,Me),i=_(t,Le),o=_(t,Ue),s=_(t,je),a=_(t,$e),c=_(t,Be);if(n){const{unit:p,increment:g,roundingMode:y}=n;({hour:r,minute:i,second:o,millisecond:s,microsecond:a,nanosecond:c}=Vg(r,i,o,s,a,c,g,p,y))}const u=zt(r),l=zt(i),d=Zd(o,s,a,c,e);return`${u}:${l}${d}`}class Jo{constructor(e=0,n=0,r=0,i=0,o=0,s=0){const a=At(e),c=At(n),u=At(r),l=At(i),d=At(o),p=At(s);Qd(a,c,u,l,d,p),Po(this),Ze(this,Me,a),Ze(this,Le,c),Ze(this,Ue,u),Ze(this,je,l),Ze(this,$e,d),Ze(this,Be,p),Ze(this,ae,An()),Object.defineProperty(this,"_repr_",{value:`${this[Symbol.toStringTag]} <${wh(this,"auto")}>`,writable:!1,enumerable:!1,configurable:!1})}get calendar(){if(!sn(this))throw new TypeError("invalid receiver");return _(this,ae)}get hour(){if(!sn(this))throw new TypeError("invalid receiver");return _(this,Me)}get minute(){if(!sn(this))throw new TypeError("invalid receiver");return _(this,Le)}get second(){if(!sn(this))throw new TypeError("invalid receiver");return _(this,Ue)}get millisecond(){if(!sn(this))throw new TypeError("invalid receiver");return _(this,je)}get microsecond(){if(!sn(this))throw new TypeError("invalid receiver");return _(this,$e)}get nanosecond(){if(!sn(this))throw new TypeError("invalid receiver");return _(this,Be)}with(e,n=void 0){if(!sn(this))throw new TypeError("invalid receiver");if(!Mt(e))throw new TypeError("invalid argument");Fc(e);const r=He(n),i=Xn(r),o=Ms(e,["hour","microsecond","millisecond","minute","nanosecond","second"]);if(!o)throw new TypeError("invalid time-like");const s=Og(this);let{hour:a,minute:c,second:u,millisecond:l,microsecond:d,nanosecond:p}=A2(s,o);return{hour:a,minute:c,second:u,millisecond:l,microsecond:d,nanosecond:p}=du(a,c,u,l,d,p,i),new Jo(a,c,u,l,d,p)}add(e){if(!sn(this))throw new TypeError("invalid receiver");const n=Wi(e),{hours:r,minutes:i,seconds:o,milliseconds:s,microseconds:a,nanoseconds:c}=n;let u=_(this,Me),l=_(this,Le),d=_(this,Ue),p=_(this,je),g=_(this,$e),y=_(this,Be);return{hour:u,minute:l,second:d,millisecond:p,microsecond:g,nanosecond:y}=Cp(u,l,d,p,g,y,r,i,o,s,a,c),{hour:u,minute:l,second:d,millisecond:p,microsecond:g,nanosecond:y}=du(u,l,d,p,g,y,"reject"),new Jo(u,l,d,p,g,y)}subtract(e){if(!sn(this))throw new TypeError("invalid receiver");const n=Wi(e),{hours:r,minutes:i,seconds:o,milliseconds:s,microseconds:a,nanoseconds:c}=n;let u=_(this,Me),l=_(this,Le),d=_(this,Ue),p=_(this,je),g=_(this,$e),y=_(this,Be);return{hour:u,minute:l,second:d,millisecond:p,microsecond:g,nanosecond:y}=Cp(u,l,d,p,g,y,-r,-i,-o,-s,-a,-c),{hour:u,minute:l,second:d,millisecond:p,microsecond:g,nanosecond:y}=du(u,l,d,p,g,y,"reject"),new Jo(u,l,d,p,g,y)}until(e,n=void 0){if(!sn(this))throw new TypeError("invalid receiver");const r=vo(e),i=He(n),o=wi(i,"auto",Qc,"hour"),s=Rr(i,"nanosecond",Qc);Fi(o,s);const a=On(i,"trunc"),c=ki(i,_h[s],!1);let{hours:u,minutes:l,seconds:d,milliseconds:p,microseconds:g,nanoseconds:y}=Fp(_(this,Me),_(this,Le),_(this,Ue),_(this,je),_(this,$e),_(this,Be),_(r,Me),_(r,Le),_(r,Ue),_(r,je),_(r,$e),_(r,Be));({hours:u,minutes:l,seconds:d,milliseconds:p,microseconds:g,nanoseconds:y}=Di(0,0,0,0,u,l,d,p,g,y,c,s,a)),{hours:u,minutes:l,seconds:d,milliseconds:p,microseconds:g,nanoseconds:y}=tr(0,u,l,d,p,g,y,o);const w=Ce("%Temporal.Duration%");return new w(0,0,0,0,u,l,d,p,g,y)}since(e,n=void 0){if(!sn(this))throw new TypeError("invalid receiver");const r=vo(e),i=He(n),o=wi(i,"auto",Qc,"hour"),s=Rr(i,"nanosecond",Qc);Fi(o,s);const a=On(i,"trunc"),c=ki(i,_h[s],!1);let{hours:u,minutes:l,seconds:d,milliseconds:p,microseconds:g,nanoseconds:y}=Fp(_(r,Me),_(r,Le),_(r,Ue),_(r,je),_(r,$e),_(r,Be),_(this,Me),_(this,Le),_(this,Ue),_(this,je),_(this,$e),_(this,Be));({hours:u,minutes:l,seconds:d,milliseconds:p,microseconds:g,nanoseconds:y}=Di(0,0,0,0,-u,-l,-d,-p,-g,-y,c,s,Hu(a))),u=-u,l=-l,d=-d,p=-p,g=-g,y=-y,{hours:u,minutes:l,seconds:d,milliseconds:p,microseconds:g,nanoseconds:y}=tr(0,u,l,d,p,g,y,o);const w=Ce("%Temporal.Duration%");return new w(0,0,0,0,u,l,d,p,g,y)}round(e){if(!sn(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const n=typeof e=="string"?wc("smallestUnit",e):He(e),r=Rr(n,void 0,Qc);if(r===void 0)throw new RangeError("smallestUnit is required");const i=On(n,"halfExpand"),o=ki(n,_h[r],!1);let s=_(this,Me),a=_(this,Le),c=_(this,Ue),u=_(this,je),l=_(this,$e),d=_(this,Be);return{hour:s,minute:a,second:c,millisecond:u,microsecond:l,nanosecond:d}=Vg(s,a,c,u,l,d,o,r,i),new Jo(s,a,c,u,l,d)}equals(e){if(!sn(this))throw new TypeError("invalid receiver");const n=vo(e);for(const r of[Me,Le,Ue,je,$e,Be]){const i=_(this,r),o=_(n,r);if(i!==o)return!1}return!0}toString(e=void 0){if(!sn(this))throw new TypeError("invalid receiver");const n=He(e),{precision:r,unit:i,increment:o}=Wu(n),s=On(n,"trunc");return wh(this,r,{unit:i,increment:o,roundingMode:s})}toJSON(){if(!sn(this))throw new TypeError("invalid receiver");return wh(this,"auto")}toLocaleString(e=void 0,n=void 0){if(!sn(this))throw new TypeError("invalid receiver");return new Ls(e,n).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(e){if(!sn(this))throw new TypeError("invalid receiver");const n=Et(e),r=_(n,be),i=_(n,Se),o=_(n,Te),s=_(n,ae),a=_(this,Me),c=_(this,Le),u=_(this,Ue),l=_(this,je),d=_(this,$e),p=_(this,Be);return Vr(r,i,o,a,c,u,l,d,p,s)}toZonedDateTime(e){if(!sn(this))throw new TypeError("invalid receiver");if(!Mt(e))throw new TypeError("invalid argument");const n=e.plainDate;if(n===void 0)throw new TypeError("missing date property");const r=Et(n),i=e.timeZone;if(i===void 0)throw new TypeError("missing timeZone property");const o=Mr(i),s=_(r,be),a=_(r,Se),c=_(r,Te),u=_(r,ae),l=_(this,Me),d=_(this,Le),p=_(this,Ue),g=_(this,je),y=_(this,$e),w=_(this,Be),b=Ce("%Temporal.PlainDateTime%"),E=new b(s,a,c,l,d,p,g,y,w,u),S=Or(o,E,"compatible");return Yn(_(S,De),o,u)}getISOFields(){if(!sn(this))throw new TypeError("invalid receiver");return{calendar:_(this,ae),isoHour:_(this,Me),isoMicrosecond:_(this,$e),isoMillisecond:_(this,je),isoMinute:_(this,Le),isoNanosecond:_(this,Be),isoSecond:_(this,Ue)}}static from(e,n=void 0){const r=He(n),i=Xn(r);return sn(e)?new Jo(_(e,Me),_(e,Le),_(e,Ue),_(e,je),_(e,$e),_(e,Be)):vo(e,i)}static compare(e,n){const r=vo(e),i=vo(n);for(const o of[Me,Le,Ue,je,$e,Be]){const s=_(r,o),a=_(i,o);if(s!==a)return ma(s-a)}return 0}}Co(Jo,"Temporal.PlainTime");class Xg{constructor(e){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");const n=Bg(e);Po(this),Ze(this,gs,n),Object.defineProperty(this,"_repr_",{value:`${this[Symbol.toStringTag]} <${n}>`,writable:!1,enumerable:!1,configurable:!1})}get id(){if(!mo(this))throw new TypeError("invalid receiver");return Pe(this)}getOffsetNanosecondsFor(e){if(!mo(this))throw new TypeError("invalid receiver");const n=oo(e),r=_(this,gs);return Xa(r)?ba(r):ns(_(n,De),r)}getOffsetStringFor(e){if(!mo(this))throw new TypeError("invalid receiver");const n=oo(e);return Sp(this,n)}getPlainDateTimeFor(e,n=An()){const r=oo(e),i=nr(n);return vi(this,r,i)}getInstantFor(e,n=void 0){if(!mo(this))throw new TypeError("invalid receiver");const r=ms(e),i=He(n),o=xu(i);return Or(this,r,o)}getPossibleInstantsFor(e){if(!mo(this))throw new TypeError("invalid receiver");const n=ms(e),r=Ce("%Temporal.Instant%"),i=_(this,gs);if(Xa(i)){const s=Is(_(n,be),_(n,Se),_(n,Te),_(n,Me),_(n,Le),_(n,Ue),_(n,je),_(n,$e),_(n,Be));if(s===null)throw new RangeError("DateTime outside of supported range");const a=ba(i);return[new r(T.subtract(s,T.BigInt(a)))]}return XS(i,_(n,be),_(n,Se),_(n,Te),_(n,Me),_(n,Le),_(n,Ue),_(n,je),_(n,$e),_(n,Be)).map(s=>new r(s))}getNextTransition(e){if(!mo(this))throw new TypeError("invalid receiver");const n=oo(e),r=_(this,gs);if(Xa(r)||r==="UTC")return null;let i=_(n,De);const o=Ce("%Temporal.Instant%");return i=JS(i,r),i===null?null:new o(i)}getPreviousTransition(e){if(!mo(this))throw new TypeError("invalid receiver");const n=oo(e),r=_(this,gs);if(Xa(r)||r==="UTC")return null;let i=_(n,De);const o=Ce("%Temporal.Instant%");return i=Iw(i,r),i===null?null:new o(i)}toString(){if(!mo(this))throw new TypeError("invalid receiver");return Pe(_(this,gs))}toJSON(){if(!mo(this))throw new TypeError("invalid receiver");return Pe(this)}static from(e){return Mr(e)}}Co(Xg,"Temporal.TimeZone");const x2=Object.create,Nl=["week","day","hour","minute","second","millisecond","microsecond","nanosecond"];class e0{constructor(e,n,r=An(),i=1){const o=At(e),s=At(n),a=nr(r),c=At(i);if(arguments.length<2)throw new RangeError("missing argument: isoYear and isoMonth are required");ww(this,o,s,a,c)}get year(){if(!yt(this))throw new TypeError("invalid receiver");return Kd(_(this,ae),this)}get month(){if(!yt(this))throw new TypeError("invalid receiver");return Wd(_(this,ae),this)}get monthCode(){if(!yt(this))throw new TypeError("invalid receiver");return Vu(_(this,ae),this)}get calendar(){if(!yt(this))throw new TypeError("invalid receiver");return _(this,ae)}get era(){if(!yt(this))throw new TypeError("invalid receiver");return Vd(_(this,ae),this)}get eraYear(){if(!yt(this))throw new TypeError("invalid receiver");return Gd(_(this,ae),this)}get daysInMonth(){if(!yt(this))throw new TypeError("invalid receiver");return rc(_(this,ae),this)}get daysInYear(){if(!yt(this))throw new TypeError("invalid receiver");return zd(_(this,ae),this)}get monthsInYear(){if(!yt(this))throw new TypeError("invalid receiver");return Yd(_(this,ae),this)}get inLeapYear(){if(!yt(this))throw new TypeError("invalid receiver");return Jd(_(this,ae),this)}with(e,n=void 0){if(!yt(this))throw new TypeError("invalid receiver");if(!Mt(e))throw new TypeError("invalid argument");Fc(e);const r=_(this,ae),i=hn(r,["month","monthCode","year"]),o=Ms(e,i);if(!o)throw new TypeError("invalid year-month-like");let s=Xr(this,i);s=va(r,s,o),s=Xr(s,i);const a=He(n);return As(r,s,a)}add(e,n=void 0){if(!yt(this))throw new TypeError("invalid receiver");const r=Wi(e);let{years:i,months:o,weeks:s,days:a,hours:c,minutes:u,seconds:l,milliseconds:d,microseconds:p,nanoseconds:g}=r;({days:a}=tr(a,c,u,l,d,p,g,"day"));const y=He(n),w=_(this,ae),b=hn(w,["monthCode","year"]),E=Xr(this,b),R=Hi(i,o,s,a,0,0,0,0,0,0)<0?gc(rc(w,this)):1,F=io(w,{...E,day:R}),M={...y},P=Ir(w,F,{...r,days:a},y),D=Xr(P,b);return As(w,D,M)}subtract(e,n=void 0){if(!yt(this))throw new TypeError("invalid receiver");let r=Wi(e);r={years:-r.years,months:-r.months,weeks:-r.weeks,days:-r.days,hours:-r.hours,minutes:-r.minutes,seconds:-r.seconds,milliseconds:-r.milliseconds,microseconds:-r.microseconds,nanoseconds:-r.nanoseconds};let{years:i,months:o,weeks:s,days:a,hours:c,minutes:u,seconds:l,milliseconds:d,microseconds:p,nanoseconds:g}=r;({days:a}=tr(a,c,u,l,d,p,g,"day"));const y=He(n),w=_(this,ae),b=hn(w,["monthCode","year"]),E=Xr(this,b),R=Hi(i,o,s,a,0,0,0,0,0,0)<0?gc(rc(w,this)):1,F=io(w,{...E,day:R}),M={...y},P=Ir(w,F,{...r,days:a},y),D=Xr(P,b);return As(w,D,M)}until(e,n=void 0){if(!yt(this))throw new TypeError("invalid receiver");const r=Wa(e),i=_(this,ae),o=_(r,ae),s=Pe(i),a=Pe(o);if(s!==a)throw new RangeError(`cannot compute difference between months of ${s} and ${a} calendars`);const c=He(n),u=Rr(c,"month",Nl),l=wi(c,"auto",Nl,"year");Fi(l,u);const d=On(c,"trunc"),p=ki(c,void 0,!1),g=hn(i,["monthCode","year"]),y=Xr(r,g),w=Xr(this,g),b=io(i,{...y,day:1}),E=io(i,{...w,day:1}),S={...c,largestUnit:l},R=Ro(i,E,b,S);if(u==="month"&&p===1)return R;let{years:F,months:M}=R;({years:F,months:M}=Di(F,M,0,0,0,0,0,0,0,0,p,u,d,E));const P=Ce("%Temporal.Duration%");return new P(F,M,0,0,0,0,0,0,0,0)}since(e,n=void 0){if(!yt(this))throw new TypeError("invalid receiver");const r=Wa(e),i=_(this,ae),o=_(r,ae),s=Pe(i),a=Pe(o);if(s!==a)throw new RangeError(`cannot compute difference between months of ${s} and ${a} calendars`);const c=He(n),u=Rr(c,"month",Nl),l=wi(c,"auto",Nl,"year");Fi(l,u);const d=On(c,"trunc"),p=ki(c,void 0,!1),g=hn(i,["monthCode","year"]),y=Xr(r,g),w=Xr(this,g),b=io(i,{...y,day:1}),E=io(i,{...w,day:1}),S={...c,largestUnit:l};let{years:R,months:F}=Ro(i,E,b,S);const M=Ce("%Temporal.Duration%");return u==="month"&&p===1?new M(-R,-F,0,0,0,0,0,0,0,0):({years:R,months:F}=Di(R,F,0,0,0,0,0,0,0,0,p,u,Hu(d),E),new M(-R,-F,0,0,0,0,0,0,0,0))}equals(e){if(!yt(this))throw new TypeError("invalid receiver");const n=Wa(e);for(const r of[be,Se,Te]){const i=_(this,r),o=_(n,r);if(i!==o)return!1}return Gu(_(this,ae),_(n,ae))}toString(e=void 0){if(!yt(this))throw new TypeError("invalid receiver");const n=He(e),r=Ku(n);return Ip(this,r)}toJSON(){if(!yt(this))throw new TypeError("invalid receiver");return Ip(this)}toLocaleString(e=void 0,n=void 0){if(!yt(this))throw new TypeError("invalid receiver");return new Ls(e,n).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(e){if(!yt(this))throw new TypeError("invalid receiver");if(!Mt(e))throw new TypeError("argument should be an object");const n=_(this,ae),r=hn(n,["monthCode","year"]),i=Xr(this,r),o=hn(n,["day"]),s=[["day"]];o.forEach(p=>{s.some(([g])=>g===p)||s.push([p,void 0])});const a=er(e,s);let c=va(n,i,a);const u=[...new Set([...r,...o])],l=[];u.forEach(p=>{l.some(([g])=>g===p)||l.push([p,void 0])}),c=er(c,l);const d=x2(null);return d.overflow="reject",io(n,c,d)}getISOFields(){if(!yt(this))throw new TypeError("invalid receiver");return{calendar:_(this,ae),isoDay:_(this,Te),isoMonth:_(this,Se),isoYear:_(this,be)}}static from(e,n=void 0){const r=He(n);return yt(e)?(Xn(r),ku(_(e,be),_(e,Se),_(e,ae),_(e,Te))):Wa(e,r)}static compare(e,n){const r=Wa(e),i=Wa(n);return Yo(_(r,be),_(r,Se),_(r,Te),_(i,be),_(i,Se),_(i,Te))}}Co(e0,"Temporal.PlainYearMonth");const I2=Array.prototype.push;class t0{constructor(e,n,r=An()){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const i=fu(e),o=Mr(n),s=nr(r);vw(this,i,o,s)}get calendar(){if(!Re(this))throw new TypeError("invalid receiver");return _(this,ae)}get timeZone(){if(!Re(this))throw new TypeError("invalid receiver");return _(this,pt)}get year(){if(!Re(this))throw new TypeError("invalid receiver");return Kd(_(this,ae),Ut(this))}get month(){if(!Re(this))throw new TypeError("invalid receiver");return Wd(_(this,ae),Ut(this))}get monthCode(){if(!Re(this))throw new TypeError("invalid receiver");return Vu(_(this,ae),Ut(this))}get day(){if(!Re(this))throw new TypeError("invalid receiver");return qd(_(this,ae),Ut(this))}get hour(){if(!Re(this))throw new TypeError("invalid receiver");return _(Ut(this),Me)}get minute(){if(!Re(this))throw new TypeError("invalid receiver");return _(Ut(this),Le)}get second(){if(!Re(this))throw new TypeError("invalid receiver");return _(Ut(this),Ue)}get millisecond(){if(!Re(this))throw new TypeError("invalid receiver");return _(Ut(this),je)}get microsecond(){if(!Re(this))throw new TypeError("invalid receiver");return _(Ut(this),$e)}get nanosecond(){if(!Re(this))throw new TypeError("invalid receiver");return _(Ut(this),Be)}get era(){if(!Re(this))throw new TypeError("invalid receiver");return Vd(_(this,ae),Ut(this))}get eraYear(){if(!Re(this))throw new TypeError("invalid receiver");return Gd(_(this,ae),Ut(this))}get epochSeconds(){if(!Re(this))throw new TypeError("invalid receiver");const e=_(this,De);return T.toNumber(T.divide(e,ts))}get epochMilliseconds(){if(!Re(this))throw new TypeError("invalid receiver");const e=_(this,De);return T.toNumber(T.divide(e,Ri))}get epochMicroseconds(){if(!Re(this))throw new TypeError("invalid receiver");const e=_(this,De);return Td(T.divide(e,wt))}get epochNanoseconds(){if(!Re(this))throw new TypeError("invalid receiver");return Td(_(this,De))}get dayOfWeek(){if(!Re(this))throw new TypeError("invalid receiver");return Mg(_(this,ae),Ut(this))}get dayOfYear(){if(!Re(this))throw new TypeError("invalid receiver");return Lg(_(this,ae),Ut(this))}get weekOfYear(){if(!Re(this))throw new TypeError("invalid receiver");return Ug(_(this,ae),Ut(this))}get hoursInDay(){if(!Re(this))throw new TypeError("invalid receiver");const e=Ut(this),n=Ce("%Temporal.PlainDateTime%"),r=_(e,be),i=_(e,Se),o=_(e,Te),s=new n(r,i,o,0,0,0,0,0,0),a=ga(r,i,o,0,0,0,1,"reject"),c=new n(a.year,a.month,a.day,0,0,0,0,0,0),u=_(this,pt),l=_(Or(u,s,"compatible"),De),d=_(Or(u,c,"compatible"),De);return T.toNumber(T.subtract(d,l))/36e11}get daysInWeek(){if(!Re(this))throw new TypeError("invalid receiver");return jg(_(this,ae),Ut(this))}get daysInMonth(){if(!Re(this))throw new TypeError("invalid receiver");return rc(_(this,ae),Ut(this))}get daysInYear(){if(!Re(this))throw new TypeError("invalid receiver");return zd(_(this,ae),Ut(this))}get monthsInYear(){if(!Re(this))throw new TypeError("invalid receiver");return Yd(_(this,ae),Ut(this))}get inLeapYear(){if(!Re(this))throw new TypeError("invalid receiver");return Jd(_(this,ae),Ut(this))}get offset(){if(!Re(this))throw new TypeError("invalid receiver");return Sp(_(this,pt),_(this,ur))}get offsetNanoseconds(){if(!Re(this))throw new TypeError("invalid receiver");return uo(_(this,pt),_(this,ur))}with(e,n=void 0){if(!Re(this))throw new TypeError("invalid receiver");if(!Mt(e))throw new TypeError("invalid zoned-date-time-like");Fc(e);const r=He(n),i=xu(r),o=vp(r,"prefer"),s=_(this,pt),a=_(this,ae),c=hn(a,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);I2.call(c,"offset");const u=Ms(e,c);if(!u)throw new TypeError("invalid zoned-date-time-like");const l=[["day",void 0],["hour",0],["microsecond",0],["millisecond",0],["minute",0],["month",void 0],["monthCode",void 0],["nanosecond",0],["second",0],["year",void 0],["offset"],["timeZone"]];c.forEach(D=>{l.some(([Y])=>Y===D)||l.push([D,void 0])});let d=er(this,l);d=va(a,d,u),d=er(d,l);const{year:p,month:g,day:y,hour:w,minute:b,second:E,millisecond:S,microsecond:R,nanosecond:F}=qu(a,d,r),M=ba(d.offset),P=yd(p,g,y,w,b,E,S,R,F,"option",M,s,i,o,!1);return Yn(P,_(this,pt),a)}withPlainDate(e){if(!Re(this))throw new TypeError("invalid receiver");const n=Et(e),r=_(n,be),i=_(n,Se),o=_(n,Te);let s=_(n,ae);const a=Ut(this),c=_(a,Me),u=_(a,Le),l=_(a,Ue),d=_(a,je),p=_(a,$e),g=_(a,Be);s=bw(_(this,ae),s);const y=_(this,pt),w=Ce("%Temporal.PlainDateTime%"),b=new w(r,i,o,c,u,l,d,p,g,s),E=Or(y,b,"compatible");return Yn(_(E,De),y,s)}withPlainTime(e=void 0){if(!Re(this))throw new TypeError("invalid receiver");const n=Ce("%Temporal.PlainTime%"),r=e==null?new n:vo(e),i=Ut(this),o=_(i,be),s=_(i,Se),a=_(i,Te),c=_(this,ae),u=_(r,Me),l=_(r,Le),d=_(r,Ue),p=_(r,je),g=_(r,$e),y=_(r,Be),w=_(this,pt),b=Ce("%Temporal.PlainDateTime%"),E=new b(o,s,a,u,l,d,p,g,y,c),S=Or(w,E,"compatible");return Yn(_(S,De),w,c)}withTimeZone(e){if(!Re(this))throw new TypeError("invalid receiver");const n=Mr(e);return Yn(_(this,De),n,_(this,ae))}withCalendar(e){if(!Re(this))throw new TypeError("invalid receiver");const n=nr(e);return Yn(_(this,De),_(this,pt),n)}add(e,n=void 0){if(!Re(this))throw new TypeError("invalid receiver");const r=Wi(e),{years:i,months:o,weeks:s,days:a,hours:c,minutes:u,seconds:l,milliseconds:d,microseconds:p,nanoseconds:g}=r,y=He(n),w=_(this,pt),b=_(this,ae),E=_i(_(this,ur),w,b,i,o,s,a,c,u,l,d,p,g,y);return Yn(E,w,b)}subtract(e,n=void 0){if(!Re(this))throw new TypeError("invalid receiver");const r=Wi(e),{years:i,months:o,weeks:s,days:a,hours:c,minutes:u,seconds:l,milliseconds:d,microseconds:p,nanoseconds:g}=r,y=He(n),w=_(this,pt),b=_(this,ae),E=_i(_(this,ur),w,b,-i,-o,-s,-a,-c,-u,-l,-d,-p,-g,y);return Yn(E,w,b)}until(e,n=void 0){if(!Re(this))throw new TypeError("invalid receiver");const r=qa(e),i=_(this,ae),o=_(r,ae),s=Pe(i),a=Pe(o);if(s!==a)throw new RangeError(`cannot compute difference between dates of ${s} and ${a} calendars`);const c=He(n),u=Rr(c,"nanosecond"),l=qi("hour",u),d=wi(c,"auto",[],l);Fi(d,u);const p=On(c,"trunc"),g=Iu(c,u),y=_(this,De),w=_(r,De);let b,E,S,R,F,M,P,D,Y,Q;if(d!=="year"&&d!=="month"&&d!=="week"&&d!=="day")b=0,E=0,S=0,R=0,{seconds:P,milliseconds:D,microseconds:Y,nanoseconds:Q}=Du(y,w,g,u,p),{hours:F,minutes:M,seconds:P,milliseconds:D,microseconds:Y,nanoseconds:Q}=tr(0,0,0,P,D,Y,Q,d);else{const se=_(this,pt);if(!mh(se,_(r,pt)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");const Ae={...c,largestUnit:d};({years:b,months:E,weeks:S,days:R,hours:F,minutes:M,seconds:P,milliseconds:D,microseconds:Y,nanoseconds:Q}=Dp(y,w,se,i,d,Ae)),{years:b,months:E,weeks:S,days:R,hours:F,minutes:M,seconds:P,milliseconds:D,microseconds:Y,nanoseconds:Q}=Di(b,E,S,R,F,M,P,D,Y,Q,g,u,p,this),{years:b,months:E,weeks:S,days:R,hours:F,minutes:M,seconds:P,milliseconds:D,microseconds:Y,nanoseconds:Q}=Op(b,E,S,R,F,M,P,D,Y,Q,g,u,p,this)}const B=Ce("%Temporal.Duration%");return new B(b,E,S,R,F,M,P,D,Y,Q)}since(e,n=void 0){if(!Re(this))throw new TypeError("invalid receiver");const r=qa(e),i=_(this,ae),o=_(r,ae),s=Pe(i),a=Pe(o);if(s!==a)throw new RangeError(`cannot compute difference between dates of ${s} and ${a} calendars`);const c=He(n),u=Rr(c,"nanosecond"),l=qi("hour",u),d=wi(c,"auto",[],l);Fi(d,u);let p=On(c,"trunc");p=Hu(p);const g=Iu(c,u),y=_(this,De),w=_(r,De);let b,E,S,R,F,M,P,D,Y,Q;if(d!=="year"&&d!=="month"&&d!=="week"&&d!=="day")b=0,E=0,S=0,R=0,{seconds:P,milliseconds:D,microseconds:Y,nanoseconds:Q}=Du(y,w,g,u,p),{hours:F,minutes:M,seconds:P,milliseconds:D,microseconds:Y,nanoseconds:Q}=tr(0,0,0,P,D,Y,Q,d);else{const se=_(this,pt);if(!mh(se,_(r,pt)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");const Ae={...c,largestUnit:d};({years:b,months:E,weeks:S,days:R,hours:F,minutes:M,seconds:P,milliseconds:D,microseconds:Y,nanoseconds:Q}=Dp(y,w,se,i,d,Ae)),{years:b,months:E,weeks:S,days:R,hours:F,minutes:M,seconds:P,milliseconds:D,microseconds:Y,nanoseconds:Q}=Di(b,E,S,R,F,M,P,D,Y,Q,g,u,p,this),{years:b,months:E,weeks:S,days:R,hours:F,minutes:M,seconds:P,milliseconds:D,microseconds:Y,nanoseconds:Q}=Op(b,E,S,R,F,M,P,D,Y,Q,g,u,p,this)}const B=Ce("%Temporal.Duration%");return new B(-b,-E,-S,-R,-F,-M,-P,-D,-Y,-Q)}round(e){if(!Re(this))throw new TypeError("invalid receiver");if(e===void 0)throw new TypeError("options parameter is required");const n=typeof e=="string"?wc("smallestUnit",e):He(e),r=Rr(n,void 0,["year","month","week"]);if(r===void 0)throw new RangeError("smallestUnit is required");const i=On(n,"halfExpand"),s=ki(n,{day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[r],!1),a=Ut(this);let c=_(a,be),u=_(a,Se),l=_(a,Te),d=_(a,Me),p=_(a,Le),g=_(a,Ue),y=_(a,je),w=_(a,$e),b=_(a,Be);const E=Ce("%Temporal.PlainDateTime%"),S=_(this,pt),R=_(this,ae),F=new E(_(a,be),_(a,Se),_(a,Te),0,0,0,0,0,0),M=Or(S,F,"compatible"),P=_i(M,S,R,0,0,0,1,0,0,0,0,0,0),D=T.subtract(P,T.BigInt(_(M,De)));if(T.equal(D,Sn))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero-length days");({year:c,month:u,day:l,hour:d,minute:p,second:g,millisecond:y,microsecond:w,nanosecond:b}=qg(c,u,l,d,p,g,y,w,b,s,r,i,T.toNumber(D)));const Y=uo(S,_(this,ur)),Q=yd(c,u,l,d,p,g,y,w,b,"option",Y,S,"compatible","prefer",!1);return Yn(Q,S,_(this,ae))}equals(e){if(!Re(this))throw new TypeError("invalid receiver");const n=qa(e),r=_(this,De),i=_(n,De);return!T.equal(T.BigInt(r),T.BigInt(i))||!mh(_(this,pt),_(n,pt))?!1:Gu(_(this,ae),_(n,ae))}toString(e=void 0){if(!Re(this))throw new TypeError("invalid receiver");const n=He(e),{precision:r,unit:i,increment:o}=Wu(n),s=On(n,"trunc"),a=Ku(n),c=VS(n),u=GS(n);return Rp(this,r,a,c,u,{unit:i,increment:o,roundingMode:s})}toLocaleString(e=void 0,n=void 0){if(!Re(this))throw new TypeError("invalid receiver");return new Ls(e,n).format(this)}toJSON(){if(!Re(this))throw new TypeError("invalid receiver");return Rp(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!Re(this))throw new TypeError("invalid receiver");const e=Ut(this),n=Ce("%Temporal.PlainDateTime%"),r=_(this,ae),i=new n(_(e,be),_(e,Se),_(e,Te),0,0,0,0,0,0,r),o=_(this,pt),s=Or(o,i,"compatible");return Yn(_(s,De),o,r)}toInstant(){if(!Re(this))throw new TypeError("invalid receiver");const e=Ce("%Temporal.Instant%");return new e(_(this,De))}toPlainDate(){if(!Re(this))throw new TypeError("invalid receiver");return pa(Ut(this))}toPlainTime(){if(!Re(this))throw new TypeError("invalid receiver");return $g(Ut(this))}toPlainDateTime(){if(!Re(this))throw new TypeError("invalid receiver");return Ut(this)}toPlainYearMonth(){if(!Re(this))throw new TypeError("invalid receiver");const e=_(this,ae),n=hn(e,["monthCode","year"]),r=Xr(this,n);return As(e,r)}toPlainMonthDay(){if(!Re(this))throw new TypeError("invalid receiver");const e=_(this,ae),n=hn(e,["day","monthCode"]),r=ha(this,n);return yc(e,r)}getISOFields(){if(!Re(this))throw new TypeError("invalid receiver");const e=Ut(this),n=_(this,pt);return{calendar:_(this,ae),isoDay:_(e,Te),isoHour:_(e,Me),isoMicrosecond:_(e,$e),isoMillisecond:_(e,je),isoMinute:_(e,Le),isoMonth:_(e,Se),isoNanosecond:_(e,Be),isoSecond:_(e,Ue),isoYear:_(e,be),offset:Sp(n,_(this,ur)),timeZone:n}}static from(e,n=void 0){const r=He(n);return Re(e)?(Xn(r),xu(r),vp(r,"reject"),Yn(_(e,De),_(e,pt),_(e,ae))):qa(e,r)}static compare(e,n){const r=qa(e),i=qa(n),o=_(r,De),s=_(i,De);return T.lessThan(T.BigInt(o),T.BigInt(s))?-1:T.greaterThan(T.BigInt(o),T.BigInt(s))?1:0}}Co(t0,"Temporal.ZonedDateTime");function Ut(t){return vi(_(t,pt),_(t,ur),_(t,ae))}var ks=Object.freeze({__proto__:null,Instant:xi,Calendar:Bd,PlainDate:Yu,PlainDateTime:Ju,Duration:bo,PlainMonthDay:Jg,Now:zw,PlainTime:Jo,TimeZone:Xg,PlainYearMonth:e0,ZonedDateTime:t0});const R2=[xi,Bd,Yu,Ju,bo,Jg,Jo,Xg,e0,t0];for(const t of R2){const e=Object.getOwnPropertyDescriptor(t,"prototype");(e.configurable||e.enumerable||e.writable)&&(e.configurable=!1,e.enumerable=!1,e.writable=!1,Object.defineProperty(t,"prototype",e))}function k2(t){let e,n=t[0].title+"",r,i,o,s,a,c,u,l,d,p=t[0].description+"",g;return{c(){e=$t("div"),r=qt(n),i=Rn(),o=$t("span"),s=qt(t[2]),a=qt(":00-"),c=qt(t[1]),u=qt(":00"),l=Rn(),d=$t("div"),g=qt(p),this.h()},l(y){e=Bt(y,"DIV",{class:!0});var w=Nn(e);r=Vt(w,n),i=kn(w),o=Bt(w,"SPAN",{class:!0});var b=Nn(o);s=Vt(b,t[2]),a=Vt(b,":00-"),c=Vt(b,t[1]),u=Vt(b,":00"),b.forEach(Ye),w.forEach(Ye),l=kn(y),d=Bt(y,"DIV",{class:!0});var E=Nn(d);g=Vt(E,p),E.forEach(Ye),this.h()},h(){Tt(o,"class","time svelte-o14eiz"),Tt(e,"class","title svelte-o14eiz"),Tt(d,"class","description svelte-o14eiz")},m(y,w){Nt(y,e,w),We(e,r),We(e,i),We(e,o),We(o,s),We(o,a),We(o,c),We(o,u),Nt(y,l,w),Nt(y,d,w),We(d,g)},p(y,w){w&1&&n!==(n=y[0].title+"")&&so(r,n),w&4&&so(s,y[2]),w&2&&so(c,y[1]),w&1&&p!==(p=y[0].description+"")&&so(g,p)},d(y){y&&Ye(e),y&&Ye(l),y&&Ye(d)}}}function F2(t){let e,n,r;return e=new is({props:{$$slots:{default:[k2]},$$scope:{ctx:t}}}),e.$on("click",t[3]),{c(){n=$t("div"),ii(e.$$.fragment),this.h()},l(i){n=Bt(i,"DIV",{style:!0});var o=Nn(n);oi(e.$$.fragment,o),this.h()},h(){ty(n,"display","contents"),ty(n,"--bg","aliceblue")},m(i,o){Nt(i,n,o),si(e,n,null),r=!0},p(i,[o]){const s={};o&23&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){r||(_t(e.$$.fragment,i),r=!0)},o(i){Dt(e.$$.fragment,i),r=!1},d(i){i&&Ye(n),ai(e,i)}}}function D2(t,e,n){let r,i,{event:o}=e;function s(a){$d.call(this,t,a)}return t.$$set=a=>{"event"in a&&n(0,o=a.event)},t.$$.update=()=>{t.$$.dirty&1&&n(2,r=o.from.toZonedDateTimeISO("Europe/Brussels").hour),t.$$.dirty&1&&n(1,i=o.to.toZonedDateTimeISO("Europe/Brussels").hour)},[o,i,r,s]}class C2 extends Ps{constructor(e){super(),Ns(this,e,D2,F2,Os,{event:0})}}function P2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}class ic{constructor(e,n,r,i){this.id=P2(),this.from=e,this.to=n,this.title=r,this.description=i}static new(e){const n=e||ks.Now.instant();return new ic(n,n.add({hours:1}),"","")}equals(e){return this.id===e.id}}const N2={"2022-07-06":[new ic(ks.Instant.from("2022-07-06T08:00:00Z"),ks.Instant.from("2022-07-06T09:00:00Z"),"Svelte","Svelte is a JavaScript framework for building user interfaces. It is designed to be fast, painless, and fun to use. Svelte is a progressive framework, which means that it is always up to date with the latest web technologies. Svelte is a framework that is designed to be used as a static site generator, or as a component library. Svelte is a framework that is designed to be used as a static site generator, or as a component library.")]};function O2(){const{subscribe:t,set:e,update:n}=K_(N2);return{subscribe:t,addEvent:r=>n(i=>{const o=r.from.toString().split("T")[0];return o in i?i[o].push(r):i[o]=[r],console.log({ADDED:i}),i}),deleteEvent:r=>{n(i=>{for(const o of Object.keys(i)){const s=i[o].filter(a=>!a.equals(r));s.length!=i[o].length&&(s.length>0?i[o]=s:delete i[o])}return console.log({DELETED:i}),i})},updateEvent:r=>{aa.deleteEvent(r),aa.addEvent(r)},reset:()=>e({})}}const aa=O2();jE(aa,t=>console.log(t));function M2(){const{subscribe:t,set:e}=K_({visible:!1,editMode:!1,event:ic.new()});return{subscribe:t,edit:n=>{e({visible:!0,editMode:!0,event:n})},new:()=>{e({visible:!0,editMode:!1,event:new ic(ks.Now.instant(),ks.Now.instant().add({hours:1}),"","")})},reset:()=>e({visible:!1,editMode:!1,event:ic.new()})}}const Sa=M2();const L2=t=>({}),dy=t=>({submit:t[4]});function fy(t){let e,n,r=t[1].editMode?"Edit":"Create",i,o,s,a,c,u,l,d,p,g,y,w,b,E,S,R,F,M,P,D,Y,Q,B,se,Ae,xe;const re=t[6].default,ne=Ag(re,t,t[5],dy);return{c(){e=$t("form"),n=$t("h3"),i=qt(r),o=qt(" event"),s=Rn(),a=$t("label"),c=qt(`Date time from:
			`),u=$t("input"),d=Rn(),p=$t("br"),g=Rn(),y=$t("label"),w=qt(`Date time to:
			`),b=$t("input"),S=Rn(),R=$t("br"),F=Rn(),M=$t("input"),P=Rn(),D=$t("br"),Y=Rn(),Q=$t("input"),B=Rn(),ne&&ne.c(),this.h()},l(ye){e=Bt(ye,"FORM",{class:!0});var we=Nn(e);n=Bt(we,"H3",{});var qe=Nn(n);i=Vt(qe,r),o=Vt(qe," event"),qe.forEach(Ye),s=kn(we),a=Bt(we,"LABEL",{for:!0});var ve=Nn(a);c=Vt(ve,`Date time from:
			`),u=Bt(ve,"INPUT",{id:!0,type:!0,class:!0}),ve.forEach(Ye),d=kn(we),p=Bt(we,"BR",{}),g=kn(we),y=Bt(we,"LABEL",{for:!0});var Oe=Nn(y);w=Vt(Oe,`Date time to:
			`),b=Bt(Oe,"INPUT",{id:!0,type:!0,class:!0}),Oe.forEach(Ye),S=kn(we),R=Bt(we,"BR",{}),F=kn(we),M=Bt(we,"INPUT",{type:!0,placeholder:!0,class:!0}),P=kn(we),D=Bt(we,"BR",{}),Y=kn(we),Q=Bt(we,"INPUT",{type:!0,placeholder:!0,class:!0}),B=kn(we),ne&&ne.l(we),we.forEach(Ye),this.h()},h(){Tt(u,"id","datetime-from"),Tt(u,"type","datetime-local"),u.value=l=Ol(t[0].from),Tt(u,"class","svelte-1f7v4dt"),Tt(a,"for","datetime-from"),Tt(b,"id","datetime-to"),Tt(b,"type","datetime-local"),b.value=E=Ol(t[0].to),Tt(b,"class","svelte-1f7v4dt"),Tt(y,"for","datetime-to"),Tt(M,"type","text"),Tt(M,"placeholder","title"),Tt(M,"class","svelte-1f7v4dt"),Tt(Q,"type","text"),Tt(Q,"placeholder","description"),Tt(Q,"class","svelte-1f7v4dt"),Tt(e,"class","editEvent")},m(ye,we){Nt(ye,e,we),We(e,n),We(n,i),We(n,o),We(e,s),We(e,a),We(a,c),We(a,u),We(e,d),We(e,p),We(e,g),We(e,y),We(y,w),We(y,b),We(e,S),We(e,R),We(e,F),We(e,M),Fl(M,t[0].title),We(e,P),We(e,D),We(e,Y),We(e,Q),Fl(Q,t[0].description),We(e,B),ne&&ne.m(e,null),se=!0,Ae||(xe=[vs(u,"change",t[2]),vs(b,"change",t[3]),vs(M,"input",t[7]),vs(Q,"input",t[8])],Ae=!0)},p(ye,we){(!se||we&2)&&r!==(r=ye[1].editMode?"Edit":"Create")&&so(i,r),(!se||we&1&&l!==(l=Ol(ye[0].from)))&&(u.value=l),(!se||we&1&&E!==(E=Ol(ye[0].to)))&&(b.value=E),we&1&&M.value!==ye[0].title&&Fl(M,ye[0].title),we&1&&Q.value!==ye[0].description&&Fl(Q,ye[0].description),ne&&ne.p&&(!se||we&32)&&xg(ne,re,ye,ye[5],se?Rg(re,ye[5],we,L2):Ig(ye[5]),dy)},i(ye){se||(_t(ne,ye),se=!0)},o(ye){Dt(ne,ye),se=!1},d(ye){ye&&Ye(e),ne&&ne.d(ye),Ae=!1,$_(xe)}}}function U2(t){let e,n,r=t[0]&&fy(t);return{c(){r&&r.c(),e=Io()},l(i){r&&r.l(i),e=Io()},m(i,o){r&&r.m(i,o),Nt(i,e,o),n=!0},p(i,[o]){i[0]?r?(r.p(i,o),o&1&&_t(r,1)):(r=fy(i),r.c(),_t(r,1),r.m(e.parentNode,e)):r&&(_a(),Dt(r,1,1,()=>{r=null}),wa())},i(i){n||(_t(r),n=!0)},o(i){Dt(r),n=!1},d(i){r&&r.d(i),i&&Ye(e)}}}function Ol(t){const e=new Date(t.toString()||"");return`${e.toLocaleDateString().split("/").reverse().join("-")} ${e.toLocaleTimeString()}`}function j2(t,e,n){let r;gp(t,Sa,y=>n(1,r=y));let{$$slots:i={},$$scope:o}=e,s=r.event;function a(y){const w=y.getTime();return ks.Instant.fromEpochMilliseconds(w)}function c(y,w){if(!s)return;const b=y.target.value;n(0,s[w]=a(new Date(b)),s)}const u=y=>c(y,"from"),l=y=>c(y,"to");function d(y){console.log("SUBMIT"),Sa.reset(),y(s)}function p(){s.title=this.value,n(0,s)}function g(){s.description=this.value,n(0,s)}return t.$$set=y=>{"$$scope"in y&&n(5,o=y.$$scope)},[s,r,u,l,d,o,i,p,g]}class $2 extends Ps{constructor(e){super(),Ns(this,e,j2,U2,Os,{})}}function hy(t){let e,n,r,i,o;const s=t[3].default,a=Ag(s,t,t[2],null);return{c(){e=$t("div"),n=$t("div"),a&&a.c(),this.h()},l(c){e=Bt(c,"DIV",{class:!0});var u=Nn(e);n=Bt(u,"DIV",{class:!0});var l=Nn(n);a&&a.l(l),l.forEach(Ye),u.forEach(Ye),this.h()},h(){Tt(n,"class","modal svelte-i2g5ae"),Tt(e,"class","backdrop svelte-i2g5ae")},m(c,u){Nt(c,e,u),We(e,n),a&&a.m(n,null),r=!0,i||(o=[vs(n,"click",LE(t[4])),vs(e,"click",t[1])],i=!0)},p(c,u){a&&a.p&&(!r||u&4)&&xg(a,s,c,c[2],r?Rg(s,c[2],u,null):Ig(c[2]),null)},i(c){r||(_t(a,c),r=!0)},o(c){Dt(a,c),r=!1},d(c){c&&Ye(e),a&&a.d(c),i=!1,$_(o)}}}function B2(t){let e,n,r=t[0]&&hy(t);return{c(){r&&r.c(),e=Io()},l(i){r&&r.l(i),e=Io()},m(i,o){r&&r.m(i,o),Nt(i,e,o),n=!0},p(i,[o]){i[0]?r?(r.p(i,o),o&1&&_t(r,1)):(r=hy(i),r.c(),_t(r,1),r.m(e.parentNode,e)):r&&(_a(),Dt(r,1,1,()=>{r=null}),wa())},i(i){n||(_t(r),n=!0)},o(i){Dt(r),n=!1},d(i){r&&r.d(i),i&&Ye(e)}}}function H2(t,e,n){let{$$slots:r={},$$scope:i}=e,{visible:o=!1}=e;const s=UE();function a(){s("close"),n(0,o=!1)}function c(u){$d.call(this,t,u)}return t.$$set=u=>{"visible"in u&&n(0,o=u.visible),"$$scope"in u&&n(2,i=u.$$scope)},[o,a,i,r,c]}class K2 extends Ps{constructor(e){super(),Ns(this,e,H2,B2,Os,{visible:0})}}const Xc={location:{name:"Brussels",region:"",country:"Belgium",lat:50.83,lon:4.33,tz_id:"Europe/Brussels",localtime_epoch:1657108178,localtime:"2022-07-06 13:49"},current:{last_updated_epoch:1657107900,last_updated:"2022-07-06 13:45",temp_c:19,temp_f:66.2,is_day:1,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/116.png",code:1003},wind_mph:3.8,wind_kph:6.1,wind_degree:10,wind_dir:"N",pressure_mb:1026,pressure_in:30.3,precip_mm:0,precip_in:0,humidity:56,cloud:75,feelslike_c:19,feelslike_f:66.2,vis_km:10,vis_miles:6,uv:5,gust_mph:7.8,gust_kph:12.6},forecast:{forecastday:[{date:"2022-07-06",date_epoch:1657065600,day:{maxtemp_c:23.9,maxtemp_f:75,mintemp_c:10.9,mintemp_f:51.6,avgtemp_c:17.3,avgtemp_f:63.2,maxwind_mph:11.9,maxwind_kph:19.1,totalprecip_mm:0,totalprecip_in:0,avgvis_km:10,avgvis_miles:6,avghumidity:65,daily_will_it_rain:0,daily_chance_of_rain:0,daily_will_it_snow:0,daily_chance_of_snow:0,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/116.png",code:1003},uv:5},astro:{sunrise:"05:38 AM",sunset:"09:57 PM",moonrise:"01:14 PM",moonset:"01:11 AM",moon_phase:"First Quarter",moon_illumination:"48"},hour:[{time_epoch:1657058400,time:"2022-07-06 00:00",temp_c:12.6,temp_f:54.7,is_day:0,condition:{text:"Clear",icon:"//cdn.weatherapi.com/weather/64x64/night/113.png",code:1e3},wind_mph:4.3,wind_kph:6.8,wind_degree:6,wind_dir:"N",pressure_mb:1027,pressure_in:30.31,precip_mm:0,precip_in:0,humidity:84,cloud:1,feelslike_c:12.3,feelslike_f:54.1,windchill_c:12.3,windchill_f:54.1,heatindex_c:12.6,heatindex_f:54.7,dewpoint_c:9.9,dewpoint_f:49.8,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:8.5,gust_kph:13.7,uv:1},{time_epoch:1657062e3,time:"2022-07-06 01:00",temp_c:12.2,temp_f:54,is_day:0,condition:{text:"Clear",icon:"//cdn.weatherapi.com/weather/64x64/night/113.png",code:1e3},wind_mph:2.7,wind_kph:4.3,wind_degree:15,wind_dir:"NNE",pressure_mb:1027,pressure_in:30.31,precip_mm:0,precip_in:0,humidity:84,cloud:0,feelslike_c:12.4,feelslike_f:54.3,windchill_c:12.4,windchill_f:54.3,heatindex_c:12.2,heatindex_f:54,dewpoint_c:9.5,dewpoint_f:49.1,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:5.4,gust_kph:8.6,uv:1},{time_epoch:1657065600,time:"2022-07-06 02:00",temp_c:11.7,temp_f:53.1,is_day:0,condition:{text:"Clear",icon:"//cdn.weatherapi.com/weather/64x64/night/113.png",code:1e3},wind_mph:2,wind_kph:3.2,wind_degree:31,wind_dir:"NNE",pressure_mb:1026,pressure_in:30.31,precip_mm:0,precip_in:0,humidity:84,cloud:19,feelslike_c:12.3,feelslike_f:54.1,windchill_c:12.3,windchill_f:54.1,heatindex_c:11.7,heatindex_f:53.1,dewpoint_c:9,dewpoint_f:48.2,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:4,gust_kph:6.5,uv:1},{time_epoch:1657069200,time:"2022-07-06 03:00",temp_c:11.4,temp_f:52.5,is_day:0,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/night/116.png",code:1003},wind_mph:1.8,wind_kph:2.9,wind_degree:48,wind_dir:"NE",pressure_mb:1026,pressure_in:30.31,precip_mm:0,precip_in:0,humidity:84,cloud:26,feelslike_c:11.4,feelslike_f:52.5,windchill_c:11.4,windchill_f:52.5,heatindex_c:11.4,heatindex_f:52.5,dewpoint_c:8.8,dewpoint_f:47.8,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:3.6,gust_kph:5.8,uv:1},{time_epoch:1657072800,time:"2022-07-06 04:00",temp_c:11.1,temp_f:52,is_day:0,condition:{text:"Clear",icon:"//cdn.weatherapi.com/weather/64x64/night/113.png",code:1e3},wind_mph:2,wind_kph:3.2,wind_degree:135,wind_dir:"SE",pressure_mb:1026,pressure_in:30.3,precip_mm:0,precip_in:0,humidity:83,cloud:20,feelslike_c:11.6,feelslike_f:52.9,windchill_c:11.6,windchill_f:52.9,heatindex_c:11.1,heatindex_f:52,dewpoint_c:8.4,dewpoint_f:47.1,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:4.3,gust_kph:6.8,uv:1},{time_epoch:1657076400,time:"2022-07-06 05:00",temp_c:10.9,temp_f:51.6,is_day:0,condition:{text:"Clear",icon:"//cdn.weatherapi.com/weather/64x64/night/113.png",code:1e3},wind_mph:3.4,wind_kph:5.4,wind_degree:167,wind_dir:"SSE",pressure_mb:1026,pressure_in:30.29,precip_mm:0,precip_in:0,humidity:82,cloud:17,feelslike_c:10.7,feelslike_f:51.3,windchill_c:10.7,windchill_f:51.3,heatindex_c:10.9,heatindex_f:51.6,dewpoint_c:8,dewpoint_f:46.4,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:6.9,gust_kph:11.2,uv:1},{time_epoch:165708e4,time:"2022-07-06 06:00",temp_c:12.2,temp_f:54,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:2.7,wind_kph:4.3,wind_degree:218,wind_dir:"SW",pressure_mb:1026,pressure_in:30.31,precip_mm:0,precip_in:0,humidity:77,cloud:9,feelslike_c:12.4,feelslike_f:54.3,windchill_c:12.4,windchill_f:54.3,heatindex_c:12.2,heatindex_f:54,dewpoint_c:8.4,dewpoint_f:47.1,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:4.7,gust_kph:7.6,uv:4},{time_epoch:1657083600,time:"2022-07-06 07:00",temp_c:13.7,temp_f:56.7,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:3.4,wind_kph:5.4,wind_degree:254,wind_dir:"WSW",pressure_mb:1027,pressure_in:30.32,precip_mm:0,precip_in:0,humidity:71,cloud:14,feelslike_c:13.9,feelslike_f:57,windchill_c:13.9,windchill_f:57,heatindex_c:13.7,heatindex_f:56.7,dewpoint_c:8.6,dewpoint_f:47.5,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:4.7,gust_kph:7.6,uv:4},{time_epoch:1657087200,time:"2022-07-06 08:00",temp_c:15.5,temp_f:59.9,is_day:1,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/116.png",code:1003},wind_mph:4,wind_kph:6.5,wind_degree:237,wind_dir:"WSW",pressure_mb:1027,pressure_in:30.32,precip_mm:0,precip_in:0,humidity:64,cloud:54,feelslike_c:15.5,feelslike_f:59.9,windchill_c:15.5,windchill_f:59.9,heatindex_c:15.5,heatindex_f:59.9,dewpoint_c:8.8,dewpoint_f:47.8,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:4.9,gust_kph:7.9,uv:5},{time_epoch:1657090800,time:"2022-07-06 09:00",temp_c:16.9,temp_f:62.4,is_day:1,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/116.png",code:1003},wind_mph:4.7,wind_kph:7.6,wind_degree:244,wind_dir:"WSW",pressure_mb:1027,pressure_in:30.31,precip_mm:0,precip_in:0,humidity:59,cloud:62,feelslike_c:16.9,feelslike_f:62.4,windchill_c:16.9,windchill_f:62.4,heatindex_c:16.9,heatindex_f:62.4,dewpoint_c:8.9,dewpoint_f:48,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:5.6,gust_kph:9,uv:5},{time_epoch:1657094400,time:"2022-07-06 10:00",temp_c:18,temp_f:64.4,is_day:1,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/116.png",code:1003},wind_mph:5.1,wind_kph:8.3,wind_degree:249,wind_dir:"WSW",pressure_mb:1026,pressure_in:30.3,precip_mm:0,precip_in:0,humidity:56,cloud:56,feelslike_c:18,feelslike_f:64.4,windchill_c:18,windchill_f:64.4,heatindex_c:18,heatindex_f:64.4,dewpoint_c:9.1,dewpoint_f:48.4,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:6,gust_kph:9.7,uv:5},{time_epoch:1657098e3,time:"2022-07-06 11:00",temp_c:19.3,temp_f:66.7,is_day:1,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/116.png",code:1003},wind_mph:6,wind_kph:9.7,wind_degree:259,wind_dir:"W",pressure_mb:1026,pressure_in:30.31,precip_mm:0,precip_in:0,humidity:54,cloud:61,feelslike_c:19.3,feelslike_f:66.7,windchill_c:19.3,windchill_f:66.7,heatindex_c:19.3,heatindex_f:66.7,dewpoint_c:9.6,dewpoint_f:49.3,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:6.9,gust_kph:11.2,uv:5},{time_epoch:1657101600,time:"2022-07-06 12:00",temp_c:20.2,temp_f:68.4,is_day:1,condition:{text:"Overcast",icon:"//cdn.weatherapi.com/weather/64x64/day/122.png",code:1009},wind_mph:6.7,wind_kph:10.8,wind_degree:270,wind_dir:"W",pressure_mb:1026,pressure_in:30.3,precip_mm:0,precip_in:0,humidity:52,cloud:89,feelslike_c:20.2,feelslike_f:68.4,windchill_c:20.2,windchill_f:68.4,heatindex_c:20.2,heatindex_f:68.4,dewpoint_c:9.9,dewpoint_f:49.8,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:7.8,gust_kph:12.6,uv:5},{time_epoch:1657105200,time:"2022-07-06 13:00",temp_c:21.5,temp_f:70.7,is_day:1,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/116.png",code:1003},wind_mph:5.6,wind_kph:9,wind_degree:259,wind_dir:"W",pressure_mb:1025,pressure_in:30.27,precip_mm:0,precip_in:0,humidity:48,cloud:55,feelslike_c:21.5,feelslike_f:70.7,windchill_c:21.5,windchill_f:70.7,heatindex_c:24.2,heatindex_f:75.6,dewpoint_c:9.9,dewpoint_f:49.8,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:6.5,gust_kph:10.4,uv:6},{time_epoch:1657108800,time:"2022-07-06 14:00",temp_c:23,temp_f:73.4,is_day:1,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/116.png",code:1003},wind_mph:5.4,wind_kph:8.6,wind_degree:277,wind_dir:"W",pressure_mb:1025,pressure_in:30.25,precip_mm:0,precip_in:0,humidity:44,cloud:47,feelslike_c:24.5,feelslike_f:76.1,windchill_c:23,windchill_f:73.4,heatindex_c:24.5,heatindex_f:76.1,dewpoint_c:9.9,dewpoint_f:49.8,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:6.3,gust_kph:10.1,uv:6},{time_epoch:1657112400,time:"2022-07-06 15:00",temp_c:23.9,temp_f:75,is_day:1,condition:{text:"Cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/119.png",code:1006},wind_mph:5.4,wind_kph:8.6,wind_degree:282,wind_dir:"WNW",pressure_mb:1024,pressure_in:30.23,precip_mm:0,precip_in:0,humidity:41,cloud:81,feelslike_c:24.8,feelslike_f:76.6,windchill_c:23.9,windchill_f:75,heatindex_c:24.8,heatindex_f:76.6,dewpoint_c:9.9,dewpoint_f:49.8,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:6.3,gust_kph:10.1,uv:5},{time_epoch:1657116e3,time:"2022-07-06 16:00",temp_c:23.9,temp_f:75,is_day:1,condition:{text:"Cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/119.png",code:1006},wind_mph:8.3,wind_kph:13.3,wind_degree:298,wind_dir:"WNW",pressure_mb:1023,pressure_in:30.22,precip_mm:0,precip_in:0,humidity:41,cloud:81,feelslike_c:24.8,feelslike_f:76.6,windchill_c:23.9,windchill_f:75,heatindex_c:24.8,heatindex_f:76.6,dewpoint_c:9.9,dewpoint_f:49.8,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:9.8,gust_kph:15.8,uv:5},{time_epoch:1657119600,time:"2022-07-06 17:00",temp_c:22.7,temp_f:72.9,is_day:1,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/116.png",code:1003},wind_mph:10.3,wind_kph:16.6,wind_degree:311,wind_dir:"NW",pressure_mb:1023,pressure_in:30.21,precip_mm:0,precip_in:0,humidity:46,cloud:54,feelslike_c:24.5,feelslike_f:76.1,windchill_c:22.7,windchill_f:72.9,heatindex_c:24.5,heatindex_f:76.1,dewpoint_c:10.6,dewpoint_f:51.1,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:14.5,gust_kph:23.4,uv:6},{time_epoch:1657123200,time:"2022-07-06 18:00",temp_c:22.7,temp_f:72.9,is_day:1,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/116.png",code:1003},wind_mph:11.9,wind_kph:19.1,wind_degree:318,wind_dir:"NW",pressure_mb:1023,pressure_in:30.22,precip_mm:0,precip_in:0,humidity:51,cloud:55,feelslike_c:24.6,feelslike_f:76.3,windchill_c:22.7,windchill_f:72.9,heatindex_c:24.6,heatindex_f:76.3,dewpoint_c:12,dewpoint_f:53.6,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:13.6,gust_kph:22,uv:6},{time_epoch:1657126800,time:"2022-07-06 19:00",temp_c:22.1,temp_f:71.8,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:11,wind_kph:17.6,wind_degree:317,wind_dir:"NW",pressure_mb:1023,pressure_in:30.22,precip_mm:0,precip_in:0,humidity:57,cloud:25,feelslike_c:24.6,feelslike_f:76.3,windchill_c:22.1,windchill_f:71.8,heatindex_c:24.6,heatindex_f:76.3,dewpoint_c:13.3,dewpoint_f:55.9,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:12.5,gust_kph:20.2,uv:6},{time_epoch:1657130400,time:"2022-07-06 20:00",temp_c:19.5,temp_f:67.1,is_day:1,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/116.png",code:1003},wind_mph:8.3,wind_kph:13.3,wind_degree:314,wind_dir:"NW",pressure_mb:1024,pressure_in:30.23,precip_mm:0,precip_in:0,humidity:64,cloud:28,feelslike_c:19.5,feelslike_f:67.1,windchill_c:19.5,windchill_f:67.1,heatindex_c:19.5,heatindex_f:67.1,dewpoint_c:12.6,dewpoint_f:54.7,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:13.2,gust_kph:21.2,uv:5},{time_epoch:1657134e3,time:"2022-07-06 21:00",temp_c:17.8,temp_f:64,is_day:1,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/116.png",code:1003},wind_mph:6.3,wind_kph:10.1,wind_degree:291,wind_dir:"WNW",pressure_mb:1024,pressure_in:30.22,precip_mm:0,precip_in:0,humidity:72,cloud:35,feelslike_c:17.8,feelslike_f:64,windchill_c:17.8,windchill_f:64,heatindex_c:17.8,heatindex_f:64,dewpoint_c:12.7,dewpoint_f:54.9,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:11.6,gust_kph:18.7,uv:5},{time_epoch:1657137600,time:"2022-07-06 22:00",temp_c:16.9,temp_f:62.4,is_day:0,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/night/116.png",code:1003},wind_mph:5.8,wind_kph:9.4,wind_degree:268,wind_dir:"W",pressure_mb:1023,pressure_in:30.22,precip_mm:0,precip_in:0,humidity:77,cloud:38,feelslike_c:16.9,feelslike_f:62.4,windchill_c:16.9,windchill_f:62.4,heatindex_c:16.9,heatindex_f:62.4,dewpoint_c:12.8,dewpoint_f:55,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:11.2,gust_kph:18,uv:1},{time_epoch:1657141200,time:"2022-07-06 23:00",temp_c:16.2,temp_f:61.2,is_day:0,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/night/116.png",code:1003},wind_mph:6.9,wind_kph:11.2,wind_degree:247,wind_dir:"WSW",pressure_mb:1023,pressure_in:30.21,precip_mm:0,precip_in:0,humidity:79,cloud:34,feelslike_c:16.2,feelslike_f:61.2,windchill_c:16.2,windchill_f:61.2,heatindex_c:16.2,heatindex_f:61.2,dewpoint_c:12.6,dewpoint_f:54.7,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:13.6,gust_kph:22,uv:1}]},{date:"2022-07-07",date_epoch:1657152e3,day:{maxtemp_c:22.8,maxtemp_f:73,mintemp_c:12.3,mintemp_f:54.1,avgtemp_c:17.6,avgtemp_f:63.6,maxwind_mph:16.8,maxwind_kph:27,totalprecip_mm:1.3,totalprecip_in:.05,avgvis_km:10,avgvis_miles:6,avghumidity:71,daily_will_it_rain:1,daily_chance_of_rain:89,daily_will_it_snow:0,daily_chance_of_snow:0,condition:{text:"Patchy rain possible",icon:"//cdn.weatherapi.com/weather/64x64/day/176.png",code:1063},uv:4},astro:{sunrise:"05:38 AM",sunset:"09:57 PM",moonrise:"02:29 PM",moonset:"01:25 AM",moon_phase:"First Quarter",moon_illumination:"55"},hour:[{time_epoch:1657144800,time:"2022-07-07 00:00",temp_c:15.9,temp_f:60.6,is_day:0,condition:{text:"Cloudy",icon:"//cdn.weatherapi.com/weather/64x64/night/119.png",code:1006},wind_mph:8.9,wind_kph:14.4,wind_degree:235,wind_dir:"SW",pressure_mb:1023,pressure_in:30.19,precip_mm:0,precip_in:0,humidity:81,cloud:72,feelslike_c:15.9,feelslike_f:60.6,windchill_c:15.9,windchill_f:60.6,heatindex_c:15.9,heatindex_f:60.6,dewpoint_c:12.6,dewpoint_f:54.7,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:16.8,gust_kph:27,uv:1},{time_epoch:1657148400,time:"2022-07-07 01:00",temp_c:15.6,temp_f:60.1,is_day:0,condition:{text:"Overcast",icon:"//cdn.weatherapi.com/weather/64x64/night/122.png",code:1009},wind_mph:8.9,wind_kph:14.4,wind_degree:242,wind_dir:"WSW",pressure_mb:1022,pressure_in:30.18,precip_mm:0,precip_in:0,humidity:84,cloud:100,feelslike_c:15.6,feelslike_f:60.1,windchill_c:15.6,windchill_f:60.1,heatindex_c:15.6,heatindex_f:60.1,dewpoint_c:12.9,dewpoint_f:55.2,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:16.6,gust_kph:26.6,uv:1},{time_epoch:1657152e3,time:"2022-07-07 02:00",temp_c:17,temp_f:62.6,is_day:0,condition:{text:"Overcast",icon:"//cdn.weatherapi.com/weather/64x64/night/122.png",code:1009},wind_mph:9.6,wind_kph:15.5,wind_degree:256,wind_dir:"WSW",pressure_mb:1022,pressure_in:30.17,precip_mm:0,precip_in:0,humidity:78,cloud:100,feelslike_c:17,feelslike_f:62.6,windchill_c:17,windchill_f:62.6,heatindex_c:17,heatindex_f:62.6,dewpoint_c:13.1,dewpoint_f:55.6,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:14.3,gust_kph:23,uv:1},{time_epoch:1657155600,time:"2022-07-07 03:00",temp_c:17.3,temp_f:63.1,is_day:0,condition:{text:"Overcast",icon:"//cdn.weatherapi.com/weather/64x64/night/122.png",code:1009},wind_mph:9.4,wind_kph:15.1,wind_degree:261,wind_dir:"W",pressure_mb:1022,pressure_in:30.16,precip_mm:0,precip_in:0,humidity:77,cloud:100,feelslike_c:17.3,feelslike_f:63.1,windchill_c:17.3,windchill_f:63.1,heatindex_c:17.3,heatindex_f:63.1,dewpoint_c:13.2,dewpoint_f:55.8,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:13.6,gust_kph:22,uv:1},{time_epoch:1657159200,time:"2022-07-07 04:00",temp_c:16.8,temp_f:62.2,is_day:0,condition:{text:"Patchy rain possible",icon:"//cdn.weatherapi.com/weather/64x64/night/176.png",code:1063},wind_mph:9.2,wind_kph:14.8,wind_degree:265,wind_dir:"W",pressure_mb:1021,pressure_in:30.16,precip_mm:.1,precip_in:0,humidity:82,cloud:100,feelslike_c:16.8,feelslike_f:62.2,windchill_c:16.8,windchill_f:62.2,heatindex_c:16.8,heatindex_f:62.2,dewpoint_c:13.7,dewpoint_f:56.7,will_it_rain:0,chance_of_rain:69,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:13.9,gust_kph:22.3,uv:1},{time_epoch:1657162800,time:"2022-07-07 05:00",temp_c:15.7,temp_f:60.3,is_day:0,condition:{text:"Overcast",icon:"//cdn.weatherapi.com/weather/64x64/night/122.png",code:1009},wind_mph:10.3,wind_kph:16.6,wind_degree:282,wind_dir:"WNW",pressure_mb:1021,pressure_in:30.16,precip_mm:0,precip_in:0,humidity:89,cloud:100,feelslike_c:15.7,feelslike_f:60.3,windchill_c:15.7,windchill_f:60.3,heatindex_c:15.7,heatindex_f:60.3,dewpoint_c:14,dewpoint_f:57.2,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:16.6,gust_kph:26.6,uv:1},{time_epoch:1657166400,time:"2022-07-07 06:00",temp_c:15.7,temp_f:60.3,is_day:1,condition:{text:"Patchy rain possible",icon:"//cdn.weatherapi.com/weather/64x64/day/176.png",code:1063},wind_mph:11,wind_kph:17.6,wind_degree:302,wind_dir:"WNW",pressure_mb:1022,pressure_in:30.17,precip_mm:.1,precip_in:0,humidity:92,cloud:100,feelslike_c:15.7,feelslike_f:60.3,windchill_c:15.7,windchill_f:60.3,heatindex_c:15.7,heatindex_f:60.3,dewpoint_c:14.4,dewpoint_f:57.9,will_it_rain:1,chance_of_rain:72,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:16.6,gust_kph:26.6,uv:4},{time_epoch:165717e4,time:"2022-07-07 07:00",temp_c:15.8,temp_f:60.4,is_day:1,condition:{text:"Light rain shower",icon:"//cdn.weatherapi.com/weather/64x64/day/353.png",code:1240},wind_mph:11.6,wind_kph:18.7,wind_degree:325,wind_dir:"NW",pressure_mb:1022,pressure_in:30.19,precip_mm:.5,precip_in:.02,humidity:88,cloud:100,feelslike_c:15.8,feelslike_f:60.4,windchill_c:15.8,windchill_f:60.4,heatindex_c:15.8,heatindex_f:60.4,dewpoint_c:13.8,dewpoint_f:56.8,will_it_rain:0,chance_of_rain:63,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:17,gust_kph:27.4,uv:4},{time_epoch:1657173600,time:"2022-07-07 08:00",temp_c:16,temp_f:60.8,is_day:1,condition:{text:"Cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/119.png",code:1006},wind_mph:11.9,wind_kph:19.1,wind_degree:325,wind_dir:"NW",pressure_mb:1023,pressure_in:30.21,precip_mm:0,precip_in:0,humidity:84,cloud:78,feelslike_c:16,feelslike_f:60.8,windchill_c:16,windchill_f:60.8,heatindex_c:16,heatindex_f:60.8,dewpoint_c:13.3,dewpoint_f:55.9,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:16.6,gust_kph:26.6,uv:4},{time_epoch:1657177200,time:"2022-07-07 09:00",temp_c:16.8,temp_f:62.2,is_day:1,condition:{text:"Cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/119.png",code:1006},wind_mph:12.8,wind_kph:20.5,wind_degree:326,wind_dir:"NNW",pressure_mb:1023,pressure_in:30.22,precip_mm:0,precip_in:0,humidity:77,cloud:63,feelslike_c:16.8,feelslike_f:62.2,windchill_c:16.8,windchill_f:62.2,heatindex_c:16.8,heatindex_f:62.2,dewpoint_c:12.7,dewpoint_f:54.9,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:17,gust_kph:27.4,uv:4},{time_epoch:1657180800,time:"2022-07-07 10:00",temp_c:18.5,temp_f:65.3,is_day:1,condition:{text:"Light rain shower",icon:"//cdn.weatherapi.com/weather/64x64/day/353.png",code:1240},wind_mph:15.2,wind_kph:24.5,wind_degree:332,wind_dir:"NNW",pressure_mb:1024,pressure_in:30.24,precip_mm:.2,precip_in:.01,humidity:65,cloud:91,feelslike_c:18.5,feelslike_f:65.3,windchill_c:18.5,windchill_f:65.3,heatindex_c:18.5,heatindex_f:65.3,dewpoint_c:11.7,dewpoint_f:53.1,will_it_rain:1,chance_of_rain:89,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:17.7,gust_kph:28.4,uv:4},{time_epoch:1657184400,time:"2022-07-07 11:00",temp_c:18.8,temp_f:65.8,is_day:1,condition:{text:"Cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/119.png",code:1006},wind_mph:15.4,wind_kph:24.8,wind_degree:335,wind_dir:"NNW",pressure_mb:1025,pressure_in:30.26,precip_mm:0,precip_in:0,humidity:63,cloud:86,feelslike_c:18.8,feelslike_f:65.8,windchill_c:18.8,windchill_f:65.8,heatindex_c:18.8,heatindex_f:65.8,dewpoint_c:11.7,dewpoint_f:53.1,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:17.7,gust_kph:28.4,uv:4},{time_epoch:1657188e3,time:"2022-07-07 12:00",temp_c:19,temp_f:66.2,is_day:1,condition:{text:"Patchy rain possible",icon:"//cdn.weatherapi.com/weather/64x64/day/176.png",code:1063},wind_mph:15.2,wind_kph:24.5,wind_degree:332,wind_dir:"NNW",pressure_mb:1025,pressure_in:30.27,precip_mm:.1,precip_in:0,humidity:63,cloud:91,feelslike_c:19,feelslike_f:66.2,windchill_c:19,windchill_f:66.2,heatindex_c:19,heatindex_f:66.2,dewpoint_c:11.9,dewpoint_f:53.4,will_it_rain:1,chance_of_rain:74,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:18.3,gust_kph:29.5,uv:4},{time_epoch:1657191600,time:"2022-07-07 13:00",temp_c:21.1,temp_f:70,is_day:1,condition:{text:"Patchy rain possible",icon:"//cdn.weatherapi.com/weather/64x64/day/176.png",code:1063},wind_mph:15.9,wind_kph:25.6,wind_degree:336,wind_dir:"NNW",pressure_mb:1025,pressure_in:30.28,precip_mm:.1,precip_in:0,humidity:56,cloud:77,feelslike_c:21.1,feelslike_f:70,windchill_c:21.1,windchill_f:70,heatindex_c:24.4,heatindex_f:75.9,dewpoint_c:12,dewpoint_f:53.6,will_it_rain:0,chance_of_rain:68,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:18.3,gust_kph:29.5,uv:5},{time_epoch:1657195200,time:"2022-07-07 14:00",temp_c:20.4,temp_f:68.7,is_day:1,condition:{text:"Patchy rain possible",icon:"//cdn.weatherapi.com/weather/64x64/day/176.png",code:1063},wind_mph:16.6,wind_kph:26.6,wind_degree:338,wind_dir:"NNW",pressure_mb:1026,pressure_in:30.29,precip_mm:.1,precip_in:0,humidity:57,cloud:91,feelslike_c:20.4,feelslike_f:68.7,windchill_c:20.4,windchill_f:68.7,heatindex_c:20.4,heatindex_f:68.7,dewpoint_c:11.7,dewpoint_f:53.1,will_it_rain:1,chance_of_rain:80,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:19,gust_kph:30.6,uv:5},{time_epoch:1657198800,time:"2022-07-07 15:00",temp_c:20.3,temp_f:68.5,is_day:1,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/day/116.png",code:1003},wind_mph:16.8,wind_kph:27,wind_degree:340,wind_dir:"NNW",pressure_mb:1026,pressure_in:30.31,precip_mm:0,precip_in:0,humidity:57,cloud:25,feelslike_c:20.3,feelslike_f:68.5,windchill_c:20.3,windchill_f:68.5,heatindex_c:20.3,heatindex_f:68.5,dewpoint_c:11.5,dewpoint_f:52.7,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:19.2,gust_kph:31,uv:6},{time_epoch:1657202400,time:"2022-07-07 16:00",temp_c:22.8,temp_f:73,is_day:1,condition:{text:"Patchy rain possible",icon:"//cdn.weatherapi.com/weather/64x64/day/176.png",code:1063},wind_mph:16.3,wind_kph:26.3,wind_degree:341,wind_dir:"NNW",pressure_mb:1027,pressure_in:30.32,precip_mm:.1,precip_in:0,humidity:50,cloud:78,feelslike_c:24.7,feelslike_f:76.5,windchill_c:22.8,windchill_f:73,heatindex_c:24.7,heatindex_f:76.5,dewpoint_c:11.9,dewpoint_f:53.4,will_it_rain:1,chance_of_rain:87,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:18.8,gust_kph:30.2,uv:5},{time_epoch:1657206e3,time:"2022-07-07 17:00",temp_c:22.3,temp_f:72.1,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:15.9,wind_kph:25.6,wind_degree:340,wind_dir:"NNW",pressure_mb:1027,pressure_in:30.34,precip_mm:0,precip_in:0,humidity:50,cloud:2,feelslike_c:24.5,feelslike_f:76.1,windchill_c:22.3,windchill_f:72.1,heatindex_c:24.5,heatindex_f:76.1,dewpoint_c:11.5,dewpoint_f:52.7,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:18.3,gust_kph:29.5,uv:6},{time_epoch:1657209600,time:"2022-07-07 18:00",temp_c:20.2,temp_f:68.4,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:14.8,wind_kph:23.8,wind_degree:341,wind_dir:"NNW",pressure_mb:1028,pressure_in:30.35,precip_mm:0,precip_in:0,humidity:53,cloud:11,feelslike_c:20.2,feelslike_f:68.4,windchill_c:20.2,windchill_f:68.4,heatindex_c:20.2,heatindex_f:68.4,dewpoint_c:10.4,dewpoint_f:50.7,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:17,gust_kph:27.4,uv:6},{time_epoch:1657213200,time:"2022-07-07 19:00",temp_c:19.2,temp_f:66.6,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:13.4,wind_kph:21.6,wind_degree:339,wind_dir:"NNW",pressure_mb:1028,pressure_in:30.36,precip_mm:0,precip_in:0,humidity:59,cloud:19,feelslike_c:19.2,feelslike_f:66.6,windchill_c:19.2,windchill_f:66.6,heatindex_c:19.2,heatindex_f:66.6,dewpoint_c:10.9,dewpoint_f:51.6,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:15.4,gust_kph:24.8,uv:5},{time_epoch:1657216800,time:"2022-07-07 20:00",temp_c:16.3,temp_f:61.3,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:12.3,wind_kph:19.8,wind_degree:340,wind_dir:"NNW",pressure_mb:1029,pressure_in:30.38,precip_mm:0,precip_in:0,humidity:65,cloud:8,feelslike_c:16.3,feelslike_f:61.3,windchill_c:16.3,windchill_f:61.3,heatindex_c:16.3,heatindex_f:61.3,dewpoint_c:9.8,dewpoint_f:49.6,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:17.2,gust_kph:27.7,uv:5},{time_epoch:1657220400,time:"2022-07-07 21:00",temp_c:14.3,temp_f:57.7,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:10.1,wind_kph:16.2,wind_degree:345,wind_dir:"NNW",pressure_mb:1030,pressure_in:30.4,precip_mm:0,precip_in:0,humidity:73,cloud:7,feelslike_c:13.1,feelslike_f:55.6,windchill_c:13.1,windchill_f:55.6,heatindex_c:14.3,heatindex_f:57.7,dewpoint_c:9.6,dewpoint_f:49.3,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:16.8,gust_kph:27,uv:4},{time_epoch:1657224e3,time:"2022-07-07 22:00",temp_c:13.1,temp_f:55.6,is_day:0,condition:{text:"Clear",icon:"//cdn.weatherapi.com/weather/64x64/night/113.png",code:1e3},wind_mph:8.1,wind_kph:13,wind_degree:350,wind_dir:"N",pressure_mb:1030,pressure_in:30.42,precip_mm:0,precip_in:0,humidity:80,cloud:6,feelslike_c:12,feelslike_f:53.6,windchill_c:12,windchill_f:53.6,heatindex_c:13.1,heatindex_f:55.6,dewpoint_c:9.7,dewpoint_f:49.5,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:14.5,gust_kph:23.4,uv:1},{time_epoch:1657227600,time:"2022-07-07 23:00",temp_c:12.3,temp_f:54.1,is_day:0,condition:{text:"Clear",icon:"//cdn.weatherapi.com/weather/64x64/night/113.png",code:1e3},wind_mph:6.7,wind_kph:10.8,wind_degree:351,wind_dir:"N",pressure_mb:1031,pressure_in:30.43,precip_mm:0,precip_in:0,humidity:84,cloud:4,feelslike_c:11.3,feelslike_f:52.3,windchill_c:11.3,windchill_f:52.3,heatindex_c:12.3,heatindex_f:54.1,dewpoint_c:9.7,dewpoint_f:49.5,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:12.8,gust_kph:20.5,uv:1}]},{date:"2022-07-08",date_epoch:1657238400,day:{maxtemp_c:28,maxtemp_f:82.4,mintemp_c:10.1,mintemp_f:50.2,avgtemp_c:18.1,avgtemp_f:64.5,maxwind_mph:10.1,maxwind_kph:16.2,totalprecip_mm:0,totalprecip_in:0,avgvis_km:10,avgvis_miles:6,avghumidity:64,daily_will_it_rain:0,daily_chance_of_rain:0,daily_will_it_snow:0,daily_chance_of_snow:0,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},uv:5},astro:{sunrise:"05:39 AM",sunset:"09:56 PM",moonrise:"03:49 PM",moonset:"01:39 AM",moon_phase:"First Quarter",moon_illumination:"63"},hour:[{time_epoch:1657231200,time:"2022-07-08 00:00",temp_c:11.6,temp_f:52.9,is_day:0,condition:{text:"Clear",icon:"//cdn.weatherapi.com/weather/64x64/night/113.png",code:1e3},wind_mph:5.8,wind_kph:9.4,wind_degree:349,wind_dir:"N",pressure_mb:1031,pressure_in:30.44,precip_mm:0,precip_in:0,humidity:86,cloud:4,feelslike_c:10.7,feelslike_f:51.3,windchill_c:10.7,windchill_f:51.3,heatindex_c:11.6,heatindex_f:52.9,dewpoint_c:9.3,dewpoint_f:48.7,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:11.6,gust_kph:18.7,uv:1},{time_epoch:1657234800,time:"2022-07-08 01:00",temp_c:11.2,temp_f:52.2,is_day:0,condition:{text:"Clear",icon:"//cdn.weatherapi.com/weather/64x64/night/113.png",code:1e3},wind_mph:5.8,wind_kph:9.4,wind_degree:345,wind_dir:"NNW",pressure_mb:1031,pressure_in:30.45,precip_mm:0,precip_in:0,humidity:87,cloud:5,feelslike_c:10.2,feelslike_f:50.4,windchill_c:10.2,windchill_f:50.4,heatindex_c:11.2,heatindex_f:52.2,dewpoint_c:9.1,dewpoint_f:48.4,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:11.9,gust_kph:19.1,uv:1},{time_epoch:1657238400,time:"2022-07-08 02:00",temp_c:10.9,temp_f:51.6,is_day:0,condition:{text:"Clear",icon:"//cdn.weatherapi.com/weather/64x64/night/113.png",code:1e3},wind_mph:5.4,wind_kph:8.6,wind_degree:347,wind_dir:"NNW",pressure_mb:1031,pressure_in:30.45,precip_mm:0,precip_in:0,humidity:88,cloud:5,feelslike_c:9.9,feelslike_f:49.8,windchill_c:9.9,windchill_f:49.8,heatindex_c:10.9,heatindex_f:51.6,dewpoint_c:9,dewpoint_f:48.2,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:11,gust_kph:17.6,uv:1},{time_epoch:1657242e3,time:"2022-07-08 03:00",temp_c:10.8,temp_f:51.4,is_day:0,condition:{text:"Clear",icon:"//cdn.weatherapi.com/weather/64x64/night/113.png",code:1e3},wind_mph:4.5,wind_kph:7.2,wind_degree:356,wind_dir:"N",pressure_mb:1031,pressure_in:30.45,precip_mm:0,precip_in:0,humidity:89,cloud:5,feelslike_c:10.1,feelslike_f:50.2,windchill_c:10.1,windchill_f:50.2,heatindex_c:10.8,heatindex_f:51.4,dewpoint_c:9,dewpoint_f:48.2,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:8.9,gust_kph:14.4,uv:1},{time_epoch:1657245600,time:"2022-07-08 04:00",temp_c:10.4,temp_f:50.7,is_day:0,condition:{text:"Clear",icon:"//cdn.weatherapi.com/weather/64x64/night/113.png",code:1e3},wind_mph:3.4,wind_kph:5.4,wind_degree:7,wind_dir:"N",pressure_mb:1031,pressure_in:30.45,precip_mm:0,precip_in:0,humidity:89,cloud:6,feelslike_c:10.1,feelslike_f:50.2,windchill_c:10.1,windchill_f:50.2,heatindex_c:10.4,heatindex_f:50.7,dewpoint_c:8.7,dewpoint_f:47.7,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:6.9,gust_kph:11.2,uv:1},{time_epoch:1657249200,time:"2022-07-08 05:00",temp_c:10.1,temp_f:50.2,is_day:0,condition:{text:"Clear",icon:"//cdn.weatherapi.com/weather/64x64/night/113.png",code:1e3},wind_mph:2.2,wind_kph:3.6,wind_degree:5,wind_dir:"N",pressure_mb:1031,pressure_in:30.45,precip_mm:0,precip_in:0,humidity:89,cloud:4,feelslike_c:10.4,feelslike_f:50.7,windchill_c:10.4,windchill_f:50.7,heatindex_c:10.1,heatindex_f:50.2,dewpoint_c:8.4,dewpoint_f:47.1,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:4.7,gust_kph:7.6,uv:1},{time_epoch:1657252800,time:"2022-07-08 06:00",temp_c:11.7,temp_f:53.1,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:2,wind_kph:3.2,wind_degree:352,wind_dir:"N",pressure_mb:1032,pressure_in:30.46,precip_mm:0,precip_in:0,humidity:85,cloud:6,feelslike_c:12.3,feelslike_f:54.1,windchill_c:12.3,windchill_f:54.1,heatindex_c:11.7,heatindex_f:53.1,dewpoint_c:9.3,dewpoint_f:48.7,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:3.4,gust_kph:5.4,uv:4},{time_epoch:1657256400,time:"2022-07-08 07:00",temp_c:13.6,temp_f:56.5,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:3.6,wind_kph:5.8,wind_degree:1,wind_dir:"N",pressure_mb:1032,pressure_in:30.46,precip_mm:0,precip_in:0,humidity:78,cloud:4,feelslike_c:13.7,feelslike_f:56.7,windchill_c:13.7,windchill_f:56.7,heatindex_c:13.6,heatindex_f:56.5,dewpoint_c:9.8,dewpoint_f:49.6,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:4.7,gust_kph:7.6,uv:4},{time_epoch:165726e4,time:"2022-07-08 08:00",temp_c:15.5,temp_f:59.9,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:4.7,wind_kph:7.6,wind_degree:12,wind_dir:"NNE",pressure_mb:1032,pressure_in:30.47,precip_mm:0,precip_in:0,humidity:70,cloud:5,feelslike_c:15.5,feelslike_f:59.9,windchill_c:15.5,windchill_f:59.9,heatindex_c:15.5,heatindex_f:59.9,dewpoint_c:10.1,dewpoint_f:50.2,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:5.8,gust_kph:9.4,uv:5},{time_epoch:1657263600,time:"2022-07-08 09:00",temp_c:17.3,temp_f:63.1,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:4.9,wind_kph:7.9,wind_degree:10,wind_dir:"N",pressure_mb:1032,pressure_in:30.47,precip_mm:0,precip_in:0,humidity:61,cloud:12,feelslike_c:17.3,feelslike_f:63.1,windchill_c:17.3,windchill_f:63.1,heatindex_c:17.3,heatindex_f:63.1,dewpoint_c:9.8,dewpoint_f:49.6,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:5.6,gust_kph:9,uv:5},{time_epoch:1657267200,time:"2022-07-08 10:00",temp_c:19,temp_f:66.2,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:5.4,wind_kph:8.6,wind_degree:14,wind_dir:"NNE",pressure_mb:1032,pressure_in:30.47,precip_mm:0,precip_in:0,humidity:55,cloud:7,feelslike_c:19,feelslike_f:66.2,windchill_c:19,windchill_f:66.2,heatindex_c:19,heatindex_f:66.2,dewpoint_c:9.6,dewpoint_f:49.3,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:6.3,gust_kph:10.1,uv:5},{time_epoch:1657270800,time:"2022-07-08 11:00",temp_c:21.3,temp_f:70.3,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:5.1,wind_kph:8.3,wind_degree:9,wind_dir:"N",pressure_mb:1031,pressure_in:30.45,precip_mm:0,precip_in:0,humidity:50,cloud:6,feelslike_c:21.3,feelslike_f:70.3,windchill_c:21.3,windchill_f:70.3,heatindex_c:24.3,heatindex_f:75.7,dewpoint_c:10.4,dewpoint_f:50.7,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:5.8,gust_kph:9.4,uv:6},{time_epoch:1657274400,time:"2022-07-08 12:00",temp_c:22.9,temp_f:73.2,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:5.4,wind_kph:8.6,wind_degree:1,wind_dir:"N",pressure_mb:1031,pressure_in:30.44,precip_mm:0,precip_in:0,humidity:47,cloud:6,feelslike_c:24.6,feelslike_f:76.3,windchill_c:22.9,windchill_f:73.2,heatindex_c:24.6,heatindex_f:76.3,dewpoint_c:11,dewpoint_f:51.8,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:6.3,gust_kph:10.1,uv:6},{time_epoch:1657278e3,time:"2022-07-08 13:00",temp_c:24.1,temp_f:75.4,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:6,wind_kph:9.7,wind_degree:353,wind_dir:"N",pressure_mb:1031,pressure_in:30.43,precip_mm:0,precip_in:0,humidity:45,cloud:6,feelslike_c:25.1,feelslike_f:77.2,windchill_c:24.1,windchill_f:75.4,heatindex_c:25.1,heatindex_f:77.2,dewpoint_c:11.5,dewpoint_f:52.7,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:6.9,gust_kph:11.2,uv:6},{time_epoch:1657281600,time:"2022-07-08 14:00",temp_c:25.1,temp_f:77.2,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:6.5,wind_kph:10.4,wind_degree:349,wind_dir:"N",pressure_mb:1030,pressure_in:30.42,precip_mm:0,precip_in:0,humidity:43,cloud:6,feelslike_c:25.6,feelslike_f:78.1,windchill_c:25.1,windchill_f:77.2,heatindex_c:25.6,heatindex_f:78.1,dewpoint_c:11.6,dewpoint_f:52.9,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:7.4,gust_kph:11.9,uv:7},{time_epoch:1657285200,time:"2022-07-08 15:00",temp_c:28,temp_f:82.4,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:7.4,wind_kph:11.9,wind_degree:350,wind_dir:"N",pressure_mb:1030,pressure_in:30.41,precip_mm:0,precip_in:0,humidity:42,cloud:4,feelslike_c:28,feelslike_f:82.4,windchill_c:28,windchill_f:82.4,heatindex_c:28,heatindex_f:82.4,dewpoint_c:13.7,dewpoint_f:56.7,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:8.5,gust_kph:13.7,uv:7},{time_epoch:1657288800,time:"2022-07-08 16:00",temp_c:25.6,temp_f:78.1,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:8.9,wind_kph:14.4,wind_degree:356,wind_dir:"N",pressure_mb:1029,pressure_in:30.4,precip_mm:0,precip_in:0,humidity:41,cloud:5,feelslike_c:25.8,feelslike_f:78.4,windchill_c:25.6,windchill_f:78.1,heatindex_c:25.8,heatindex_f:78.4,dewpoint_c:11.5,dewpoint_f:52.7,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:10.3,gust_kph:16.6,uv:7},{time_epoch:1657292400,time:"2022-07-08 17:00",temp_c:24.7,temp_f:76.5,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:10.1,wind_kph:16.2,wind_degree:359,wind_dir:"N",pressure_mb:1029,pressure_in:30.39,precip_mm:0,precip_in:0,humidity:43,cloud:3,feelslike_c:25.3,feelslike_f:77.5,windchill_c:24.7,windchill_f:76.5,heatindex_c:25.3,heatindex_f:77.5,dewpoint_c:11.2,dewpoint_f:52.2,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:11.9,gust_kph:19.1,uv:6},{time_epoch:1657296e3,time:"2022-07-08 18:00",temp_c:24,temp_f:75.2,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:9.8,wind_kph:15.8,wind_degree:0,wind_dir:"N",pressure_mb:1029,pressure_in:30.39,precip_mm:0,precip_in:0,humidity:46,cloud:1,feelslike_c:25,feelslike_f:77,windchill_c:24,windchill_f:75.2,heatindex_c:25,heatindex_f:77,dewpoint_c:11.5,dewpoint_f:52.7,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:12.1,gust_kph:19.4,uv:6},{time_epoch:1657299600,time:"2022-07-08 19:00",temp_c:24.1,temp_f:75.4,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:8.3,wind_kph:13.3,wind_degree:2,wind_dir:"N",pressure_mb:1029,pressure_in:30.39,precip_mm:0,precip_in:0,humidity:51,cloud:0,feelslike_c:25.3,feelslike_f:77.5,windchill_c:24.1,windchill_f:75.4,heatindex_c:25.3,heatindex_f:77.5,dewpoint_c:13.4,dewpoint_f:56.1,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:9.6,gust_kph:15.5,uv:6},{time_epoch:1657303200,time:"2022-07-08 20:00",temp_c:20.7,temp_f:69.3,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:7.2,wind_kph:11.5,wind_degree:2,wind_dir:"N",pressure_mb:1029,pressure_in:30.39,precip_mm:0,precip_in:0,humidity:59,cloud:0,feelslike_c:20.7,feelslike_f:69.3,windchill_c:20.7,windchill_f:69.3,heatindex_c:20.7,heatindex_f:69.3,dewpoint_c:12.4,dewpoint_f:54.3,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:11.6,gust_kph:18.7,uv:6},{time_epoch:1657306800,time:"2022-07-08 21:00",temp_c:18.3,temp_f:64.9,is_day:1,condition:{text:"Sunny",icon:"//cdn.weatherapi.com/weather/64x64/day/113.png",code:1e3},wind_mph:6.9,wind_kph:11.2,wind_degree:3,wind_dir:"N",pressure_mb:1029,pressure_in:30.4,precip_mm:0,precip_in:0,humidity:64,cloud:5,feelslike_c:18.3,feelslike_f:64.9,windchill_c:18.3,windchill_f:64.9,heatindex_c:18.3,heatindex_f:64.9,dewpoint_c:11.4,dewpoint_f:52.5,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:13.4,gust_kph:21.6,uv:5},{time_epoch:1657310400,time:"2022-07-08 22:00",temp_c:16.9,temp_f:62.4,is_day:0,condition:{text:"Clear",icon:"//cdn.weatherapi.com/weather/64x64/night/113.png",code:1e3},wind_mph:5.8,wind_kph:9.4,wind_degree:0,wind_dir:"N",pressure_mb:1029,pressure_in:30.39,precip_mm:0,precip_in:0,humidity:68,cloud:15,feelslike_c:16.9,feelslike_f:62.4,windchill_c:16.9,windchill_f:62.4,heatindex_c:16.9,heatindex_f:62.4,dewpoint_c:11,dewpoint_f:51.8,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:11.9,gust_kph:19.1,uv:1},{time_epoch:1657314e3,time:"2022-07-08 23:00",temp_c:16,temp_f:60.8,is_day:0,condition:{text:"Partly cloudy",icon:"//cdn.weatherapi.com/weather/64x64/night/116.png",code:1003},wind_mph:4.7,wind_kph:7.6,wind_degree:356,wind_dir:"N",pressure_mb:1029,pressure_in:30.39,precip_mm:0,precip_in:0,humidity:72,cloud:32,feelslike_c:16,feelslike_f:60.8,windchill_c:16,windchill_f:60.8,heatindex_c:16,heatindex_f:60.8,dewpoint_c:10.9,dewpoint_f:51.6,will_it_rain:0,chance_of_rain:0,will_it_snow:0,chance_of_snow:0,vis_km:10,vis_miles:6,gust_mph:9.8,gust_kph:15.8,uv:1}]}]}};class W2{static getCurrentWeather(){return Xc.current}static getForecast(e=0){return e>=Xc.forecast.forecastday.length?Xc.forecast.forecastday[Xc.forecast.forecastday.length-1]:Xc.forecast.forecastday[e]}}function py(t){let e,n=t[0].day.mintemp_c+"",r,i,o=t[0].day.maxtemp_c+"",s,a,c,u;return{c(){e=$t("div"),r=qt(n),i=qt("-"),s=qt(o),a=qt(`\xB0C

		`),c=$t("div"),u=qt("\u{1F324}"),this.h()},l(l){e=Bt(l,"DIV",{class:!0});var d=Nn(e);r=Vt(d,n),i=Vt(d,"-"),s=Vt(d,o),a=Vt(d,`\xB0C

		`),c=Bt(d,"DIV",{class:!0});var p=Nn(c);u=Vt(p,"\u{1F324}"),p.forEach(Ye),d.forEach(Ye),this.h()},h(){Tt(c,"class","weatherIcon svelte-17cyayo"),Tt(e,"class","weather svelte-17cyayo")},m(l,d){Nt(l,e,d),We(e,r),We(e,i),We(e,s),We(e,a),We(e,c),We(c,u)},p(l,d){d&1&&n!==(n=l[0].day.mintemp_c+"")&&so(r,n),d&1&&o!==(o=l[0].day.maxtemp_c+"")&&so(s,o)},d(l){l&&Ye(e)}}}function q2(t){let e,n=t[0]&&py(t);return{c(){n&&n.c(),e=Io()},l(r){n&&n.l(r),e=Io()},m(r,i){n&&n.m(r,i),Nt(r,e,i)},p(r,[i]){r[0]?n?n.p(r,i):(n=py(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ld,o:ld,d(r){n&&n.d(r),r&&Ye(e)}}}function V2(t,e,n){let{day:r}=e,i;return B_(()=>{const s=ks.Now.plainDateISO().until(r).days;n(0,i=W2.getForecast(s))}),t.$$set=o=>{"day"in o&&n(1,r=o.day)},[i,r]}class G2 extends Ps{constructor(e){super(),Ns(this,e,V2,q2,Os,{day:1})}}function gy(t,e,n){const r=t.slice();return r[13]=e[n],r}function my(t,e,n){const r=t.slice();return r[16]=e[n],r}function z2(t){let e;return{c(){e=qt("Go to last week")},l(n){e=Vt(n,"Go to last week")},m(n,r){Nt(n,e,r)},d(n){n&&Ye(e)}}}function Y2(t){let e;return{c(){e=qt("Go to next week")},l(n){e=Vt(n,"Go to next week")},m(n,r){Nt(n,e,r)},d(n){n&&Ye(e)}}}function yy(t){let e,n;return e=new G2({props:{day:t[13]}}),{c(){ii(e.$$.fragment)},l(r){oi(e.$$.fragment,r)},m(r,i){si(e,r,i),n=!0},p(r,i){const o={};i&2&&(o.day=r[13]),e.$set(o)},i(r){n||(_t(e.$$.fragment,r),n=!0)},o(r){Dt(e.$$.fragment,r),n=!1},d(r){ai(e,r)}}}function J2(t){let e,n;return e=new is({props:{filled:!0,$$slots:{default:[Q2]},$$scope:{ctx:t}}}),e.$on("click",Sa.new),{c(){ii(e.$$.fragment)},l(r){oi(e.$$.fragment,r)},m(r,i){si(e,r,i),n=!0},p(r,i){const o={};i&524288&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(_t(e.$$.fragment,r),n=!0)},o(r){Dt(e.$$.fragment,r),n=!1},d(r){ai(e,r)}}}function Z2(t){let e,n,r=t[2][t[13].toString()],i=[];for(let s=0;s<r.length;s+=1)i[s]=_y(my(t,r,s));const o=s=>Dt(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Io()},l(s){for(let a=0;a<i.length;a+=1)i[a].l(s);e=Io()},m(s,a){for(let c=0;c<i.length;c+=1)i[c].m(s,a);Nt(s,e,a),n=!0},p(s,a){if(a&6){r=s[2][s[13].toString()];let c;for(c=0;c<r.length;c+=1){const u=my(s,r,c);i[c]?(i[c].p(u,a),_t(i[c],1)):(i[c]=_y(u),i[c].c(),_t(i[c],1),i[c].m(e.parentNode,e))}for(_a(),c=r.length;c<i.length;c+=1)o(c);wa()}},i(s){if(!n){for(let a=0;a<r.length;a+=1)_t(i[a]);n=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)Dt(i[a]);n=!1},d(s){H_(i,s),s&&Ye(e)}}}function Q2(t){let e;return{c(){e=qt("Create event")},l(n){e=Vt(n,"Create event")},m(n,r){Nt(n,e,r)},d(n){n&&Ye(e)}}}function _y(t){let e,n;function r(){return t[8](t[16])}return e=new C2({props:{event:t[16]}}),e.$on("click",r),{c(){ii(e.$$.fragment)},l(i){oi(e.$$.fragment,i)},m(i,o){si(e,i,o),n=!0},p(i,o){t=i;const s={};o&6&&(s.event=t[16]),e.$set(s)},i(i){n||(_t(e.$$.fragment,i),n=!0)},o(i){Dt(e.$$.fragment,i),n=!1},d(i){ai(e,i)}}}function wy(t){let e,n,r,i=t[5][t[13].dayOfWeek-1]+"",o,s,a=uy.DateTimeFormat("gb-GB").format(t[13])+"",c,u,l,d=t[13].until(t[4]).days<=0,p,g,y,w,b,E,S=d&&yy(t);const R=[Z2,J2],F=[];function M(P,D){return D&6&&(g=null),g==null&&(g=P[13].toString()in P[2]),g?0:1}return y=M(t,-1),w=F[y]=R[y](t),{c(){e=$t("div"),n=$t("div"),r=$t("span"),o=qt(i),s=Rn(),c=qt(a),u=Rn(),l=$t("div"),S&&S.c(),p=Rn(),w.c(),b=Rn(),this.h()},l(P){e=Bt(P,"DIV",{class:!0});var D=Nn(e);n=Bt(D,"DIV",{class:!0});var Y=Nn(n);r=Bt(Y,"SPAN",{class:!0});var Q=Nn(r);o=Vt(Q,i),Q.forEach(Ye),s=kn(Y),c=Vt(Y,a),Y.forEach(Ye),u=kn(D),l=Bt(D,"DIV",{class:!0});var B=Nn(l);S&&S.l(B),p=kn(B),w.l(B),B.forEach(Ye),b=kn(D),D.forEach(Ye),this.h()},h(){Tt(r,"class","dateOfWeekString svelte-yluuef"),Tt(n,"class","date svelte-yluuef"),ud(n,"today",t[13].equals(t[4])),Tt(l,"class","events svelte-yluuef"),Tt(e,"class","day svelte-yluuef")},m(P,D){Nt(P,e,D),We(e,n),We(n,r),We(r,o),We(n,s),We(n,c),We(e,u),We(e,l),S&&S.m(l,null),We(l,p),F[y].m(l,null),We(e,b),E=!0},p(P,D){(!E||D&2)&&i!==(i=P[5][P[13].dayOfWeek-1]+"")&&so(o,i),(!E||D&2)&&a!==(a=uy.DateTimeFormat("gb-GB").format(P[13])+"")&&so(c,a),D&18&&ud(n,"today",P[13].equals(P[4])),D&2&&(d=P[13].until(P[4]).days<=0),d?S?(S.p(P,D),D&2&&_t(S,1)):(S=yy(P),S.c(),_t(S,1),S.m(l,p)):S&&(_a(),Dt(S,1,1,()=>{S=null}),wa());let Y=y;y=M(P,D),y===Y?F[y].p(P,D):(_a(),Dt(F[Y],1,1,()=>{F[Y]=null}),wa(),w=F[y],w?w.p(P,D):(w=F[y]=R[y](P),w.c()),_t(w,1),w.m(l,null))},i(P){E||(_t(S),_t(w),E=!0)},o(P){Dt(S),Dt(w),E=!1},d(P){P&&Ye(e),S&&S.d(),F[y].d()}}}function X2(t){let e,n,r,i;e=new is({props:{filled:!0,$$slots:{default:[tT]},$$scope:{ctx:t}}}),e.$on("click",Sa.reset);function o(){return t[11](t[12])}return r=new is({props:{filled:!0,$$slots:{default:[nT]},$$scope:{ctx:t}}}),r.$on("click",o),{c(){ii(e.$$.fragment),n=Rn(),ii(r.$$.fragment)},l(s){oi(e.$$.fragment,s),n=kn(s),oi(r.$$.fragment,s)},m(s,a){si(e,s,a),Nt(s,n,a),si(r,s,a),i=!0},p(s,a){t=s;const c={};a&524288&&(c.$$scope={dirty:a,ctx:t}),e.$set(c);const u={};a&524288&&(u.$$scope={dirty:a,ctx:t}),r.$set(u)},i(s){i||(_t(e.$$.fragment,s),_t(r.$$.fragment,s),i=!0)},o(s){Dt(e.$$.fragment,s),Dt(r.$$.fragment,s),i=!1},d(s){ai(e,s),s&&Ye(n),ai(r,s)}}}function eT(t){let e,n,r,i;function o(){return t[9](t[12])}e=new is({props:{filled:!0,$$slots:{default:[rT]},$$scope:{ctx:t}}}),e.$on("click",o);function s(){return t[10](t[12])}return r=new is({props:{filled:!0,$$slots:{default:[iT]},$$scope:{ctx:t}}}),r.$on("click",s),{c(){ii(e.$$.fragment),n=Rn(),ii(r.$$.fragment)},l(a){oi(e.$$.fragment,a),n=kn(a),oi(r.$$.fragment,a)},m(a,c){si(e,a,c),Nt(a,n,c),si(r,a,c),i=!0},p(a,c){t=a;const u={};c&524288&&(u.$$scope={dirty:c,ctx:t}),e.$set(u);const l={};c&524288&&(l.$$scope={dirty:c,ctx:t}),r.$set(l)},i(a){i||(_t(e.$$.fragment,a),_t(r.$$.fragment,a),i=!0)},o(a){Dt(e.$$.fragment,a),Dt(r.$$.fragment,a),i=!1},d(a){ai(e,a),a&&Ye(n),ai(r,a)}}}function tT(t){let e;return{c(){e=qt("Cancel")},l(n){e=Vt(n,"Cancel")},m(n,r){Nt(n,e,r)},d(n){n&&Ye(e)}}}function nT(t){let e;return{c(){e=qt("Create Event")},l(n){e=Vt(n,"Create Event")},m(n,r){Nt(n,e,r)},d(n){n&&Ye(e)}}}function rT(t){let e;return{c(){e=qt("Delete Event")},l(n){e=Vt(n,"Delete Event")},m(n,r){Nt(n,e,r)},d(n){n&&Ye(e)}}}function iT(t){let e;return{c(){e=qt("Update Event")},l(n){e=Vt(n,"Update Event")},m(n,r){Nt(n,e,r)},d(n){n&&Ye(e)}}}function oT(t){let e,n,r,i;const o=[eT,X2],s=[];function a(c,u){return c[3].editMode?0:1}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),r=Io()},l(c){n.l(c),r=Io()},m(c,u){s[e].m(c,u),Nt(c,r,u),i=!0},p(c,u){let l=e;e=a(c),e===l?s[e].p(c,u):(_a(),Dt(s[l],1,1,()=>{s[l]=null}),wa(),n=s[e],n?n.p(c,u):(n=s[e]=o[e](c),n.c()),_t(n,1),n.m(r.parentNode,r))},i(c){i||(_t(n),i=!0)},o(c){Dt(n),i=!1},d(c){s[e].d(c),c&&Ye(r)}}}function sT(t){let e,n;return e=new $2({props:{$$slots:{default:[oT,({submit:r})=>({12:r}),({submit:r})=>r?4096:0]},$$scope:{ctx:t}}}),{c(){ii(e.$$.fragment)},l(r){oi(e.$$.fragment,r)},m(r,i){si(e,r,i),n=!0},p(r,i){const o={};i&528392&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(_t(e.$$.fragment,r),n=!0)},o(r){Dt(e.$$.fragment,r),n=!1},d(r){ai(e,r)}}}function aT(t){let e,n,r,i,o,s,a,c;e=new is({props:{filled:!0,$$slots:{default:[z2]},$$scope:{ctx:t}}}),e.$on("click",t[6]),r=new is({props:{filled:!0,$$slots:{default:[Y2]},$$scope:{ctx:t}}}),r.$on("click",t[7]);let u=t[1],l=[];for(let p=0;p<u.length;p+=1)l[p]=wy(gy(t,u,p));const d=p=>Dt(l[p],1,1,()=>{l[p]=null});return a=new K2({props:{visible:t[3].visible,$$slots:{default:[sT]},$$scope:{ctx:t}}}),a.$on("close",Sa.reset),{c(){ii(e.$$.fragment),n=Rn(),ii(r.$$.fragment),i=Rn(),o=$t("div");for(let p=0;p<l.length;p+=1)l[p].c();s=Rn(),ii(a.$$.fragment),this.h()},l(p){oi(e.$$.fragment,p),n=kn(p),oi(r.$$.fragment,p),i=kn(p),o=Bt(p,"DIV",{class:!0});var g=Nn(o);for(let y=0;y<l.length;y+=1)l[y].l(g);g.forEach(Ye),s=kn(p),oi(a.$$.fragment,p),this.h()},h(){Tt(o,"class","calendar svelte-yluuef")},m(p,g){si(e,p,g),Nt(p,n,g),si(r,p,g),Nt(p,i,g),Nt(p,o,g);for(let y=0;y<l.length;y+=1)l[y].m(o,null);Nt(p,s,g),si(a,p,g),c=!0},p(p,[g]){const y={};g&524288&&(y.$$scope={dirty:g,ctx:p}),e.$set(y);const w={};if(g&524288&&(w.$$scope={dirty:g,ctx:p}),r.$set(w),g&54){u=p[1];let E;for(E=0;E<u.length;E+=1){const S=gy(p,u,E);l[E]?(l[E].p(S,g),_t(l[E],1)):(l[E]=wy(S),l[E].c(),_t(l[E],1),l[E].m(o,null))}for(_a(),E=u.length;E<l.length;E+=1)d(E);wa()}const b={};g&8&&(b.visible=p[3].visible),g&524296&&(b.$$scope={dirty:g,ctx:p}),a.$set(b)},i(p){if(!c){_t(e.$$.fragment,p),_t(r.$$.fragment,p);for(let g=0;g<u.length;g+=1)_t(l[g]);_t(a.$$.fragment,p),c=!0}},o(p){Dt(e.$$.fragment,p),Dt(r.$$.fragment,p),l=l.filter(Boolean);for(let g=0;g<l.length;g+=1)Dt(l[g]);Dt(a.$$.fragment,p),c=!1},d(p){ai(e,p),p&&Ye(n),ai(r,p),p&&Ye(i),p&&Ye(o),H_(l,p),p&&Ye(s),ai(a,p)}}}function cT(t,e,n){let r,i;gp(t,aa,w=>n(2,r=w)),gp(t,Sa,w=>n(3,i=w));const o=ks.Now.plainDateISO();let s=o.subtract({days:o.dayOfWeek-1});console.log(s);const a=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];let c=[];const u=()=>n(0,s=s.subtract({weeks:1})),l=()=>n(0,s=s.add({weeks:1})),d=w=>Sa.edit(w),p=w=>w(aa.deleteEvent),g=w=>w(aa.updateEvent),y=w=>w(aa.addEvent);return t.$$.update=()=>{t.$$.dirty&1&&s&&n(1,c=a.map((w,b)=>s.add({days:b})))},[s,c,r,i,o,a,u,l,d,p,g,y]}class uT extends Ps{constructor(e){super(),Ns(this,e,cT,aT,Os,{})}}function lT(t){let e,n,r=t[0][0]+"",i,o,s=t[1][t[1].length-1][0]+"",a,c,u;return{c(){e=$t("div"),n=$t("span"),i=qt(r),o=Rn(),a=qt(s),this.h()},l(l){e=Bt(l,"DIV",{class:!0});var d=Nn(e);n=Bt(d,"SPAN",{class:!0});var p=Nn(n);i=Vt(p,r),o=kn(p),a=Vt(p,s),p.forEach(Ye),d.forEach(Ye),this.h()},h(){Tt(n,"class","svelte-hsc87u"),Tt(e,"class","profile svelte-hsc87u")},m(l,d){Nt(l,e,d),We(e,n),We(n,i),We(n,o),We(n,a),c||(u=vs(e,"click",t[3]),c=!0)},p(l,[d]){d&1&&r!==(r=l[0][0]+"")&&so(i,r),d&2&&s!==(s=l[1][l[1].length-1][0]+"")&&so(a,s)},i:ld,o:ld,d(l){l&&Ye(e),c=!1,u()}}}function dT(t,e,n){let r,{firstname:i}=e,{lastname:o}=e;function s(a){$d.call(this,t,a)}return t.$$set=a=>{"firstname"in a&&n(0,i=a.firstname),"lastname"in a&&n(2,o=a.lastname)},t.$$.update=()=>{t.$$.dirty&4&&n(1,r=o.split(" "))},[i,r,o,s]}class fT extends Ps{constructor(e){super(),Ns(this,e,dT,lT,Os,{firstname:0,lastname:2})}}var Gt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function hT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function nf(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),e}var ta={},Ta={},Zu={exports:{}},oc=typeof Reflect=="object"?Reflect:null,vy=oc&&typeof oc.apply=="function"?oc.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Jl;oc&&typeof oc.ownKeys=="function"?Jl=oc.ownKeys:Object.getOwnPropertySymbols?Jl=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Jl=function(e){return Object.getOwnPropertyNames(e)};function pT(t){console&&console.warn&&console.warn(t)}var Yw=Number.isNaN||function(e){return e!==e};function Yt(){Yt.init.call(this)}Zu.exports=Yt;Zu.exports.once=_T;Yt.EventEmitter=Yt;Yt.prototype._events=void 0;Yt.prototype._eventsCount=0;Yt.prototype._maxListeners=void 0;var by=10;function rf(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Yt,"defaultMaxListeners",{enumerable:!0,get:function(){return by},set:function(t){if(typeof t!="number"||t<0||Yw(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");by=t}});Yt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Yt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Yw(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Jw(t){return t._maxListeners===void 0?Yt.defaultMaxListeners:t._maxListeners}Yt.prototype.getMaxListeners=function(){return Jw(this)};Yt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")vy(c,this,n);else for(var u=c.length,l=tv(c,u),r=0;r<u;++r)vy(l[r],this,n);return!0};function Zw(t,e,n,r){var i,o,s;if(rf(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),s===void 0)s=o[e]=n,++t._eventsCount;else if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=Jw(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,pT(a)}return t}Yt.prototype.addListener=function(e,n){return Zw(this,e,n,!1)};Yt.prototype.on=Yt.prototype.addListener;Yt.prototype.prependListener=function(e,n){return Zw(this,e,n,!0)};function gT(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Qw(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=gT.bind(r);return i.listener=n,r.wrapFn=i,i}Yt.prototype.once=function(e,n){return rf(n),this.on(e,Qw(this,e,n)),this};Yt.prototype.prependOnceListener=function(e,n){return rf(n),this.prependListener(e,Qw(this,e,n)),this};Yt.prototype.removeListener=function(e,n){var r,i,o,s,a;if(rf(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){a=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():mT(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Yt.prototype.off=Yt.prototype.removeListener;Yt.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function Xw(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?yT(i):tv(i,i.length)}Yt.prototype.listeners=function(e){return Xw(this,e,!0)};Yt.prototype.rawListeners=function(e){return Xw(this,e,!1)};Yt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ev.call(t,e)};Yt.prototype.listenerCount=ev;function ev(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Yt.prototype.eventNames=function(){return this._eventsCount>0?Jl(this._events):[]};function tv(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function mT(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function yT(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function _T(t,e){return new Promise(function(n,r){function i(s){t.removeListener(e,o),r(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}nv(t,e,o,{once:!0}),e!=="error"&&wT(t,i,{once:!0})})}function wT(t,e,n){typeof t.on=="function"&&nv(t,"error",e,n)}function nv(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Ht={},yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.DEFAULT_SCOPES=yi.REFRESH_BEFORE_EXPIRATION_SECONDS=yi.EVENTS=yi.PREFERRED_SIGNING_ALG=yi.SOLID_CLIENT_AUTHN_KEY_PREFIX=void 0;yi.SOLID_CLIENT_AUTHN_KEY_PREFIX="solidClientAuthn:";yi.PREFERRED_SIGNING_ALG=["ES256","RS256"];yi.EVENTS={ERROR:"error",LOGIN:"login",LOGOUT:"logout",NEW_REFRESH_TOKEN:"newRefreshToken",SESSION_EXPIRED:"sessionExpired",SESSION_EXTENDED:"sessionExtended",SESSION_RESTORED:"sessionRestore",TIMEOUT_SET:"timeoutSet"};yi.REFRESH_BEFORE_EXPIRATION_SECONDS=5;const vT="openid",bT="offline_access",ET="webid";yi.DEFAULT_SCOPES=[vT,bT,ET].join(" ");var n0={},of={};Object.defineProperty(of,"__esModule",{value:!0});class qo extends Error{constructor(e,n,r=!0){super(typeof e=="string"?qo.substituteParams(e,n):qo.appendErrorIri(qo.lookupErrorIri(e,n),e,r))}httpResponse(e,n=!0){return this.message=qo.appendHttpResponseDetails(this.message,e,n),this.httpErrorResponse=e,this}hasHttpResponse(){return this.httpErrorResponse!==void 0}getHttpResponse(){return this.httpErrorResponse}getHttpStatusCode(){if(this.httpErrorResponse===void 0)throw new qo("This InruptError was not provided with a HTTP response - so we can't get its HTTP Status Code.");return this.httpErrorResponse.status}getHttpStatusText(){if(this.httpErrorResponse===void 0)throw new qo("This InruptError was not provided with a HTTP response - so we can't get its HTTP Status Text!");return this.httpErrorResponse.statusText}static determineIfVocabTerm(e){return e.strict!==void 0}static lookupErrorIri(e,n){if(qo.determineIfVocabTerm(e)){const r=n===void 0?e.message:e.messageParams(...n);return r===void 0?`Looked up error message IRI [${e.value}], but found no message value.`:r}return`Error message looked up at: [${e.value}]${n===void 0?"":`, with params [${n.toString()}]`}`}static appendHttpResponseDetails(e,n,r){return r&&typeof n!="undefined"?`${e} HTTP details: status code [${n.status}], status text [${n.statusText}].`:e}static appendErrorIri(e,n,r){return r?`${e} Error IRI: [${n.value}].`:e}static substituteParams(e,n){let r=e;if(n!==void 0){const i=e.split("{{").length-1;if(i!==n.length)throw new Error(`Setting parameters on message [${e}], but it requires [${i}] params and we received [${n.length}].`);for(let o=0;o<n.length;o+=1){const s=`{{${o}}}`;r=r.replace(s,n[o])}}return r}}of.default=qo;var ST=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n0,"__esModule",{value:!0});const TT=ST(of);class AT{constructor(e){this.handleables=e}async getProperHandler(e){const n=await Promise.all(this.handleables.map(r=>r.canHandle(...e)));for(let r=0;r<n.length;r+=1)if(n[r])return this.handleables[r];return null}async canHandle(...e){return await this.getProperHandler(e)!==null}async handle(...e){const n=await this.getProperHandler(e);if(n)return n.handle(...e);throw new TT.default(`[${this.constructor.name}] cannot find a suitable handler for: ${e.map(r=>{try{return JSON.stringify(r)}catch{return r.toString()}}).join(", ")}`)}}n0.default=AT;var Ec={},Sc={exports:{}};(function(t,e){var n=typeof self!="undefined"?self:Gt,r=function(){function o(){this.fetch=!1,this.DOMException=n.DOMException}return o.prototype=n,new o}();(function(o){(function(s){var a={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function c(re){return re&&DataView.prototype.isPrototypeOf(re)}if(a.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(re){return re&&u.indexOf(Object.prototype.toString.call(re))>-1};function d(re){if(typeof re!="string"&&(re=String(re)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(re))throw new TypeError("Invalid character in header field name");return re.toLowerCase()}function p(re){return typeof re!="string"&&(re=String(re)),re}function g(re){var ne={next:function(){var ye=re.shift();return{done:ye===void 0,value:ye}}};return a.iterable&&(ne[Symbol.iterator]=function(){return ne}),ne}function y(re){this.map={},re instanceof y?re.forEach(function(ne,ye){this.append(ye,ne)},this):Array.isArray(re)?re.forEach(function(ne){this.append(ne[0],ne[1])},this):re&&Object.getOwnPropertyNames(re).forEach(function(ne){this.append(ne,re[ne])},this)}y.prototype.append=function(re,ne){re=d(re),ne=p(ne);var ye=this.map[re];this.map[re]=ye?ye+", "+ne:ne},y.prototype.delete=function(re){delete this.map[d(re)]},y.prototype.get=function(re){return re=d(re),this.has(re)?this.map[re]:null},y.prototype.has=function(re){return this.map.hasOwnProperty(d(re))},y.prototype.set=function(re,ne){this.map[d(re)]=p(ne)},y.prototype.forEach=function(re,ne){for(var ye in this.map)this.map.hasOwnProperty(ye)&&re.call(ne,this.map[ye],ye,this)},y.prototype.keys=function(){var re=[];return this.forEach(function(ne,ye){re.push(ye)}),g(re)},y.prototype.values=function(){var re=[];return this.forEach(function(ne){re.push(ne)}),g(re)},y.prototype.entries=function(){var re=[];return this.forEach(function(ne,ye){re.push([ye,ne])}),g(re)},a.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);function w(re){if(re.bodyUsed)return Promise.reject(new TypeError("Already read"));re.bodyUsed=!0}function b(re){return new Promise(function(ne,ye){re.onload=function(){ne(re.result)},re.onerror=function(){ye(re.error)}})}function E(re){var ne=new FileReader,ye=b(ne);return ne.readAsArrayBuffer(re),ye}function S(re){var ne=new FileReader,ye=b(ne);return ne.readAsText(re),ye}function R(re){for(var ne=new Uint8Array(re),ye=new Array(ne.length),we=0;we<ne.length;we++)ye[we]=String.fromCharCode(ne[we]);return ye.join("")}function F(re){if(re.slice)return re.slice(0);var ne=new Uint8Array(re.byteLength);return ne.set(new Uint8Array(re)),ne.buffer}function M(){return this.bodyUsed=!1,this._initBody=function(re){this._bodyInit=re,re?typeof re=="string"?this._bodyText=re:a.blob&&Blob.prototype.isPrototypeOf(re)?this._bodyBlob=re:a.formData&&FormData.prototype.isPrototypeOf(re)?this._bodyFormData=re:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(re)?this._bodyText=re.toString():a.arrayBuffer&&a.blob&&c(re)?(this._bodyArrayBuffer=F(re.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(re)||l(re))?this._bodyArrayBuffer=F(re):this._bodyText=re=Object.prototype.toString.call(re):this._bodyText="",this.headers.get("content-type")||(typeof re=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(re)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var re=w(this);if(re)return re;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?w(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(E)}),this.text=function(){var re=w(this);if(re)return re;if(this._bodyBlob)return S(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(R(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}var P=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function D(re){var ne=re.toUpperCase();return P.indexOf(ne)>-1?ne:re}function Y(re,ne){ne=ne||{};var ye=ne.body;if(re instanceof Y){if(re.bodyUsed)throw new TypeError("Already read");this.url=re.url,this.credentials=re.credentials,ne.headers||(this.headers=new y(re.headers)),this.method=re.method,this.mode=re.mode,this.signal=re.signal,!ye&&re._bodyInit!=null&&(ye=re._bodyInit,re.bodyUsed=!0)}else this.url=String(re);if(this.credentials=ne.credentials||this.credentials||"same-origin",(ne.headers||!this.headers)&&(this.headers=new y(ne.headers)),this.method=D(ne.method||this.method||"GET"),this.mode=ne.mode||this.mode||null,this.signal=ne.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ye)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ye)}Y.prototype.clone=function(){return new Y(this,{body:this._bodyInit})};function Q(re){var ne=new FormData;return re.trim().split("&").forEach(function(ye){if(ye){var we=ye.split("="),qe=we.shift().replace(/\+/g," "),ve=we.join("=").replace(/\+/g," ");ne.append(decodeURIComponent(qe),decodeURIComponent(ve))}}),ne}function B(re){var ne=new y,ye=re.replace(/\r?\n[\t ]+/g," ");return ye.split(/\r?\n/).forEach(function(we){var qe=we.split(":"),ve=qe.shift().trim();if(ve){var Oe=qe.join(":").trim();ne.append(ve,Oe)}}),ne}M.call(Y.prototype);function se(re,ne){ne||(ne={}),this.type="default",this.status=ne.status===void 0?200:ne.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in ne?ne.statusText:"OK",this.headers=new y(ne.headers),this.url=ne.url||"",this._initBody(re)}M.call(se.prototype),se.prototype.clone=function(){return new se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},se.error=function(){var re=new se(null,{status:0,statusText:""});return re.type="error",re};var Ae=[301,302,303,307,308];se.redirect=function(re,ne){if(Ae.indexOf(ne)===-1)throw new RangeError("Invalid status code");return new se(null,{status:ne,headers:{location:re}})},s.DOMException=o.DOMException;try{new s.DOMException}catch{s.DOMException=function(ne,ye){this.message=ne,this.name=ye;var we=Error(ne);this.stack=we.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function xe(re,ne){return new Promise(function(ye,we){var qe=new Y(re,ne);if(qe.signal&&qe.signal.aborted)return we(new s.DOMException("Aborted","AbortError"));var ve=new XMLHttpRequest;function Oe(){ve.abort()}ve.onload=function(){var Ge={status:ve.status,statusText:ve.statusText,headers:B(ve.getAllResponseHeaders()||"")};Ge.url="responseURL"in ve?ve.responseURL:Ge.headers.get("X-Request-URL");var Xe="response"in ve?ve.response:ve.responseText;ye(new se(Xe,Ge))},ve.onerror=function(){we(new TypeError("Network request failed"))},ve.ontimeout=function(){we(new TypeError("Network request failed"))},ve.onabort=function(){we(new s.DOMException("Aborted","AbortError"))},ve.open(qe.method,qe.url,!0),qe.credentials==="include"?ve.withCredentials=!0:qe.credentials==="omit"&&(ve.withCredentials=!1),"responseType"in ve&&a.blob&&(ve.responseType="blob"),qe.headers.forEach(function(Ge,Xe){ve.setRequestHeader(Xe,Ge)}),qe.signal&&(qe.signal.addEventListener("abort",Oe),ve.onreadystatechange=function(){ve.readyState===4&&qe.signal.removeEventListener("abort",Oe)}),ve.send(typeof qe._bodyInit=="undefined"?null:qe._bodyInit)})}return xe.polyfill=!0,o.fetch||(o.fetch=xe,o.Headers=y,o.Request=Y,o.Response=se),s.Headers=y,s.Request=Y,s.Response=se,s.fetch=xe,Object.defineProperty(s,"__esModule",{value:!0}),s})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(Sc,Sc.exports);var xT=hT(Sc.exports),IT=BE({__proto__:null,default:xT},[Sc.exports]),ot=crypto;const bi=t=>t instanceof CryptoKey,RT=async(t,e)=>{const n=`SHA-${t.slice(-3)}`;return new Uint8Array(await ot.subtle.digest(n,e))};var rv=RT;const Hn=new TextEncoder,Gi=new TextDecoder,Ad=2**32;function Mo(...t){const e=t.reduce((i,{length:o})=>i+o,0),n=new Uint8Array(e);let r=0;return t.forEach(i=>{n.set(i,r),r+=i.length}),n}function kT(t,e){return Mo(Hn.encode(t),new Uint8Array([0]),e)}function Up(t,e,n){if(e<0||e>=Ad)throw new RangeError(`value must be >= 0 and <= ${Ad-1}. Received ${e}`);t.set([e>>>24,e>>>16,e>>>8,e&255],n)}function iv(t){const e=Math.floor(t/Ad),n=t%Ad,r=new Uint8Array(8);return Up(r,e,0),Up(r,n,4),r}function r0(t){const e=new Uint8Array(4);return Up(e,t),e}function vh(t){return Mo(r0(t.length),t)}async function FT(t,e,n){const r=Math.ceil((e>>3)/32),i=new Uint8Array(r*32);for(let o=0;o<r;o++){const s=new Uint8Array(4+t.length+n.length);s.set(r0(o+1)),s.set(t,4),s.set(n,4+t.length),i.set(await rv("sha256",s),o*32)}return i.slice(0,e>>3)}const i0=t=>{let e=t;typeof e=="string"&&(e=Hn.encode(e));const n=32768,r=[];for(let i=0;i<e.length;i+=n)r.push(String.fromCharCode.apply(null,e.subarray(i,i+n)));return btoa(r.join(""))},Qn=t=>i0(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),ov=t=>{const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},dr=t=>{let e=t;e instanceof Uint8Array&&(e=Gi.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return ov(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Lr extends Error{constructor(e){var n;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(n=Error.captureStackTrace)===null||n===void 0||n.call(Error,this,this.constructor)}static get code(){return"ERR_JOSE_GENERIC"}}class Ii extends Lr{constructor(e,n="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=n,this.reason=r}static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}}class jp extends Lr{constructor(e,n="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=n,this.reason=r}static get code(){return"ERR_JWT_EXPIRED"}}class xd extends Lr{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class It extends Lr{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class Cu extends Lr{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class Ve extends Lr{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class Xt extends Lr{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class mi extends Lr{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class sv extends Lr{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class Id extends Lr{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class o0 extends Lr{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class av extends Lr{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class cv extends Lr{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class s0 extends Lr{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}var DT=Object.freeze(Object.defineProperty({__proto__:null,JOSEError:Lr,JWTClaimValidationFailed:Ii,JWTExpired:jp,JOSEAlgNotAllowed:xd,JOSENotSupported:It,JWEDecryptionFailed:Cu,JWEInvalid:Ve,JWSInvalid:Xt,JWTInvalid:mi,JWKInvalid:sv,JWKSInvalid:Id,JWKSNoMatchingKey:o0,JWKSMultipleMatchingKeys:av,JWKSTimeout:cv,JWSSignatureVerificationFailed:s0},Symbol.toStringTag,{value:"Module"})),sf=ot.getRandomValues.bind(ot);function uv(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new It(`Unsupported JWE Algorithm: ${t}`)}}var lv=t=>sf(new Uint8Array(uv(t)>>3));const CT=(t,e)=>{if(e.length<<3!==uv(t))throw new Ve("Invalid Initialization Vector length")};var dv=CT;const PT=(t,e)=>{if(t.length<<3!==e)throw new Ve("Invalid Content Encryption Key length")};var Rd=PT;const NT=(t,e)=>{if(!(t instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(e instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(t.length!==e.length)throw new TypeError("Input buffers must have the same length");const n=t.length;let r=0,i=-1;for(;++i<n;)r|=t[i]^e[i];return r===0};var OT=NT;function Ca(){return typeof WebSocketPair=="function"}function Nr(t,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${t}`)}function So(t,e){return t.name===e}function Zl(t){return parseInt(t.name.slice(4),10)}function MT(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function fv(t,e){if(e.length&&!e.some(n=>t.usages.includes(n))){let n="CryptoKey does not support this operation, its usages must include ";if(e.length>2){const r=e.pop();n+=`one of ${e.join(", ")}, or ${r}.`}else e.length===2?n+=`one of ${e[0]} or ${e[1]}.`:n+=`${e[0]}.`;throw new TypeError(n)}}function LT(t,e,...n){switch(e){case"HS256":case"HS384":case"HS512":{if(!So(t.algorithm,"HMAC"))throw Nr("HMAC");const r=parseInt(e.slice(2),10);if(Zl(t.algorithm.hash)!==r)throw Nr(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!So(t.algorithm,"RSASSA-PKCS1-v1_5"))throw Nr("RSASSA-PKCS1-v1_5");const r=parseInt(e.slice(2),10);if(Zl(t.algorithm.hash)!==r)throw Nr(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!So(t.algorithm,"RSA-PSS"))throw Nr("RSA-PSS");const r=parseInt(e.slice(2),10);if(Zl(t.algorithm.hash)!==r)throw Nr(`SHA-${r}`,"algorithm.hash");break}case(Ca()&&"EdDSA"):{if(!So(t.algorithm,"NODE-ED25519"))throw Nr("NODE-ED25519");break}case"ES256":case"ES384":case"ES512":{if(!So(t.algorithm,"ECDSA"))throw Nr("ECDSA");const r=MT(e);if(t.algorithm.namedCurve!==r)throw Nr(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}fv(t,n)}function Fs(t,e,...n){switch(e){case"A128GCM":case"A192GCM":case"A256GCM":{if(!So(t.algorithm,"AES-GCM"))throw Nr("AES-GCM");const r=parseInt(e.slice(1,4),10);if(t.algorithm.length!==r)throw Nr(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!So(t.algorithm,"AES-KW"))throw Nr("AES-KW");const r=parseInt(e.slice(1,4),10);if(t.algorithm.length!==r)throw Nr(r,"algorithm.length");break}case"ECDH":if(!So(t.algorithm,"ECDH"))throw Nr("ECDH");break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!So(t.algorithm,"PBKDF2"))throw Nr("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!So(t.algorithm,"RSA-OAEP"))throw Nr("RSA-OAEP");const r=parseInt(e.slice(9),10)||1;if(Zl(t.algorithm.hash)!==r)throw Nr(`SHA-${r}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}fv(t,n)}var Fr=(t,...e)=>{let n="Key must be ";if(e.length>2){const r=e.pop();n+=`one of type ${e.join(", ")}, or ${r}.`}else e.length===2?n+=`one of type ${e[0]} or ${e[1]}.`:n+=`of type ${e[0]}.`;return t==null?n+=` Received ${t}`:typeof t=="function"&&t.name?n+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor&&t.constructor.name&&(n+=` Received an instance of ${t.constructor.name}`),n},hv=t=>bi(t);const Pn=["CryptoKey"];async function UT(t,e,n,r,i,o){if(!(e instanceof Uint8Array))throw new TypeError(Fr(e,"Uint8Array"));const s=parseInt(t.slice(1,4),10),a=await ot.subtle.importKey("raw",e.subarray(s>>3),"AES-CBC",!1,["decrypt"]),c=await ot.subtle.importKey("raw",e.subarray(0,s>>3),{hash:`SHA-${s<<1}`,name:"HMAC"},!1,["sign"]),u=Mo(o,r,n,iv(o.length<<3)),l=new Uint8Array((await ot.subtle.sign("HMAC",c,u)).slice(0,s>>3));let d;try{d=OT(i,l)}catch{}if(!d)throw new Cu;let p;try{p=new Uint8Array(await ot.subtle.decrypt({iv:r,name:"AES-CBC"},a,n))}catch{}if(!p)throw new Cu;return p}async function jT(t,e,n,r,i,o){let s;e instanceof Uint8Array?s=await ot.subtle.importKey("raw",e,"AES-GCM",!1,["decrypt"]):(Fs(e,t,"decrypt"),s=e);try{return new Uint8Array(await ot.subtle.decrypt({additionalData:o,iv:r,name:"AES-GCM",tagLength:128},s,Mo(n,i)))}catch{throw new Cu}}const $T=async(t,e,n,r,i,o)=>{if(!bi(e)&&!(e instanceof Uint8Array))throw new TypeError(Fr(e,...Pn,"Uint8Array"));switch(dv(t,r),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return e instanceof Uint8Array&&Rd(e,parseInt(t.slice(-3),10)),UT(t,e,n,r,i,o);case"A128GCM":case"A192GCM":case"A256GCM":return e instanceof Uint8Array&&Rd(e,parseInt(t.slice(1,4),10)),jT(t,e,n,r,i,o);default:throw new It("Unsupported JWE Content Encryption Algorithm")}};var pv=$T;const BT=async()=>{throw new It('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},HT=async()=>{throw new It('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},KT=(...t)=>{const e=t.filter(Boolean);if(e.length===0||e.length===1)return!0;let n;for(const r of e){const i=Object.keys(r);if(!n||n.size===0){n=new Set(i);continue}for(const o of i){if(n.has(o))return!1;n.add(o)}}return!0};var Qu=KT;function WT(t){return typeof t=="object"&&t!==null}function kr(t){if(!WT(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}const qT=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];var af=qT;function gv(t,e){if(t.algorithm.length!==parseInt(e.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${e}`)}function mv(t,e,n){if(bi(t))return Fs(t,e,n),t;if(t instanceof Uint8Array)return ot.subtle.importKey("raw",t,"AES-KW",!0,[n]);throw new TypeError(Fr(t,...Pn,"Uint8Array"))}const $p=async(t,e,n)=>{const r=await mv(e,t,"wrapKey");gv(r,t);const i=await ot.subtle.importKey("raw",n,...af);return new Uint8Array(await ot.subtle.wrapKey("raw",i,r,"AES-KW"))},Bp=async(t,e,n)=>{const r=await mv(e,t,"unwrapKey");gv(r,t);const i=await ot.subtle.unwrapKey("raw",n,r,"AES-KW",...af);return new Uint8Array(await ot.subtle.exportKey("raw",i))};async function yv(t,e,n,r,i=new Uint8Array(0),o=new Uint8Array(0)){if(!bi(t))throw new TypeError(Fr(t,...Pn));if(Fs(t,"ECDH"),!bi(e))throw new TypeError(Fr(e,...Pn));Fs(e,"ECDH","deriveBits");const s=Mo(vh(Hn.encode(n)),vh(i),vh(o),r0(r)),a=new Uint8Array(await ot.subtle.deriveBits({name:"ECDH",public:t},e,Math.ceil(parseInt(e.algorithm.namedCurve.slice(-3),10)/8)<<3));return FT(a,r,s)}async function VT(t){if(!bi(t))throw new TypeError(Fr(t,...Pn));return ot.subtle.generateKey(t.algorithm,!0,["deriveBits"])}function _v(t){if(!bi(t))throw new TypeError(Fr(t,...Pn));return["P-256","P-384","P-521"].includes(t.algorithm.namedCurve)}function GT(t){if(!(t instanceof Uint8Array)||t.length<8)throw new Ve("PBES2 Salt Input must be 8 or more octets")}function zT(t,e){if(t instanceof Uint8Array)return ot.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits"]);if(bi(t))return Fs(t,e,"deriveBits","deriveKey"),t;throw new TypeError(Fr(t,...Pn,"Uint8Array"))}async function wv(t,e,n,r){GT(t);const i=kT(e,t),o=parseInt(e.slice(13,16),10),s={hash:`SHA-${e.slice(8,11)}`,iterations:n,name:"PBKDF2",salt:i},a={length:o,name:"AES-KW"},c=await zT(r,e);if(c.usages.includes("deriveBits"))return new Uint8Array(await ot.subtle.deriveBits(s,c,o));if(c.usages.includes("deriveKey"))return ot.subtle.deriveKey(s,c,a,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const YT=async(t,e,n,r=2048,i=sf(new Uint8Array(16)))=>{const o=await wv(i,t,r,e);return{encryptedKey:await $p(t.slice(-6),o,n),p2c:r,p2s:Qn(i)}},JT=async(t,e,n,r,i)=>{const o=await wv(i,t,r,e);return Bp(t.slice(-6),o,n)};function kd(t){switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new It(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}var cf=(t,e)=>{if(t.startsWith("RS")||t.startsWith("PS")){const{modulusLength:n}=e.algorithm;if(typeof n!="number"||n<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}};const ZT=async(t,e,n)=>{if(!bi(e))throw new TypeError(Fr(e,...Pn));if(Fs(e,t,"encrypt","wrapKey"),cf(t,e),e.usages.includes("encrypt"))return new Uint8Array(await ot.subtle.encrypt(kd(t),e,n));if(e.usages.includes("wrapKey")){const r=await ot.subtle.importKey("raw",n,...af);return new Uint8Array(await ot.subtle.wrapKey("raw",r,e,kd(t)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},QT=async(t,e,n)=>{if(!bi(e))throw new TypeError(Fr(e,...Pn));if(Fs(e,t,"decrypt","unwrapKey"),cf(t,e),e.usages.includes("decrypt"))return new Uint8Array(await ot.subtle.decrypt(kd(t),e,n));if(e.usages.includes("unwrapKey")){const r=await ot.subtle.unwrapKey("raw",n,e,kd(t),...af);return new Uint8Array(await ot.subtle.exportKey("raw",r))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function a0(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new It(`Unsupported JWE Algorithm: ${t}`)}}var ia=t=>sf(new Uint8Array(a0(t)>>3)),vv=(t,e)=>{const n=(t.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${e}-----
${n}
-----END ${e}-----`};const bv=async(t,e,n)=>{if(!bi(n))throw new TypeError(Fr(n,...Pn));if(!n.extractable)throw new TypeError("CryptoKey is not extractable");if(n.type!==t)throw new TypeError(`key is not a ${t} key`);return vv(i0(new Uint8Array(await ot.subtle.exportKey(e,n))),`${t.toUpperCase()} KEY`)},XT=t=>bv("public","spki",t),eA=t=>bv("private","pkcs8",t),cu=(t,e,n=0)=>{n===0&&(e.unshift(e.length),e.unshift(6));let r=t.indexOf(e[0],n);if(r===-1)return!1;const i=t.subarray(r,r+e.length);return i.length!==e.length?!1:i.every((o,s)=>o===e[s])||cu(t,e,r+1)},Ey=t=>{switch(!0){case cu(t,[42,134,72,206,61,3,1,7]):return"P-256";case cu(t,[43,129,4,0,34]):return"P-384";case cu(t,[43,129,4,0,35]):return"P-521";case(Ca()&&cu(t,[43,101,112])):return"Ed25519";default:throw new It("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},Ev=async(t,e,n,r,i)=>{var o;let s,a;const c=new Uint8Array(atob(n.replace(t,"")).split("").map(l=>l.charCodeAt(0))),u=e==="spki";switch(r){case"PS256":case"PS384":case"PS512":s={name:"RSA-PSS",hash:`SHA-${r.slice(-3)}`},a=u?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":s={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${r.slice(-3)}`},a=u?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s={name:"RSA-OAEP",hash:`SHA-${parseInt(r.slice(-3),10)||1}`},a=u?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":s={name:"ECDSA",namedCurve:"P-256"},a=u?["verify"]:["sign"];break;case"ES384":s={name:"ECDSA",namedCurve:"P-384"},a=u?["verify"]:["sign"];break;case"ES512":s={name:"ECDSA",namedCurve:"P-521"},a=u?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":s={name:"ECDH",namedCurve:Ey(c)},a=u?[]:["deriveBits"];break;case(Ca()&&"EdDSA"):const l=Ey(c).toUpperCase();s={name:`NODE-${l}`,namedCurve:`NODE-${l}`},a=u?["verify"]:["sign"];break;default:throw new It('Invalid or unsupported "alg" (Algorithm) value')}return ot.subtle.importKey(e,c,s,(o=i==null?void 0:i.extractable)!==null&&o!==void 0?o:!1,a)},tA=(t,e,n)=>Ev(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",t,e,n),Sv=(t,e,n)=>Ev(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",t,e,n);function nA(t){let e,n;switch(t.kty){case"oct":{switch(t.alg){case"HS256":case"HS384":case"HS512":e={name:"HMAC",hash:`SHA-${t.alg.slice(-3)}`},n=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new It(`${t.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":e={name:"AES-GCM"},n=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":e={name:"AES-KW"},n=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":e={name:"PBKDF2"},n=["deriveBits"];break;default:throw new It('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(t.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${t.alg.slice(-3)}`},n=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.alg.slice(-3)}`},n=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(t.alg.slice(-3),10)||1}`},n=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new It('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(t.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},n=t.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},n=t.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},n=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:t.crv},n=t.d?["deriveBits"]:[];break;default:throw new It('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case(Ca()&&"OKP"):if(t.alg!=="EdDSA")throw new It('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');switch(t.crv){case"Ed25519":e={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},n=t.d?["sign"]:["verify"];break;default:throw new It('Invalid or unsupported JWK "crv" (Subtype of Key Pair) Parameter value')}break;default:throw new It('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:n}}const rA=async t=>{var e,n;const{algorithm:r,keyUsages:i}=nA(t),o=[r,(e=t.ext)!==null&&e!==void 0?e:!1,(n=t.key_ops)!==null&&n!==void 0?n:i];if(r.name==="PBKDF2")return ot.subtle.importKey("raw",dr(t.k),...o);const s={...t};return delete s.alg,ot.subtle.importKey("jwk",s,...o)};var Sy=rA;function Ty(t){let e=[],n=0;for(;n<t.length;){let r=Tv(t.subarray(n));e.push(r),n+=r.byteLength}return e}function Tv(t){let e=0,n=t[0]&31;if(e++,n===31){for(n=0;t[e]>=128;)n=n*128+t[e]-128,e++;n=n*128+t[e]-128,e++}let r=0;if(t[e]<128)r=t[e],e++;else{let o=t[e]&127;e++,r=0;for(let s=0;s<o;s++)r=r*256+t[e],e++}if(r===128){for(r=0;t[e+r]!==0||t[e+r+1]!==0;)r++;const o=e+r+2;return{byteLength:o,contents:t.subarray(e,e+r),raw:t.subarray(0,o)}}const i=e+r;return{byteLength:i,contents:t.subarray(e,i),raw:t.subarray(0,i)}}function iA(t){const e=Ty(Ty(Tv(t).contents)[0].contents);return i0(e[e[0].raw[0]===160?6:5].raw)}function oA(t){const e=t.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),n=ov(e);return vv(iA(n),"PUBLIC KEY")}async function sA(t,e,n){if(typeof t!="string"||t.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return Sv(t,e,n)}async function aA(t,e,n){if(typeof t!="string"||t.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');const r=oA(t);return Sv(r,e,n)}async function cA(t,e,n){if(typeof t!="string"||t.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PCKS8 formatted string');return tA(t,e,n)}async function uf(t,e,n){if(!kr(t))throw new TypeError("JWK must be an object");if(e||(e=t.alg),typeof e!="string"||!e)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(t.kty){case"oct":if(typeof t.k!="string"||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return n!=null||(n=t.ext!==!0),n?Sy({...t,alg:e,ext:!1}):dr(t.k);case"RSA":if(t.oth!==void 0)throw new It('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Sy({...t,alg:e});default:throw new It('Unsupported "kty" (Key Type) Parameter value')}}const uA=t=>{if(!(t instanceof Uint8Array)){if(!hv(t))throw new TypeError(Fr(t,...Pn,"Uint8Array"));if(t.type!=="secret")throw new TypeError(`${Pn.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},lA=(t,e)=>{if(!hv(t))throw new TypeError(Fr(t,...Pn));if(t.type==="secret")throw new TypeError(`${Pn.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(e==="sign"&&t.type==="public")throw new TypeError(`${Pn.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(e==="decrypt"&&t.type==="public")throw new TypeError(`${Pn.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&e==="verify"&&t.type==="private")throw new TypeError(`${Pn.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&e==="encrypt"&&t.type==="private")throw new TypeError(`${Pn.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},dA=(t,e,n)=>{t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?uA(e):lA(e,n)};var lf=dA;async function fA(t,e,n,r,i){if(!(n instanceof Uint8Array))throw new TypeError(Fr(n,"Uint8Array"));const o=parseInt(t.slice(1,4),10),s=await ot.subtle.importKey("raw",n.subarray(o>>3),"AES-CBC",!1,["encrypt"]),a=await ot.subtle.importKey("raw",n.subarray(0,o>>3),{hash:`SHA-${o<<1}`,name:"HMAC"},!1,["sign"]),c=new Uint8Array(await ot.subtle.encrypt({iv:r,name:"AES-CBC"},s,e)),u=Mo(i,r,c,iv(i.length<<3)),l=new Uint8Array((await ot.subtle.sign("HMAC",a,u)).slice(0,o>>3));return{ciphertext:c,tag:l}}async function hA(t,e,n,r,i){let o;n instanceof Uint8Array?o=await ot.subtle.importKey("raw",n,"AES-GCM",!1,["encrypt"]):(Fs(n,t,"encrypt"),o=n);const s=new Uint8Array(await ot.subtle.encrypt({additionalData:i,iv:r,name:"AES-GCM",tagLength:128},o,e)),a=s.slice(-16);return{ciphertext:s.slice(0,-16),tag:a}}const pA=async(t,e,n,r,i)=>{if(!bi(n)&&!(n instanceof Uint8Array))throw new TypeError(Fr(n,...Pn,"Uint8Array"));switch(dv(t,r),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n instanceof Uint8Array&&Rd(n,parseInt(t.slice(-3),10)),fA(t,e,n,r,i);case"A128GCM":case"A192GCM":case"A256GCM":return n instanceof Uint8Array&&Rd(n,parseInt(t.slice(1,4),10)),hA(t,e,n,r,i);default:throw new It("Unsupported JWE Content Encryption Algorithm")}};var Hp=pA;async function gA(t,e,n,r){const i=t.slice(0,7);r||(r=lv(i));const{ciphertext:o,tag:s}=await Hp(i,n,e,r,new Uint8Array(0));return{encryptedKey:o,iv:Qn(r),tag:Qn(s)}}async function mA(t,e,n,r,i){const o=t.slice(0,7);return pv(o,e,n,r,i,new Uint8Array(0))}async function yA(t,e,n,r){switch(lf(t,e,"decrypt"),t){case"dir":{if(n!==void 0)throw new Ve("Encountered unexpected JWE Encrypted Key");return e}case"ECDH-ES":if(n!==void 0)throw new Ve("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!kr(r.epk))throw new Ve('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!_v(e))throw new It("ECDH with the provided key is not allowed or not supported by your javascript runtime");const i=await uf(r.epk,t);let o,s;if(r.apu!==void 0){if(typeof r.apu!="string")throw new Ve('JOSE Header "apu" (Agreement PartyUInfo) invalid');o=dr(r.apu)}if(r.apv!==void 0){if(typeof r.apv!="string")throw new Ve('JOSE Header "apv" (Agreement PartyVInfo) invalid');s=dr(r.apv)}const a=await yv(i,e,t==="ECDH-ES"?r.enc:t,t==="ECDH-ES"?a0(r.enc):parseInt(t.slice(-5,-2),10),o,s);if(t==="ECDH-ES")return a;if(n===void 0)throw new Ve("JWE Encrypted Key missing");return Bp(t.slice(-6),a,n)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(n===void 0)throw new Ve("JWE Encrypted Key missing");return QT(t,e,n)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(n===void 0)throw new Ve("JWE Encrypted Key missing");if(typeof r.p2c!="number")throw new Ve('JOSE Header "p2c" (PBES2 Count) missing or invalid');if(typeof r.p2s!="string")throw new Ve('JOSE Header "p2s" (PBES2 Salt) missing or invalid');return JT(t,e,n,r.p2c,dr(r.p2s))}case"A128KW":case"A192KW":case"A256KW":{if(n===void 0)throw new Ve("JWE Encrypted Key missing");return Bp(t,e,n)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(n===void 0)throw new Ve("JWE Encrypted Key missing");if(typeof r.iv!="string")throw new Ve('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof r.tag!="string")throw new Ve('JOSE Header "tag" (Authentication Tag) missing or invalid');const i=dr(r.iv),o=dr(r.tag);return mA(t,e,n,i,o)}default:throw new It('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function Xu(t,e,n,r,i){if(i.crit!==void 0&&r.crit===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||r.crit===void 0)return new Set;if(!Array.isArray(r.crit)||r.crit.length===0||r.crit.some(s=>typeof s!="string"||s.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;n!==void 0?o=new Map([...Object.entries(n),...e.entries()]):o=e;for(const s of r.crit){if(!o.has(s))throw new It(`Extension Header Parameter "${s}" is not recognized`);if(i[s]===void 0)throw new t(`Extension Header Parameter "${s}" is missing`);if(o.get(s)&&r[s]===void 0)throw new t(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(r.crit)}const _A=(t,e)=>{if(e!==void 0&&(!Array.isArray(e)||e.some(n=>typeof n!="string")))throw new TypeError(`"${t}" option must be an array of strings`);if(!!e)return new Set(e)};var Kp=_A;async function c0(t,e,n){var r;if(!kr(t))throw new Ve("Flattened JWE must be an object");if(t.protected===void 0&&t.header===void 0&&t.unprotected===void 0)throw new Ve("JOSE Header missing");if(typeof t.iv!="string")throw new Ve("JWE Initialization Vector missing or incorrect type");if(typeof t.ciphertext!="string")throw new Ve("JWE Ciphertext missing or incorrect type");if(typeof t.tag!="string")throw new Ve("JWE Authentication Tag missing or incorrect type");if(t.protected!==void 0&&typeof t.protected!="string")throw new Ve("JWE Protected Header incorrect type");if(t.encrypted_key!==void 0&&typeof t.encrypted_key!="string")throw new Ve("JWE Encrypted Key incorrect type");if(t.aad!==void 0&&typeof t.aad!="string")throw new Ve("JWE AAD incorrect type");if(t.header!==void 0&&!kr(t.header))throw new Ve("JWE Shared Unprotected Header incorrect type");if(t.unprotected!==void 0&&!kr(t.unprotected))throw new Ve("JWE Per-Recipient Unprotected Header incorrect type");let i;if(t.protected){const R=dr(t.protected);try{i=JSON.parse(Gi.decode(R))}catch{throw new Ve("JWE Protected Header is invalid")}}if(!Qu(i,t.header,t.unprotected))throw new Ve("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const o={...i,...t.header,...t.unprotected};if(Xu(Ve,new Map,n==null?void 0:n.crit,i,o),o.zip!==void 0){if(!i||!i.zip)throw new Ve('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(o.zip!=="DEF")throw new It('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:s,enc:a}=o;if(typeof s!="string"||!s)throw new Ve("missing JWE Algorithm (alg) in JWE Header");if(typeof a!="string"||!a)throw new Ve("missing JWE Encryption Algorithm (enc) in JWE Header");const c=n&&Kp("keyManagementAlgorithms",n.keyManagementAlgorithms),u=n&&Kp("contentEncryptionAlgorithms",n.contentEncryptionAlgorithms);if(c&&!c.has(s))throw new xd('"alg" (Algorithm) Header Parameter not allowed');if(u&&!u.has(a))throw new xd('"enc" (Encryption Algorithm) Header Parameter not allowed');let l;t.encrypted_key!==void 0&&(l=dr(t.encrypted_key));let d=!1;typeof e=="function"&&(e=await e(i,t),d=!0);let p;try{p=await yA(s,e,l,o)}catch(R){if(R instanceof TypeError)throw R;p=ia(a)}const g=dr(t.iv),y=dr(t.tag),w=Hn.encode((r=t.protected)!==null&&r!==void 0?r:"");let b;t.aad!==void 0?b=Mo(w,Hn.encode("."),Hn.encode(t.aad)):b=w;let E=await pv(a,p,dr(t.ciphertext),g,y,b);o.zip==="DEF"&&(E=await((n==null?void 0:n.inflateRaw)||BT)(E));const S={plaintext:E};return t.protected!==void 0&&(S.protectedHeader=i),t.aad!==void 0&&(S.additionalAuthenticatedData=dr(t.aad)),t.unprotected!==void 0&&(S.sharedUnprotectedHeader=t.unprotected),t.header!==void 0&&(S.unprotectedHeader=t.header),d?{...S,key:e}:S}async function Av(t,e,n){if(t instanceof Uint8Array&&(t=Gi.decode(t)),typeof t!="string")throw new Ve("Compact JWE must be a string or Uint8Array");const{0:r,1:i,2:o,3:s,4:a,length:c}=t.split(".");if(c!==5)throw new Ve("Invalid Compact JWE");const u=await c0({ciphertext:s,iv:o||void 0,protected:r||void 0,tag:a||void 0,encrypted_key:i||void 0},e,n),l={plaintext:u.plaintext,protectedHeader:u.protectedHeader};return typeof e=="function"?{...l,key:u.key}:l}async function wA(t,e,n){if(!kr(t))throw new Ve("General JWE must be an object");if(!Array.isArray(t.recipients)||!t.recipients.every(kr))throw new Ve("JWE Recipients missing or incorrect type");if(!t.recipients.length)throw new Ve("JWE Recipients has no members");for(const r of t.recipients)try{return await c0({aad:t.aad,ciphertext:t.ciphertext,encrypted_key:r.encrypted_key,header:r.header,iv:t.iv,protected:t.protected,tag:t.tag,unprotected:t.unprotected},e,n)}catch{}throw new Cu}const vA=async t=>{if(t instanceof Uint8Array)return{kty:"oct",k:Qn(t)};if(!bi(t))throw new TypeError(Fr(t,...Pn,"Uint8Array"));if(!t.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:e,key_ops:n,alg:r,use:i,...o}=await ot.subtle.exportKey("jwk",t);return o};var bA=vA;async function EA(t){return XT(t)}async function SA(t){return eA(t)}async function xv(t){return bA(t)}async function Iv(t,e,n,r,i={}){let o,s,a;switch(lf(t,n,"encrypt"),t){case"dir":{a=n;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!_v(n))throw new It("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:c,apv:u}=i;let{epk:l}=i;l||(l=(await VT(n)).privateKey);const{x:d,y:p,crv:g,kty:y}=await xv(l),w=await yv(n,l,t==="ECDH-ES"?e:t,t==="ECDH-ES"?a0(e):parseInt(t.slice(-5,-2),10),c,u);if(s={epk:{x:d,crv:g,kty:y}},y==="EC"&&(s.epk.y=p),c&&(s.apu=Qn(c)),u&&(s.apv=Qn(u)),t==="ECDH-ES"){a=w;break}a=r||ia(e);const b=t.slice(-6);o=await $p(b,w,a);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{a=r||ia(e),o=await ZT(t,n,a);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{a=r||ia(e);const{p2c:c,p2s:u}=i;({encryptedKey:o,...s}=await YT(t,n,a,c,u));break}case"A128KW":case"A192KW":case"A256KW":{a=r||ia(e),o=await $p(t,n,a);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{a=r||ia(e);const{iv:c}=i;({encryptedKey:o,...s}=await gA(t,n,a,c));break}default:throw new It('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:a,encryptedKey:o,parameters:s}}const Rv=Symbol();class Fd{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,n){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new Ve("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Qu(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new Ve("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const r={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(Xu(Ve,new Map,n==null?void 0:n.crit,this._protectedHeader,r),r.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new Ve('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(r.zip!=="DEF")throw new It('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:i,enc:o}=r;if(typeof i!="string"||!i)throw new Ve('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof o!="string"||!o)throw new Ve('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let s;if(i==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(i==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let a;{let y;({cek:a,encryptedKey:s,parameters:y}=await Iv(i,o,e,this._cek,this._keyManagementParameters)),y&&(n&&Rv in n?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...y}:this.setUnprotectedHeader(y):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...y}:this.setProtectedHeader(y))}this._iv||(this._iv=lv(o));let c,u,l;this._protectedHeader?u=Hn.encode(Qn(JSON.stringify(this._protectedHeader))):u=Hn.encode(""),this._aad?(l=Qn(this._aad),c=Mo(u,Hn.encode("."),Hn.encode(l))):c=u;let d,p;if(r.zip==="DEF"){const y=await((n==null?void 0:n.deflateRaw)||HT)(this._plaintext);({ciphertext:d,tag:p}=await Hp(o,y,a,this._iv,c))}else({ciphertext:d,tag:p}=await Hp(o,this._plaintext,a,this._iv,c));const g={ciphertext:Qn(d),iv:Qn(this._iv),tag:Qn(p)};return s&&(g.encrypted_key=Qn(s)),l&&(g.aad=l),this._protectedHeader&&(g.protected=Gi.decode(u)),this._sharedUnprotectedHeader&&(g.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(g.header=this._unprotectedHeader),g}}class TA{constructor(e,n,r){this.parent=e,this.key=n,this.options=r}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class AA{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,n){const r=new TA(this,e,{crit:n==null?void 0:n.crit});return this._recipients.push(r),r}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(e){var n,r,i;if(!this._recipients.length)throw new Ve("at least one recipient must be added");if(e={deflateRaw:e==null?void 0:e.deflateRaw},this._recipients.length===1){const[c]=this._recipients,u=await new Fd(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(c.unprotectedHeader).encrypt(c.key,{...c.options,...e});let l={ciphertext:u.ciphertext,iv:u.iv,recipients:[{}],tag:u.tag};return u.aad&&(l.aad=u.aad),u.protected&&(l.protected=u.protected),u.unprotected&&(l.unprotected=u.unprotected),u.encrypted_key&&(l.recipients[0].encrypted_key=u.encrypted_key),u.header&&(l.recipients[0].header=u.header),l}let o;for(let c=0;c<this._recipients.length;c++){const u=this._recipients[c];if(!Qu(this._protectedHeader,this._unprotectedHeader,u.unprotectedHeader))throw new Ve("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const l={...this._protectedHeader,...this._unprotectedHeader,...u.unprotectedHeader},{alg:d}=l;if(typeof d!="string"||!d)throw new Ve('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(d==="dir"||d==="ECDH-ES")throw new Ve('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof l.enc!="string"||!l.enc)throw new Ve('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!o)o=l.enc;else if(o!==l.enc)throw new Ve('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(Xu(Ve,new Map,u.options.crit,this._protectedHeader,l),l.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new Ve('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const s=ia(o);let a={ciphertext:"",iv:"",recipients:[],tag:""};for(let c=0;c<this._recipients.length;c++){const u=this._recipients[c],l={};a.recipients.push(l);const p={...this._protectedHeader,...this._unprotectedHeader,...u.unprotectedHeader}.alg.startsWith("PBES2")?2048+c:void 0;if(c===0){const w=await new Fd(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(s).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(u.unprotectedHeader).setKeyManagementParameters({p2c:p}).encrypt(u.key,{...u.options,...e,[Rv]:!0});a.ciphertext=w.ciphertext,a.iv=w.iv,a.tag=w.tag,w.aad&&(a.aad=w.aad),w.protected&&(a.protected=w.protected),w.unprotected&&(a.unprotected=w.unprotected),l.encrypted_key=w.encrypted_key,w.header&&(l.header=w.header);continue}const{encryptedKey:g,parameters:y}=await Iv(((n=u.unprotectedHeader)===null||n===void 0?void 0:n.alg)||((r=this._protectedHeader)===null||r===void 0?void 0:r.alg)||((i=this._unprotectedHeader)===null||i===void 0?void 0:i.alg),o,u.key,s,{p2c:p});l.encrypted_key=Qn(g),(u.unprotectedHeader||y)&&(l.header={...u.unprotectedHeader,...y})}return a}}function kv(t,e){const n=`SHA-${t.slice(-3)}`;switch(t){case"HS256":case"HS384":case"HS512":return{hash:n,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:n,name:"RSA-PSS",saltLength:t.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:n,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:n,name:"ECDSA",namedCurve:e.namedCurve};case(Ca()&&"EdDSA"):const{namedCurve:r}=e;return{name:r,namedCurve:r};default:throw new It(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}function Fv(t,e,n){if(bi(e))return LT(e,t,n),e;if(e instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError(Fr(e,...Pn));return ot.subtle.importKey("raw",e,{hash:`SHA-${t.slice(-3)}`,name:"HMAC"},!1,[n])}throw new TypeError(Fr(e,...Pn,"Uint8Array"))}const xA=async(t,e,n,r)=>{const i=await Fv(t,e,"verify");cf(t,i);const o=kv(t,i.algorithm);try{return await ot.subtle.verify(o,i,n,r)}catch{return!1}};var IA=xA;async function u0(t,e,n){var r;if(!kr(t))throw new Xt("Flattened JWS must be an object");if(t.protected===void 0&&t.header===void 0)throw new Xt('Flattened JWS must have either of the "protected" or "header" members');if(t.protected!==void 0&&typeof t.protected!="string")throw new Xt("JWS Protected Header incorrect type");if(t.payload===void 0)throw new Xt("JWS Payload missing");if(typeof t.signature!="string")throw new Xt("JWS Signature missing or incorrect type");if(t.header!==void 0&&!kr(t.header))throw new Xt("JWS Unprotected Header incorrect type");let i={};if(t.protected){const b=dr(t.protected);try{i=JSON.parse(Gi.decode(b))}catch{throw new Xt("JWS Protected Header is invalid")}}if(!Qu(i,t.header))throw new Xt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const o={...i,...t.header},s=Xu(Xt,new Map([["b64",!0]]),n==null?void 0:n.crit,i,o);let a=!0;if(s.has("b64")&&(a=i.b64,typeof a!="boolean"))throw new Xt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:c}=o;if(typeof c!="string"||!c)throw new Xt('JWS "alg" (Algorithm) Header Parameter missing or invalid');const u=n&&Kp("algorithms",n.algorithms);if(u&&!u.has(c))throw new xd('"alg" (Algorithm) Header Parameter not allowed');if(a){if(typeof t.payload!="string")throw new Xt("JWS Payload must be a string")}else if(typeof t.payload!="string"&&!(t.payload instanceof Uint8Array))throw new Xt("JWS Payload must be a string or an Uint8Array instance");let l=!1;typeof e=="function"&&(e=await e(i,t),l=!0),lf(c,e,"verify");const d=Mo(Hn.encode((r=t.protected)!==null&&r!==void 0?r:""),Hn.encode("."),typeof t.payload=="string"?Hn.encode(t.payload):t.payload),p=dr(t.signature);if(!await IA(c,e,p,d))throw new s0;let y;a?y=dr(t.payload):typeof t.payload=="string"?y=Hn.encode(t.payload):y=t.payload;const w={payload:y};return t.protected!==void 0&&(w.protectedHeader=i),t.header!==void 0&&(w.unprotectedHeader=t.header),l?{...w,key:e}:w}async function Dv(t,e,n){if(t instanceof Uint8Array&&(t=Gi.decode(t)),typeof t!="string")throw new Xt("Compact JWS must be a string or Uint8Array");const{0:r,1:i,2:o,length:s}=t.split(".");if(s!==3)throw new Xt("Invalid Compact JWS");const a=await u0({payload:i,protected:r,signature:o},e,n),c={payload:a.payload,protectedHeader:a.protectedHeader};return typeof e=="function"?{...c,key:a.key}:c}async function RA(t,e,n){if(!kr(t))throw new Xt("General JWS must be an object");if(!Array.isArray(t.signatures)||!t.signatures.every(kr))throw new Xt("JWS Signatures missing or incorrect type");for(const r of t.signatures)try{return await u0({header:r.header,payload:t.payload,protected:r.protected,signature:r.signature},e,n)}catch{}throw new s0}var Ql=t=>Math.floor(t.getTime()/1e3);const Cv=60,Pv=Cv*60,l0=Pv*24,kA=l0*7,FA=l0*365.25,DA=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;var Dd=t=>{const e=DA.exec(t);if(!e)throw new TypeError("Invalid time period format");const n=parseFloat(e[1]);switch(e[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(n);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(n*Cv);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(n*Pv);case"day":case"days":case"d":return Math.round(n*l0);case"week":case"weeks":case"w":return Math.round(n*kA);default:return Math.round(n*FA)}};const Ay=t=>t.toLowerCase().replace(/^application\//,""),CA=(t,e)=>typeof t=="string"?e.includes(t):Array.isArray(t)?e.some(Set.prototype.has.bind(new Set(t))):!1;var d0=(t,e,n={})=>{const{typ:r}=n;if(r&&(typeof t.typ!="string"||Ay(t.typ)!==Ay(r)))throw new Ii('unexpected "typ" JWT header value',"typ","check_failed");let i;try{i=JSON.parse(Gi.decode(e))}catch{}if(!kr(i))throw new mi("JWT Claims Set must be a top-level JSON object");const{issuer:o}=n;if(o&&!(Array.isArray(o)?o:[o]).includes(i.iss))throw new Ii('unexpected "iss" claim value',"iss","check_failed");const{subject:s}=n;if(s&&i.sub!==s)throw new Ii('unexpected "sub" claim value',"sub","check_failed");const{audience:a}=n;if(a&&!CA(i.aud,typeof a=="string"?[a]:a))throw new Ii('unexpected "aud" claim value',"aud","check_failed");let c;switch(typeof n.clockTolerance){case"string":c=Dd(n.clockTolerance);break;case"number":c=n.clockTolerance;break;case"undefined":c=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:u}=n,l=Ql(u||new Date);if((i.iat!==void 0||n.maxTokenAge)&&typeof i.iat!="number")throw new Ii('"iat" claim must be a number',"iat","invalid");if(i.nbf!==void 0){if(typeof i.nbf!="number")throw new Ii('"nbf" claim must be a number',"nbf","invalid");if(i.nbf>l+c)throw new Ii('"nbf" claim timestamp check failed',"nbf","check_failed")}if(i.exp!==void 0){if(typeof i.exp!="number")throw new Ii('"exp" claim must be a number',"exp","invalid");if(i.exp<=l-c)throw new jp('"exp" claim timestamp check failed',"exp","check_failed")}if(n.maxTokenAge){const d=l-i.iat,p=typeof n.maxTokenAge=="number"?n.maxTokenAge:Dd(n.maxTokenAge);if(d-c>p)throw new jp('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(d<0-c)throw new Ii('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return i};async function PA(t,e,n){var r;const i=await Dv(t,e,n);if(((r=i.protectedHeader.crit)===null||r===void 0?void 0:r.includes("b64"))&&i.protectedHeader.b64===!1)throw new mi("JWTs MUST NOT use unencoded payload");const s={payload:d0(i.protectedHeader,i.payload,n),protectedHeader:i.protectedHeader};return typeof e=="function"?{...s,key:i.key}:s}async function NA(t,e,n){const r=await Av(t,e,n),i=d0(r.protectedHeader,r.plaintext,n),{protectedHeader:o}=r;if(o.iss!==void 0&&o.iss!==i.iss)throw new Ii('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(o.sub!==void 0&&o.sub!==i.sub)throw new Ii('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(o.aud!==void 0&&JSON.stringify(o.aud)!==JSON.stringify(i.aud))throw new Ii('replicated "aud" claim header parameter mismatch',"aud","mismatch");const s={payload:i,protectedHeader:o};return typeof e=="function"?{...s,key:r.key}:s}class Nv{constructor(e){this._flattened=new Fd(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,n){const r=await this._flattened.encrypt(e,n);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}const OA=async(t,e,n)=>{const r=await Fv(t,e,"sign");cf(t,r);const i=await ot.subtle.sign(kv(t,r.algorithm),r,n);return new Uint8Array(i)};var MA=OA;class f0{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,n){if(!this._protectedHeader&&!this._unprotectedHeader)throw new Xt("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Qu(this._protectedHeader,this._unprotectedHeader))throw new Xt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...this._protectedHeader,...this._unprotectedHeader},i=Xu(Xt,new Map([["b64",!0]]),n==null?void 0:n.crit,this._protectedHeader,r);let o=!0;if(i.has("b64")&&(o=this._protectedHeader.b64,typeof o!="boolean"))throw new Xt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:s}=r;if(typeof s!="string"||!s)throw new Xt('JWS "alg" (Algorithm) Header Parameter missing or invalid');lf(s,e,"sign");let a=this._payload;o&&(a=Hn.encode(Qn(a)));let c;this._protectedHeader?c=Hn.encode(Qn(JSON.stringify(this._protectedHeader))):c=Hn.encode("");const u=Mo(c,Hn.encode("."),a),l=await MA(s,e,u),d={signature:Qn(l),payload:""};return o&&(d.payload=Gi.decode(a)),this._unprotectedHeader&&(d.header=this._unprotectedHeader),this._protectedHeader&&(d.protected=Gi.decode(c)),d}}class Ov{constructor(e){this._flattened=new f0(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,n){const r=await this._flattened.sign(e,n);if(r.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}class LA{constructor(e,n,r){this.parent=e,this.key=n,this.options=r}setProtectedHeader(e){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class UA{constructor(e){this._signatures=[],this._payload=e}addSignature(e,n){const r=new LA(this,e,n);return this._signatures.push(r),r}async sign(){if(!this._signatures.length)throw new Xt("at least one signature must be added");const e={signatures:[],payload:""};for(let n=0;n<this._signatures.length;n++){const r=this._signatures[n],i=new f0(this._payload);i.setProtectedHeader(r.protectedHeader),i.setUnprotectedHeader(r.unprotectedHeader);const{payload:o,...s}=await i.sign(r.key,r.options);if(n===0)e.payload=o;else if(e.payload!==o)throw new Xt("inconsistent use of JWS Unencoded Payload Option (RFC7797)");e.signatures.push(s)}return e}}class h0{constructor(e){if(!kr(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return typeof e=="number"?this._payload={...this._payload,nbf:e}:this._payload={...this._payload,nbf:Ql(new Date)+Dd(e)},this}setExpirationTime(e){return typeof e=="number"?this._payload={...this._payload,exp:e}:this._payload={...this._payload,exp:Ql(new Date)+Dd(e)},this}setIssuedAt(e){return typeof e=="undefined"?this._payload={...this._payload,iat:Ql(new Date)}:this._payload={...this._payload,iat:e},this}}class jA extends h0{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,n){var r;const i=new Ov(Hn.encode(JSON.stringify(this._payload)));if(i.setProtectedHeader(this._protectedHeader),Array.isArray((r=this._protectedHeader)===null||r===void 0?void 0:r.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new mi("JWTs MUST NOT use unencoded payload");return i.sign(e,n)}}class $A extends h0{setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,n){const r=new Nv(Hn.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),r.encrypt(e,n)}}const ds=(t,e)=>{if(typeof t!="string"||!t)throw new sv(`${e} missing or invalid`)};async function BA(t,e="sha256"){if(!kr(t))throw new TypeError("JWK must be an object");if(e!=="sha256"&&e!=="sha384"&&e!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let n;switch(t.kty){case"EC":ds(t.crv,'"crv" (Curve) Parameter'),ds(t.x,'"x" (X Coordinate) Parameter'),ds(t.y,'"y" (Y Coordinate) Parameter'),n={crv:t.crv,kty:t.kty,x:t.x,y:t.y};break;case"OKP":ds(t.crv,'"crv" (Subtype of Key Pair) Parameter'),ds(t.x,'"x" (Public Key) Parameter'),n={crv:t.crv,kty:t.kty,x:t.x};break;case"RSA":ds(t.e,'"e" (Exponent) Parameter'),ds(t.n,'"n" (Modulus) Parameter'),n={e:t.e,kty:t.kty,n:t.n};break;case"oct":ds(t.k,'"k" (Key Value) Parameter'),n={k:t.k,kty:t.kty};break;default:throw new It('"kty" (Key Type) Parameter missing or unsupported')}const r=Hn.encode(JSON.stringify(n));return Qn(await rv(e,r))}async function HA(t,e){const n={...t,...e.header};if(!kr(n.jwk))throw new Xt('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const r=await uf({...n.jwk,ext:!0},n.alg,!0);if(r instanceof Uint8Array||r.type!=="public")throw new Xt('"jwk" (JSON Web Key) Header Parameter must be a public key');return r}function KA(t){switch(typeof t=="string"&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new It('Unsupported "alg" value for a JSON Web Key Set')}}function Mv(t){return t&&typeof t=="object"&&Array.isArray(t.keys)&&t.keys.every(WA)}function WA(t){return kr(t)}function qA(t){return typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}class Wp{constructor(e){if(this._cached=new WeakMap,!Mv(e))throw new Id("JSON Web Key Set malformed");this._jwks=qA(e)}async getKey(e,n){const{alg:r,kid:i}={...e,...n.header},o=KA(r),s=this._jwks.keys.filter(l=>{let d=o===l.kty;if(d&&typeof i=="string"&&(d=i===l.kid),d&&typeof l.alg=="string"&&(d=r===l.alg),d&&typeof l.use=="string"&&(d=l.use==="sig"),d&&Array.isArray(l.key_ops)&&(d=l.key_ops.includes("verify")),d&&r==="EdDSA"&&(d=l.crv==="Ed25519"||l.crv==="Ed448"),d)switch(r){case"ES256":d=l.crv==="P-256";break;case"ES256K":d=l.crv==="secp256k1";break;case"ES384":d=l.crv==="P-384";break;case"ES512":d=l.crv==="P-521";break}return d}),{0:a,length:c}=s;if(c===0)throw new o0;if(c!==1)throw new av;const u=this._cached.get(a)||this._cached.set(a,{}).get(a);if(u[r]===void 0){const l=await uf({...a,ext:!0},r);if(l instanceof Uint8Array||l.type!=="public")throw new Id("JSON Web Key Set members must be public keys");u[r]=l}return u[r]}}function VA(t){return Wp.prototype.getKey.bind(new Wp(t))}const GA=async(t,e,n)=>{let r,i,o=!1;typeof AbortController=="function"&&(r=new AbortController,i=setTimeout(()=>{o=!0,r.abort()},e));const s=await fetch(t.href,{signal:r?r.signal:void 0,redirect:"manual",headers:n.headers}).catch(a=>{throw o?new cv:a});if(i!==void 0&&clearTimeout(i),s.status!==200)throw new Lr("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await s.json()}catch{throw new Lr("Failed to parse the JSON Web Key Set HTTP response as JSON")}};var zA=GA;class xy extends Wp{constructor(e,n){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:n==null?void 0:n.agent,headers:n==null?void 0:n.headers},this._timeoutDuration=typeof(n==null?void 0:n.timeoutDuration)=="number"?n==null?void 0:n.timeoutDuration:5e3,this._cooldownDuration=typeof(n==null?void 0:n.cooldownDuration)=="number"?n==null?void 0:n.cooldownDuration:3e4,this._cacheMaxAge=typeof(n==null?void 0:n.cacheMaxAge)=="number"?n==null?void 0:n.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(e,n){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(e,n)}catch(r){if(r instanceof o0&&this.coolingDown()===!1)return await this.reload(),super.getKey(e,n);throw r}}async reload(){if(this._pendingFetch&&Ca())return new Promise(e=>{const n=()=>{this._pendingFetch===void 0?e():setTimeout(n,5)};n()});this._pendingFetch||(this._pendingFetch=zA(this._url,this._timeoutDuration,this._options).then(e=>{if(!Mv(e))throw new Id("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}function YA(t,e){return xy.prototype.getKey.bind(new xy(t,e))}class JA extends h0{encode(){const e=Qn(JSON.stringify({alg:"none"})),n=Qn(JSON.stringify(this._payload));return`${e}.${n}.`}static decode(e,n){if(typeof e!="string")throw new mi("Unsecured JWT must be a string");const{0:r,1:i,2:o,length:s}=e.split(".");if(s!==3||o!=="")throw new mi("Invalid Unsecured JWT");let a;try{if(a=JSON.parse(Gi.decode(dr(r))),a.alg!=="none")throw new Error}catch{throw new mi("Invalid Unsecured JWT")}return{payload:d0(a,dr(i),n),header:a}}}const ZA=Qn,p0=dr;var QA=Object.freeze(Object.defineProperty({__proto__:null,encode:ZA,decode:p0},Symbol.toStringTag,{value:"Module"}));function XA(t){let e;if(typeof t=="string"){const n=t.split(".");(n.length===3||n.length===5)&&([e]=n)}else if(typeof t=="object"&&t)if("protected"in t)e=t.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof e!="string"||!e)throw new Error;const n=JSON.parse(Gi.decode(p0(e)));if(!kr(n))throw new Error;return n}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function ex(t){if(typeof t!="string")throw new mi("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:n}=t.split(".");if(n===5)throw new mi("Only JWTs using Compact JWS serialization can be decoded");if(n!==3)throw new mi("Invalid JWT");if(!e)throw new mi("JWTs must contain a payload");let r;try{r=p0(e)}catch{throw new mi("Failed to parse the base64url encoded payload")}let i;try{i=JSON.parse(Gi.decode(r))}catch{throw new mi("Failed to parse the decoded payload as JSON")}if(!kr(i))throw new mi("Invalid JWT Claims Set");return i}async function tx(t,e){var n;let r,i,o;switch(t){case"HS256":case"HS384":case"HS512":r=parseInt(t.slice(-3),10),i={name:"HMAC",hash:`SHA-${r}`,length:r},o=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r=parseInt(t.slice(-3),10),sf(new Uint8Array(r>>3));case"A128KW":case"A192KW":case"A256KW":r=parseInt(t.slice(1,4),10),i={name:"AES-KW",length:r},o=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(t.slice(1,4),10),i={name:"AES-GCM",length:r},o=["encrypt","decrypt"];break;default:throw new It('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return ot.subtle.generateKey(i,(n=e==null?void 0:e.extractable)!==null&&n!==void 0?n:!1,o)}function bh(t){var e;const n=(e=t==null?void 0:t.modulusLength)!==null&&e!==void 0?e:2048;if(typeof n!="number"||n<2048)throw new It("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return n}async function nx(t,e){var n,r;let i,o;switch(t){case"PS256":case"PS384":case"PS512":i={name:"RSA-PSS",hash:`SHA-${t.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:bh(e)},o=["sign","verify"];break;case"RS256":case"RS384":case"RS512":i={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:bh(e)},o=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":i={name:"RSA-OAEP",hash:`SHA-${parseInt(t.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:bh(e)},o=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":i={name:"ECDSA",namedCurve:"P-256"},o=["sign","verify"];break;case"ES384":i={name:"ECDSA",namedCurve:"P-384"},o=["sign","verify"];break;case"ES512":i={name:"ECDSA",namedCurve:"P-521"},o=["sign","verify"];break;case(Ca()&&"EdDSA"):switch(e==null?void 0:e.crv){case void 0:case"Ed25519":i={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},o=["sign","verify"];break;default:throw new It("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":i={name:"ECDH",namedCurve:(n=e==null?void 0:e.crv)!==null&&n!==void 0?n:"P-256"},o=["deriveKey","deriveBits"];break;default:throw new It('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return ot.subtle.generateKey(i,(r=e==null?void 0:e.extractable)!==null&&r!==void 0?r:!1,o)}async function rx(t,e){return nx(t,e)}async function ix(t,e){return tx(t,e)}var ox=Object.freeze(Object.defineProperty({__proto__:null,errors:DT,base64url:QA,compactDecrypt:Av,flattenedDecrypt:c0,generalDecrypt:wA,GeneralEncrypt:AA,compactVerify:Dv,flattenedVerify:u0,generalVerify:RA,jwtVerify:PA,jwtDecrypt:NA,CompactEncrypt:Nv,FlattenedEncrypt:Fd,CompactSign:Ov,FlattenedSign:f0,GeneralSign:UA,SignJWT:jA,EncryptJWT:$A,calculateJwkThumbprint:BA,EmbeddedJWK:HA,createLocalJWKSet:VA,createRemoteJWKSet:YA,UnsecuredJWT:JA,exportPKCS8:SA,exportSPKI:EA,exportJWK:xv,importSPKI:sA,importPKCS8:cA,importX509:aA,importJWK:uf,decodeProtectedHeader:XA,decodeJwt:ex,generateKeyPair:rx,generateSecret:ix},Symbol.toStringTag,{value:"Module"})),g0=nf(ox);Object.defineProperty(Ec,"__esModule",{value:!0});Ec.getWebidFromTokenPayload=Ec.fetchJwks=void 0;const sx=Sc.exports,Iy=g0;async function Lv(t,e){const n=await(0,sx.fetch)(t);if(n.status!==200)throw new Error(`Could not fetch JWKS for [${e}] at [${t}]: ${n.status} ${n.statusText}`);let r;try{r=(await n.json()).keys[0]}catch(i){throw new Error(`Malformed JWKS for [${e}] at [${t}]: ${i.message}`)}return r}Ec.fetchJwks=Lv;async function ax(t,e,n,r){const i=await Lv(e,n);let o;try{const{payload:s}=await(0,Iy.jwtVerify)(t,await(0,Iy.importJWK)(i),{issuer:n,audience:r});o=s}catch(s){throw new Error(`Token verification failed: ${s.stack}`)}if(typeof o.webid=="string")return o.webid;if(typeof o.sub!="string")throw new Error(`The token ${JSON.stringify(o)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(o.sub),o.sub}catch(s){throw new Error(`The token has no 'webid' claim, and its 'sub' claim of [${o.sub}] is invalid as a URL - error [${s}].`)}}Ec.getWebidFromTokenPayload=ax;var df={};Object.defineProperty(df,"__esModule",{value:!0});df.isSupportedTokenType=void 0;function cx(t){return typeof t=="string"&&["DPoP","Bearer"].includes(t)}df.isSupportedTokenType=cx;var ff={};Object.defineProperty(ff,"__esModule",{value:!0});ff.USER_SESSION_PREFIX=void 0;ff.USER_SESSION_PREFIX="solidClientAuthenticationUser";var Tc={};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.handleRegistration=Tc.determineSigningAlg=void 0;function Ry(t){try{return new URL(t),!0}catch{return!1}}function ux(t,e){var n;return(n=e.find(r=>t.includes(r)))!==null&&n!==void 0?n:null}Tc.determineSigningAlg=ux;function lx(t,e){return t.clientId!==void 0&&!Ry(t.clientId)?"static":e.scopesSupported.includes("webid")&&t.clientId!==void 0&&Ry(t.clientId)?"solid-oidc":"dynamic"}async function dx(t,e,n,r){const i=lx(t,e);return i==="dynamic"?r.getClient({sessionId:t.sessionId,clientName:t.clientName,redirectUrl:t.redirectUrl},e):(await n.setForUser(t.sessionId,{clientId:t.clientId}),t.clientSecret&&await n.setForUser(t.sessionId,{clientSecret:t.clientSecret}),t.clientName&&await n.setForUser(t.sessionId,{clientName:t.clientName}),{clientId:t.clientId,clientSecret:t.clientSecret,clientName:t.clientName,clientType:i})}Tc.handleRegistration=dx;var Ao={},fx=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ao,"__esModule",{value:!0});Ao.saveSessionInfoToStorage=Ao.loadOidcContextFromStorage=Ao.getSessionIdFromOauthState=void 0;const hx=g0,Eh=fx(of);async function px(t,e){return t.getForUser(e,"sessionId")}Ao.getSessionIdFromOauthState=px;async function gx(t,e,n){try{const[r,i,o,s]=await Promise.all([e.getForUser(t,"issuer",{errorIfNull:!0}),e.getForUser(t,"codeVerifier"),e.getForUser(t,"redirectUrl"),e.getForUser(t,"dpop",{errorIfNull:!0})]);await e.deleteForUser(t,"codeVerifier");const a=await n.fetchConfig(r);return{codeVerifier:i,redirectUrl:o,issuerConfig:a,dpop:s==="true"}}catch(r){throw new Error(`Failed to retrieve OIDC context from storage associated with session [${t}]: ${r}`)}}Ao.loadOidcContextFromStorage=gx;async function mx(t,e,n,r,i,o,s){i!==void 0&&await t.setForUser(e,{refreshToken:i},{secure:o}),n!==void 0&&await t.setForUser(e,{webId:n},{secure:o}),r!==void 0&&await t.setForUser(e,{isLoggedIn:r},{secure:o}),s!==void 0&&await t.setForUser(e,{publicKey:JSON.stringify(s.publicKey),privateKey:JSON.stringify(await(0,hx.exportJWK)(s.privateKey))},{secure:o})}Ao.saveSessionInfoToStorage=mx;class yx{constructor(e,n){this.secureStorage=e,this.insecureStorage=n}getKey(e){return`solidClientAuthenticationUser:${e}`}async getUserData(e,n){const r=await(n?this.secureStorage:this.insecureStorage).get(this.getKey(e));if(r===void 0)return{};try{return JSON.parse(r)}catch{throw new Eh.default(`Data for user [${e}] in [${n?"secure":"unsecure"}] storage is corrupted - expected valid JSON, but got: ${r}`)}}async setUserData(e,n,r){await(r?this.secureStorage:this.insecureStorage).set(this.getKey(e),JSON.stringify(n))}async get(e,n){const r=await(n!=null&&n.secure?this.secureStorage:this.insecureStorage).get(e);if(r===void 0&&(n==null?void 0:n.errorIfNull))throw new Eh.default(`[${e}] is not stored`);return r}async set(e,n,r){return(r!=null&&r.secure?this.secureStorage:this.insecureStorage).set(e,n)}async delete(e,n){return(n!=null&&n.secure?this.secureStorage:this.insecureStorage).delete(e)}async getForUser(e,n,r){const i=await this.getUserData(e,r==null?void 0:r.secure);let o;if((!i||!i[n])&&(o=void 0),o=i[n],o===void 0&&(r==null?void 0:r.errorIfNull))throw new Eh.default(`Field [${n}] for user [${e}] is not stored`);return o||void 0}async setForUser(e,n,r){let i;try{i=await this.getUserData(e,r==null?void 0:r.secure)}catch{i={}}await this.setUserData(e,{...i,...n},r==null?void 0:r.secure)}async deleteForUser(e,n,r){const i=await this.getUserData(e,r==null?void 0:r.secure);delete i[n],await this.setUserData(e,i,r==null?void 0:r.secure)}async deleteAllUserData(e,n){await(n!=null&&n.secure?this.secureStorage:this.insecureStorage).delete(this.getKey(e))}}Ao.default=yx;var m0={};Object.defineProperty(m0,"__esModule",{value:!0});class _x{constructor(){this.map={}}async get(e){return this.map[e]||void 0}async set(e,n){this.map[e]=n}async delete(e){delete this.map[e]}}m0.default=_x;var y0={};Object.defineProperty(y0,"__esModule",{value:!0});class wx extends Error{constructor(e){super(e)}}y0.default=wx;var _0={};Object.defineProperty(_0,"__esModule",{value:!0});class vx extends Error{constructor(e){super(`[${e}] is not implemented`)}}_0.default=vx;var el={};Object.defineProperty(el,"__esModule",{value:!0});el.InvalidResponseError=void 0;class bx extends Error{constructor(e){super(`Invalid response from OIDC provider: missing fields ${e}`),this.missingFields=e}}el.InvalidResponseError=bx;var tl={};Object.defineProperty(tl,"__esModule",{value:!0});tl.OidcProviderError=void 0;class Ex extends Error{constructor(e,n,r){super(e),this.error=n,this.errorDescription=r}}tl.OidcProviderError=Ex;var Aa={},Ml,Sx=new Uint8Array(16);function Uv(){if(!Ml&&(Ml=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ml))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ml(Sx)}var Tx=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function hf(t){return typeof t=="string"&&Tx.test(t)}var Cr=[];for(var Sh=0;Sh<256;++Sh)Cr.push((Sh+256).toString(16).substr(1));function pf(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Cr[t[e+0]]+Cr[t[e+1]]+Cr[t[e+2]]+Cr[t[e+3]]+"-"+Cr[t[e+4]]+Cr[t[e+5]]+"-"+Cr[t[e+6]]+Cr[t[e+7]]+"-"+Cr[t[e+8]]+Cr[t[e+9]]+"-"+Cr[t[e+10]]+Cr[t[e+11]]+Cr[t[e+12]]+Cr[t[e+13]]+Cr[t[e+14]]+Cr[t[e+15]]).toLowerCase();if(!hf(n))throw TypeError("Stringified UUID is invalid");return n}var ky,Th,Ah=0,xh=0;function Ax(t,e,n){var r=e&&n||0,i=e||new Array(16);t=t||{};var o=t.node||ky,s=t.clockseq!==void 0?t.clockseq:Th;if(o==null||s==null){var a=t.random||(t.rng||Uv)();o==null&&(o=ky=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),s==null&&(s=Th=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:xh+1,l=c-Ah+(u-xh)/1e4;if(l<0&&t.clockseq===void 0&&(s=s+1&16383),(l<0||c>Ah)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ah=c,xh=u,Th=s,c+=122192928e5;var d=((c&268435455)*1e4+u)%4294967296;i[r++]=d>>>24&255,i[r++]=d>>>16&255,i[r++]=d>>>8&255,i[r++]=d&255;var p=c/4294967296*1e4&268435455;i[r++]=p>>>8&255,i[r++]=p&255,i[r++]=p>>>24&15|16,i[r++]=p>>>16&255,i[r++]=s>>>8|128,i[r++]=s&255;for(var g=0;g<6;++g)i[r+g]=o[g];return e||pf(i)}function jv(t){if(!hf(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function xx(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var Ix="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Rx="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function $v(t,e,n){function r(i,o,s,a){if(typeof i=="string"&&(i=xx(i)),typeof o=="string"&&(o=jv(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(o),c.set(i,o.length),c=n(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,s){a=a||0;for(var u=0;u<16;++u)s[a+u]=c[u];return s}return pf(c)}try{r.name=t}catch{}return r.DNS=Ix,r.URL=Rx,r}function kx(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return Fx(Dx(Cx(t),t.length*8))}function Fx(t){for(var e=[],n=t.length*32,r="0123456789abcdef",i=0;i<n;i+=8){var o=t[i>>5]>>>i%32&255,s=parseInt(r.charAt(o>>>4&15)+r.charAt(o&15),16);e.push(s)}return e}function Bv(t){return(t+64>>>9<<4)+14+1}function Dx(t,e){t[e>>5]|=128<<e%32,t[Bv(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,s=0;s<t.length;s+=16){var a=n,c=r,u=i,l=o;n=Br(n,r,i,o,t[s],7,-680876936),o=Br(o,n,r,i,t[s+1],12,-389564586),i=Br(i,o,n,r,t[s+2],17,606105819),r=Br(r,i,o,n,t[s+3],22,-1044525330),n=Br(n,r,i,o,t[s+4],7,-176418897),o=Br(o,n,r,i,t[s+5],12,1200080426),i=Br(i,o,n,r,t[s+6],17,-1473231341),r=Br(r,i,o,n,t[s+7],22,-45705983),n=Br(n,r,i,o,t[s+8],7,1770035416),o=Br(o,n,r,i,t[s+9],12,-1958414417),i=Br(i,o,n,r,t[s+10],17,-42063),r=Br(r,i,o,n,t[s+11],22,-1990404162),n=Br(n,r,i,o,t[s+12],7,1804603682),o=Br(o,n,r,i,t[s+13],12,-40341101),i=Br(i,o,n,r,t[s+14],17,-1502002290),r=Br(r,i,o,n,t[s+15],22,1236535329),n=Hr(n,r,i,o,t[s+1],5,-165796510),o=Hr(o,n,r,i,t[s+6],9,-1069501632),i=Hr(i,o,n,r,t[s+11],14,643717713),r=Hr(r,i,o,n,t[s],20,-373897302),n=Hr(n,r,i,o,t[s+5],5,-701558691),o=Hr(o,n,r,i,t[s+10],9,38016083),i=Hr(i,o,n,r,t[s+15],14,-660478335),r=Hr(r,i,o,n,t[s+4],20,-405537848),n=Hr(n,r,i,o,t[s+9],5,568446438),o=Hr(o,n,r,i,t[s+14],9,-1019803690),i=Hr(i,o,n,r,t[s+3],14,-187363961),r=Hr(r,i,o,n,t[s+8],20,1163531501),n=Hr(n,r,i,o,t[s+13],5,-1444681467),o=Hr(o,n,r,i,t[s+2],9,-51403784),i=Hr(i,o,n,r,t[s+7],14,1735328473),r=Hr(r,i,o,n,t[s+12],20,-1926607734),n=Kr(n,r,i,o,t[s+5],4,-378558),o=Kr(o,n,r,i,t[s+8],11,-2022574463),i=Kr(i,o,n,r,t[s+11],16,1839030562),r=Kr(r,i,o,n,t[s+14],23,-35309556),n=Kr(n,r,i,o,t[s+1],4,-1530992060),o=Kr(o,n,r,i,t[s+4],11,1272893353),i=Kr(i,o,n,r,t[s+7],16,-155497632),r=Kr(r,i,o,n,t[s+10],23,-1094730640),n=Kr(n,r,i,o,t[s+13],4,681279174),o=Kr(o,n,r,i,t[s],11,-358537222),i=Kr(i,o,n,r,t[s+3],16,-722521979),r=Kr(r,i,o,n,t[s+6],23,76029189),n=Kr(n,r,i,o,t[s+9],4,-640364487),o=Kr(o,n,r,i,t[s+12],11,-421815835),i=Kr(i,o,n,r,t[s+15],16,530742520),r=Kr(r,i,o,n,t[s+2],23,-995338651),n=Wr(n,r,i,o,t[s],6,-198630844),o=Wr(o,n,r,i,t[s+7],10,1126891415),i=Wr(i,o,n,r,t[s+14],15,-1416354905),r=Wr(r,i,o,n,t[s+5],21,-57434055),n=Wr(n,r,i,o,t[s+12],6,1700485571),o=Wr(o,n,r,i,t[s+3],10,-1894986606),i=Wr(i,o,n,r,t[s+10],15,-1051523),r=Wr(r,i,o,n,t[s+1],21,-2054922799),n=Wr(n,r,i,o,t[s+8],6,1873313359),o=Wr(o,n,r,i,t[s+15],10,-30611744),i=Wr(i,o,n,r,t[s+6],15,-1560198380),r=Wr(r,i,o,n,t[s+13],21,1309151649),n=Wr(n,r,i,o,t[s+4],6,-145523070),o=Wr(o,n,r,i,t[s+11],10,-1120210379),i=Wr(i,o,n,r,t[s+2],15,718787259),r=Wr(r,i,o,n,t[s+9],21,-343485551),n=bs(n,a),r=bs(r,c),i=bs(i,u),o=bs(o,l)}return[n,r,i,o]}function Cx(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(Bv(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function bs(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function Px(t,e){return t<<e|t>>>32-e}function gf(t,e,n,r,i,o){return bs(Px(bs(bs(e,t),bs(r,o)),i),n)}function Br(t,e,n,r,i,o,s){return gf(e&n|~e&r,t,e,i,o,s)}function Hr(t,e,n,r,i,o,s){return gf(e&r|n&~r,t,e,i,o,s)}function Kr(t,e,n,r,i,o,s){return gf(e^n^r,t,e,i,o,s)}function Wr(t,e,n,r,i,o,s){return gf(n^(e|~r),t,e,i,o,s)}var Nx=$v("v3",48,kx),Ox=Nx;function Mx(t,e,n){t=t||{};var r=t.random||(t.rng||Uv)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return pf(r)}function Lx(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function Ih(t,e){return t<<e|t>>>32-e}function Ux(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,s=Math.ceil(o/16),a=new Array(s),c=0;c<s;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=t[c*64+l*4]<<24|t[c*64+l*4+1]<<16|t[c*64+l*4+2]<<8|t[c*64+l*4+3];a[c]=u}a[s-1][14]=(t.length-1)*8/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=(t.length-1)*8&4294967295;for(var d=0;d<s;++d){for(var p=new Uint32Array(80),g=0;g<16;++g)p[g]=a[d][g];for(var y=16;y<80;++y)p[y]=Ih(p[y-3]^p[y-8]^p[y-14]^p[y-16],1);for(var w=n[0],b=n[1],E=n[2],S=n[3],R=n[4],F=0;F<80;++F){var M=Math.floor(F/20),P=Ih(w,5)+Lx(M,b,E,S)+R+e[M]+p[F]>>>0;R=S,S=E,E=Ih(b,30)>>>0,b=w,w=P}n[0]=n[0]+w>>>0,n[1]=n[1]+b>>>0,n[2]=n[2]+E>>>0,n[3]=n[3]+S>>>0,n[4]=n[4]+R>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var jx=$v("v5",80,Ux),$x=jx,Bx="00000000-0000-0000-0000-000000000000";function Hx(t){if(!hf(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var Kx=Object.freeze(Object.defineProperty({__proto__:null,v1:Ax,v3:Ox,v4:Mx,v5:$x,NIL:Bx,version:Hx,validate:hf,stringify:pf,parse:jv},Symbol.toStringTag,{value:"Module"})),w0=nf(Kx);Object.defineProperty(Aa,"__esModule",{value:!0});Aa.generateDpopKeyPair=Aa.createDpopHeader=void 0;const qp=g0,Wx=w0,Vp=yi;function qx(t){const e=new URL(t);return new URL(e.pathname,e.origin).toString()}async function Vx(t,e,n){return new qp.SignJWT({htu:qx(t),htm:e.toUpperCase(),jti:(0,Wx.v4)()}).setProtectedHeader({alg:Vp.PREFERRED_SIGNING_ALG[0],jwk:n.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(n.privateKey,{})}Aa.createDpopHeader=Vx;async function Gx(){const{privateKey:t,publicKey:e}=await(0,qp.generateKeyPair)(Vp.PREFERRED_SIGNING_ALG[0]),n={privateKey:t,publicKey:await(0,qp.exportJWK)(e)};return[n.publicKey.alg]=Vp.PREFERRED_SIGNING_ALG,n}Aa.generateDpopKeyPair=Gx;var Hv={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.buildAuthenticatedFetch=t.DEFAULT_EXPIRATION_TIME_SECONDS=void 0;const e=Sc.exports,n=yi,r=Aa,i=tl,o=el;t.DEFAULT_EXPIRATION_TIME_SECONDS=600;function s(g){return[401,403].includes(g)}async function a(g,y,w,b){var E;const S=new e.Headers(b==null?void 0:b.headers);return S.set("Authorization",`DPoP ${y}`),S.set("DPoP",await(0,r.createDpopHeader)(g,(E=b==null?void 0:b.method)!==null&&E!==void 0?E:"get",w)),{...b,headers:S}}async function c(g,y,w,b){if(w!==void 0)return a(g,y,w,b);const E=new e.Headers(b==null?void 0:b.headers);return E.set("Authorization",`Bearer ${y}`),{...b,headers:E}}async function u(g,y,w,b,E){return g(w,await c(w.toString(),y,E,b))}async function l(g,y,w){var b;const E=await g.tokenRefresher.refresh(g.sessionId,g.refreshToken,y);return w==null||w.emit(n.EVENTS.SESSION_EXTENDED,(b=E.expiresIn)!==null&&b!==void 0?b:t.DEFAULT_EXPIRATION_TIME_SECONDS),typeof E.refreshToken=="string"&&(w==null||w.emit(n.EVENTS.NEW_REFRESH_TOKEN,E.refreshToken)),{accessToken:E.accessToken,refreshToken:E.refreshToken,expiresIn:E.expiresIn}}const d=g=>g!==void 0?g-n.REFRESH_BEFORE_EXPIRATION_SECONDS>0?g-n.REFRESH_BEFORE_EXPIRATION_SECONDS:g:t.DEFAULT_EXPIRATION_TIME_SECONDS;async function p(g,y,w){var b;let E=y,S;const R=w==null?void 0:w.refreshOptions;if(R!==void 0){const F=async()=>{var M,P,D,Y;try{const{accessToken:Q,refreshToken:B,expiresIn:se}=await l(R,w.dpopKey,w.eventEmitter);E=Q,B!==void 0&&(R.refreshToken=B),clearTimeout(S),S=setTimeout(F,d(se)*1e3),(M=w.eventEmitter)===null||M===void 0||M.emit(n.EVENTS.TIMEOUT_SET,S)}catch(Q){Q instanceof i.OidcProviderError&&((P=w==null?void 0:w.eventEmitter)===null||P===void 0||P.emit(n.EVENTS.ERROR,Q.error,Q.errorDescription),(D=w==null?void 0:w.eventEmitter)===null||D===void 0||D.emit(n.EVENTS.SESSION_EXPIRED)),Q instanceof o.InvalidResponseError&&Q.missingFields.includes("access_token")&&((Y=w==null?void 0:w.eventEmitter)===null||Y===void 0||Y.emit(n.EVENTS.SESSION_EXPIRED))}};S=setTimeout(F,d(w.expiresIn)*1e3),(b=w.eventEmitter)===null||b===void 0||b.emit(n.EVENTS.TIMEOUT_SET,S)}else if(w!==void 0&&w.eventEmitter!==void 0){const F=setTimeout(()=>{w.eventEmitter.emit(n.EVENTS.SESSION_EXPIRED)},d(w.expiresIn)*1e3);w.eventEmitter.emit(n.EVENTS.TIMEOUT_SET,F)}return async(F,M)=>{let P=await u(g,E,F,M,w==null?void 0:w.dpopKey);const D=!P.ok&&!s(P.status);return P.ok||D||P.url!==F&&(w==null?void 0:w.dpopKey)!==void 0&&(P=await u(g,E,P.url,M,w.dpopKey)),P}}t.buildAuthenticatedFetch=p})(Hv);var Kv={};(function(t){var e=Gt&&Gt.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.mockStorageUtility=t.mockStorage=t.StorageUtilityMock=t.StorageUtilityGetResponse=void 0;const n=e(Ao);t.StorageUtilityGetResponse="getResponse",t.StorageUtilityMock={get:async(o,s)=>t.StorageUtilityGetResponse,set:async(o,s)=>{},delete:async o=>{},getForUser:async(o,s,a)=>t.StorageUtilityGetResponse,setForUser:async(o,s,a)=>{},deleteForUser:async(o,s,a)=>{},deleteAllUserData:async(o,s)=>{}};const r=o=>{const s=o;return{get:async a=>{if(s[a]!==void 0)return typeof s[a]=="string"?s[a]:JSON.stringify(s[a])},set:async(a,c)=>{s[a]=c},delete:async a=>{delete s[a]}}};t.mockStorage=r;const i=(o,s=!1)=>s?new n.default((0,t.mockStorage)(o),(0,t.mockStorage)({})):new n.default((0,t.mockStorage)({}),(0,t.mockStorage)(o));t.mockStorageUtility=i})(Kv);(function(t){var e=Gt&&Gt.__createBinding||(Object.create?function(S,R,F,M){M===void 0&&(M=F);var P=Object.getOwnPropertyDescriptor(R,F);(!P||("get"in P?!R.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return R[F]}}),Object.defineProperty(S,M,P)}:function(S,R,F,M){M===void 0&&(M=F),S[M]=R[F]}),n=Gt&&Gt.__exportStar||function(S,R){for(var F in S)F!=="default"&&!Object.prototype.hasOwnProperty.call(R,F)&&e(R,S,F)},r=Gt&&Gt.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(t,"__esModule",{value:!0}),t.StorageUtilityGetResponse=t.StorageUtilityMock=t.mockStorageUtility=t.mockStorage=t.buildAuthenticatedFetch=t.generateDpopKeyPair=t.createDpopHeader=t.OidcProviderError=t.InvalidResponseError=t.NotImplementedError=t.ConfigurationError=t.InMemoryStorage=t.getSessionIdFromOauthState=t.saveSessionInfoToStorage=t.loadOidcContextFromStorage=t.StorageUtility=t.determineSigningAlg=t.handleRegistration=t.USER_SESSION_PREFIX=t.isSupportedTokenType=t.fetchJwks=t.getWebidFromTokenPayload=t.AggregateHandler=void 0,n(yi,t);var i=n0;Object.defineProperty(t,"AggregateHandler",{enumerable:!0,get:function(){return r(i).default}});var o=Ec;Object.defineProperty(t,"getWebidFromTokenPayload",{enumerable:!0,get:function(){return o.getWebidFromTokenPayload}}),Object.defineProperty(t,"fetchJwks",{enumerable:!0,get:function(){return o.fetchJwks}});var s=df;Object.defineProperty(t,"isSupportedTokenType",{enumerable:!0,get:function(){return s.isSupportedTokenType}});var a=ff;Object.defineProperty(t,"USER_SESSION_PREFIX",{enumerable:!0,get:function(){return a.USER_SESSION_PREFIX}});var c=Tc;Object.defineProperty(t,"handleRegistration",{enumerable:!0,get:function(){return c.handleRegistration}}),Object.defineProperty(t,"determineSigningAlg",{enumerable:!0,get:function(){return c.determineSigningAlg}});var u=Ao;Object.defineProperty(t,"StorageUtility",{enumerable:!0,get:function(){return r(u).default}}),Object.defineProperty(t,"loadOidcContextFromStorage",{enumerable:!0,get:function(){return u.loadOidcContextFromStorage}}),Object.defineProperty(t,"saveSessionInfoToStorage",{enumerable:!0,get:function(){return u.saveSessionInfoToStorage}}),Object.defineProperty(t,"getSessionIdFromOauthState",{enumerable:!0,get:function(){return u.getSessionIdFromOauthState}});var l=m0;Object.defineProperty(t,"InMemoryStorage",{enumerable:!0,get:function(){return r(l).default}});var d=y0;Object.defineProperty(t,"ConfigurationError",{enumerable:!0,get:function(){return r(d).default}});var p=_0;Object.defineProperty(t,"NotImplementedError",{enumerable:!0,get:function(){return r(p).default}});var g=el;Object.defineProperty(t,"InvalidResponseError",{enumerable:!0,get:function(){return g.InvalidResponseError}});var y=tl;Object.defineProperty(t,"OidcProviderError",{enumerable:!0,get:function(){return y.OidcProviderError}});var w=Aa;Object.defineProperty(t,"createDpopHeader",{enumerable:!0,get:function(){return w.createDpopHeader}}),Object.defineProperty(t,"generateDpopKeyPair",{enumerable:!0,get:function(){return w.generateDpopKeyPair}});var b=Hv;Object.defineProperty(t,"buildAuthenticatedFetch",{enumerable:!0,get:function(){return b.buildAuthenticatedFetch}});var E=Kv;Object.defineProperty(t,"mockStorage",{enumerable:!0,get:function(){return E.mockStorage}}),Object.defineProperty(t,"mockStorageUtility",{enumerable:!0,get:function(){return E.mockStorageUtility}}),Object.defineProperty(t,"StorageUtilityMock",{enumerable:!0,get:function(){return E.StorageUtilityMock}}),Object.defineProperty(t,"StorageUtilityGetResponse",{enumerable:!0,get:function(){return E.StorageUtilityGetResponse}})})(Ht);var nl={},v0={};Object.defineProperty(v0,"__esModule",{value:!0});const zx=Ht;class Yx extends zx.StorageUtility{constructor(e,n){super(e,n)}}v0.default=Yx;var b0={},pi={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(Gt,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var s=r[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=n,i.c=r,i.d=function(o,s,a){i.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:a})},i.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,s){if(1&s&&(o=i(o)),8&s||4&s&&typeof o=="object"&&o&&o.__esModule)return o;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:o}),2&s&&typeof o!="string")for(var c in o)i.d(a,c,function(u){return o[u]}.bind(null,c));return a},i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,"a",s),s},i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},i.p="",i(i.s=22)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function u(l,d){for(var p=0;p<d.length;p++){var g=d[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(l,g.key,g)}}return function(l,d,p){return d&&u(l.prototype,d),p&&u(l,p),l}}(),s={debug:function(){},info:function(){},warn:function(){},error:function(){}},a=void 0,c=void 0;(r.Log=function(){function u(){(function(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.reset=function(){c=3,a=s},u.debug=function(){if(c>=4){for(var d=arguments.length,p=Array(d),g=0;g<d;g++)p[g]=arguments[g];a.debug.apply(a,Array.from(p))}},u.info=function(){if(c>=3){for(var d=arguments.length,p=Array(d),g=0;g<d;g++)p[g]=arguments[g];a.info.apply(a,Array.from(p))}},u.warn=function(){if(c>=2){for(var d=arguments.length,p=Array(d),g=0;g<d;g++)p[g]=arguments[g];a.warn.apply(a,Array.from(p))}},u.error=function(){if(c>=1){for(var d=arguments.length,p=Array(d),g=0;g<d;g++)p[g]=arguments[g];a.error.apply(a,Array.from(p))}},o(u,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return c},set:function(d){if(!(0<=d&&d<=4))throw new Error("Invalid log level");c=d}},{key:"logger",get:function(){return a},set:function(d){if(!d.debug&&d.info&&(d.debug=d.info),!(d.debug&&d.info&&d.warn&&d.error))throw new Error("Invalid logger");a=d}}]),u}()).reset()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function u(l,d){for(var p=0;p<d.length;p++){var g=d[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(l,g.key,g)}}return function(l,d,p){return d&&u(l.prototype,d),p&&u(l,p),l}}(),s={setInterval:function(u){function l(d,p){return u.apply(this,arguments)}return l.toString=function(){return u.toString()},l}(function(u,l){return setInterval(u,l)}),clearInterval:function(u){function l(d){return u.apply(this,arguments)}return l.toString=function(){return u.toString()},l}(function(u){return clearInterval(u)})},a=!1,c=null;r.Global=function(){function u(){(function(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u)}return u._testing=function(){a=!0},u.setXMLHttpRequest=function(d){c=d},o(u,null,[{key:"location",get:function(){if(!a)return location}},{key:"localStorage",get:function(){if(!a&&typeof window!="undefined")return localStorage}},{key:"sessionStorage",get:function(){if(!a&&typeof window!="undefined")return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!a&&typeof window!="undefined")return c||XMLHttpRequest}},{key:"timer",get:function(){if(!a)return s}}]),u}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.MetadataService=void 0;var o=function(){function l(d,p){for(var g=0;g<p.length;g++){var y=p[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}return function(d,p,g){return p&&l(d.prototype,p),g&&l(d,g),d}}(),s=i(0),a=i(7);function c(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}var u=".well-known/openid-configuration";r.MetadataService=function(){function l(d){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.JsonService;if(c(this,l),!d)throw s.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=d,this._jsonService=new p(["application/jwk-set+json"])}return l.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},l.prototype.getMetadata=function(){var p=this;return this._settings.metadata?(s.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(s.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(g){s.Log.debug("MetadataService.getMetadata: json received");var y=p._settings.metadataSeed||{};return p._settings.metadata=Object.assign({},y,g),p._settings.metadata})):(s.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},l.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},l.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},l.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},l.prototype.getTokenEndpoint=function(){var p=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this._getMetadataProperty("token_endpoint",p)},l.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},l.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},l.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},l.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},l.prototype._getMetadataProperty=function(p){var g=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return s.Log.debug("MetadataService.getMetadataProperty for: "+p),this.getMetadata().then(function(y){if(s.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),y[p]===void 0){if(g===!0)return void s.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+p);throw s.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+p),new Error("Metadata does not contain property "+p)}return y[p]})},l.prototype.getSigningKeys=function(){var p=this;return this._settings.signingKeys?(s.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(g){return s.Log.debug("MetadataService.getSigningKeys: jwks_uri received",g),p._jsonService.getJson(g).then(function(y){if(s.Log.debug("MetadataService.getSigningKeys: key set received",y),!y.keys)throw s.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return p._settings.signingKeys=y.keys,p._settings.signingKeys})})},o(l,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(u)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=u))),this._metadataUrl}}]),l}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.UrlUtility=void 0;var o=i(0),s=i(1);r.UrlUtility=function(){function a(){(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,a)}return a.addQueryParam=function(u,l,d){return u.indexOf("?")<0&&(u+="?"),u[u.length-1]!=="?"&&(u+="&"),u+=encodeURIComponent(l),u+="=",u+=encodeURIComponent(d)},a.parseUrlFragment=function(u){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#",d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.Global;typeof u!="string"&&(u=d.location.href);var p=u.lastIndexOf(l);p>=0&&(u=u.substr(p+1)),l==="?"&&(p=u.indexOf("#"))>=0&&(u=u.substr(0,p));for(var g,y={},w=/([^&=]+)=([^&]*)/g,b=0;g=w.exec(u);)if(y[decodeURIComponent(g[1])]=decodeURIComponent(g[2].replace(/\+/g," ")),b++>50)return o.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",u),{error:"Response exceeded expected number of parameters"};for(var E in y)return y;return{}},a}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.JoseUtil=void 0;var o=i(26),s=function(c){return c&&c.__esModule?c:{default:c}}(i(33));r.JoseUtil=(0,s.default)({jws:o.jws,KeyUtil:o.KeyUtil,X509:o.X509,crypto:o.crypto,hextob64u:o.hextob64u,b64tohex:o.b64tohex,AllowedSigningAlgs:o.AllowedSigningAlgs})},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.OidcClientSettings=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},s=function(){function E(S,R){for(var F=0;F<R.length;F++){var M=R[F];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(S,M.key,M)}}return function(S,R,F){return R&&E(S.prototype,R),F&&E(S,F),S}}(),a=i(0),c=i(23),u=i(6),l=i(24),d=i(2);function p(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}var g=".well-known/openid-configuration",y="id_token",w="openid",b="client_secret_post";r.OidcClientSettings=function(){function E(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},R=S.authority,F=S.metadataUrl,M=S.metadata,P=S.signingKeys,D=S.metadataSeed,Y=S.client_id,Q=S.client_secret,B=S.response_type,se=B===void 0?y:B,Ae=S.scope,xe=Ae===void 0?w:Ae,re=S.redirect_uri,ne=S.post_logout_redirect_uri,ye=S.client_authentication,we=ye===void 0?b:ye,qe=S.prompt,ve=S.display,Oe=S.max_age,Ge=S.ui_locales,Xe=S.acr_values,nn=S.resource,bt=S.response_mode,an=S.filterProtocolClaims,hr=an===void 0||an,xn=S.loadUserInfo,cn=xn===void 0||xn,yn=S.staleStateAge,Pt=yn===void 0?900:yn,X=S.clockSkew,N=X===void 0?300:X,O=S.clockService,G=O===void 0?new c.ClockService:O,ee=S.userInfoJwtIssuer,de=ee===void 0?"OP":ee,me=S.mergeClaims,Ne=me!==void 0&&me,et=S.stateStore,St=et===void 0?new u.WebStorageStateStore:et,lt=S.ResponseValidatorCtor,dt=lt===void 0?l.ResponseValidator:lt,pr=S.MetadataServiceCtor,Ei=pr===void 0?d.MetadataService:pr,Fe=S.extraQueryParams,un=Fe===void 0?{}:Fe,L=S.extraTokenParams,x=L===void 0?{}:L;p(this,E),this._authority=R,this._metadataUrl=F,this._metadata=M,this._metadataSeed=D,this._signingKeys=P,this._client_id=Y,this._client_secret=Q,this._response_type=se,this._scope=xe,this._redirect_uri=re,this._post_logout_redirect_uri=ne,this._client_authentication=we,this._prompt=qe,this._display=ve,this._max_age=Oe,this._ui_locales=Ge,this._acr_values=Xe,this._resource=nn,this._response_mode=bt,this._filterProtocolClaims=!!hr,this._loadUserInfo=!!cn,this._staleStateAge=Pt,this._clockSkew=N,this._clockService=G,this._userInfoJwtIssuer=de,this._mergeClaims=!!Ne,this._stateStore=St,this._validator=new dt(this),this._metadataService=new Ei(this),this._extraQueryParams=(un===void 0?"undefined":o(un))==="object"?un:{},this._extraTokenParams=(x===void 0?"undefined":o(x))==="object"?x:{}}return E.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},s(E,[{key:"client_id",get:function(){return this._client_id},set:function(R){if(this._client_id)throw a.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=R}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(R){if(this._authority)throw a.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=R}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(g)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=g)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(R){this._metadata=R}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(R){this._metadataSeed=R}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(R){this._signingKeys=R}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(R){(R===void 0?"undefined":o(R))==="object"?this._extraQueryParams=R:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(R){(R===void 0?"undefined":o(R))==="object"?this._extraTokenParams=R:this._extraTokenParams={}}}]),E}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.WebStorageStateStore=void 0;var o=i(0),s=i(1);function a(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}r.WebStorageStateStore=function(){function c(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=u.prefix,d=l===void 0?"oidc.":l,p=u.store,g=p===void 0?s.Global.localStorage:p;a(this,c),this._store=g,this._prefix=d}return c.prototype.set=function(l,d){return o.Log.debug("WebStorageStateStore.set",l),l=this._prefix+l,this._store.setItem(l,d),Promise.resolve()},c.prototype.get=function(l){o.Log.debug("WebStorageStateStore.get",l),l=this._prefix+l;var d=this._store.getItem(l);return Promise.resolve(d)},c.prototype.remove=function(l){o.Log.debug("WebStorageStateStore.remove",l),l=this._prefix+l;var d=this._store.getItem(l);return this._store.removeItem(l),Promise.resolve(d)},c.prototype.getAllKeys=function(){o.Log.debug("WebStorageStateStore.getAllKeys");for(var l=[],d=0;d<this._store.length;d++){var p=this._store.key(d);p.indexOf(this._prefix)===0&&l.push(p.substr(this._prefix.length))}return Promise.resolve(l)},c}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.JsonService=void 0;var o=i(0),s=i(1);function a(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}r.JsonService=function(){function c(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.Global.XMLHttpRequest,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;a(this,c),u&&Array.isArray(u)?this._contentTypes=u.slice():this._contentTypes=[],this._contentTypes.push("application/json"),d&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=l,this._jwtHandler=d}return c.prototype.getJson=function(l,d){var p=this;if(!l)throw o.Log.error("JsonService.getJson: No url passed"),new Error("url");return o.Log.debug("JsonService.getJson, url: ",l),new Promise(function(g,y){var w=new p._XMLHttpRequest;w.open("GET",l);var b=p._contentTypes,E=p._jwtHandler;w.onload=function(){if(o.Log.debug("JsonService.getJson: HTTP response received, status",w.status),w.status===200){var S=w.getResponseHeader("Content-Type");if(S){var R=b.find(function(F){if(S.startsWith(F))return!0});if(R=="application/jwt")return void E(w).then(g,y);if(R)try{return void g(JSON.parse(w.responseText))}catch(F){return o.Log.error("JsonService.getJson: Error parsing JSON response",F.message),void y(F)}}y(Error("Invalid response Content-Type: "+S+", from URL: "+l))}else y(Error(w.statusText+" ("+w.status+")"))},w.onerror=function(){o.Log.error("JsonService.getJson: network error"),y(Error("Network Error"))},d&&(o.Log.debug("JsonService.getJson: token passed, setting Authorization header"),w.setRequestHeader("Authorization","Bearer "+d)),w.send()})},c.prototype.postForm=function(l,d,p){var g=this;if(!l)throw o.Log.error("JsonService.postForm: No url passed"),new Error("url");return o.Log.debug("JsonService.postForm, url: ",l),new Promise(function(y,w){var b=new g._XMLHttpRequest;b.open("POST",l);var E=g._contentTypes;b.onload=function(){if(o.Log.debug("JsonService.postForm: HTTP response received, status",b.status),b.status!==200){if(b.status===400&&(P=b.getResponseHeader("Content-Type"))&&E.find(function(D){if(P.startsWith(D))return!0}))try{var M=JSON.parse(b.responseText);if(M&&M.error)return o.Log.error("JsonService.postForm: Error from server: ",M.error),void w(new Error(M.error))}catch(D){return o.Log.error("JsonService.postForm: Error parsing JSON response",D.message),void w(D)}w(Error(b.statusText+" ("+b.status+")"))}else{var P;if((P=b.getResponseHeader("Content-Type"))&&E.find(function(D){if(P.startsWith(D))return!0}))try{return void y(JSON.parse(b.responseText))}catch(D){return o.Log.error("JsonService.postForm: Error parsing JSON response",D.message),void w(D)}w(Error("Invalid response Content-Type: "+P+", from URL: "+l))}},b.onerror=function(){o.Log.error("JsonService.postForm: network error"),w(Error("Network Error"))};var S="";for(var R in d){var F=d[R];F&&(S.length>0&&(S+="&"),S+=encodeURIComponent(R),S+="=",S+=encodeURIComponent(F))}b.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p!==void 0&&b.setRequestHeader("Authorization","Basic "+btoa(p)),b.send(S)})},c}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SigninRequest=void 0;var o=i(0),s=i(3),a=i(13);r.SigninRequest=function(){function c(u){var l=u.url,d=u.client_id,p=u.redirect_uri,g=u.response_type,y=u.scope,w=u.authority,b=u.data,E=u.prompt,S=u.display,R=u.max_age,F=u.ui_locales,M=u.id_token_hint,P=u.login_hint,D=u.acr_values,Y=u.resource,Q=u.response_mode,B=u.request,se=u.request_uri,Ae=u.extraQueryParams,xe=u.request_type,re=u.client_secret,ne=u.extraTokenParams,ye=u.skipUserInfo;if(function(nn,bt){if(!(nn instanceof bt))throw new TypeError("Cannot call a class as a function")}(this,c),!l)throw o.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!d)throw o.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!p)throw o.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!g)throw o.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!y)throw o.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!w)throw o.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var we=c.isOidc(g),qe=c.isCode(g);Q||(Q=c.isCode(g)?"query":null),this.state=new a.SigninState({nonce:we,data:b,client_id:d,authority:w,redirect_uri:p,code_verifier:qe,request_type:xe,response_mode:Q,client_secret:re,scope:y,extraTokenParams:ne,skipUserInfo:ye}),l=s.UrlUtility.addQueryParam(l,"client_id",d),l=s.UrlUtility.addQueryParam(l,"redirect_uri",p),l=s.UrlUtility.addQueryParam(l,"response_type",g),l=s.UrlUtility.addQueryParam(l,"scope",y),l=s.UrlUtility.addQueryParam(l,"state",this.state.id),we&&(l=s.UrlUtility.addQueryParam(l,"nonce",this.state.nonce)),qe&&(l=s.UrlUtility.addQueryParam(l,"code_challenge",this.state.code_challenge),l=s.UrlUtility.addQueryParam(l,"code_challenge_method","S256"));var ve={prompt:E,display:S,max_age:R,ui_locales:F,id_token_hint:M,login_hint:P,acr_values:D,resource:Y,request:B,request_uri:se,response_mode:Q};for(var Oe in ve)ve[Oe]&&(l=s.UrlUtility.addQueryParam(l,Oe,ve[Oe]));for(var Ge in Ae)l=s.UrlUtility.addQueryParam(l,Ge,Ae[Ge]);this.url=l}return c.isOidc=function(l){return!!l.split(/\s+/g).filter(function(d){return d==="id_token"})[0]},c.isOAuth=function(l){return!!l.split(/\s+/g).filter(function(d){return d==="token"})[0]},c.isCode=function(l){return!!l.split(/\s+/g).filter(function(d){return d==="code"})[0]},c}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.State=void 0;var o=function(){function u(l,d){for(var p=0;p<d.length;p++){var g=d[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(l,g.key,g)}}return function(l,d,p){return d&&u(l.prototype,d),p&&u(l,p),l}}(),s=i(0),a=function(l){return l&&l.__esModule?l:{default:l}}(i(14));function c(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}r.State=function(){function u(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=l.id,p=l.data,g=l.created,y=l.request_type;c(this,u),this._id=d||(0,a.default)(),this._data=p,this._created=typeof g=="number"&&g>0?g:parseInt(Date.now()/1e3),this._request_type=y}return u.prototype.toStorageString=function(){return s.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},u.fromStorageString=function(d){return s.Log.debug("State.fromStorageString"),new u(JSON.parse(d))},u.clearStaleState=function(d,p){var g=Date.now()/1e3-p;return d.getAllKeys().then(function(y){s.Log.debug("State.clearStaleState: got keys",y);for(var w=[],b=function(F){var M=y[F];S=d.get(M).then(function(P){var D=!1;if(P)try{var Y=u.fromStorageString(P);s.Log.debug("State.clearStaleState: got item from key: ",M,Y.created),Y.created<=g&&(D=!0)}catch(Q){s.Log.error("State.clearStaleState: Error parsing state for key",M,Q.message),D=!0}else s.Log.debug("State.clearStaleState: no item in storage for key: ",M),D=!0;if(D)return s.Log.debug("State.clearStaleState: removed item for key: ",M),d.remove(M)}),w.push(S)},E=0;E<y.length;E++){var S;b(E)}return s.Log.debug("State.clearStaleState: waiting on promise count:",w.length),Promise.all(w)})},o(u,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),u}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.OidcClient=void 0;var o=function(){function b(E,S){for(var R=0;R<S.length;R++){var F=S[R];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(E,F.key,F)}}return function(E,S,R){return S&&b(E.prototype,S),R&&b(E,R),E}}(),s=i(0),a=i(5),c=i(12),u=i(8),l=i(34),d=i(35),p=i(36),g=i(13),y=i(9);function w(b,E){if(!(b instanceof E))throw new TypeError("Cannot call a class as a function")}r.OidcClient=function(){function b(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};w(this,b),E instanceof a.OidcClientSettings?this._settings=E:this._settings=new a.OidcClientSettings(E)}return b.prototype.createSigninRequest=function(){var S=this,R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=R.response_type,M=R.scope,P=R.redirect_uri,D=R.data,Y=R.state,Q=R.prompt,B=R.display,se=R.max_age,Ae=R.ui_locales,xe=R.id_token_hint,re=R.login_hint,ne=R.acr_values,ye=R.resource,we=R.request,qe=R.request_uri,ve=R.response_mode,Oe=R.extraQueryParams,Ge=R.extraTokenParams,Xe=R.request_type,nn=R.skipUserInfo,bt=arguments[1];s.Log.debug("OidcClient.createSigninRequest");var an=this._settings.client_id;F=F||this._settings.response_type,M=M||this._settings.scope,P=P||this._settings.redirect_uri,Q=Q||this._settings.prompt,B=B||this._settings.display,se=se||this._settings.max_age,Ae=Ae||this._settings.ui_locales,ne=ne||this._settings.acr_values,ye=ye||this._settings.resource,ve=ve||this._settings.response_mode,Oe=Oe||this._settings.extraQueryParams,Ge=Ge||this._settings.extraTokenParams;var hr=this._settings.authority;return u.SigninRequest.isCode(F)&&F!=="code"?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(xn){s.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",xn);var cn=new u.SigninRequest({url:xn,client_id:an,redirect_uri:P,response_type:F,scope:M,data:D||Y,authority:hr,prompt:Q,display:B,max_age:se,ui_locales:Ae,id_token_hint:xe,login_hint:re,acr_values:ne,resource:ye,request:we,request_uri:qe,extraQueryParams:Oe,extraTokenParams:Ge,request_type:Xe,response_mode:ve,client_secret:S._settings.client_secret,skipUserInfo:nn}),yn=cn.state;return(bt=bt||S._stateStore).set(yn.id,yn.toStorageString()).then(function(){return cn})})},b.prototype.readSigninResponseState=function(S,R){var F=arguments.length>2&&arguments[2]!==void 0&&arguments[2];s.Log.debug("OidcClient.readSigninResponseState");var M=this._settings.response_mode==="query"||!this._settings.response_mode&&u.SigninRequest.isCode(this._settings.response_type),P=M?"?":"#",D=new l.SigninResponse(S,P);if(!D.state)return s.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response"));R=R||this._stateStore;var Y=F?R.remove.bind(R):R.get.bind(R);return Y(D.state).then(function(Q){if(!Q)throw s.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:g.SigninState.fromStorageString(Q),response:D}})},b.prototype.processSigninResponse=function(S,R){var F=this;return s.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(S,R,!0).then(function(M){var P=M.state,D=M.response;return s.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),F._validator.validateSigninResponse(P,D)})},b.prototype.createSignoutRequest=function(){var S=this,R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=R.id_token_hint,M=R.data,P=R.state,D=R.post_logout_redirect_uri,Y=R.extraQueryParams,Q=R.request_type,B=arguments[1];return s.Log.debug("OidcClient.createSignoutRequest"),D=D||this._settings.post_logout_redirect_uri,Y=Y||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(se){if(!se)throw s.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");s.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",se);var Ae=new d.SignoutRequest({url:se,id_token_hint:F,post_logout_redirect_uri:D,data:M||P,extraQueryParams:Y,request_type:Q}),xe=Ae.state;return xe&&(s.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(B=B||S._stateStore).set(xe.id,xe.toStorageString())),Ae})},b.prototype.readSignoutResponseState=function(S,R){var F=arguments.length>2&&arguments[2]!==void 0&&arguments[2];s.Log.debug("OidcClient.readSignoutResponseState");var M=new p.SignoutResponse(S);if(!M.state)return s.Log.debug("OidcClient.readSignoutResponseState: No state in response"),M.error?(s.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",M.error),Promise.reject(new c.ErrorResponse(M))):Promise.resolve({state:void 0,response:M});var P=M.state;R=R||this._stateStore;var D=F?R.remove.bind(R):R.get.bind(R);return D(P).then(function(Y){if(!Y)throw s.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:y.State.fromStorageString(Y),response:M}})},b.prototype.processSignoutResponse=function(S,R){var F=this;return s.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(S,R,!0).then(function(M){var P=M.state,D=M.response;return P?(s.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),F._validator.validateSignoutResponse(P,D)):(s.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),D)})},b.prototype.clearStaleState=function(S){return s.Log.debug("OidcClient.clearStaleState"),S=S||this._stateStore,y.State.clearStaleState(S,this.settings.staleStateAge)},o(b,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),b}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.TokenClient=void 0;var o=i(7),s=i(2),a=i(0);function c(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}r.TokenClient=function(){function u(l){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.JsonService,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.MetadataService;if(c(this,u),!l)throw a.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=l,this._jsonService=new d,this._metadataService=new p(this._settings)}return u.prototype.exchangeCode=function(){var d=this,p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(p=Object.assign({},p)).grant_type=p.grant_type||"authorization_code",p.client_id=p.client_id||this._settings.client_id,p.client_secret=p.client_secret||this._settings.client_secret,p.redirect_uri=p.redirect_uri||this._settings.redirect_uri;var g=void 0,y=p._client_authentication||this._settings._client_authentication;return delete p._client_authentication,p.code?p.redirect_uri?p.code_verifier?p.client_id?p.client_secret||y!="client_secret_basic"?(y=="client_secret_basic"&&(g=p.client_id+":"+p.client_secret,delete p.client_id,delete p.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(w){return a.Log.debug("TokenClient.exchangeCode: Received token endpoint"),d._jsonService.postForm(w,p,g).then(function(b){return a.Log.debug("TokenClient.exchangeCode: response received"),b})})):(a.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(a.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(a.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(a.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(a.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},u.prototype.exchangeRefreshToken=function(){var d=this,p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(p=Object.assign({},p)).grant_type=p.grant_type||"refresh_token",p.client_id=p.client_id||this._settings.client_id,p.client_secret=p.client_secret||this._settings.client_secret;var g=void 0,y=p._client_authentication||this._settings._client_authentication;return delete p._client_authentication,p.refresh_token?p.client_id?(y=="client_secret_basic"&&(g=p.client_id+":"+p.client_secret,delete p.client_id,delete p.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(w){return a.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),d._jsonService.postForm(w,p,g).then(function(b){return a.Log.debug("TokenClient.exchangeRefreshToken: response received"),b})})):(a.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(a.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},u}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorResponse=void 0;var o=i(0);function s(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function a(c,u){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||typeof u!="object"&&typeof u!="function"?c:u}r.ErrorResponse=function(c){function u(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=l.error,p=l.error_description,g=l.error_uri,y=l.state,w=l.session_state;if(s(this,u),!d)throw o.Log.error("No error passed to ErrorResponse"),new Error("error");var b=a(this,c.call(this,p||d));return b.name="ErrorResponse",b.error=d,b.error_description=p,b.error_uri=g,b.state=y,b.session_state=w,b}return function(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}(u,c),u}(Error)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SigninState=void 0;var o=function(){function p(g,y){for(var w=0;w<y.length;w++){var b=y[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,y,w){return y&&p(g.prototype,y),w&&p(g,w),g}}(),s=i(0),a=i(9),c=i(4),u=function(g){return g&&g.__esModule?g:{default:g}}(i(14));function l(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function d(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||typeof g!="object"&&typeof g!="function"?p:g}r.SigninState=function(p){function g(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=y.nonce,b=y.authority,E=y.client_id,S=y.redirect_uri,R=y.code_verifier,F=y.response_mode,M=y.client_secret,P=y.scope,D=y.extraTokenParams,Y=y.skipUserInfo;l(this,g);var Q=d(this,p.call(this,arguments[0]));if(w===!0?Q._nonce=(0,u.default)():w&&(Q._nonce=w),R===!0?Q._code_verifier=(0,u.default)()+(0,u.default)()+(0,u.default)():R&&(Q._code_verifier=R),Q.code_verifier){var B=c.JoseUtil.hashString(Q.code_verifier,"SHA256");Q._code_challenge=c.JoseUtil.hexToBase64Url(B)}return Q._redirect_uri=S,Q._authority=b,Q._client_id=E,Q._response_mode=F,Q._client_secret=M,Q._scope=P,Q._extraTokenParams=D,Q._skipUserInfo=Y,Q}return function(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);w.prototype=Object.create(b&&b.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(w,b):w.__proto__=b)}(g,p),g.prototype.toStorageString=function(){return s.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},g.fromStorageString=function(w){return s.Log.debug("SigninState.fromStorageString"),new g(JSON.parse(w))},o(g,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),g}(a.State)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return(o!="undefined"&&o!==null&&o.getRandomValues!==void 0?s:a)().replace(/-/g,"")};var o=typeof window!="undefined"?window.crypto||window.msCrypto:null;function s(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(c){return(c^o.getRandomValues(new Uint8Array(1))[0]&15>>c/4).toString(16)})}function a(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(c){return(c^16*Math.random()>>c/4).toString(16)})}n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.User=void 0;var o=function(){function a(c,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,u,l){return u&&a(c.prototype,u),l&&a(c,l),c}}(),s=i(0);r.User=function(){function a(c){var u=c.id_token,l=c.session_state,d=c.access_token,p=c.refresh_token,g=c.token_type,y=c.scope,w=c.profile,b=c.expires_at,E=c.state;(function(R,F){if(!(R instanceof F))throw new TypeError("Cannot call a class as a function")})(this,a),this.id_token=u,this.session_state=l,this.access_token=d,this.refresh_token=p,this.token_type=g,this.scope=y,this.profile=w,this.expires_at=b,this.state=E}return a.prototype.toStorageString=function(){return s.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},a.fromStorageString=function(u){return s.Log.debug("User.fromStorageString"),new a(JSON.parse(u))},o(a,[{key:"expires_in",get:function(){if(this.expires_at){var u=parseInt(Date.now()/1e3);return this.expires_at-u}},set:function(u){var l=parseInt(u);if(typeof l=="number"&&l>0){var d=parseInt(Date.now()/1e3);this.expires_at=d+l}}},{key:"expired",get:function(){var u=this.expires_in;if(u!==void 0)return u<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),a}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AccessTokenEvents=void 0;var o=i(0),s=i(46);function a(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}r.AccessTokenEvents=function(){function c(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=u.accessTokenExpiringNotificationTime,d=l===void 0?60:l,p=u.accessTokenExpiringTimer,g=p===void 0?new s.Timer("Access token expiring"):p,y=u.accessTokenExpiredTimer,w=y===void 0?new s.Timer("Access token expired"):y;a(this,c),this._accessTokenExpiringNotificationTime=d,this._accessTokenExpiring=g,this._accessTokenExpired=w}return c.prototype.load=function(l){if(l.access_token&&l.expires_in!==void 0){var d=l.expires_in;if(o.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",d),d>0){var p=d-this._accessTokenExpiringNotificationTime;p<=0&&(p=1),o.Log.debug("AccessTokenEvents.load: registering expiring timer in:",p),this._accessTokenExpiring.init(p)}else o.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var g=d+1;o.Log.debug("AccessTokenEvents.load: registering expired timer in:",g),this._accessTokenExpired.init(g)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},c.prototype.unload=function(){o.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},c.prototype.addAccessTokenExpiring=function(l){this._accessTokenExpiring.addHandler(l)},c.prototype.removeAccessTokenExpiring=function(l){this._accessTokenExpiring.removeHandler(l)},c.prototype.addAccessTokenExpired=function(l){this._accessTokenExpired.addHandler(l)},c.prototype.removeAccessTokenExpired=function(l){this._accessTokenExpired.removeHandler(l)},c}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.Event=void 0;var o=i(0);r.Event=function(){function s(a){(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,s),this._name=a,this._callbacks=[]}return s.prototype.addHandler=function(c){this._callbacks.push(c)},s.prototype.removeHandler=function(c){var u=this._callbacks.findIndex(function(l){return l===c});u>=0&&this._callbacks.splice(u,1)},s.prototype.raise=function(){o.Log.debug("Event: Raising event: "+this._name);for(var c=0;c<this._callbacks.length;c++){var u;(u=this._callbacks)[c].apply(u,arguments)}},s}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SessionMonitor=void 0;var o=function(){function l(d,p){for(var g=0;g<p.length;g++){var y=p[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}return function(d,p,g){return p&&l(d.prototype,p),g&&l(d,g),d}}(),s=i(0),a=i(19),c=i(1);function u(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}r.SessionMonitor=function(){function l(d){var p=this,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.CheckSessionIFrame,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c.Global.timer;if(u(this,l),!d)throw s.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=d,this._CheckSessionIFrameCtor=g,this._timer=y,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(w){w?p._start(w):p._settings.monitorAnonymousSession&&p._userManager.querySessionStatus().then(function(b){var E={session_state:b.session_state};b.sub&&b.sid&&(E.profile={sub:b.sub,sid:b.sid}),p._start(E)}).catch(function(b){s.Log.error("SessionMonitor ctor: error from querySessionStatus:",b.message)})}).catch(function(w){s.Log.error("SessionMonitor ctor: error from getUser:",w.message)}))}return l.prototype._start=function(p){var g=this,y=p.session_state;y&&(p.profile?(this._sub=p.profile.sub,this._sid=p.profile.sid,s.Log.debug("SessionMonitor._start: session_state:",y,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,s.Log.debug("SessionMonitor._start: session_state:",y,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(y):this._metadataService.getCheckSessionIframe().then(function(w){if(w){s.Log.debug("SessionMonitor._start: Initializing check session iframe");var b=g._client_id,E=g._checkSessionInterval,S=g._stopCheckSessionOnError;g._checkSessionIFrame=new g._CheckSessionIFrameCtor(g._callback.bind(g),b,w,E,S),g._checkSessionIFrame.load().then(function(){g._checkSessionIFrame.start(y)})}else s.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(w){s.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",w.message)}))},l.prototype._stop=function(){var p=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(s.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var g=this._timer.setInterval(function(){p._timer.clearInterval(g),p._userManager.querySessionStatus().then(function(y){var w={session_state:y.session_state};y.sub&&y.sid&&(w.profile={sub:y.sub,sid:y.sid}),p._start(w)}).catch(function(y){s.Log.error("SessionMonitor: error from querySessionStatus:",y.message)})},1e3)},l.prototype._callback=function(){var p=this;this._userManager.querySessionStatus().then(function(g){var y=!0;g?g.sub===p._sub?(y=!1,p._checkSessionIFrame.start(g.session_state),g.sid===p._sid?s.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",g.session_state):(s.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",g.session_state),p._userManager.events._raiseUserSessionChanged())):s.Log.debug("SessionMonitor._callback: Different subject signed into OP:",g.sub):s.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),y&&(p._sub?(s.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),p._userManager.events._raiseUserSignedOut()):(s.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),p._userManager.events._raiseUserSignedIn()))}).catch(function(g){p._sub&&(s.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",g.message),p._userManager.events._raiseUserSignedOut())})},o(l,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),l}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.CheckSessionIFrame=void 0;var o=i(0);function s(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")}r.CheckSessionIFrame=function(){function a(c,u,l,d){var p=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];s(this,a),this._callback=c,this._client_id=u,this._url=l,this._interval=d||2e3,this._stopOnError=p;var g=l.indexOf("/",l.indexOf("//")+2);this._frame_origin=l.substr(0,g),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=l}return a.prototype.load=function(){var u=this;return new Promise(function(l){u._frame.onload=function(){l()},window.document.body.appendChild(u._frame),u._boundMessageEvent=u._message.bind(u),window.addEventListener("message",u._boundMessageEvent,!1)})},a.prototype._message=function(u){u.origin===this._frame_origin&&u.source===this._frame.contentWindow&&(u.data==="error"?(o.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):u.data==="changed"?(o.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):o.Log.debug("CheckSessionIFrame: "+u.data+" message from check session op iframe"))},a.prototype.start=function(u){var l=this;if(this._session_state!==u){o.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=u;var d=function(){l._frame.contentWindow.postMessage(l._client_id+" "+l._session_state,l._frame_origin)};d(),this._timer=window.setInterval(d,this._interval)}},a.prototype.stop=function(){this._session_state=null,this._timer&&(o.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},a}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.TokenRevocationClient=void 0;var o=i(0),s=i(2),a=i(1);function c(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}var u="access_token",l="refresh_token";r.TokenRevocationClient=function(){function d(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.Global.XMLHttpRequest,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.MetadataService;if(c(this,d),!p)throw o.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=p,this._XMLHttpRequestCtor=g,this._metadataService=new y(this._settings)}return d.prototype.revoke=function(g,y){var w=this,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"access_token";if(!g)throw o.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(b!==u&&b!=l)throw o.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(E){if(E){o.Log.debug("TokenRevocationClient.revoke: Revoking "+b);var S=w._settings.client_id,R=w._settings.client_secret;return w._revoke(E,S,R,g,b)}if(y)throw o.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},d.prototype._revoke=function(g,y,w,b,E){var S=this;return new Promise(function(R,F){var M=new S._XMLHttpRequestCtor;M.open("POST",g),M.onload=function(){o.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",M.status),M.status===200?R():F(Error(M.statusText+" ("+M.status+")"))},M.onerror=function(){o.Log.debug("TokenRevocationClient.revoke: Network Error."),F("Network Error")};var P="client_id="+encodeURIComponent(y);w&&(P+="&client_secret="+encodeURIComponent(w)),P+="&token_type_hint="+encodeURIComponent(E),P+="&token="+encodeURIComponent(b),M.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),M.send(P)})},d}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.CordovaPopupWindow=void 0;var o=function(){function a(c,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,u,l){return u&&a(c.prototype,u),l&&a(c,l),c}}(),s=i(0);r.CordovaPopupWindow=function(){function a(c){var u=this;(function(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")})(this,a),this._promise=new Promise(function(l,d){u._resolve=l,u._reject=d}),this.features=c.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=c.popupWindowTarget||"_blank",this.redirect_uri=c.startUrl,s.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return a.prototype._isInAppBrowserInstalled=function(u){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(l){return u.hasOwnProperty(l)})},a.prototype.navigate=function(u){if(u&&u.url){if(!window.cordova)return this._error("cordova is undefined");var l=window.cordova.require("cordova/plugin_list").metadata;if(this._isInAppBrowserInstalled(l)===!1)return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(u.url,this.target,this.features),this._popup?(s.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},a.prototype._loadStartCallback=function(u){u.url.indexOf(this.redirect_uri)===0&&this._success({url:u.url})},a.prototype._exitCallback=function(u){this._error(u)},a.prototype._success=function(u){this._cleanup(),s.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(u)},a.prototype._error=function(u){this._cleanup(),s.Log.error(u),this._reject(new Error(u))},a.prototype.close=function(){this._cleanup()},a.prototype._cleanup=function(){this._popup&&(s.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},o(a,[{key:"promise",get:function(){return this._promise}}]),a}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=i(10),a=i(5),c=i(6),u=i(37),l=i(38),d=i(16),p=i(2),g=i(48),y=i(49),w=i(19),b=i(20),E=i(18),S=i(1),R=i(15),F=i(50);r.default={Version:F.Version,Log:o.Log,OidcClient:s.OidcClient,OidcClientSettings:a.OidcClientSettings,WebStorageStateStore:c.WebStorageStateStore,InMemoryWebStorage:u.InMemoryWebStorage,UserManager:l.UserManager,AccessTokenEvents:d.AccessTokenEvents,MetadataService:p.MetadataService,CordovaPopupNavigator:g.CordovaPopupNavigator,CordovaIFrameNavigator:y.CordovaIFrameNavigator,CheckSessionIFrame:w.CheckSessionIFrame,TokenRevocationClient:b.TokenRevocationClient,SessionMonitor:E.SessionMonitor,Global:S.Global,User:R.User},n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ClockService=function(){function o(){(function(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")})(this,o)}return o.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},o}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ResponseValidator=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},s=i(0),a=i(2),c=i(25),u=i(11),l=i(12),d=i(4);function p(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}var g=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];r.ResponseValidator=function(){function y(w){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.MetadataService,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c.UserInfoService,S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:d.JoseUtil,R=arguments.length>4&&arguments[4]!==void 0?arguments[4]:u.TokenClient;if(p(this,y),!w)throw s.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=w,this._metadataService=new b(this._settings),this._userInfoService=new E(this._settings),this._joseUtil=S,this._tokenClient=new R(this._settings)}return y.prototype.validateSigninResponse=function(b,E){var S=this;return s.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(b,E).then(function(R){return s.Log.debug("ResponseValidator.validateSigninResponse: state processed"),S._validateTokens(b,R).then(function(F){return s.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),S._processClaims(b,F).then(function(M){return s.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),M})})})},y.prototype.validateSignoutResponse=function(b,E){return b.id!==E.state?(s.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(s.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),E.state=b.data,E.error?(s.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",E.error),Promise.reject(new l.ErrorResponse(E))):Promise.resolve(E))},y.prototype._processSigninParams=function(b,E){if(b.id!==E.state)return s.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!b.client_id)return s.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!b.authority)return s.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==b.authority)return s.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=b.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==b.client_id)return s.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=b.client_id;return s.Log.debug("ResponseValidator._processSigninParams: state validated"),E.state=b.data,E.error?(s.Log.warn("ResponseValidator._processSigninParams: Response was error",E.error),Promise.reject(new l.ErrorResponse(E))):b.nonce&&!E.id_token?(s.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!b.nonce&&E.id_token?(s.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):b.code_verifier&&!E.code?(s.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!b.code_verifier&&E.code?(s.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(E.scope||(E.scope=b.scope),Promise.resolve(E))},y.prototype._processClaims=function(b,E){var S=this;if(E.isOpenIdConnect){if(s.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),E.profile=this._filterProtocolClaims(E.profile),b.skipUserInfo!==!0&&this._settings.loadUserInfo&&E.access_token)return s.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(E.access_token).then(function(R){return s.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),R.sub!==E.profile.sub?(s.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(E.profile=S._mergeClaims(E.profile,R),s.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",E.profile),E)});s.Log.debug("ResponseValidator._processClaims: not loading user info")}else s.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(E)},y.prototype._mergeClaims=function(b,E){var S=Object.assign({},b);for(var R in E){var F=E[R];Array.isArray(F)||(F=[F]);for(var M=0;M<F.length;M++){var P=F[M];S[R]?Array.isArray(S[R])?S[R].indexOf(P)<0&&S[R].push(P):S[R]!==P&&((P===void 0?"undefined":o(P))==="object"&&this._settings.mergeClaims?S[R]=this._mergeClaims(S[R],P):S[R]=[S[R],P]):S[R]=P}}return S},y.prototype._filterProtocolClaims=function(b){s.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",b);var E=Object.assign({},b);return this._settings._filterProtocolClaims?(g.forEach(function(S){delete E[S]}),s.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",E)):s.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),E},y.prototype._validateTokens=function(b,E){return E.code?(s.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(b,E)):E.id_token?E.access_token?(s.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(b,E)):(s.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(b,E)):(s.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(E))},y.prototype._processCode=function(b,E){var S=this,R={client_id:b.client_id,client_secret:b.client_secret,code:E.code,redirect_uri:b.redirect_uri,code_verifier:b.code_verifier};return b.extraTokenParams&&o(b.extraTokenParams)==="object"&&Object.assign(R,b.extraTokenParams),this._tokenClient.exchangeCode(R).then(function(F){for(var M in F)E[M]=F[M];return E.id_token?(s.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),S._validateIdTokenAttributes(b,E)):(s.Log.debug("ResponseValidator._processCode: token response successful, returning response"),E)})},y.prototype._validateIdTokenAttributes=function(b,E){var S=this;return this._metadataService.getIssuer().then(function(R){var F=b.client_id,M=S._settings.clockSkew;return s.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",M),S._settings.getEpochTime().then(function(P){return S._joseUtil.validateJwtAttributes(E.id_token,R,F,M,P).then(function(D){return b.nonce&&b.nonce!==D.nonce?(s.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):D.sub?(E.profile=D,E):(s.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},y.prototype._validateIdTokenAndAccessToken=function(b,E){var S=this;return this._validateIdToken(b,E).then(function(R){return S._validateAccessToken(R)})},y.prototype._getSigningKeyForJwt=function(b){var E=this;return this._metadataService.getSigningKeys().then(function(S){var R=b.header.kid;if(!S)return s.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));s.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var F=void 0;if(R)F=S.filter(function(M){return M.kid===R})[0];else{if((S=E._filterByAlg(S,b.header.alg)).length>1)return s.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));F=S[0]}return Promise.resolve(F)})},y.prototype._getSigningKeyForJwtWithSingleRetry=function(b){var E=this;return this._getSigningKeyForJwt(b).then(function(S){return S?Promise.resolve(S):(E._metadataService.resetSigningKeys(),E._getSigningKeyForJwt(b))})},y.prototype._validateIdToken=function(b,E){var S=this;if(!b.nonce)return s.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var R=this._joseUtil.parseJwt(E.id_token);return R&&R.header&&R.payload?b.nonce!==R.payload.nonce?(s.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(F){return s.Log.debug("ResponseValidator._validateIdToken: Received issuer"),S._getSigningKeyForJwtWithSingleRetry(R).then(function(M){if(!M)return s.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var P=b.client_id,D=S._settings.clockSkew;return s.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",D),S._joseUtil.validateJwt(E.id_token,M,F,P,D).then(function(){return s.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),R.payload.sub?(E.profile=R.payload,E):(s.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(s.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",R),Promise.reject(new Error("Failed to parse id_token")))},y.prototype._filterByAlg=function(b,E){var S=null;if(E.startsWith("RS"))S="RSA";else if(E.startsWith("PS"))S="PS";else{if(!E.startsWith("ES"))return s.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",E),[];S="EC"}return s.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",S),b=b.filter(function(R){return R.kty===S}),s.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",S,b.length),b},y.prototype._validateAccessToken=function(b){if(!b.profile)return s.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!b.profile.at_hash)return s.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!b.id_token)return s.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var E=this._joseUtil.parseJwt(b.id_token);if(!E||!E.header)return s.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",E),Promise.reject(new Error("Failed to parse id_token"));var S=E.header.alg;if(!S||S.length!==5)return s.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",S),Promise.reject(new Error("Unsupported alg: "+S));var R=S.substr(2,3);if(!R)return s.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",S,R),Promise.reject(new Error("Unsupported alg: "+S));if((R=parseInt(R))!==256&&R!==384&&R!==512)return s.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",S,R),Promise.reject(new Error("Unsupported alg: "+S));var F="sha"+R,M=this._joseUtil.hashString(b.access_token,F);if(!M)return s.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",F),Promise.reject(new Error("Failed to validate at_hash"));var P=M.substr(0,M.length/2),D=this._joseUtil.hexToBase64Url(P);return D!==b.profile.at_hash?(s.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",D,b.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(s.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(b))},y}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.UserInfoService=void 0;var o=i(7),s=i(2),a=i(0),c=i(4);function u(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}r.UserInfoService=function(){function l(d){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.JsonService,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.MetadataService,y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:c.JoseUtil;if(u(this,l),!d)throw a.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=d,this._jsonService=new p(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new g(this._settings),this._joseUtil=y}return l.prototype.getClaims=function(p){var g=this;return p?this._metadataService.getUserInfoEndpoint().then(function(y){return a.Log.debug("UserInfoService.getClaims: received userinfo url",y),g._jsonService.getJson(y,p).then(function(w){return a.Log.debug("UserInfoService.getClaims: claims received",w),w})}):(a.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},l.prototype._getClaimsFromJwt=function(p){var g=this;try{var y=this._joseUtil.parseJwt(p.responseText);if(!y||!y.header||!y.payload)return a.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",y),Promise.reject(new Error("Failed to parse id_token"));var w=y.header.kid,b=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":b=this._metadataService.getIssuer();break;case"ANY":b=Promise.resolve(y.payload.iss);break;default:b=Promise.resolve(this._settings.userInfoJwtIssuer)}return b.then(function(E){return a.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+E),g._metadataService.getSigningKeys().then(function(S){if(!S)return a.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));a.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var R=void 0;if(w)R=S.filter(function(P){return P.kid===w})[0];else{if((S=g._filterByAlg(S,y.header.alg)).length>1)return a.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));R=S[0]}if(!R)return a.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var F=g._settings.client_id,M=g._settings.clockSkew;return a.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",M),g._joseUtil.validateJwt(p.responseText,R,E,F,M,void 0,!0).then(function(){return a.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),y.payload})})})}catch(E){return a.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",E.message),void reject(E)}},l.prototype._filterByAlg=function(p,g){var y=null;if(g.startsWith("RS"))y="RSA";else if(g.startsWith("PS"))y="PS";else{if(!g.startsWith("ES"))return a.Log.debug("UserInfoService._filterByAlg: alg not supported: ",g),[];y="EC"}return a.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",y),p=p.filter(function(w){return w.kty===y}),a.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",y,p.length),p},l}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AllowedSigningAlgs=r.b64tohex=r.hextob64u=r.crypto=r.X509=r.KeyUtil=r.jws=void 0;var o=i(27);r.jws=o.jws,r.KeyUtil=o.KEYUTIL,r.X509=o.X509,r.crypto=o.crypto,r.hextob64u=o.hextob64u,r.b64tohex=o.b64tohex,r.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(n,r,i){(function(o){Object.defineProperty(r,"__esModule",{value:!0});var s,a,c,u,l,d,p,g,y,w,b,E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},S={userAgent:!1},R={},F=F||(s=Math,c=(a={}).lib={},u=c.Base=function(){function h(){}return{extend:function(m){h.prototype=this;var v=new h;return m&&v.mixIn(m),v.hasOwnProperty("init")||(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var v in m)m.hasOwnProperty(v)&&(this[v]=m[v]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=c.WordArray=u.extend({init:function(f,m){f=this.words=f||[],this.sigBytes=m!=null?m:4*f.length},toString:function(f){return(f||p).stringify(this)},concat:function(f){var m=this.words,v=f.words,A=this.sigBytes,C=f.sigBytes;if(this.clamp(),A%4)for(var j=0;j<C;j++){var K=v[j>>>2]>>>24-j%4*8&255;m[A+j>>>2]|=K<<24-(A+j)%4*8}else for(j=0;j<C;j+=4)m[A+j>>>2]=v[j>>>2];return this.sigBytes+=C,this},clamp:function(){var f=this.words,m=this.sigBytes;f[m>>>2]&=4294967295<<32-m%4*8,f.length=s.ceil(m/4)},clone:function(){var f=u.clone.call(this);return f.words=this.words.slice(0),f},random:function(f){for(var m=[],v=0;v<f;v+=4)m.push(4294967296*s.random()|0);return new l.init(m,f)}}),d=a.enc={},p=d.Hex={stringify:function(f){for(var m=f.words,v=f.sigBytes,A=[],C=0;C<v;C++){var j=m[C>>>2]>>>24-C%4*8&255;A.push((j>>>4).toString(16)),A.push((15&j).toString(16))}return A.join("")},parse:function(f){for(var m=f.length,v=[],A=0;A<m;A+=2)v[A>>>3]|=parseInt(f.substr(A,2),16)<<24-A%8*4;return new l.init(v,m/2)}},g=d.Latin1={stringify:function(f){for(var m=f.words,v=f.sigBytes,A=[],C=0;C<v;C++){var j=m[C>>>2]>>>24-C%4*8&255;A.push(String.fromCharCode(j))}return A.join("")},parse:function(f){for(var m=f.length,v=[],A=0;A<m;A++)v[A>>>2]|=(255&f.charCodeAt(A))<<24-A%4*8;return new l.init(v,m)}},y=d.Utf8={stringify:function(f){try{return decodeURIComponent(escape(g.stringify(f)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(f){return g.parse(unescape(encodeURIComponent(f)))}},w=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(f){typeof f=="string"&&(f=y.parse(f)),this._data.concat(f),this._nDataBytes+=f.sigBytes},_process:function(f){var m=this._data,v=m.words,A=m.sigBytes,C=this.blockSize,j=A/(4*C),K=(j=f?s.ceil(j):s.max((0|j)-this._minBufferSize,0))*C,$=s.min(4*K,A);if(K){for(var H=0;H<K;H+=C)this._doProcessBlock(v,H);var W=v.splice(0,K);m.sigBytes-=$}return new l.init(W,$)},clone:function(){var f=u.clone.call(this);return f._data=this._data.clone(),f},_minBufferSize:0}),c.Hasher=w.extend({cfg:u.extend(),init:function(f){this.cfg=this.cfg.extend(f),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(f){return this._append(f),this._process(),this},finalize:function(f){return f&&this._append(f),this._doFinalize()},blockSize:16,_createHelper:function(f){return function(m,v){return new f.init(v).finalize(m)}},_createHmacHelper:function(f){return function(m,v){return new b.HMAC.init(f,v).finalize(m)}}}),b=a.algo={},a);(function(h){var f,m=(f=F).lib,v=m.Base,A=m.WordArray;(f=f.x64={}).Word=v.extend({init:function(j,K){this.high=j,this.low=K}}),f.WordArray=v.extend({init:function(j,K){j=this.words=j||[],this.sigBytes=K!=null?K:8*j.length},toX32:function(){for(var j=this.words,K=j.length,$=[],H=0;H<K;H++){var W=j[H];$.push(W.high),$.push(W.low)}return A.create($,this.sigBytes)},clone:function(){for(var j=v.clone.call(this),K=j.words=this.words.slice(0),$=K.length,H=0;H<$;H++)K[H]=K[H].clone();return j}})})(),function(){var h=F,f=h.lib.WordArray;h.enc.Base64={stringify:function(v){var A=v.words,C=v.sigBytes,j=this._map;v.clamp(),v=[];for(var K=0;K<C;K+=3)for(var $=(A[K>>>2]>>>24-K%4*8&255)<<16|(A[K+1>>>2]>>>24-(K+1)%4*8&255)<<8|A[K+2>>>2]>>>24-(K+2)%4*8&255,H=0;4>H&&K+.75*H<C;H++)v.push(j.charAt($>>>6*(3-H)&63));if(A=j.charAt(64))for(;v.length%4;)v.push(A);return v.join("")},parse:function(v){var A=v.length,C=this._map;(j=C.charAt(64))&&(j=v.indexOf(j))!=-1&&(A=j);for(var j=[],K=0,$=0;$<A;$++)if($%4){var H=C.indexOf(v.charAt($-1))<<$%4*2,W=C.indexOf(v.charAt($))>>>6-$%4*2;j[K>>>2]|=(H|W)<<24-K%4*8,K++}return f.create(j,K)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(h){for(var f=F,m=(A=f.lib).WordArray,v=A.Hasher,A=f.algo,C=[],j=[],K=function(he){return 4294967296*(he-(0|he))|0},$=2,H=0;64>H;){var W;e:{W=$;for(var V=h.sqrt(W),Z=2;Z<=V;Z++)if(!(W%Z)){W=!1;break e}W=!0}W&&(8>H&&(C[H]=K(h.pow($,.5))),j[H]=K(h.pow($,1/3)),H++),$++}var te=[];A=A.SHA256=v.extend({_doReset:function(){this._hash=new m.init(C.slice(0))},_doProcessBlock:function(he,pe){for(var U=this._hash.words,q=U[0],z=U[1],J=U[2],ue=U[3],ge=U[4],ke=U[5],_e=U[6],ht=U[7],Ie=0;64>Ie;Ie++){if(16>Ie)te[Ie]=0|he[pe+Ie];else{var Ke=te[Ie-15],rn=te[Ie-2];te[Ie]=((Ke<<25|Ke>>>7)^(Ke<<14|Ke>>>18)^Ke>>>3)+te[Ie-7]+((rn<<15|rn>>>17)^(rn<<13|rn>>>19)^rn>>>10)+te[Ie-16]}Ke=ht+((ge<<26|ge>>>6)^(ge<<21|ge>>>11)^(ge<<7|ge>>>25))+(ge&ke^~ge&_e)+j[Ie]+te[Ie],rn=((q<<30|q>>>2)^(q<<19|q>>>13)^(q<<10|q>>>22))+(q&z^q&J^z&J),ht=_e,_e=ke,ke=ge,ge=ue+Ke|0,ue=J,J=z,z=q,q=Ke+rn|0}U[0]=U[0]+q|0,U[1]=U[1]+z|0,U[2]=U[2]+J|0,U[3]=U[3]+ue|0,U[4]=U[4]+ge|0,U[5]=U[5]+ke|0,U[6]=U[6]+_e|0,U[7]=U[7]+ht|0},_doFinalize:function(){var he=this._data,pe=he.words,U=8*this._nDataBytes,q=8*he.sigBytes;return pe[q>>>5]|=128<<24-q%32,pe[14+(q+64>>>9<<4)]=h.floor(U/4294967296),pe[15+(q+64>>>9<<4)]=U,he.sigBytes=4*pe.length,this._process(),this._hash},clone:function(){var he=v.clone.call(this);return he._hash=this._hash.clone(),he}}),f.SHA256=v._createHelper(A),f.HmacSHA256=v._createHmacHelper(A)}(Math),function(){function h(){return v.create.apply(v,arguments)}for(var f=F,m=f.lib.Hasher,v=(C=f.x64).Word,A=C.WordArray,C=f.algo,j=[h(1116352408,3609767458),h(1899447441,602891725),h(3049323471,3964484399),h(3921009573,2173295548),h(961987163,4081628472),h(1508970993,3053834265),h(2453635748,2937671579),h(2870763221,3664609560),h(3624381080,2734883394),h(310598401,1164996542),h(607225278,1323610764),h(1426881987,3590304994),h(1925078388,4068182383),h(2162078206,991336113),h(2614888103,633803317),h(3248222580,3479774868),h(3835390401,2666613458),h(4022224774,944711139),h(264347078,2341262773),h(604807628,2007800933),h(770255983,1495990901),h(1249150122,1856431235),h(1555081692,3175218132),h(1996064986,2198950837),h(2554220882,3999719339),h(2821834349,766784016),h(2952996808,2566594879),h(3210313671,3203337956),h(3336571891,1034457026),h(3584528711,2466948901),h(113926993,3758326383),h(338241895,168717936),h(666307205,1188179964),h(773529912,1546045734),h(1294757372,1522805485),h(1396182291,2643833823),h(1695183700,2343527390),h(1986661051,1014477480),h(2177026350,1206759142),h(2456956037,344077627),h(2730485921,1290863460),h(2820302411,3158454273),h(3259730800,3505952657),h(3345764771,106217008),h(3516065817,3606008344),h(3600352804,1432725776),h(4094571909,1467031594),h(275423344,851169720),h(430227734,3100823752),h(506948616,1363258195),h(659060556,3750685593),h(883997877,3785050280),h(958139571,3318307427),h(1322822218,3812723403),h(1537002063,2003034995),h(1747873779,3602036899),h(1955562222,1575990012),h(2024104815,1125592928),h(2227730452,2716904306),h(2361852424,442776044),h(2428436474,593698344),h(2756734187,3733110249),h(3204031479,2999351573),h(3329325298,3815920427),h(3391569614,3928383900),h(3515267271,566280711),h(3940187606,3454069534),h(4118630271,4000239992),h(116418474,1914138554),h(174292421,2731055270),h(289380356,3203993006),h(460393269,320620315),h(685471733,587496836),h(852142971,1086792851),h(1017036298,365543100),h(1126000580,2618297676),h(1288033470,3409855158),h(1501505948,4234509866),h(1607167915,987167468),h(1816402316,1246189591)],K=[],$=0;80>$;$++)K[$]=h();C=C.SHA512=m.extend({_doReset:function(){this._hash=new A.init([new v.init(1779033703,4089235720),new v.init(3144134277,2227873595),new v.init(1013904242,4271175723),new v.init(2773480762,1595750129),new v.init(1359893119,2917565137),new v.init(2600822924,725511199),new v.init(528734635,4215389547),new v.init(1541459225,327033209)])},_doProcessBlock:function(W,V){for(var Z=(z=this._hash.words)[0],te=z[1],ce=z[2],he=z[3],pe=z[4],U=z[5],q=z[6],z=z[7],J=Z.high,ue=Z.low,ge=te.high,ke=te.low,_e=ce.high,ht=ce.low,Ie=he.high,Ke=he.low,rn=pe.high,_n=pe.low,fn=U.high,fi=U.low,$r=q.high,Zr=q.low,Un=z.high,sr=z.low,Dr=J,Qr=ue,Kc=ge,Ba=ke,Wc=_e,Ha=ht,dh=Ie,qc=Ke,Qi=rn,Ni=_n,Rl=fn,Vc=fi,kl=$r,Gc=Zr,fh=Un,zc=sr,Xi=0;80>Xi;Xi++){var Gs=K[Xi];if(16>Xi)var Bo=Gs.high=0|W[V+2*Xi],wn=Gs.low=0|W[V+2*Xi+1];else{Bo=((wn=(Bo=K[Xi-15]).high)>>>1|(Ho=Bo.low)<<31)^(wn>>>8|Ho<<24)^wn>>>7;var Ho=(Ho>>>1|wn<<31)^(Ho>>>8|wn<<24)^(Ho>>>7|wn<<25),Ka=((wn=(Ka=K[Xi-2]).high)>>>19|(ar=Ka.low)<<13)^(wn<<3|ar>>>29)^wn>>>6,ar=(ar>>>19|wn<<13)^(ar<<3|wn>>>29)^(ar>>>6|wn<<26),hh=(wn=K[Xi-7]).high,zs=(Ys=K[Xi-16]).high,Ys=Ys.low;Bo=(Bo=(Bo=Bo+hh+((wn=Ho+wn.low)>>>0<Ho>>>0?1:0))+Ka+((wn=wn+ar)>>>0<ar>>>0?1:0))+zs+((wn=wn+Ys)>>>0<Ys>>>0?1:0),Gs.high=Bo,Gs.low=wn}hh=Qi&Rl^~Qi&kl,Ys=Ni&Vc^~Ni&Gc,Gs=Dr&Kc^Dr&Wc^Kc&Wc;var OE=Qr&Ba^Qr&Ha^Ba&Ha,ME=(Ho=(Dr>>>28|Qr<<4)^(Dr<<30|Qr>>>2)^(Dr<<25|Qr>>>7),Ka=(Qr>>>28|Dr<<4)^(Qr<<30|Dr>>>2)^(Qr<<25|Dr>>>7),(ar=j[Xi]).high),ey=ar.low;zs=fh+((Qi>>>14|Ni<<18)^(Qi>>>18|Ni<<14)^(Qi<<23|Ni>>>9))+((ar=zc+((Ni>>>14|Qi<<18)^(Ni>>>18|Qi<<14)^(Ni<<23|Qi>>>9)))>>>0<zc>>>0?1:0),fh=kl,zc=Gc,kl=Rl,Gc=Vc,Rl=Qi,Vc=Ni,Qi=dh+(zs=(zs=(zs=zs+hh+((ar=ar+Ys)>>>0<Ys>>>0?1:0))+ME+((ar=ar+ey)>>>0<ey>>>0?1:0))+Bo+((ar=ar+wn)>>>0<wn>>>0?1:0))+((Ni=qc+ar|0)>>>0<qc>>>0?1:0)|0,dh=Wc,qc=Ha,Wc=Kc,Ha=Ba,Kc=Dr,Ba=Qr,Dr=zs+(Gs=Ho+Gs+((wn=Ka+OE)>>>0<Ka>>>0?1:0))+((Qr=ar+wn|0)>>>0<ar>>>0?1:0)|0}ue=Z.low=ue+Qr,Z.high=J+Dr+(ue>>>0<Qr>>>0?1:0),ke=te.low=ke+Ba,te.high=ge+Kc+(ke>>>0<Ba>>>0?1:0),ht=ce.low=ht+Ha,ce.high=_e+Wc+(ht>>>0<Ha>>>0?1:0),Ke=he.low=Ke+qc,he.high=Ie+dh+(Ke>>>0<qc>>>0?1:0),_n=pe.low=_n+Ni,pe.high=rn+Qi+(_n>>>0<Ni>>>0?1:0),fi=U.low=fi+Vc,U.high=fn+Rl+(fi>>>0<Vc>>>0?1:0),Zr=q.low=Zr+Gc,q.high=$r+kl+(Zr>>>0<Gc>>>0?1:0),sr=z.low=sr+zc,z.high=Un+fh+(sr>>>0<zc>>>0?1:0)},_doFinalize:function(){var W=this._data,V=W.words,Z=8*this._nDataBytes,te=8*W.sigBytes;return V[te>>>5]|=128<<24-te%32,V[30+(te+128>>>10<<5)]=Math.floor(Z/4294967296),V[31+(te+128>>>10<<5)]=Z,W.sigBytes=4*V.length,this._process(),this._hash.toX32()},clone:function(){var W=m.clone.call(this);return W._hash=this._hash.clone(),W},blockSize:32}),f.SHA512=m._createHelper(C),f.HmacSHA512=m._createHmacHelper(C)}(),function(){var h=F,f=(A=h.x64).Word,m=A.WordArray,v=(A=h.algo).SHA512,A=A.SHA384=v.extend({_doReset:function(){this._hash=new m.init([new f.init(3418070365,3238371032),new f.init(1654270250,914150663),new f.init(2438529370,812702999),new f.init(355462360,4144912697),new f.init(1731405415,4290775857),new f.init(2394180231,1750603025),new f.init(3675008525,1694076839),new f.init(1203062813,3204075428)])},_doFinalize:function(){var j=v._doFinalize.call(this);return j.sigBytes-=16,j}});h.SHA384=v._createHelper(A),h.HmacSHA384=v._createHmacHelper(A)}();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var M,P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function D(h){var f,m,v="";for(f=0;f+3<=h.length;f+=3)m=parseInt(h.substring(f,f+3),16),v+=P.charAt(m>>6)+P.charAt(63&m);for(f+1==h.length?(m=parseInt(h.substring(f,f+1),16),v+=P.charAt(m<<2)):f+2==h.length&&(m=parseInt(h.substring(f,f+2),16),v+=P.charAt(m>>2)+P.charAt((3&m)<<4)),"=";(3&v.length)>0;)v+="=";return v}function Y(h){var f,m,v,A="",C=0;for(f=0;f<h.length&&h.charAt(f)!="=";++f)(v=P.indexOf(h.charAt(f)))<0||(C==0?(A+=ne(v>>2),m=3&v,C=1):C==1?(A+=ne(m<<2|v>>4),m=15&v,C=2):C==2?(A+=ne(m),A+=ne(v>>2),m=3&v,C=3):(A+=ne(m<<2|v>>4),A+=ne(15&v),C=0));return C==1&&(A+=ne(m<<2)),A}function Q(h){var f,m=Y(h),v=new Array;for(f=0;2*f<m.length;++f)v[f]=parseInt(m.substring(2*f,2*f+2),16);return v}function B(h,f,m){h!=null&&(typeof h=="number"?this.fromNumber(h,f,m):f==null&&typeof h!="string"?this.fromString(h,256):this.fromString(h,f))}function se(){return new B(null)}S.appName=="Microsoft Internet Explorer"?(B.prototype.am=function(f,m,v,A,C,j){for(var K=32767&m,$=m>>15;--j>=0;){var H=32767&this[f],W=this[f++]>>15,V=$*H+W*K;C=((H=K*H+((32767&V)<<15)+v[A]+(1073741823&C))>>>30)+(V>>>15)+$*W+(C>>>30),v[A++]=1073741823&H}return C},M=30):S.appName!="Netscape"?(B.prototype.am=function(f,m,v,A,C,j){for(;--j>=0;){var K=m*this[f++]+v[A]+C;C=Math.floor(K/67108864),v[A++]=67108863&K}return C},M=26):(B.prototype.am=function(f,m,v,A,C,j){for(var K=16383&m,$=m>>14;--j>=0;){var H=16383&this[f],W=this[f++]>>14,V=$*H+W*K;C=((H=K*H+((16383&V)<<14)+v[A]+C)>>28)+(V>>14)+$*W,v[A++]=268435455&H}return C},M=28),B.prototype.DB=M,B.prototype.DM=(1<<M)-1,B.prototype.DV=1<<M,B.prototype.FV=Math.pow(2,52),B.prototype.F1=52-M,B.prototype.F2=2*M-52;var Ae,xe,re=new Array;for(Ae="0".charCodeAt(0),xe=0;xe<=9;++xe)re[Ae++]=xe;for(Ae="a".charCodeAt(0),xe=10;xe<36;++xe)re[Ae++]=xe;for(Ae="A".charCodeAt(0),xe=10;xe<36;++xe)re[Ae++]=xe;function ne(h){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(h)}function ye(h,f){var m=re[h.charCodeAt(f)];return m==null?-1:m}function we(h){var f=se();return f.fromInt(h),f}function qe(h){var f,m=1;return(f=h>>>16)!=0&&(h=f,m+=16),(f=h>>8)!=0&&(h=f,m+=8),(f=h>>4)!=0&&(h=f,m+=4),(f=h>>2)!=0&&(h=f,m+=2),(f=h>>1)!=0&&(h=f,m+=1),m}function ve(h){this.m=h}function Oe(h){this.m=h,this.mp=h.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<h.DB-15)-1,this.mt2=2*h.t}function Ge(h,f){return h&f}function Xe(h,f){return h|f}function nn(h,f){return h^f}function bt(h,f){return h&~f}function an(h){if(h==0)return-1;var f=0;return(65535&h)==0&&(h>>=16,f+=16),(255&h)==0&&(h>>=8,f+=8),(15&h)==0&&(h>>=4,f+=4),(3&h)==0&&(h>>=2,f+=2),(1&h)==0&&++f,f}function hr(h){for(var f=0;h!=0;)h&=h-1,++f;return f}function xn(){}function cn(h){return h}function yn(h){this.r2=se(),this.q3=se(),B.ONE.dlShiftTo(2*h.t,this.r2),this.mu=this.r2.divide(h),this.m=h}ve.prototype.convert=function(f){return f.s<0||f.compareTo(this.m)>=0?f.mod(this.m):f},ve.prototype.revert=function(f){return f},ve.prototype.reduce=function(f){f.divRemTo(this.m,null,f)},ve.prototype.mulTo=function(f,m,v){f.multiplyTo(m,v),this.reduce(v)},ve.prototype.sqrTo=function(f,m){f.squareTo(m),this.reduce(m)},Oe.prototype.convert=function(f){var m=se();return f.abs().dlShiftTo(this.m.t,m),m.divRemTo(this.m,null,m),f.s<0&&m.compareTo(B.ZERO)>0&&this.m.subTo(m,m),m},Oe.prototype.revert=function(f){var m=se();return f.copyTo(m),this.reduce(m),m},Oe.prototype.reduce=function(f){for(;f.t<=this.mt2;)f[f.t++]=0;for(var m=0;m<this.m.t;++m){var v=32767&f[m],A=v*this.mpl+((v*this.mph+(f[m]>>15)*this.mpl&this.um)<<15)&f.DM;for(f[v=m+this.m.t]+=this.m.am(0,A,f,m,0,this.m.t);f[v]>=f.DV;)f[v]-=f.DV,f[++v]++}f.clamp(),f.drShiftTo(this.m.t,f),f.compareTo(this.m)>=0&&f.subTo(this.m,f)},Oe.prototype.mulTo=function(f,m,v){f.multiplyTo(m,v),this.reduce(v)},Oe.prototype.sqrTo=function(f,m){f.squareTo(m),this.reduce(m)},B.prototype.copyTo=function(f){for(var m=this.t-1;m>=0;--m)f[m]=this[m];f.t=this.t,f.s=this.s},B.prototype.fromInt=function(f){this.t=1,this.s=f<0?-1:0,f>0?this[0]=f:f<-1?this[0]=f+this.DV:this.t=0},B.prototype.fromString=function(f,m){var v;if(m==16)v=4;else if(m==8)v=3;else if(m==256)v=8;else if(m==2)v=1;else if(m==32)v=5;else{if(m!=4)return void this.fromRadix(f,m);v=2}this.t=0,this.s=0;for(var A=f.length,C=!1,j=0;--A>=0;){var K=v==8?255&f[A]:ye(f,A);K<0?f.charAt(A)=="-"&&(C=!0):(C=!1,j==0?this[this.t++]=K:j+v>this.DB?(this[this.t-1]|=(K&(1<<this.DB-j)-1)<<j,this[this.t++]=K>>this.DB-j):this[this.t-1]|=K<<j,(j+=v)>=this.DB&&(j-=this.DB))}v==8&&(128&f[0])!=0&&(this.s=-1,j>0&&(this[this.t-1]|=(1<<this.DB-j)-1<<j)),this.clamp(),C&&B.ZERO.subTo(this,this)},B.prototype.clamp=function(){for(var f=this.s&this.DM;this.t>0&&this[this.t-1]==f;)--this.t},B.prototype.dlShiftTo=function(f,m){var v;for(v=this.t-1;v>=0;--v)m[v+f]=this[v];for(v=f-1;v>=0;--v)m[v]=0;m.t=this.t+f,m.s=this.s},B.prototype.drShiftTo=function(f,m){for(var v=f;v<this.t;++v)m[v-f]=this[v];m.t=Math.max(this.t-f,0),m.s=this.s},B.prototype.lShiftTo=function(f,m){var v,A=f%this.DB,C=this.DB-A,j=(1<<C)-1,K=Math.floor(f/this.DB),$=this.s<<A&this.DM;for(v=this.t-1;v>=0;--v)m[v+K+1]=this[v]>>C|$,$=(this[v]&j)<<A;for(v=K-1;v>=0;--v)m[v]=0;m[K]=$,m.t=this.t+K+1,m.s=this.s,m.clamp()},B.prototype.rShiftTo=function(f,m){m.s=this.s;var v=Math.floor(f/this.DB);if(v>=this.t)m.t=0;else{var A=f%this.DB,C=this.DB-A,j=(1<<A)-1;m[0]=this[v]>>A;for(var K=v+1;K<this.t;++K)m[K-v-1]|=(this[K]&j)<<C,m[K-v]=this[K]>>A;A>0&&(m[this.t-v-1]|=(this.s&j)<<C),m.t=this.t-v,m.clamp()}},B.prototype.subTo=function(f,m){for(var v=0,A=0,C=Math.min(f.t,this.t);v<C;)A+=this[v]-f[v],m[v++]=A&this.DM,A>>=this.DB;if(f.t<this.t){for(A-=f.s;v<this.t;)A+=this[v],m[v++]=A&this.DM,A>>=this.DB;A+=this.s}else{for(A+=this.s;v<f.t;)A-=f[v],m[v++]=A&this.DM,A>>=this.DB;A-=f.s}m.s=A<0?-1:0,A<-1?m[v++]=this.DV+A:A>0&&(m[v++]=A),m.t=v,m.clamp()},B.prototype.multiplyTo=function(f,m){var v=this.abs(),A=f.abs(),C=v.t;for(m.t=C+A.t;--C>=0;)m[C]=0;for(C=0;C<A.t;++C)m[C+v.t]=v.am(0,A[C],m,C,0,v.t);m.s=0,m.clamp(),this.s!=f.s&&B.ZERO.subTo(m,m)},B.prototype.squareTo=function(f){for(var m=this.abs(),v=f.t=2*m.t;--v>=0;)f[v]=0;for(v=0;v<m.t-1;++v){var A=m.am(v,m[v],f,2*v,0,1);(f[v+m.t]+=m.am(v+1,2*m[v],f,2*v+1,A,m.t-v-1))>=m.DV&&(f[v+m.t]-=m.DV,f[v+m.t+1]=1)}f.t>0&&(f[f.t-1]+=m.am(v,m[v],f,2*v,0,1)),f.s=0,f.clamp()},B.prototype.divRemTo=function(f,m,v){var A=f.abs();if(!(A.t<=0)){var C=this.abs();if(C.t<A.t)return m!=null&&m.fromInt(0),void(v!=null&&this.copyTo(v));v==null&&(v=se());var j=se(),K=this.s,$=f.s,H=this.DB-qe(A[A.t-1]);H>0?(A.lShiftTo(H,j),C.lShiftTo(H,v)):(A.copyTo(j),C.copyTo(v));var W=j.t,V=j[W-1];if(V!=0){var Z=V*(1<<this.F1)+(W>1?j[W-2]>>this.F2:0),te=this.FV/Z,ce=(1<<this.F1)/Z,he=1<<this.F2,pe=v.t,U=pe-W,q=m==null?se():m;for(j.dlShiftTo(U,q),v.compareTo(q)>=0&&(v[v.t++]=1,v.subTo(q,v)),B.ONE.dlShiftTo(W,q),q.subTo(j,j);j.t<W;)j[j.t++]=0;for(;--U>=0;){var z=v[--pe]==V?this.DM:Math.floor(v[pe]*te+(v[pe-1]+he)*ce);if((v[pe]+=j.am(0,z,v,U,0,W))<z)for(j.dlShiftTo(U,q),v.subTo(q,v);v[pe]<--z;)v.subTo(q,v)}m!=null&&(v.drShiftTo(W,m),K!=$&&B.ZERO.subTo(m,m)),v.t=W,v.clamp(),H>0&&v.rShiftTo(H,v),K<0&&B.ZERO.subTo(v,v)}}},B.prototype.invDigit=function(){if(this.t<1)return 0;var f=this[0];if((1&f)==0)return 0;var m=3&f;return(m=(m=(m=(m=m*(2-(15&f)*m)&15)*(2-(255&f)*m)&255)*(2-((65535&f)*m&65535))&65535)*(2-f*m%this.DV)%this.DV)>0?this.DV-m:-m},B.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},B.prototype.exp=function(f,m){if(f>4294967295||f<1)return B.ONE;var v=se(),A=se(),C=m.convert(this),j=qe(f)-1;for(C.copyTo(v);--j>=0;)if(m.sqrTo(v,A),(f&1<<j)>0)m.mulTo(A,C,v);else{var K=v;v=A,A=K}return m.revert(v)},B.prototype.toString=function(f){if(this.s<0)return"-"+this.negate().toString(f);var m;if(f==16)m=4;else if(f==8)m=3;else if(f==2)m=1;else if(f==32)m=5;else{if(f!=4)return this.toRadix(f);m=2}var v,A=(1<<m)-1,C=!1,j="",K=this.t,$=this.DB-K*this.DB%m;if(K-- >0)for($<this.DB&&(v=this[K]>>$)>0&&(C=!0,j=ne(v));K>=0;)$<m?(v=(this[K]&(1<<$)-1)<<m-$,v|=this[--K]>>($+=this.DB-m)):(v=this[K]>>($-=m)&A,$<=0&&($+=this.DB,--K)),v>0&&(C=!0),C&&(j+=ne(v));return C?j:"0"},B.prototype.negate=function(){var f=se();return B.ZERO.subTo(this,f),f},B.prototype.abs=function(){return this.s<0?this.negate():this},B.prototype.compareTo=function(f){var m=this.s-f.s;if(m!=0)return m;var v=this.t;if((m=v-f.t)!=0)return this.s<0?-m:m;for(;--v>=0;)if((m=this[v]-f[v])!=0)return m;return 0},B.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+qe(this[this.t-1]^this.s&this.DM)},B.prototype.mod=function(f){var m=se();return this.abs().divRemTo(f,null,m),this.s<0&&m.compareTo(B.ZERO)>0&&f.subTo(m,m),m},B.prototype.modPowInt=function(f,m){var v;return v=f<256||m.isEven()?new ve(m):new Oe(m),this.exp(f,v)},B.ZERO=we(0),B.ONE=we(1),xn.prototype.convert=cn,xn.prototype.revert=cn,xn.prototype.mulTo=function(f,m,v){f.multiplyTo(m,v)},xn.prototype.sqrTo=function(f,m){f.squareTo(m)},yn.prototype.convert=function(f){if(f.s<0||f.t>2*this.m.t)return f.mod(this.m);if(f.compareTo(this.m)<0)return f;var m=se();return f.copyTo(m),this.reduce(m),m},yn.prototype.revert=function(f){return f},yn.prototype.reduce=function(f){for(f.drShiftTo(this.m.t-1,this.r2),f.t>this.m.t+1&&(f.t=this.m.t+1,f.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);f.compareTo(this.r2)<0;)f.dAddOffset(1,this.m.t+1);for(f.subTo(this.r2,f);f.compareTo(this.m)>=0;)f.subTo(this.m,f)},yn.prototype.mulTo=function(f,m,v){f.multiplyTo(m,v),this.reduce(v)},yn.prototype.sqrTo=function(f,m){f.squareTo(m),this.reduce(m)};var Pt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],X=(1<<26)/Pt[Pt.length-1];/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function N(){this.i=0,this.j=0,this.S=new Array}B.prototype.chunkSize=function(f){return Math.floor(Math.LN2*this.DB/Math.log(f))},B.prototype.toRadix=function(f){if(f==null&&(f=10),this.signum()==0||f<2||f>36)return"0";var m=this.chunkSize(f),v=Math.pow(f,m),A=we(v),C=se(),j=se(),K="";for(this.divRemTo(A,C,j);C.signum()>0;)K=(v+j.intValue()).toString(f).substr(1)+K,C.divRemTo(A,C,j);return j.intValue().toString(f)+K},B.prototype.fromRadix=function(f,m){this.fromInt(0),m==null&&(m=10);for(var v=this.chunkSize(m),A=Math.pow(m,v),C=!1,j=0,K=0,$=0;$<f.length;++$){var H=ye(f,$);H<0?f.charAt($)=="-"&&this.signum()==0&&(C=!0):(K=m*K+H,++j>=v&&(this.dMultiply(A),this.dAddOffset(K,0),j=0,K=0))}j>0&&(this.dMultiply(Math.pow(m,j)),this.dAddOffset(K,0)),C&&B.ZERO.subTo(this,this)},B.prototype.fromNumber=function(f,m,v){if(typeof m=="number")if(f<2)this.fromInt(1);else for(this.fromNumber(f,v),this.testBit(f-1)||this.bitwiseTo(B.ONE.shiftLeft(f-1),Xe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(m);)this.dAddOffset(2,0),this.bitLength()>f&&this.subTo(B.ONE.shiftLeft(f-1),this);else{var A=new Array,C=7&f;A.length=1+(f>>3),m.nextBytes(A),C>0?A[0]&=(1<<C)-1:A[0]=0,this.fromString(A,256)}},B.prototype.bitwiseTo=function(f,m,v){var A,C,j=Math.min(f.t,this.t);for(A=0;A<j;++A)v[A]=m(this[A],f[A]);if(f.t<this.t){for(C=f.s&this.DM,A=j;A<this.t;++A)v[A]=m(this[A],C);v.t=this.t}else{for(C=this.s&this.DM,A=j;A<f.t;++A)v[A]=m(C,f[A]);v.t=f.t}v.s=m(this.s,f.s),v.clamp()},B.prototype.changeBit=function(f,m){var v=B.ONE.shiftLeft(f);return this.bitwiseTo(v,m,v),v},B.prototype.addTo=function(f,m){for(var v=0,A=0,C=Math.min(f.t,this.t);v<C;)A+=this[v]+f[v],m[v++]=A&this.DM,A>>=this.DB;if(f.t<this.t){for(A+=f.s;v<this.t;)A+=this[v],m[v++]=A&this.DM,A>>=this.DB;A+=this.s}else{for(A+=this.s;v<f.t;)A+=f[v],m[v++]=A&this.DM,A>>=this.DB;A+=f.s}m.s=A<0?-1:0,A>0?m[v++]=A:A<-1&&(m[v++]=this.DV+A),m.t=v,m.clamp()},B.prototype.dMultiply=function(f){this[this.t]=this.am(0,f-1,this,0,0,this.t),++this.t,this.clamp()},B.prototype.dAddOffset=function(f,m){if(f!=0){for(;this.t<=m;)this[this.t++]=0;for(this[m]+=f;this[m]>=this.DV;)this[m]-=this.DV,++m>=this.t&&(this[this.t++]=0),++this[m]}},B.prototype.multiplyLowerTo=function(f,m,v){var A,C=Math.min(this.t+f.t,m);for(v.s=0,v.t=C;C>0;)v[--C]=0;for(A=v.t-this.t;C<A;++C)v[C+this.t]=this.am(0,f[C],v,C,0,this.t);for(A=Math.min(f.t,m);C<A;++C)this.am(0,f[C],v,C,0,m-C);v.clamp()},B.prototype.multiplyUpperTo=function(f,m,v){--m;var A=v.t=this.t+f.t-m;for(v.s=0;--A>=0;)v[A]=0;for(A=Math.max(m-this.t,0);A<f.t;++A)v[this.t+A-m]=this.am(m-A,f[A],v,0,0,this.t+A-m);v.clamp(),v.drShiftTo(1,v)},B.prototype.modInt=function(f){if(f<=0)return 0;var m=this.DV%f,v=this.s<0?f-1:0;if(this.t>0)if(m==0)v=this[0]%f;else for(var A=this.t-1;A>=0;--A)v=(m*v+this[A])%f;return v},B.prototype.millerRabin=function(f){var m=this.subtract(B.ONE),v=m.getLowestSetBit();if(v<=0)return!1;var A=m.shiftRight(v);(f=f+1>>1)>Pt.length&&(f=Pt.length);for(var C=se(),j=0;j<f;++j){C.fromInt(Pt[Math.floor(Math.random()*Pt.length)]);var K=C.modPow(A,this);if(K.compareTo(B.ONE)!=0&&K.compareTo(m)!=0){for(var $=1;$++<v&&K.compareTo(m)!=0;)if((K=K.modPowInt(2,this)).compareTo(B.ONE)==0)return!1;if(K.compareTo(m)!=0)return!1}}return!0},B.prototype.clone=function(){var f=se();return this.copyTo(f),f},B.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},B.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},B.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},B.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},B.prototype.toByteArray=function(){var f=this.t,m=new Array;m[0]=this.s;var v,A=this.DB-f*this.DB%8,C=0;if(f-- >0)for(A<this.DB&&(v=this[f]>>A)!=(this.s&this.DM)>>A&&(m[C++]=v|this.s<<this.DB-A);f>=0;)A<8?(v=(this[f]&(1<<A)-1)<<8-A,v|=this[--f]>>(A+=this.DB-8)):(v=this[f]>>(A-=8)&255,A<=0&&(A+=this.DB,--f)),(128&v)!=0&&(v|=-256),C==0&&(128&this.s)!=(128&v)&&++C,(C>0||v!=this.s)&&(m[C++]=v);return m},B.prototype.equals=function(f){return this.compareTo(f)==0},B.prototype.min=function(f){return this.compareTo(f)<0?this:f},B.prototype.max=function(f){return this.compareTo(f)>0?this:f},B.prototype.and=function(f){var m=se();return this.bitwiseTo(f,Ge,m),m},B.prototype.or=function(f){var m=se();return this.bitwiseTo(f,Xe,m),m},B.prototype.xor=function(f){var m=se();return this.bitwiseTo(f,nn,m),m},B.prototype.andNot=function(f){var m=se();return this.bitwiseTo(f,bt,m),m},B.prototype.not=function(){for(var f=se(),m=0;m<this.t;++m)f[m]=this.DM&~this[m];return f.t=this.t,f.s=~this.s,f},B.prototype.shiftLeft=function(f){var m=se();return f<0?this.rShiftTo(-f,m):this.lShiftTo(f,m),m},B.prototype.shiftRight=function(f){var m=se();return f<0?this.lShiftTo(-f,m):this.rShiftTo(f,m),m},B.prototype.getLowestSetBit=function(){for(var f=0;f<this.t;++f)if(this[f]!=0)return f*this.DB+an(this[f]);return this.s<0?this.t*this.DB:-1},B.prototype.bitCount=function(){for(var f=0,m=this.s&this.DM,v=0;v<this.t;++v)f+=hr(this[v]^m);return f},B.prototype.testBit=function(f){var m=Math.floor(f/this.DB);return m>=this.t?this.s!=0:(this[m]&1<<f%this.DB)!=0},B.prototype.setBit=function(f){return this.changeBit(f,Xe)},B.prototype.clearBit=function(f){return this.changeBit(f,bt)},B.prototype.flipBit=function(f){return this.changeBit(f,nn)},B.prototype.add=function(f){var m=se();return this.addTo(f,m),m},B.prototype.subtract=function(f){var m=se();return this.subTo(f,m),m},B.prototype.multiply=function(f){var m=se();return this.multiplyTo(f,m),m},B.prototype.divide=function(f){var m=se();return this.divRemTo(f,m,null),m},B.prototype.remainder=function(f){var m=se();return this.divRemTo(f,null,m),m},B.prototype.divideAndRemainder=function(f){var m=se(),v=se();return this.divRemTo(f,m,v),new Array(m,v)},B.prototype.modPow=function(f,m){var v,A,C=f.bitLength(),j=we(1);if(C<=0)return j;v=C<18?1:C<48?3:C<144?4:C<768?5:6,A=C<8?new ve(m):m.isEven()?new yn(m):new Oe(m);var K=new Array,$=3,H=v-1,W=(1<<v)-1;if(K[1]=A.convert(this),v>1){var V=se();for(A.sqrTo(K[1],V);$<=W;)K[$]=se(),A.mulTo(V,K[$-2],K[$]),$+=2}var Z,te,ce=f.t-1,he=!0,pe=se();for(C=qe(f[ce])-1;ce>=0;){for(C>=H?Z=f[ce]>>C-H&W:(Z=(f[ce]&(1<<C+1)-1)<<H-C,ce>0&&(Z|=f[ce-1]>>this.DB+C-H)),$=v;(1&Z)==0;)Z>>=1,--$;if((C-=$)<0&&(C+=this.DB,--ce),he)K[Z].copyTo(j),he=!1;else{for(;$>1;)A.sqrTo(j,pe),A.sqrTo(pe,j),$-=2;$>0?A.sqrTo(j,pe):(te=j,j=pe,pe=te),A.mulTo(pe,K[Z],j)}for(;ce>=0&&(f[ce]&1<<C)==0;)A.sqrTo(j,pe),te=j,j=pe,pe=te,--C<0&&(C=this.DB-1,--ce)}return A.revert(j)},B.prototype.modInverse=function(f){var m=f.isEven();if(this.isEven()&&m||f.signum()==0)return B.ZERO;for(var v=f.clone(),A=this.clone(),C=we(1),j=we(0),K=we(0),$=we(1);v.signum()!=0;){for(;v.isEven();)v.rShiftTo(1,v),m?(C.isEven()&&j.isEven()||(C.addTo(this,C),j.subTo(f,j)),C.rShiftTo(1,C)):j.isEven()||j.subTo(f,j),j.rShiftTo(1,j);for(;A.isEven();)A.rShiftTo(1,A),m?(K.isEven()&&$.isEven()||(K.addTo(this,K),$.subTo(f,$)),K.rShiftTo(1,K)):$.isEven()||$.subTo(f,$),$.rShiftTo(1,$);v.compareTo(A)>=0?(v.subTo(A,v),m&&C.subTo(K,C),j.subTo($,j)):(A.subTo(v,A),m&&K.subTo(C,K),$.subTo(j,$))}return A.compareTo(B.ONE)!=0?B.ZERO:$.compareTo(f)>=0?$.subtract(f):$.signum()<0?($.addTo(f,$),$.signum()<0?$.add(f):$):$},B.prototype.pow=function(f){return this.exp(f,new xn)},B.prototype.gcd=function(f){var m=this.s<0?this.negate():this.clone(),v=f.s<0?f.negate():f.clone();if(m.compareTo(v)<0){var A=m;m=v,v=A}var C=m.getLowestSetBit(),j=v.getLowestSetBit();if(j<0)return m;for(C<j&&(j=C),j>0&&(m.rShiftTo(j,m),v.rShiftTo(j,v));m.signum()>0;)(C=m.getLowestSetBit())>0&&m.rShiftTo(C,m),(C=v.getLowestSetBit())>0&&v.rShiftTo(C,v),m.compareTo(v)>=0?(m.subTo(v,m),m.rShiftTo(1,m)):(v.subTo(m,v),v.rShiftTo(1,v));return j>0&&v.lShiftTo(j,v),v},B.prototype.isProbablePrime=function(f){var m,v=this.abs();if(v.t==1&&v[0]<=Pt[Pt.length-1]){for(m=0;m<Pt.length;++m)if(v[0]==Pt[m])return!0;return!1}if(v.isEven())return!1;for(m=1;m<Pt.length;){for(var A=Pt[m],C=m+1;C<Pt.length&&A<X;)A*=Pt[C++];for(A=v.modInt(A);m<C;)if(A%Pt[m++]==0)return!1}return v.millerRabin(f)},B.prototype.square=function(){var f=se();return this.squareTo(f),f},N.prototype.init=function(f){var m,v,A;for(m=0;m<256;++m)this.S[m]=m;for(v=0,m=0;m<256;++m)v=v+this.S[m]+f[m%f.length]&255,A=this.S[m],this.S[m]=this.S[v],this.S[v]=A;this.i=0,this.j=0},N.prototype.next=function(){var f;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,f=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=f,this.S[f+this.S[this.i]&255]};var O,G,ee;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function de(){(function(f){G[ee++]^=255&f,G[ee++]^=f>>8&255,G[ee++]^=f>>16&255,G[ee++]^=f>>24&255,ee>=256&&(ee-=256)})(new Date().getTime())}if(G==null){var me;if(G=new Array,ee=0,R!==void 0&&(R.crypto!==void 0||R.msCrypto!==void 0)){var Ne=R.crypto||R.msCrypto;if(Ne.getRandomValues){var et=new Uint8Array(32);for(Ne.getRandomValues(et),me=0;me<32;++me)G[ee++]=et[me]}else if(S.appName=="Netscape"&&S.appVersion<"5"){var St=R.crypto.random(32);for(me=0;me<St.length;++me)G[ee++]=255&St.charCodeAt(me)}}for(;ee<256;)me=Math.floor(65536*Math.random()),G[ee++]=me>>>8,G[ee++]=255&me;ee=0,de()}function lt(){if(O==null){for(de(),(O=function(){return new N}()).init(G),ee=0;ee<G.length;++ee)G[ee]=0;ee=0}return O.next()}function dt(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function pr(h,f){return new B(h,f)}function Ei(h,f,m){for(var v="",A=0;v.length<f;)v+=m(String.fromCharCode.apply(String,h.concat([(4278190080&A)>>24,(16711680&A)>>16,(65280&A)>>8,255&A]))),A+=1;return v}function Fe(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function un(h,f){this.x=f,this.q=h}function L(h,f,m,v){this.curve=h,this.x=f,this.y=m,this.z=v==null?B.ONE:v,this.zinv=null}function x(h,f,m){this.q=h,this.a=this.fromBigInteger(f),this.b=this.fromBigInteger(m),this.infinity=new L(this,null,null)}dt.prototype.nextBytes=function(f){var m;for(m=0;m<f.length;++m)f[m]=lt()},Fe.prototype.doPublic=function(f){return f.modPowInt(this.e,this.n)},Fe.prototype.setPublic=function(f,m){if(this.isPublic=!0,this.isPrivate=!1,typeof f!="string")this.n=f,this.e=m;else{if(!(f!=null&&m!=null&&f.length>0&&m.length>0))throw"Invalid RSA public key";this.n=pr(f,16),this.e=parseInt(m,16)}},Fe.prototype.encrypt=function(f){var m=function(j,K){if(K<j.length+11)throw"Message too long for RSA";for(var $=new Array,H=j.length-1;H>=0&&K>0;){var W=j.charCodeAt(H--);W<128?$[--K]=W:W>127&&W<2048?($[--K]=63&W|128,$[--K]=W>>6|192):($[--K]=63&W|128,$[--K]=W>>6&63|128,$[--K]=W>>12|224)}$[--K]=0;for(var V=new dt,Z=new Array;K>2;){for(Z[0]=0;Z[0]==0;)V.nextBytes(Z);$[--K]=Z[0]}return $[--K]=2,$[--K]=0,new B($)}(f,this.n.bitLength()+7>>3);if(m==null)return null;var v=this.doPublic(m);if(v==null)return null;var A=v.toString(16);return(1&A.length)==0?A:"0"+A},Fe.prototype.encryptOAEP=function(f,m,v){var A=function($,H,W,V){var Z=I.crypto.MessageDigest,te=I.crypto.Util,ce=null;if(W||(W="sha1"),typeof W=="string"&&(ce=Z.getCanonicalAlgName(W),V=Z.getHashLength(ce),W=function(_e){return Pi(te.hashHex(ho(_e),ce))}),$.length+2*V+2>H)throw"Message too long for RSA";var he,pe="";for(he=0;he<H-$.length-2*V-2;he+=1)pe+="\0";var U=W("")+pe+""+$,q=new Array(V);new dt().nextBytes(q);var z=Ei(q,U.length,W),J=[];for(he=0;he<U.length;he+=1)J[he]=U.charCodeAt(he)^z.charCodeAt(he);var ue=Ei(J,q.length,W),ge=[0];for(he=0;he<q.length;he+=1)ge[he+1]=q[he]^ue.charCodeAt(he);return new B(ge.concat(J))}(f,this.n.bitLength()+7>>3,m,v);if(A==null)return null;var C=this.doPublic(A);if(C==null)return null;var j=C.toString(16);return(1&j.length)==0?j:"0"+j},Fe.prototype.type="RSA",un.prototype.equals=function(f){return f==this||this.q.equals(f.q)&&this.x.equals(f.x)},un.prototype.toBigInteger=function(){return this.x},un.prototype.negate=function(){return new un(this.q,this.x.negate().mod(this.q))},un.prototype.add=function(f){return new un(this.q,this.x.add(f.toBigInteger()).mod(this.q))},un.prototype.subtract=function(f){return new un(this.q,this.x.subtract(f.toBigInteger()).mod(this.q))},un.prototype.multiply=function(f){return new un(this.q,this.x.multiply(f.toBigInteger()).mod(this.q))},un.prototype.square=function(){return new un(this.q,this.x.square().mod(this.q))},un.prototype.divide=function(f){return new un(this.q,this.x.multiply(f.toBigInteger().modInverse(this.q)).mod(this.q))},L.prototype.getX=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},L.prototype.getY=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},L.prototype.equals=function(f){return f==this||(this.isInfinity()?f.isInfinity():f.isInfinity()?this.isInfinity():!!f.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(f.z)).mod(this.curve.q).equals(B.ZERO)&&f.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(f.z)).mod(this.curve.q).equals(B.ZERO))},L.prototype.isInfinity=function(){return this.x==null&&this.y==null||this.z.equals(B.ZERO)&&!this.y.toBigInteger().equals(B.ZERO)},L.prototype.negate=function(){return new L(this.curve,this.x,this.y.negate(),this.z)},L.prototype.add=function(f){if(this.isInfinity())return f;if(f.isInfinity())return this;var m=f.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(f.z)).mod(this.curve.q),v=f.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(f.z)).mod(this.curve.q);if(B.ZERO.equals(v))return B.ZERO.equals(m)?this.twice():this.curve.getInfinity();var A=new B("3"),C=this.x.toBigInteger(),j=this.y.toBigInteger(),K=(f.x.toBigInteger(),f.y.toBigInteger(),v.square()),$=K.multiply(v),H=C.multiply(K),W=m.square().multiply(this.z),V=W.subtract(H.shiftLeft(1)).multiply(f.z).subtract($).multiply(v).mod(this.curve.q),Z=H.multiply(A).multiply(m).subtract(j.multiply($)).subtract(W.multiply(m)).multiply(f.z).add(m.multiply($)).mod(this.curve.q),te=$.multiply(this.z).multiply(f.z).mod(this.curve.q);return new L(this.curve,this.curve.fromBigInteger(V),this.curve.fromBigInteger(Z),te)},L.prototype.twice=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var f=new B("3"),m=this.x.toBigInteger(),v=this.y.toBigInteger(),A=v.multiply(this.z),C=A.multiply(v).mod(this.curve.q),j=this.curve.a.toBigInteger(),K=m.square().multiply(f);B.ZERO.equals(j)||(K=K.add(this.z.square().multiply(j)));var $=(K=K.mod(this.curve.q)).square().subtract(m.shiftLeft(3).multiply(C)).shiftLeft(1).multiply(A).mod(this.curve.q),H=K.multiply(f).multiply(m).subtract(C.shiftLeft(1)).shiftLeft(2).multiply(C).subtract(K.square().multiply(K)).mod(this.curve.q),W=A.square().multiply(A).shiftLeft(3).mod(this.curve.q);return new L(this.curve,this.curve.fromBigInteger($),this.curve.fromBigInteger(H),W)},L.prototype.multiply=function(f){if(this.isInfinity())return this;if(f.signum()==0)return this.curve.getInfinity();var m,v=f,A=v.multiply(new B("3")),C=this.negate(),j=this,K=this.curve.q.subtract(f),$=K.multiply(new B("3")),H=new L(this.curve,this.x,this.y),W=H.negate();for(m=A.bitLength()-2;m>0;--m){j=j.twice();var V=A.testBit(m);V!=v.testBit(m)&&(j=j.add(V?this:C))}for(m=$.bitLength()-2;m>0;--m){H=H.twice();var Z=$.testBit(m);Z!=K.testBit(m)&&(H=H.add(Z?H:W))}return j},L.prototype.multiplyTwo=function(f,m,v){var A;A=f.bitLength()>v.bitLength()?f.bitLength()-1:v.bitLength()-1;for(var C=this.curve.getInfinity(),j=this.add(m);A>=0;)C=C.twice(),f.testBit(A)?C=v.testBit(A)?C.add(j):C.add(this):v.testBit(A)&&(C=C.add(m)),--A;return C},x.prototype.getQ=function(){return this.q},x.prototype.getA=function(){return this.a},x.prototype.getB=function(){return this.b},x.prototype.equals=function(f){return f==this||this.q.equals(f.q)&&this.a.equals(f.a)&&this.b.equals(f.b)},x.prototype.getInfinity=function(){return this.infinity},x.prototype.fromBigInteger=function(f){return new un(this.q,f)},x.prototype.decodePointHex=function(f){switch(parseInt(f.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var m=(f.length-2)/2,v=f.substr(2,m),A=f.substr(m+2,m);return new L(this,this.fromBigInteger(new B(v,16)),this.fromBigInteger(new B(A,16)));default:return null}},un.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},L.prototype.getEncoded=function(h){var f=function(j,K){var $=j.toByteArrayUnsigned();if(K<$.length)$=$.slice($.length-K);else for(;K>$.length;)$.unshift(0);return $},m=this.getX().toBigInteger(),v=this.getY().toBigInteger(),A=f(m,32);return h?v.isEven()?A.unshift(2):A.unshift(3):(A.unshift(4),A=A.concat(f(v,32))),A},L.decodeFrom=function(h,f){f[0];var m=f.length-1,v=f.slice(1,1+m/2),A=f.slice(1+m/2,1+m);v.unshift(0),A.unshift(0);var C=new B(v),j=new B(A);return new L(h,h.fromBigInteger(C),h.fromBigInteger(j))},L.decodeFromHex=function(h,f){f.substr(0,2);var m=f.length-2,v=f.substr(2,m/2),A=f.substr(2+m/2,m/2),C=new B(v,16),j=new B(A,16);return new L(h,h.fromBigInteger(C),h.fromBigInteger(j))},L.prototype.add2D=function(h){if(this.isInfinity())return h;if(h.isInfinity())return this;if(this.x.equals(h.x))return this.y.equals(h.y)?this.twice():this.curve.getInfinity();var f=h.x.subtract(this.x),m=h.y.subtract(this.y).divide(f),v=m.square().subtract(this.x).subtract(h.x),A=m.multiply(this.x.subtract(v)).subtract(this.y);return new L(this.curve,v,A)},L.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var h=this.curve.fromBigInteger(B.valueOf(2)),f=this.curve.fromBigInteger(B.valueOf(3)),m=this.x.square().multiply(f).add(this.curve.a).divide(this.y.multiply(h)),v=m.square().subtract(this.x.multiply(h)),A=m.multiply(this.x.subtract(v)).subtract(this.y);return new L(this.curve,v,A)},L.prototype.multiply2D=function(h){if(this.isInfinity())return this;if(h.signum()==0)return this.curve.getInfinity();var f,m=h,v=m.multiply(new B("3")),A=this.negate(),C=this;for(f=v.bitLength()-2;f>0;--f){C=C.twice();var j=v.testBit(f);j!=m.testBit(f)&&(C=C.add2D(j?this:A))}return C},L.prototype.isOnCurve=function(){var h=this.getX().toBigInteger(),f=this.getY().toBigInteger(),m=this.curve.getA().toBigInteger(),v=this.curve.getB().toBigInteger(),A=this.curve.getQ(),C=f.multiply(f).mod(A),j=h.multiply(h).multiply(h).add(m.multiply(h)).add(v).mod(A);return C.equals(j)},L.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},L.prototype.validate=function(){var h=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var f=this.getX().toBigInteger(),m=this.getY().toBigInteger();if(f.compareTo(B.ONE)<0||f.compareTo(h.subtract(B.ONE))>0)throw new Error("x coordinate out of bounds");if(m.compareTo(B.ONE)<0||m.compareTo(h.subtract(B.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(h).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */var k=function(){var h=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),f=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),m={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function v(j,K,$){return K?m[K]:String.fromCharCode(parseInt($,16))}var A=new String(""),C=Object.hasOwnProperty;return function(j,K){var $,H,W=j.match(h),V=W[0],Z=!1;V==="{"?$={}:V==="["?$=[]:($=[],Z=!0);for(var te=[$],ce=1-Z,he=W.length;ce<he;++ce){var pe;switch((V=W[ce]).charCodeAt(0)){default:(pe=te[0])[H||pe.length]=+V,H=void 0;break;case 34:if((V=V.substring(1,V.length-1)).indexOf("\\")!==-1&&(V=V.replace(f,v)),pe=te[0],!H){if(!(pe instanceof Array)){H=V||A;break}H=pe.length}pe[H]=V,H=void 0;break;case 91:pe=te[0],te.unshift(pe[H||pe.length]=[]),H=void 0;break;case 93:te.shift();break;case 102:(pe=te[0])[H||pe.length]=!1,H=void 0;break;case 110:(pe=te[0])[H||pe.length]=null,H=void 0;break;case 116:(pe=te[0])[H||pe.length]=!0,H=void 0;break;case 123:pe=te[0],te.unshift(pe[H||pe.length]={}),H=void 0;break;case 125:te.shift()}}if(Z){if(te.length!==1)throw new Error;$=$[0]}else if(te.length)throw new Error;return K&&($=function U(q,z){var J=q[z];if(J&&(J===void 0?"undefined":E(J))==="object"){var ue=null;for(var ge in J)if(C.call(J,ge)&&J!==q){var ke=U(J,ge);ke!==void 0?J[ge]=ke:(ue||(ue=[]),ue.push(ge))}if(ue)for(var _e=ue.length;--_e>=0;)delete J[ue[_e]]}return K.call(q,z,J)}({"":$},"")),$}}();I!==void 0&&I||(r.KJUR=I={}),I.asn1!==void 0&&I.asn1||(I.asn1={}),I.asn1.ASN1Util=new function(){this.integerToByteHex=function(h){var f=h.toString(16);return f.length%2==1&&(f="0"+f),f},this.bigIntToMinTwosComplementsHex=function(h){var f=h.toString(16);if(f.substr(0,1)!="-")f.length%2==1?f="0"+f:f.match(/^[0-7]/)||(f="00"+f);else{var m=f.substr(1).length;m%2==1?m+=1:f.match(/^[0-7]/)||(m+=2);for(var v="",A=0;A<m;A++)v+="f";f=new B(v,16).xor(h).add(B.ONE).toString(16).replace(/^-/,"")}return f},this.getPEMStringFromHex=function(h,f){return di(h,f)},this.newObject=function(h){var f=I.asn1,m=f.ASN1Object,v=f.DERBoolean,A=f.DERInteger,C=f.DERBitString,j=f.DEROctetString,K=f.DERNull,$=f.DERObjectIdentifier,H=f.DEREnumerated,W=f.DERUTF8String,V=f.DERNumericString,Z=f.DERPrintableString,te=f.DERTeletexString,ce=f.DERIA5String,he=f.DERUTCTime,pe=f.DERGeneralizedTime,U=f.DERVisibleString,q=f.DERBMPString,z=f.DERSequence,J=f.DERSet,ue=f.DERTaggedObject,ge=f.ASN1Util.newObject;if(h instanceof f.ASN1Object)return h;var ke=Object.keys(h);if(ke.length!=1)throw new Error("key of param shall be only one.");var _e=ke[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+_e+":")==-1)throw new Error("undefined key: "+_e);if(_e=="bool")return new v(h[_e]);if(_e=="int")return new A(h[_e]);if(_e=="bitstr")return new C(h[_e]);if(_e=="octstr")return new j(h[_e]);if(_e=="null")return new K(h[_e]);if(_e=="oid")return new $(h[_e]);if(_e=="enum")return new H(h[_e]);if(_e=="utf8str")return new W(h[_e]);if(_e=="numstr")return new V(h[_e]);if(_e=="prnstr")return new Z(h[_e]);if(_e=="telstr")return new te(h[_e]);if(_e=="ia5str")return new ce(h[_e]);if(_e=="utctime")return new he(h[_e]);if(_e=="gentime")return new pe(h[_e]);if(_e=="visstr")return new U(h[_e]);if(_e=="bmpstr")return new q(h[_e]);if(_e=="asn1")return new m(h[_e]);if(_e=="seq"){for(var ht=h[_e],Ie=[],Ke=0;Ke<ht.length;Ke++){var rn=ge(ht[Ke]);Ie.push(rn)}return new z({array:Ie})}if(_e=="set"){for(ht=h[_e],Ie=[],Ke=0;Ke<ht.length;Ke++)rn=ge(ht[Ke]),Ie.push(rn);return new J({array:Ie})}if(_e=="tag"){var _n=h[_e];if(Object.prototype.toString.call(_n)==="[object Array]"&&_n.length==3){var fn=ge(_n[2]);return new ue({tag:_n[0],explicit:_n[1],obj:fn})}return new ue(_n)}},this.jsonToASN1HEX=function(h){return this.newObject(h).getEncodedHex()}},I.asn1.ASN1Util.oidHexToInt=function(h){for(var f="",m=parseInt(h.substr(0,2),16),v=(f=Math.floor(m/40)+"."+m%40,""),A=2;A<h.length;A+=2){var C=("00000000"+parseInt(h.substr(A,2),16).toString(2)).slice(-8);v+=C.substr(1,7),C.substr(0,1)=="0"&&(f=f+"."+new B(v,2).toString(10),v="")}return f},I.asn1.ASN1Util.oidIntToHex=function(h){var f=function($){var H=$.toString(16);return H.length==1&&(H="0"+H),H},m=function($){var H="",W=new B($,10).toString(2),V=7-W.length%7;V==7&&(V=0);for(var Z="",te=0;te<V;te++)Z+="0";for(W=Z+W,te=0;te<W.length-1;te+=7){var ce=W.substr(te,7);te!=W.length-7&&(ce="1"+ce),H+=f(parseInt(ce,2))}return H};if(!h.match(/^[0-9.]+$/))throw"malformed oid string: "+h;var v="",A=h.split("."),C=40*parseInt(A[0])+parseInt(A[1]);v+=f(C),A.splice(0,2);for(var j=0;j<A.length;j++)v+=m(A[j]);return v},I.asn1.ASN1Object=function(h){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+0+",v="+this.hV);var f=this.hV.length/2,m=f.toString(16);if(m.length%2==1&&(m="0"+m),f<128)return m;var v=m.length/2;if(v>15)throw"ASN.1 length too long to represent by 8x: n = "+f.toString(16);return(128+v).toString(16)+m},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(f){this.params=f},h!=null&&h.tlv!=null&&(this.hTLV=h.tlv,this.isModified=!1)},I.asn1.DERAbstractString=function(h){I.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(f){this.hTLV=null,this.isModified=!0,this.s=f,this.hV=ah(this.s).toLowerCase()},this.setStringHex=function(f){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=f},this.getFreshValueHex=function(){return this.hV},h!==void 0&&(typeof h=="string"?this.setString(h):h.str!==void 0?this.setString(h.str):h.hex!==void 0&&this.setStringHex(h.hex))},Dn(I.asn1.DERAbstractString,I.asn1.ASN1Object),I.asn1.DERAbstractTime=function(h){I.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(f){var m=f.getTime()+6e4*f.getTimezoneOffset();return new Date(m)},this.formatDate=function(f,m,v){var A=this.zeroPadding,C=this.localDateToUTC(f),j=String(C.getFullYear());m=="utc"&&(j=j.substr(2,2));var K=j+A(String(C.getMonth()+1),2)+A(String(C.getDate()),2)+A(String(C.getHours()),2)+A(String(C.getMinutes()),2)+A(String(C.getSeconds()),2);if(v===!0){var $=C.getMilliseconds();if($!=0){var H=A(String($),3);K=K+"."+(H=H.replace(/[0]+$/,""))}}return K+"Z"},this.zeroPadding=function(f,m){return f.length>=m?f:new Array(m-f.length+1).join("0")+f},this.getString=function(){return this.s},this.setString=function(f){this.hTLV=null,this.isModified=!0,this.s=f,this.hV=kt(f)},this.setByDateValue=function(f,m,v,A,C,j){var K=new Date(Date.UTC(f,m-1,v,A,C,j,0));this.setByDate(K)},this.getFreshValueHex=function(){return this.hV}},Dn(I.asn1.DERAbstractTime,I.asn1.ASN1Object),I.asn1.DERAbstractStructured=function(h){I.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(f){this.hTLV=null,this.isModified=!0,this.asn1Array=f},this.appendASN1Object=function(f){this.hTLV=null,this.isModified=!0,this.asn1Array.push(f)},this.asn1Array=new Array,h!==void 0&&h.array!==void 0&&(this.asn1Array=h.array)},Dn(I.asn1.DERAbstractStructured,I.asn1.ASN1Object),I.asn1.DERBoolean=function(h){I.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=h==0?"010100":"0101ff"},Dn(I.asn1.DERBoolean,I.asn1.ASN1Object),I.asn1.DERInteger=function(h){I.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(f){this.hTLV=null,this.isModified=!0,this.hV=I.asn1.ASN1Util.bigIntToMinTwosComplementsHex(f)},this.setByInteger=function(f){var m=new B(String(f),10);this.setByBigInteger(m)},this.setValueHex=function(f){this.hV=f},this.getFreshValueHex=function(){return this.hV},h!==void 0&&(h.bigint!==void 0?this.setByBigInteger(h.bigint):h.int!==void 0?this.setByInteger(h.int):typeof h=="number"?this.setByInteger(h):h.hex!==void 0&&this.setValueHex(h.hex))},Dn(I.asn1.DERInteger,I.asn1.ASN1Object),I.asn1.DERBitString=function(h){if(h!==void 0&&h.obj!==void 0){var f=I.asn1.ASN1Util.newObject(h.obj);h.hex="00"+f.getEncodedHex()}I.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(m){this.hTLV=null,this.isModified=!0,this.hV=m},this.setUnusedBitsAndHexValue=function(m,v){if(m<0||7<m)throw"unused bits shall be from 0 to 7: u = "+m;var A="0"+m;this.hTLV=null,this.isModified=!0,this.hV=A+v},this.setByBinaryString=function(m){var v=8-(m=m.replace(/0+$/,"")).length%8;v==8&&(v=0);for(var A=0;A<=v;A++)m+="0";var C="";for(A=0;A<m.length-1;A+=8){var j=m.substr(A,8),K=parseInt(j,2).toString(16);K.length==1&&(K="0"+K),C+=K}this.hTLV=null,this.isModified=!0,this.hV="0"+v+C},this.setByBooleanArray=function(m){for(var v="",A=0;A<m.length;A++)m[A]==1?v+="1":v+="0";this.setByBinaryString(v)},this.newFalseArray=function(m){for(var v=new Array(m),A=0;A<m;A++)v[A]=!1;return v},this.getFreshValueHex=function(){return this.hV},h!==void 0&&(typeof h=="string"&&h.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(h):h.hex!==void 0?this.setHexValueIncludingUnusedBits(h.hex):h.bin!==void 0?this.setByBinaryString(h.bin):h.array!==void 0&&this.setByBooleanArray(h.array))},Dn(I.asn1.DERBitString,I.asn1.ASN1Object),I.asn1.DEROctetString=function(h){if(h!==void 0&&h.obj!==void 0){var f=I.asn1.ASN1Util.newObject(h.obj);h.hex=f.getEncodedHex()}I.asn1.DEROctetString.superclass.constructor.call(this,h),this.hT="04"},Dn(I.asn1.DEROctetString,I.asn1.DERAbstractString),I.asn1.DERNull=function(){I.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Dn(I.asn1.DERNull,I.asn1.ASN1Object),I.asn1.DERObjectIdentifier=function(h){I.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(f){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=f},this.setValueOidString=function(f){var m=function(A){var C=function(Z){var te=Z.toString(16);return te.length==1&&(te="0"+te),te},j=function(Z){var te="",ce=parseInt(Z,10).toString(2),he=7-ce.length%7;he==7&&(he=0);for(var pe="",U=0;U<he;U++)pe+="0";for(ce=pe+ce,U=0;U<ce.length-1;U+=7){var q=ce.substr(U,7);U!=ce.length-7&&(q="1"+q),te+=C(parseInt(q,2))}return te};try{if(!A.match(/^[0-9.]+$/))return null;var K="",$=A.split("."),H=40*parseInt($[0],10)+parseInt($[1],10);K+=C(H),$.splice(0,2);for(var W=0;W<$.length;W++)K+=j($[W]);return K}catch{return null}}(f);if(m==null)throw new Error("malformed oid string: "+f);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=m},this.setValueName=function(f){var m=I.asn1.x509.OID.name2oid(f);if(m==="")throw new Error("DERObjectIdentifier oidName undefined: "+f);this.setValueOidString(m)},this.setValueNameOrOid=function(f){f.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(f):this.setValueName(f)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(f){typeof f=="string"?this.setValueNameOrOid(f):f.oid!==void 0?this.setValueNameOrOid(f.oid):f.name!==void 0?this.setValueNameOrOid(f.name):f.hex!==void 0&&this.setValueHex(f.hex)},h!==void 0&&this.setByParam(h)},Dn(I.asn1.DERObjectIdentifier,I.asn1.ASN1Object),I.asn1.DEREnumerated=function(h){I.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(f){this.hTLV=null,this.isModified=!0,this.hV=I.asn1.ASN1Util.bigIntToMinTwosComplementsHex(f)},this.setByInteger=function(f){var m=new B(String(f),10);this.setByBigInteger(m)},this.setValueHex=function(f){this.hV=f},this.getFreshValueHex=function(){return this.hV},h!==void 0&&(h.int!==void 0?this.setByInteger(h.int):typeof h=="number"?this.setByInteger(h):h.hex!==void 0&&this.setValueHex(h.hex))},Dn(I.asn1.DEREnumerated,I.asn1.ASN1Object),I.asn1.DERUTF8String=function(h){I.asn1.DERUTF8String.superclass.constructor.call(this,h),this.hT="0c"},Dn(I.asn1.DERUTF8String,I.asn1.DERAbstractString),I.asn1.DERNumericString=function(h){I.asn1.DERNumericString.superclass.constructor.call(this,h),this.hT="12"},Dn(I.asn1.DERNumericString,I.asn1.DERAbstractString),I.asn1.DERPrintableString=function(h){I.asn1.DERPrintableString.superclass.constructor.call(this,h),this.hT="13"},Dn(I.asn1.DERPrintableString,I.asn1.DERAbstractString),I.asn1.DERTeletexString=function(h){I.asn1.DERTeletexString.superclass.constructor.call(this,h),this.hT="14"},Dn(I.asn1.DERTeletexString,I.asn1.DERAbstractString),I.asn1.DERIA5String=function(h){I.asn1.DERIA5String.superclass.constructor.call(this,h),this.hT="16"},Dn(I.asn1.DERIA5String,I.asn1.DERAbstractString),I.asn1.DERVisibleString=function(h){I.asn1.DERIA5String.superclass.constructor.call(this,h),this.hT="1a"},Dn(I.asn1.DERVisibleString,I.asn1.DERAbstractString),I.asn1.DERBMPString=function(h){I.asn1.DERBMPString.superclass.constructor.call(this,h),this.hT="1e"},Dn(I.asn1.DERBMPString,I.asn1.DERAbstractString),I.asn1.DERUTCTime=function(h){I.asn1.DERUTCTime.superclass.constructor.call(this,h),this.hT="17",this.setByDate=function(f){this.hTLV=null,this.isModified=!0,this.date=f,this.s=this.formatDate(this.date,"utc"),this.hV=kt(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=kt(this.s)),this.hV},h!==void 0&&(h.str!==void 0?this.setString(h.str):typeof h=="string"&&h.match(/^[0-9]{12}Z$/)?this.setString(h):h.hex!==void 0?this.setStringHex(h.hex):h.date!==void 0&&this.setByDate(h.date))},Dn(I.asn1.DERUTCTime,I.asn1.DERAbstractTime),I.asn1.DERGeneralizedTime=function(h){I.asn1.DERGeneralizedTime.superclass.constructor.call(this,h),this.hT="18",this.withMillis=!1,this.setByDate=function(f){this.hTLV=null,this.isModified=!0,this.date=f,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=kt(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=kt(this.s)),this.hV},h!==void 0&&(h.str!==void 0?this.setString(h.str):typeof h=="string"&&h.match(/^[0-9]{14}Z$/)?this.setString(h):h.hex!==void 0?this.setStringHex(h.hex):h.date!==void 0&&this.setByDate(h.date),h.millis===!0&&(this.withMillis=!0))},Dn(I.asn1.DERGeneralizedTime,I.asn1.DERAbstractTime),I.asn1.DERSequence=function(h){I.asn1.DERSequence.superclass.constructor.call(this,h),this.hT="30",this.getFreshValueHex=function(){for(var f="",m=0;m<this.asn1Array.length;m++)f+=this.asn1Array[m].getEncodedHex();return this.hV=f,this.hV}},Dn(I.asn1.DERSequence,I.asn1.DERAbstractStructured),I.asn1.DERSet=function(h){I.asn1.DERSet.superclass.constructor.call(this,h),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var f=new Array,m=0;m<this.asn1Array.length;m++){var v=this.asn1Array[m];f.push(v.getEncodedHex())}return this.sortFlag==1&&f.sort(),this.hV=f.join(""),this.hV},h!==void 0&&h.sortflag!==void 0&&h.sortflag==0&&(this.sortFlag=!1)},Dn(I.asn1.DERSet,I.asn1.DERAbstractStructured),I.asn1.DERTaggedObject=function(h){I.asn1.DERTaggedObject.superclass.constructor.call(this);var f=I.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(m,v,A){this.hT=v,this.isExplicit=m,this.asn1Object=A,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=A.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,v),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(m){m.tag!=null&&(this.hT=m.tag),m.explicit!=null&&(this.isExplicit=m.explicit),m.tage!=null&&(this.hT=m.tage,this.isExplicit=!0),m.tagi!=null&&(this.hT=m.tagi,this.isExplicit=!1),m.obj!=null&&(m.obj instanceof f.ASN1Object?(this.asn1Object=m.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):E(m.obj)=="object"&&(this.asn1Object=f.ASN1Util.newObject(m.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},h!=null&&this.setByParam(h)},Dn(I.asn1.DERTaggedObject,I.asn1.ASN1Object);var I,ie,fe,oe=new function(){};function it(h){for(var f=new Array,m=0;m<h.length;m++)f[m]=h.charCodeAt(m);return f}function ln(h){for(var f="",m=0;m<h.length;m++)f+=String.fromCharCode(h[m]);return f}function Lt(h){for(var f="",m=0;m<h.length;m++){var v=h[m].toString(16);v.length==1&&(v="0"+v),f+=v}return f}function kt(h){return Lt(it(h))}function Ft(h){return h=(h=(h=h.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Hc(h){return h.length%4==2?h+="==":h.length%4==3&&(h+="="),h=(h=h.replace(/-/g,"+")).replace(/_/g,"/")}function rr(h){return h.length%2==1&&(h="0"+h),Ft(D(h))}function dn(h){return Y(Hc(h))}function ah(h){return Al(Il(h))}function ir(h){return decodeURIComponent(xl(h))}function Pi(h){for(var f="",m=0;m<h.length-1;m+=2)f+=String.fromCharCode(parseInt(h.substr(m,2),16));return f}function ho(h){for(var f="",m=0;m<h.length;m++)f+=("0"+h.charCodeAt(m).toString(16)).slice(-2);return f}function Hm(h){return D(h)}function Km(h){var f=Hm(h).replace(/(.{64})/g,`$1\r
`);return f=f.replace(/\r\n$/,"")}function Wm(h){return Y(h.replace(/[^0-9A-Za-z\/+=]*/g,""))}function di(h,f){return"-----BEGIN "+f+`-----\r
`+Km(h)+`\r
-----END `+f+`-----\r
`}function po(h,f){if(h.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+f;return Wm(h=f!==void 0?(h=h.replace(new RegExp("^[^]*-----BEGIN "+f+"-----"),"")).replace(new RegExp("-----END "+f+"-----[^]*$"),""):(h=h.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function ch(h){var f,m,v,A,C,j,K,$,H,W,V;if(V=h.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return $=V[1],f=parseInt($),$.length===2&&(50<=f&&f<100?f=1900+f:0<=f&&f<50&&(f=2e3+f)),m=parseInt(V[2])-1,v=parseInt(V[3]),A=parseInt(V[4]),C=parseInt(V[5]),j=parseInt(V[6]),K=0,(H=V[7])!==""&&(W=(H.substr(1)+"00").substr(0,3),K=parseInt(W)),Date.UTC(f,m,v,A,C,j,K);throw"unsupported zulu format: "+h}function qm(h){return~~(ch(h)/1e3)}function Al(h){return h.replace(/%/g,"")}function xl(h){return h.replace(/(..)/g,"%$1")}function Vm(h){var f="malformed IPv6 address";if(!h.match(/^[0-9A-Fa-f:]+$/))throw f;var m=(h=h.toLowerCase()).split(":").length-1;if(m<2)throw f;var v=":".repeat(7-m+2),A=(h=h.replace("::",v)).split(":");if(A.length!=8)throw f;for(var C=0;C<8;C++)A[C]=("0000"+A[C]).slice(-4);return A.join("")}function Gm(h){if(!h.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var f=(h=h.toLowerCase()).match(/.{1,4}/g),m=0;m<8;m++)f[m]=f[m].replace(/^0+/,""),f[m]==""&&(f[m]="0");var v=(h=":"+f.join(":")+":").match(/:(0:){2,}/g);if(v===null)return h.slice(1,-1);var A="";for(m=0;m<v.length;m++)v[m].length>A.length&&(A=v[m]);return(h=h.replace(A,"::")).slice(1,-1)}function uh(h){var f="malformed hex value";if(!h.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw f;if(h.length!=8)return h.length==32?Gm(h):h;try{return parseInt(h.substr(0,2),16)+"."+parseInt(h.substr(2,2),16)+"."+parseInt(h.substr(4,2),16)+"."+parseInt(h.substr(6,2),16)}catch{throw f}}function zm(h){return h.match(/.{4}/g).map(function(m){var v=parseInt(m.substr(0,2),16),A=parseInt(m.substr(2),16);if(v==0&A<128)return String.fromCharCode(A);if(v<8){var C=128|63&A;return ir((192|(7&v)<<3|(192&A)>>6).toString(16)+C.toString(16))}C=128|(15&v)<<2|(192&A)>>6;var j=128|63&A;return ir((224|(240&v)>>4).toString(16)+C.toString(16)+j.toString(16))}).join("")}function Il(h){for(var f=encodeURIComponent(h),m="",v=0;v<f.length;v++)f[v]=="%"?(m+=f.substr(v,3),v+=2):m=m+"%"+kt(f[v]);return m}function Ym(h){return!(h.length%2!=0||!h.match(/^[0-9a-f]+$/)&&!h.match(/^[0-9A-F]+$/))}function lh(h){return h.length%2==1?"0"+h:h.substr(0,1)>"7"?"00"+h:h}oe.getLblen=function(h,f){if(h.substr(f+2,1)!="8")return 1;var m=parseInt(h.substr(f+3,1));return m==0?-1:0<m&&m<10?m+1:-2},oe.getL=function(h,f){var m=oe.getLblen(h,f);return m<1?"":h.substr(f+2,2*m)},oe.getVblen=function(h,f){var m;return(m=oe.getL(h,f))==""?-1:(m.substr(0,1)==="8"?new B(m.substr(2),16):new B(m,16)).intValue()},oe.getVidx=function(h,f){var m=oe.getLblen(h,f);return m<0?m:f+2*(m+1)},oe.getV=function(h,f){var m=oe.getVidx(h,f),v=oe.getVblen(h,f);return h.substr(m,2*v)},oe.getTLV=function(h,f){return h.substr(f,2)+oe.getL(h,f)+oe.getV(h,f)},oe.getTLVblen=function(h,f){return 2+2*oe.getLblen(h,f)+2*oe.getVblen(h,f)},oe.getNextSiblingIdx=function(h,f){return oe.getVidx(h,f)+2*oe.getVblen(h,f)},oe.getChildIdx=function(h,f){var m,v,A,C=oe,j=[];m=C.getVidx(h,f),v=2*C.getVblen(h,f),h.substr(f,2)=="03"&&(m+=2,v-=2),A=0;for(var K=m;A<=v;){var $=C.getTLVblen(h,K);if((A+=$)<=v&&j.push(K),K+=$,A>=v)break}return j},oe.getNthChildIdx=function(h,f,m){return oe.getChildIdx(h,f)[m]},oe.getIdxbyList=function(h,f,m,v){var A,C,j=oe;return m.length==0?v!==void 0&&h.substr(f,2)!==v?-1:f:(A=m.shift())>=(C=j.getChildIdx(h,f)).length?-1:j.getIdxbyList(h,C[A],m,v)},oe.getIdxbyListEx=function(h,f,m,v){var A,C,j=oe;if(m.length==0)return v!==void 0&&h.substr(f,2)!==v?-1:f;A=m.shift(),C=j.getChildIdx(h,f);for(var K=0,$=0;$<C.length;$++){var H=h.substr(C[$],2);if(typeof A=="number"&&!j.isContextTag(H)&&K==A||typeof A=="string"&&j.isContextTag(H,A))return j.getIdxbyListEx(h,C[$],m,v);j.isContextTag(H)||K++}return-1},oe.getTLVbyList=function(h,f,m,v){var A=oe,C=A.getIdxbyList(h,f,m,v);return C==-1||C>=h.length?null:A.getTLV(h,C)},oe.getTLVbyListEx=function(h,f,m,v){var A=oe,C=A.getIdxbyListEx(h,f,m,v);return C==-1?null:A.getTLV(h,C)},oe.getVbyList=function(h,f,m,v,A){var C,j,K=oe;return(C=K.getIdxbyList(h,f,m,v))==-1||C>=h.length?null:(j=K.getV(h,C),A===!0&&(j=j.substr(2)),j)},oe.getVbyListEx=function(h,f,m,v,A){var C,j,K=oe;return(C=K.getIdxbyListEx(h,f,m,v))==-1?null:(j=K.getV(h,C),h.substr(C,2)=="03"&&A!==!1&&(j=j.substr(2)),j)},oe.getInt=function(h,f,m){m==null&&(m=-1);try{var v=h.substr(f,2);if(v!="02"&&v!="03")return m;var A=oe.getV(h,f);return v=="02"?parseInt(A,16):function(j){try{var K=j.substr(0,2);if(K=="00")return parseInt(j.substr(2),16);var $=parseInt(K,16),H=j.substr(2),W=parseInt(H,16).toString(2);return W=="0"&&(W="00000000"),W=W.slice(0,0-$),parseInt(W,2)}catch{return-1}}(A)}catch{return m}},oe.getOID=function(h,f,m){m==null&&(m=null);try{return h.substr(f,2)!="06"?m:function(A){if(!Ym(A))return null;try{var C=[],j=A.substr(0,2),K=parseInt(j,16);C[0]=new String(Math.floor(K/40)),C[1]=new String(K%40);for(var $=A.substr(2),H=[],W=0;W<$.length/2;W++)H.push(parseInt($.substr(2*W,2),16));var V=[],Z="";for(W=0;W<H.length;W++)128&H[W]?Z+=Jm((127&H[W]).toString(2),7):(Z+=Jm((127&H[W]).toString(2),7),V.push(new String(parseInt(Z,2))),Z="");var te=C.join(".");return V.length>0&&(te=te+"."+V.join(".")),te}catch{return null}}(oe.getV(h,f))}catch{return m}},oe.getOIDName=function(h,f,m){m==null&&(m=null);try{var v=oe.getOID(h,f,m);if(v==m)return m;var A=I.asn1.x509.OID.oid2name(v);return A==""?v:A}catch{return m}},oe.getString=function(h,f,m){m==null&&(m=null);try{return Pi(oe.getV(h,f))}catch{return m}},oe.hextooidstr=function(h){var f=function(Z,te){return Z.length>=te?Z:new Array(te-Z.length+1).join("0")+Z},m=[],v=h.substr(0,2),A=parseInt(v,16);m[0]=new String(Math.floor(A/40)),m[1]=new String(A%40);for(var C=h.substr(2),j=[],K=0;K<C.length/2;K++)j.push(parseInt(C.substr(2*K,2),16));var $=[],H="";for(K=0;K<j.length;K++)128&j[K]?H+=f((127&j[K]).toString(2),7):(H+=f((127&j[K]).toString(2),7),$.push(new String(parseInt(H,2))),H="");var W=m.join(".");return $.length>0&&(W=W+"."+$.join(".")),W},oe.dump=function(h,f,m,v){var A=oe,C=A.getV,j=A.dump,K=A.getChildIdx,$=h;h instanceof I.asn1.ASN1Object&&($=h.getEncodedHex());var H=function(_e,ht){return _e.length<=2*ht?_e:_e.substr(0,ht)+"..(total "+_e.length/2+"bytes).."+_e.substr(_e.length-ht,ht)};f===void 0&&(f={ommit_long_octet:32}),m===void 0&&(m=0),v===void 0&&(v="");var W,V=f.ommit_long_octet;if((W=$.substr(m,2))=="01")return(Z=C($,m))=="00"?v+`BOOLEAN FALSE
`:v+`BOOLEAN TRUE
`;if(W=="02")return v+"INTEGER "+H(Z=C($,m),V)+`
`;if(W=="03"){var Z=C($,m);if(A.isASN1HEX(Z.substr(2))){var te=v+`BITSTRING, encapsulates
`;return te+=j(Z.substr(2),f,0,v+"  ")}return v+"BITSTRING "+H(Z,V)+`
`}if(W=="04")return Z=C($,m),A.isASN1HEX(Z)?(te=v+`OCTETSTRING, encapsulates
`,te+=j(Z,f,0,v+"  ")):v+"OCTETSTRING "+H(Z,V)+`
`;if(W=="05")return v+`NULL
`;if(W=="06"){var ce=C($,m),he=I.asn1.ASN1Util.oidHexToInt(ce),pe=I.asn1.x509.OID.oid2name(he),U=he.replace(/\./g," ");return pe!=""?v+"ObjectIdentifier "+pe+" ("+U+`)
`:v+"ObjectIdentifier ("+U+`)
`}if(W=="0a")return v+"ENUMERATED "+parseInt(C($,m))+`
`;if(W=="0c")return v+"UTF8String '"+ir(C($,m))+`'
`;if(W=="13")return v+"PrintableString '"+ir(C($,m))+`'
`;if(W=="14")return v+"TeletexString '"+ir(C($,m))+`'
`;if(W=="16")return v+"IA5String '"+ir(C($,m))+`'
`;if(W=="17")return v+"UTCTime "+ir(C($,m))+`
`;if(W=="18")return v+"GeneralizedTime "+ir(C($,m))+`
`;if(W=="1a")return v+"VisualString '"+ir(C($,m))+`'
`;if(W=="1e")return v+"BMPString '"+zm(C($,m))+`'
`;if(W=="30"){if($.substr(m,4)=="3000")return v+`SEQUENCE {}
`;te=v+`SEQUENCE
`;var q=f;if(((ue=K($,m)).length==2||ue.length==3)&&$.substr(ue[0],2)=="06"&&$.substr(ue[ue.length-1],2)=="04"){pe=A.oidname(C($,ue[0]));var z=JSON.parse(JSON.stringify(f));z.x509ExtName=pe,q=z}for(var J=0;J<ue.length;J++)te+=j($,q,ue[J],v+"  ");return te}if(W=="31"){te=v+`SET
`;var ue=K($,m);for(J=0;J<ue.length;J++)te+=j($,f,ue[J],v+"  ");return te}if((128&(W=parseInt(W,16)))!=0){var ge=31&W;if((32&W)!=0){for(te=v+"["+ge+`]
`,ue=K($,m),J=0;J<ue.length;J++)te+=j($,f,ue[J],v+"  ");return te}if(Z=C($,m),oe.isASN1HEX(Z)){var te=v+"["+ge+`]
`;return te+=j(Z,f,0,v+"  ")}return(Z.substr(0,8)=="68747470"||f.x509ExtName==="subjectAltName"&&ge==2)&&(Z=ir(Z)),te=v+"["+ge+"] "+Z+`
`}return v+"UNKNOWN("+W+") "+C($,m)+`
`},oe.isContextTag=function(h,f){var m,v;h=h.toLowerCase();try{m=parseInt(h,16)}catch{return-1}if(f===void 0)return(192&m)==128;try{return f.match(/^\[[0-9]+\]$/)!=null&&!((v=parseInt(f.substr(1,f.length-1),10))>31)&&(192&m)==128&&(31&m)==v}catch{return!1}},oe.isASN1HEX=function(h){var f=oe;if(h.length%2==1)return!1;var m=f.getVblen(h,0),v=h.substr(0,2),A=f.getL(h,0);return h.length-v.length-A.length==2*m},oe.checkStrictDER=function(h,f,m,v,A){var C=oe;if(m===void 0){if(typeof h!="string")throw new Error("not hex string");if(h=h.toLowerCase(),!I.lang.String.isHex(h))throw new Error("not hex string");m=h.length,A=(v=h.length/2)<128?1:Math.ceil(v.toString(16))+1}if(C.getL(h,f).length>2*A)throw new Error("L of TLV too long: idx="+f);var j=C.getVblen(h,f);if(j>v)throw new Error("value of L too long than hex: idx="+f);var K=C.getTLV(h,f),$=K.length-2-C.getL(h,f).length;if($!==2*j)throw new Error("V string length and L's value not the same:"+$+"/"+2*j);if(f===0&&h.length!=K.length)throw new Error("total length and TLV length unmatch:"+h.length+"!="+K.length);var H=h.substr(f,2);if(H==="02"){var W=C.getVidx(h,f);if(h.substr(W,2)=="00"&&h.charCodeAt(W+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(H,16)){for(var V=C.getVblen(h,f),Z=0,te=C.getChildIdx(h,f),ce=0;ce<te.length;ce++)Z+=C.getTLV(h,te[ce]).length,C.checkStrictDER(h,te[ce],m,v,A);if(2*V!=Z)throw new Error("sum of children's TLV length and L unmatch: "+2*V+"!="+Z)}},oe.oidname=function(h){var f=I.asn1;I.lang.String.isHex(h)&&(h=f.ASN1Util.oidHexToInt(h));var m=f.x509.OID.oid2name(h);return m===""&&(m=h),m},I!==void 0&&I||(r.KJUR=I={}),I.lang!==void 0&&I.lang||(I.lang={}),I.lang.String=function(){},typeof o=="function"?(r.utf8tob64u=ie=function(f){return Ft(o.from(f,"utf8").toString("base64"))},r.b64utoutf8=fe=function(f){return o.from(Hc(f),"base64").toString("utf8")}):(r.utf8tob64u=ie=function(f){return rr(Al(Il(f)))},r.b64utoutf8=fe=function(f){return decodeURIComponent(xl(dn(f)))}),I.lang.String.isInteger=function(h){return!!h.match(/^[0-9]+$/)||!!h.match(/^-[0-9]+$/)},I.lang.String.isHex=function(h){return Ym(h)},I.lang.String.isBase64=function(h){return!(!(h=h.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||h.length%4!=0)},I.lang.String.isBase64URL=function(h){return!h.match(/[+/=]/)&&(h=Hc(h),I.lang.String.isBase64(h))},I.lang.String.isIntegerArray=function(h){return!!(h=h.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},I.lang.String.isPrintable=function(h){return h.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},I.lang.String.isIA5=function(h){return h.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},I.lang.String.isMail=function(h){return h.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var Jm=function(f,m,v){return v==null&&(v="0"),f.length>=m?f:new Array(m-f.length+1).join(v)+f};function Dn(h,f){var m=function(){};m.prototype=f.prototype,h.prototype=new m,h.prototype.constructor=h,h.superclass=f.prototype,f.prototype.constructor==Object.prototype.constructor&&(f.prototype.constructor=f)}I!==void 0&&I||(r.KJUR=I={}),I.crypto!==void 0&&I.crypto||(I.crypto={}),I.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:F.algo.MD5,sha1:F.algo.SHA1,sha224:F.algo.SHA224,sha256:F.algo.SHA256,sha384:F.algo.SHA384,sha512:F.algo.SHA512,ripemd160:F.algo.RIPEMD160},this.getDigestInfoHex=function(h,f){if(this.DIGESTINFOHEAD[f]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+f;return this.DIGESTINFOHEAD[f]+h},this.getPaddedDigestInfoHex=function(h,f,m){var v=this.getDigestInfoHex(h,f),A=m/4;if(v.length+22>A)throw"key is too short for SigAlg: keylen="+m+","+f;for(var C="0001",j="00"+v,K="",$=A-C.length-j.length,H=0;H<$;H+=2)K+="ff";return C+K+j},this.hashString=function(h,f){return new I.crypto.MessageDigest({alg:f}).digestString(h)},this.hashHex=function(h,f){return new I.crypto.MessageDigest({alg:f}).digestHex(h)},this.sha1=function(h){return this.hashString(h,"sha1")},this.sha256=function(h){return this.hashString(h,"sha256")},this.sha256Hex=function(h){return this.hashHex(h,"sha256")},this.sha512=function(h){return this.hashString(h,"sha512")},this.sha512Hex=function(h){return this.hashHex(h,"sha512")},this.isKey=function(h){return h instanceof Fe||h instanceof I.crypto.DSA||h instanceof I.crypto.ECDSA}},I.crypto.Util.md5=function(h){return new I.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(h)},I.crypto.Util.ripemd160=function(h){return new I.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(h)},I.crypto.Util.SECURERANDOMGEN=new dt,I.crypto.Util.getRandomHexOfNbytes=function(h){var f=new Array(h);return I.crypto.Util.SECURERANDOMGEN.nextBytes(f),Lt(f)},I.crypto.Util.getRandomBigIntegerOfNbytes=function(h){return new B(I.crypto.Util.getRandomHexOfNbytes(h),16)},I.crypto.Util.getRandomHexOfNbits=function(h){var f=h%8,m=new Array((h-f)/8+1);return I.crypto.Util.SECURERANDOMGEN.nextBytes(m),m[0]=(255<<f&255^255)&m[0],Lt(m)},I.crypto.Util.getRandomBigIntegerOfNbits=function(h){return new B(I.crypto.Util.getRandomHexOfNbits(h),16)},I.crypto.Util.getRandomBigIntegerZeroToMax=function(h){for(var f=h.bitLength();;){var m=I.crypto.Util.getRandomBigIntegerOfNbits(f);if(h.compareTo(m)!=-1)return m}},I.crypto.Util.getRandomBigIntegerMinToMax=function(h,f){var m=h.compareTo(f);if(m==1)throw"biMin is greater than biMax";if(m==0)return h;var v=f.subtract(h);return I.crypto.Util.getRandomBigIntegerZeroToMax(v).add(h)},I.crypto.MessageDigest=function(h){this.setAlgAndProvider=function(f,m){if((f=I.crypto.MessageDigest.getCanonicalAlgName(f))!==null&&m===void 0&&(m=I.crypto.Util.DEFAULTPROVIDER[f]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(f)!=-1&&m=="cryptojs"){try{this.md=I.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[f].create()}catch(v){throw"setAlgAndProvider hash alg set fail alg="+f+"/"+v}this.updateString=function(v){this.md.update(v)},this.updateHex=function(v){var A=F.enc.Hex.parse(v);this.md.update(A)},this.digest=function(){return this.md.finalize().toString(F.enc.Hex)},this.digestString=function(v){return this.updateString(v),this.digest()},this.digestHex=function(v){return this.updateHex(v),this.digest()}}if(":sha256:".indexOf(f)!=-1&&m=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(v){throw"setAlgAndProvider hash alg set fail alg="+f+"/"+v}this.updateString=function(v){this.md.update(v)},this.updateHex=function(v){var A=sjcl.codec.hex.toBits(v);this.md.update(A)},this.digest=function(){var v=this.md.finalize();return sjcl.codec.hex.fromBits(v)},this.digestString=function(v){return this.updateString(v),this.digest()},this.digestHex=function(v){return this.updateHex(v),this.digest()}}},this.updateString=function(f){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(f){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(f){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(f){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},h!==void 0&&h.alg!==void 0&&(this.algName=h.alg,h.prov===void 0&&(this.provName=I.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},I.crypto.MessageDigest.getCanonicalAlgName=function(h){return typeof h=="string"&&(h=(h=h.toLowerCase()).replace(/-/,"")),h},I.crypto.MessageDigest.getHashLength=function(h){var f=I.crypto.MessageDigest,m=f.getCanonicalAlgName(h);if(f.HASHLENGTH[m]===void 0)throw"not supported algorithm: "+h;return f.HASHLENGTH[m]},I.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},I.crypto.Mac=function(h){this.setAlgAndProvider=function(f,m){if((f=f.toLowerCase())==null&&(f="hmacsha1"),(f=f.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+f;m===void 0&&(m=I.crypto.Util.DEFAULTPROVIDER[f]),this.algProv=f+"/"+m;var v=f.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(v)!=-1&&m=="cryptojs"){try{var A=I.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[v];this.mac=F.algo.HMAC.create(A,this.pass)}catch(C){throw"setAlgAndProvider hash alg set fail hashAlg="+v+"/"+C}this.updateString=function(C){this.mac.update(C)},this.updateHex=function(C){var j=F.enc.Hex.parse(C);this.mac.update(j)},this.doFinal=function(){return this.mac.finalize().toString(F.enc.Hex)},this.doFinalString=function(C){return this.updateString(C),this.doFinal()},this.doFinalHex=function(C){return this.updateHex(C),this.doFinal()}}},this.updateString=function(f){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(f){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(f){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(f){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(f){if(typeof f=="string"){var m=f;return f.length%2!=1&&f.match(/^[0-9A-Fa-f]+$/)||(m=ho(f)),void(this.pass=F.enc.Hex.parse(m))}if((f===void 0?"undefined":E(f))!="object")throw"KJUR.crypto.Mac unsupported password type: "+f;if(m=null,f.hex!==void 0){if(f.hex.length%2!=0||!f.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+f.hex;m=f.hex}if(f.utf8!==void 0&&(m=ah(f.utf8)),f.rstr!==void 0&&(m=ho(f.rstr)),f.b64!==void 0&&(m=Y(f.b64)),f.b64u!==void 0&&(m=dn(f.b64u)),m==null)throw"KJUR.crypto.Mac unsupported password type: "+f;this.pass=F.enc.Hex.parse(m)},h!==void 0&&(h.pass!==void 0&&this.setPassword(h.pass),h.alg!==void 0&&(this.algName=h.alg,h.prov===void 0&&(this.provName=I.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},I.crypto.Signature=function(h){var f=null;if(this._setAlgNames=function(){var m=this.algName.match(/^(.+)with(.+)$/);m&&(this.mdAlgName=m[1].toLowerCase(),this.pubkeyAlgName=m[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(m,v){for(var A="",C=v/4-m.length,j=0;j<C;j++)A+="0";return A+m},this.setAlgAndProvider=function(m,v){if(this._setAlgNames(),v!="cryptojs/jsrsa")throw new Error("provider not supported: "+v);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new I.crypto.MessageDigest({alg:this.mdAlgName})}catch(A){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+A)}this.init=function(A,C){var j=null;try{j=C===void 0?qn.getKey(A):qn.getKey(A,C)}catch(K){throw"init failed:"+K}if(j.isPrivate===!0)this.prvKey=j,this.state="SIGN";else{if(j.isPublic!==!0)throw"init failed.:"+j;this.pubKey=j,this.state="VERIFY"}},this.updateString=function(A){this.md.updateString(A)},this.updateHex=function(A){this.md.updateHex(A)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&I.crypto.ECDSA!==void 0&&(this.prvKey=new I.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Fe&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Fe&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof I.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof I.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(A){return this.updateString(A),this.sign()},this.signHex=function(A){return this.updateHex(A),this.sign()},this.verify=function(A){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&I.crypto.ECDSA!==void 0&&(this.pubKey=new I.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Fe&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,A,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Fe&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,A);if(I.crypto.ECDSA!==void 0&&this.pubKey instanceof I.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,A);if(I.crypto.DSA!==void 0&&this.pubKey instanceof I.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,A);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(m,v){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(m){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(m){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(m){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(m){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(m){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=h,h!==void 0&&(h.alg!==void 0&&(this.algName=h.alg,h.prov===void 0?this.provName=I.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=h.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),h.psssaltlen!==void 0&&(this.pssSaltLen=h.psssaltlen),h.prvkeypem!==void 0)){if(h.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{f=qn.getKey(h.prvkeypem),this.init(f)}catch(m){throw"fatal error to load pem private key: "+m}}},I.crypto.Cipher=function(h){},I.crypto.Cipher.encrypt=function(h,f,m){if(f instanceof Fe&&f.isPublic){var v=I.crypto.Cipher.getAlgByKeyAndName(f,m);if(v==="RSA")return f.encrypt(h);if(v==="RSAOAEP")return f.encryptOAEP(h,"sha1");var A=v.match(/^RSAOAEP(\d+)$/);if(A!==null)return f.encryptOAEP(h,"sha"+A[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+m}throw"Cipher.encrypt: unsupported key or algorithm"},I.crypto.Cipher.decrypt=function(h,f,m){if(f instanceof Fe&&f.isPrivate){var v=I.crypto.Cipher.getAlgByKeyAndName(f,m);if(v==="RSA")return f.decrypt(h);if(v==="RSAOAEP")return f.decryptOAEP(h,"sha1");var A=v.match(/^RSAOAEP(\d+)$/);if(A!==null)return f.decryptOAEP(h,"sha"+A[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+m}throw"Cipher.decrypt: unsupported key or algorithm"},I.crypto.Cipher.getAlgByKeyAndName=function(h,f){if(h instanceof Fe){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(f)!=-1)return f;if(f==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+f}throw"getAlgByKeyAndName: not supported algorithm name: "+f},I.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},I!==void 0&&I||(r.KJUR=I={}),I.crypto!==void 0&&I.crypto||(I.crypto={}),I.crypto.ECDSA=function(h){var f=Error,m=B,v=L,A=I.crypto.ECDSA,C=I.crypto.ECParameterDB,j=A.getName,K=oe,$=K.getVbyListEx,H=K.isASN1HEX,W=new dt;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(V){return new m(V.bitLength(),W).mod(V.subtract(m.ONE)).add(m.ONE)},this.setNamedCurve=function(V){this.ecparams=C.getByName(V),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=V},this.setPrivateKeyHex=function(V){this.isPrivate=!0,this.prvKeyHex=V},this.setPublicKeyHex=function(V){this.isPublic=!0,this.pubKeyHex=V},this.getPublicKeyXYHex=function(){var V=this.pubKeyHex;if(V.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var Z=this.ecparams.keylen/4;if(V.length!==2+2*Z)throw"malformed public key hex length";var te={};return te.x=V.substr(2,Z),te.y=V.substr(2+Z),te},this.getShortNISTPCurveName=function(){var V=this.curveName;return V==="secp256r1"||V==="NIST P-256"||V==="P-256"||V==="prime256v1"?"P-256":V==="secp384r1"||V==="NIST P-384"||V==="P-384"?"P-384":null},this.generateKeyPairHex=function(){var V=this.ecparams.n,Z=this.getBigRandom(V),te=this.ecparams.G.multiply(Z),ce=te.getX().toBigInteger(),he=te.getY().toBigInteger(),pe=this.ecparams.keylen/4,U=("0000000000"+Z.toString(16)).slice(-pe),q="04"+("0000000000"+ce.toString(16)).slice(-pe)+("0000000000"+he.toString(16)).slice(-pe);return this.setPrivateKeyHex(U),this.setPublicKeyHex(q),{ecprvhex:U,ecpubhex:q}},this.signWithMessageHash=function(V){return this.signHex(V,this.prvKeyHex)},this.signHex=function(V,Z){var te=new m(Z,16),ce=this.ecparams.n,he=new m(V.substring(0,this.ecparams.keylen/4),16);do var pe=this.getBigRandom(ce),U=this.ecparams.G.multiply(pe).getX().toBigInteger().mod(ce);while(U.compareTo(m.ZERO)<=0);var q=pe.modInverse(ce).multiply(he.add(te.multiply(U))).mod(ce);return A.biRSSigToASN1Sig(U,q)},this.sign=function(V,Z){var te=Z,ce=this.ecparams.n,he=m.fromByteArrayUnsigned(V);do var pe=this.getBigRandom(ce),U=this.ecparams.G.multiply(pe).getX().toBigInteger().mod(ce);while(U.compareTo(B.ZERO)<=0);var q=pe.modInverse(ce).multiply(he.add(te.multiply(U))).mod(ce);return this.serializeSig(U,q)},this.verifyWithMessageHash=function(V,Z){return this.verifyHex(V,Z,this.pubKeyHex)},this.verifyHex=function(V,Z,te){try{var ce,he,pe=A.parseSigHex(Z);ce=pe.r,he=pe.s;var U=v.decodeFromHex(this.ecparams.curve,te),q=new m(V.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(q,ce,he,U)}catch{return!1}},this.verify=function(V,Z,te){var ce,he,pe;if(Bitcoin.Util.isArray(Z)){var U=this.parseSig(Z);ce=U.r,he=U.s}else{if((Z===void 0?"undefined":E(Z))!=="object"||!Z.r||!Z.s)throw"Invalid value for signature";ce=Z.r,he=Z.s}if(te instanceof L)pe=te;else{if(!Bitcoin.Util.isArray(te))throw"Invalid format for pubkey value, must be byte array or ECPointFp";pe=v.decodeFrom(this.ecparams.curve,te)}var q=m.fromByteArrayUnsigned(V);return this.verifyRaw(q,ce,he,pe)},this.verifyRaw=function(V,Z,te,ce){var he=this.ecparams.n,pe=this.ecparams.G;if(Z.compareTo(m.ONE)<0||Z.compareTo(he)>=0||te.compareTo(m.ONE)<0||te.compareTo(he)>=0)return!1;var U=te.modInverse(he),q=V.multiply(U).mod(he),z=Z.multiply(U).mod(he);return pe.multiply(q).add(ce.multiply(z)).getX().toBigInteger().mod(he).equals(Z)},this.serializeSig=function(V,Z){var te=V.toByteArraySigned(),ce=Z.toByteArraySigned(),he=[];return he.push(2),he.push(te.length),(he=he.concat(te)).push(2),he.push(ce.length),(he=he.concat(ce)).unshift(he.length),he.unshift(48),he},this.parseSig=function(V){var Z;if(V[0]!=48)throw new Error("Signature not a valid DERSequence");if(V[Z=2]!=2)throw new Error("First element in signature must be a DERInteger");var te=V.slice(Z+2,Z+2+V[Z+1]);if(V[Z+=2+V[Z+1]]!=2)throw new Error("Second element in signature must be a DERInteger");var ce=V.slice(Z+2,Z+2+V[Z+1]);return Z+=2+V[Z+1],{r:m.fromByteArrayUnsigned(te),s:m.fromByteArrayUnsigned(ce)}},this.parseSigCompact=function(V){if(V.length!==65)throw"Signature has the wrong length";var Z=V[0]-27;if(Z<0||Z>7)throw"Invalid signature type";var te=this.ecparams.n;return{r:m.fromByteArrayUnsigned(V.slice(1,33)).mod(te),s:m.fromByteArrayUnsigned(V.slice(33,65)).mod(te),i:Z}},this.readPKCS5PrvKeyHex=function(V){if(H(V)===!1)throw new Error("not ASN.1 hex string");var Z,te,ce;try{Z=$(V,0,["[0]",0],"06"),te=$(V,0,[1],"04");try{ce=$(V,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=j(Z),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(ce),this.setPrivateKeyHex(te),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(V){if(H(V)===!1)throw new f("not ASN.1 hex string");var Z,te,ce;try{$(V,0,[1,0],"06"),Z=$(V,0,[1,1],"06"),te=$(V,0,[2,0,1],"04");try{ce=$(V,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new f("malformed PKCS#8 plain ECC private key")}if(this.curveName=j(Z),this.curveName===void 0)throw new f("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(ce),this.setPrivateKeyHex(te),this.isPublic=!1},this.readPKCS8PubKeyHex=function(V){if(H(V)===!1)throw new f("not ASN.1 hex string");var Z,te;try{$(V,0,[0,0],"06"),Z=$(V,0,[0,1],"06"),te=$(V,0,[1],"03")}catch{throw new f("malformed PKCS#8 ECC public key")}if(this.curveName=j(Z),this.curveName===null)throw new f("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(te)},this.readCertPubKeyHex=function(V,Z){if(H(V)===!1)throw new f("not ASN.1 hex string");var te,ce;try{te=$(V,0,[0,5,0,1],"06"),ce=$(V,0,[0,5,1],"03")}catch{throw new f("malformed X.509 certificate ECC public key")}if(this.curveName=j(te),this.curveName===null)throw new f("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(ce)},h!==void 0&&h.curve!==void 0&&(this.curveName=h.curve),this.curveName===void 0&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),h!==void 0&&(h.prv!==void 0&&this.setPrivateKeyHex(h.prv),h.pub!==void 0&&this.setPublicKeyHex(h.pub))},I.crypto.ECDSA.parseSigHex=function(h){var f=I.crypto.ECDSA.parseSigHexInHexRS(h);return{r:new B(f.r,16),s:new B(f.s,16)}},I.crypto.ECDSA.parseSigHexInHexRS=function(h){var f=oe,m=f.getChildIdx,v=f.getV;if(f.checkStrictDER(h,0),h.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var A=m(h,0);if(A.length!=2)throw new Error("signature shall have two elements");var C=A[0],j=A[1];if(h.substr(C,2)!="02")throw new Error("1st item not ASN.1 integer");if(h.substr(j,2)!="02")throw new Error("2nd item not ASN.1 integer");return{r:v(h,C),s:v(h,j)}},I.crypto.ECDSA.asn1SigToConcatSig=function(h){var f=I.crypto.ECDSA.parseSigHexInHexRS(h),m=f.r,v=f.s;if(m.substr(0,2)=="00"&&m.length%32==2&&(m=m.substr(2)),v.substr(0,2)=="00"&&v.length%32==2&&(v=v.substr(2)),m.length%32==30&&(m="00"+m),v.length%32==30&&(v="00"+v),m.length%32!=0)throw"unknown ECDSA sig r length error";if(v.length%32!=0)throw"unknown ECDSA sig s length error";return m+v},I.crypto.ECDSA.concatSigToASN1Sig=function(h){if(h.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var f=h.substr(0,h.length/2),m=h.substr(h.length/2);return I.crypto.ECDSA.hexRSSigToASN1Sig(f,m)},I.crypto.ECDSA.hexRSSigToASN1Sig=function(h,f){var m=new B(h,16),v=new B(f,16);return I.crypto.ECDSA.biRSSigToASN1Sig(m,v)},I.crypto.ECDSA.biRSSigToASN1Sig=function(h,f){var m=I.asn1,v=new m.DERInteger({bigint:h}),A=new m.DERInteger({bigint:f});return new m.DERSequence({array:[v,A]}).getEncodedHex()},I.crypto.ECDSA.getName=function(h){return h==="2b8104001f"?"secp192k1":h==="2a8648ce3d030107"?"secp256r1":h==="2b8104000a"?"secp256k1":h==="2b81040021"?"secp224r1":h==="2b81040022"?"secp384r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(h)!==-1?"secp256r1":"|secp256k1|".indexOf(h)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(h)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(h)!==-1?"secp384r1":null},I!==void 0&&I||(r.KJUR=I={}),I.crypto!==void 0&&I.crypto||(I.crypto={}),I.crypto.ECParameterDB=new function(){var h={},f={};function m(v){return new B(v,16)}this.getByName=function(v){var A=v;if(f[A]!==void 0&&(A=f[v]),h[A]!==void 0)return h[A];throw"unregistered EC curve name: "+A},this.regist=function(v,A,C,j,K,$,H,W,V,Z,te,ce){h[v]={};var he=m(C),pe=m(j),U=m(K),q=m($),z=m(H),J=new x(he,pe,U),ue=J.decodePointHex("04"+W+V);h[v].name=v,h[v].keylen=A,h[v].curve=J,h[v].G=ue,h[v].n=q,h[v].h=z,h[v].oid=te,h[v].info=ce;for(var ge=0;ge<Z.length;ge++)f[Z[ge]]=v}},I.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),I.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),I.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),I.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),I.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),I.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),I.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),I.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),I.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),I.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var qn=function(){var h=function(H,W,V){return f(F.AES,H,W,V)},f=function(H,W,V,Z){var te=F.enc.Hex.parse(W),ce=F.enc.Hex.parse(V),he=F.enc.Hex.parse(Z),pe={};pe.key=ce,pe.iv=he,pe.ciphertext=te;var U=H.decrypt(pe,ce,{iv:he});return F.enc.Hex.stringify(U)},m=function(H,W,V){return v(F.AES,H,W,V)},v=function(H,W,V,Z){var te=F.enc.Hex.parse(W),ce=F.enc.Hex.parse(V),he=F.enc.Hex.parse(Z),pe=H.encrypt(te,ce,{iv:he}),U=F.enc.Hex.parse(pe.toString());return F.enc.Base64.stringify(U)},A={"AES-256-CBC":{proc:h,eproc:m,keylen:32,ivlen:16},"AES-192-CBC":{proc:h,eproc:m,keylen:24,ivlen:16},"AES-128-CBC":{proc:h,eproc:m,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(H,W,V){return f(F.TripleDES,H,W,V)},eproc:function(H,W,V){return v(F.TripleDES,H,W,V)},keylen:24,ivlen:8},"DES-CBC":{proc:function(H,W,V){return f(F.DES,H,W,V)},eproc:function(H,W,V){return v(F.DES,H,W,V)},keylen:8,ivlen:8}},C=function(H){var W={},V=H.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));V&&(W.cipher=V[1],W.ivsalt=V[2]);var Z=H.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));Z&&(W.type=Z[1]);var te=-1,ce=0;H.indexOf(`\r
\r
`)!=-1&&(te=H.indexOf(`\r
\r
`),ce=2),H.indexOf(`

`)!=-1&&(te=H.indexOf(`

`),ce=1);var he=H.indexOf("-----END");if(te!=-1&&he!=-1){var pe=H.substring(te+2*ce,he-ce);pe=pe.replace(/\s+/g,""),W.data=pe}return W},j=function(H,W,V){for(var Z=V.substring(0,16),te=F.enc.Hex.parse(Z),ce=F.enc.Utf8.parse(W),he=A[H].keylen+A[H].ivlen,pe="",U=null;;){var q=F.algo.MD5.create();if(U!=null&&q.update(U),q.update(ce),q.update(te),U=q.finalize(),(pe+=F.enc.Hex.stringify(U)).length>=2*he)break}var z={};return z.keyhex=pe.substr(0,2*A[H].keylen),z.ivhex=pe.substr(2*A[H].keylen,2*A[H].ivlen),z},K=function(H,W,V,Z){var te=F.enc.Base64.parse(H),ce=F.enc.Hex.stringify(te);return(0,A[W].proc)(ce,V,Z)};return{version:"1.0.0",parsePKCS5PEM:function(H){return C(H)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(H,W,V){return j(H,W,V)},decryptKeyB64:function(H,W,V,Z){return K(H,W,V,Z)},getDecryptedKeyHex:function(H,W){var V=C(H),Z=V.cipher,te=V.ivsalt,ce=V.data,he=j(Z,W,te).keyhex;return K(ce,Z,he,te)},getEncryptedPKCS5PEMFromPrvKeyHex:function(H,W,V,Z,te){var ce="";if(Z!==void 0&&Z!=null||(Z="AES-256-CBC"),A[Z]===void 0)throw new Error("KEYUTIL unsupported algorithm: "+Z);te!==void 0&&te!=null||(te=function(U){var q=F.lib.WordArray.random(U);return F.enc.Hex.stringify(q)}(A[Z].ivlen).toUpperCase());var he=function(U,q,z,J){return(0,A[q].eproc)(U,z,J)}(W,Z,j(Z,V,te).keyhex,te);return ce="-----BEGIN "+H+` PRIVATE KEY-----\r
`,ce+=`Proc-Type: 4,ENCRYPTED\r
`,ce+="DEK-Info: "+Z+","+te+`\r
`,ce+=`\r
`,ce+=he.replace(/(.{64})/g,`$1\r
`),ce+=`\r
-----END `+H+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(H){var W=oe,V=W.getChildIdx,Z=W.getV,te={},ce=V(H,0);if(ce.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+ce.length);te.ciphertext=Z(H,ce[1]);var he=V(H,ce[0]);if(he.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+he.length);if(Z(H,he[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var pe=V(H,he[1]);if(he.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+pe.length);var U=V(H,pe[1]);if(U.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+U.length);if(Z(H,U[0])!="2a864886f70d0307")throw"this only supports TripleDES";te.encryptionSchemeAlg="TripleDES",te.encryptionSchemeIV=Z(H,U[1]);var q=V(H,pe[0]);if(q.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+q.length);if(Z(H,q[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var z=V(H,q[1]);if(z.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+z.length);te.pbkdf2Salt=Z(H,z[0]);var J=Z(H,z[1]);try{te.pbkdf2Iter=parseInt(J,16)}catch{throw new Error("malformed format pbkdf2Iter: "+J)}return te},getPBKDF2KeyHexFromParam:function(H,W){var V=F.enc.Hex.parse(H.pbkdf2Salt),Z=H.pbkdf2Iter,te=F.PBKDF2(W,V,{keySize:6,iterations:Z});return F.enc.Hex.stringify(te)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(H,W){var V=po(H,"ENCRYPTED PRIVATE KEY"),Z=this.parseHexOfEncryptedPKCS8(V),te=qn.getPBKDF2KeyHexFromParam(Z,W),ce={};ce.ciphertext=F.enc.Hex.parse(Z.ciphertext);var he=F.enc.Hex.parse(te),pe=F.enc.Hex.parse(Z.encryptionSchemeIV),U=F.TripleDES.decrypt(ce,he,{iv:pe});return F.enc.Hex.stringify(U)},getKeyFromEncryptedPKCS8PEM:function(H,W){var V=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(H,W);return this.getKeyFromPlainPrivatePKCS8Hex(V)},parsePlainPrivatePKCS8Hex:function(H){var W=oe,V=W.getChildIdx,Z=W.getV,te={algparam:null};if(H.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var ce=V(H,0);if(ce.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(H.substr(ce[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var he=V(H,ce[1]);if(he.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(H.substr(he[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(te.algoid=Z(H,he[0]),H.substr(he[1],2)=="06"&&(te.algparam=Z(H,he[1])),H.substr(ce[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return te.keyidx=W.getVidx(H,ce[2]),te},getKeyFromPlainPrivatePKCS8PEM:function(H){var W=po(H,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(W)},getKeyFromPlainPrivatePKCS8Hex:function(H){var W,V=this.parsePlainPrivatePKCS8Hex(H);if(V.algoid=="2a864886f70d010101")W=new Fe;else if(V.algoid=="2a8648ce380401")W=new I.crypto.DSA;else{if(V.algoid!="2a8648ce3d0201")throw new Error("unsupported private key algorithm");W=new I.crypto.ECDSA}return W.readPKCS8PrvKeyHex(H),W},_getKeyFromPublicPKCS8Hex:function(H){var W,V=oe.getVbyList(H,0,[0,0],"06");if(V==="2a864886f70d010101")W=new Fe;else if(V==="2a8648ce380401")W=new I.crypto.DSA;else{if(V!=="2a8648ce3d0201")throw new Error("unsupported PKCS#8 public key hex");W=new I.crypto.ECDSA}return W.readPKCS8PubKeyHex(H),W},parsePublicRawRSAKeyHex:function(H){var W=oe,V=W.getChildIdx,Z=W.getV,te={};if(H.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var ce=V(H,0);if(ce.length!=2)throw new Error("malformed RSA key(code:002)");if(H.substr(ce[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(te.n=Z(H,ce[0]),H.substr(ce[1],2)!="02")throw new Error("malformed RSA key(code:004)");return te.e=Z(H,ce[1]),te},parsePublicPKCS8Hex:function(H){var W=oe,V=W.getChildIdx,Z=W.getV,te={algparam:null},ce=V(H,0);if(ce.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+ce.length);var he=ce[0];if(H.substr(he,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var pe=V(H,he);if(pe.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(H.substr(pe[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(te.algoid=Z(H,pe[0]),H.substr(pe[1],2)=="06"?te.algparam=Z(H,pe[1]):H.substr(pe[1],2)=="30"&&(te.algparam={},te.algparam.p=W.getVbyList(H,pe[1],[0],"02"),te.algparam.q=W.getVbyList(H,pe[1],[1],"02"),te.algparam.g=W.getVbyList(H,pe[1],[2],"02")),H.substr(ce[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return te.key=Z(H,ce[1]).substr(2),te}}}();qn.getKey=function(h,f,m){var v=(pe=oe).getChildIdx,A=(pe.getV,pe.getVbyList),C=I.crypto,j=C.ECDSA,K=C.DSA,$=Fe,H=po,W=qn;if($!==void 0&&h instanceof $||j!==void 0&&h instanceof j||K!==void 0&&h instanceof K)return h;if(h.curve!==void 0&&h.xy!==void 0&&h.d===void 0)return new j({pub:h.xy,curve:h.curve});if(h.curve!==void 0&&h.d!==void 0)return new j({prv:h.d,curve:h.curve});if(h.kty===void 0&&h.n!==void 0&&h.e!==void 0&&h.d===void 0)return(Ke=new $).setPublic(h.n,h.e),Ke;if(h.kty===void 0&&h.n!==void 0&&h.e!==void 0&&h.d!==void 0&&h.p!==void 0&&h.q!==void 0&&h.dp!==void 0&&h.dq!==void 0&&h.co!==void 0&&h.qi===void 0)return(Ke=new $).setPrivateEx(h.n,h.e,h.d,h.p,h.q,h.dp,h.dq,h.co),Ke;if(h.kty===void 0&&h.n!==void 0&&h.e!==void 0&&h.d!==void 0&&h.p===void 0)return(Ke=new $).setPrivate(h.n,h.e,h.d),Ke;if(h.p!==void 0&&h.q!==void 0&&h.g!==void 0&&h.y!==void 0&&h.x===void 0)return(Ke=new K).setPublic(h.p,h.q,h.g,h.y),Ke;if(h.p!==void 0&&h.q!==void 0&&h.g!==void 0&&h.y!==void 0&&h.x!==void 0)return(Ke=new K).setPrivate(h.p,h.q,h.g,h.y,h.x),Ke;if(h.kty==="RSA"&&h.n!==void 0&&h.e!==void 0&&h.d===void 0)return(Ke=new $).setPublic(dn(h.n),dn(h.e)),Ke;if(h.kty==="RSA"&&h.n!==void 0&&h.e!==void 0&&h.d!==void 0&&h.p!==void 0&&h.q!==void 0&&h.dp!==void 0&&h.dq!==void 0&&h.qi!==void 0)return(Ke=new $).setPrivateEx(dn(h.n),dn(h.e),dn(h.d),dn(h.p),dn(h.q),dn(h.dp),dn(h.dq),dn(h.qi)),Ke;if(h.kty==="RSA"&&h.n!==void 0&&h.e!==void 0&&h.d!==void 0)return(Ke=new $).setPrivate(dn(h.n),dn(h.e),dn(h.d)),Ke;if(h.kty==="EC"&&h.crv!==void 0&&h.x!==void 0&&h.y!==void 0&&h.d===void 0){var V=(Ie=new j({curve:h.crv})).ecparams.keylen/4,Z="04"+("0000000000"+dn(h.x)).slice(-V)+("0000000000"+dn(h.y)).slice(-V);return Ie.setPublicKeyHex(Z),Ie}if(h.kty==="EC"&&h.crv!==void 0&&h.x!==void 0&&h.y!==void 0&&h.d!==void 0){V=(Ie=new j({curve:h.crv})).ecparams.keylen/4,Z="04"+("0000000000"+dn(h.x)).slice(-V)+("0000000000"+dn(h.y)).slice(-V);var te=("0000000000"+dn(h.d)).slice(-V);return Ie.setPublicKeyHex(Z),Ie.setPrivateKeyHex(te),Ie}if(m==="pkcs5prv"){var ce,he=h,pe=oe;if((ce=v(he,0)).length===9)(Ke=new $).readPKCS5PrvKeyHex(he);else if(ce.length===6)(Ke=new K).readPKCS5PrvKeyHex(he);else{if(!(ce.length>2&&he.substr(ce[1],2)==="04"))throw new Error("unsupported PKCS#1/5 hexadecimal key");(Ke=new j).readPKCS5PrvKeyHex(he)}return Ke}if(m==="pkcs8prv")return Ke=W.getKeyFromPlainPrivatePKCS8Hex(h);if(m==="pkcs8pub")return W._getKeyFromPublicPKCS8Hex(h);if(m==="x509pub")return or.getPublicKeyFromCertHex(h);if(h.indexOf("-END CERTIFICATE-",0)!=-1||h.indexOf("-END X509 CERTIFICATE-",0)!=-1||h.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return or.getPublicKeyFromCertPEM(h);if(h.indexOf("-END PUBLIC KEY-")!=-1){var U=po(h,"PUBLIC KEY");return W._getKeyFromPublicPKCS8Hex(U)}if(h.indexOf("-END RSA PRIVATE KEY-")!=-1&&h.indexOf("4,ENCRYPTED")==-1){var q=H(h,"RSA PRIVATE KEY");return W.getKey(q,null,"pkcs5prv")}if(h.indexOf("-END DSA PRIVATE KEY-")!=-1&&h.indexOf("4,ENCRYPTED")==-1){var z=A(fn=H(h,"DSA PRIVATE KEY"),0,[1],"02"),J=A(fn,0,[2],"02"),ue=A(fn,0,[3],"02"),ge=A(fn,0,[4],"02"),ke=A(fn,0,[5],"02");return(Ke=new K).setPrivate(new B(z,16),new B(J,16),new B(ue,16),new B(ge,16),new B(ke,16)),Ke}if(h.indexOf("-END EC PRIVATE KEY-")!=-1&&h.indexOf("4,ENCRYPTED")==-1)return q=H(h,"EC PRIVATE KEY"),W.getKey(q,null,"pkcs5prv");if(h.indexOf("-END PRIVATE KEY-")!=-1)return W.getKeyFromPlainPrivatePKCS8PEM(h);if(h.indexOf("-END RSA PRIVATE KEY-")!=-1&&h.indexOf("4,ENCRYPTED")!=-1){var _e=W.getDecryptedKeyHex(h,f),ht=new Fe;return ht.readPKCS5PrvKeyHex(_e),ht}if(h.indexOf("-END EC PRIVATE KEY-")!=-1&&h.indexOf("4,ENCRYPTED")!=-1){var Ie,Ke=A(fn=W.getDecryptedKeyHex(h,f),0,[1],"04"),rn=A(fn,0,[2,0],"06"),_n=A(fn,0,[3,0],"03").substr(2);if(I.crypto.OID.oidhex2name[rn]===void 0)throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+rn);return(Ie=new j({curve:I.crypto.OID.oidhex2name[rn]})).setPublicKeyHex(_n),Ie.setPrivateKeyHex(Ke),Ie.isPublic=!1,Ie}if(h.indexOf("-END DSA PRIVATE KEY-")!=-1&&h.indexOf("4,ENCRYPTED")!=-1){var fn;return z=A(fn=W.getDecryptedKeyHex(h,f),0,[1],"02"),J=A(fn,0,[2],"02"),ue=A(fn,0,[3],"02"),ge=A(fn,0,[4],"02"),ke=A(fn,0,[5],"02"),(Ke=new K).setPrivate(new B(z,16),new B(J,16),new B(ue,16),new B(ge,16),new B(ke,16)),Ke}if(h.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return W.getKeyFromEncryptedPKCS8PEM(h,f);throw new Error("not supported argument")},qn.generateKeypair=function(h,f){if(h=="RSA"){var m=f;(j=new Fe).generate(m,"10001"),j.isPrivate=!0,j.isPublic=!0;var v=new Fe,A=j.n.toString(16),C=j.e.toString(16);return v.setPublic(A,C),v.isPrivate=!1,v.isPublic=!0,(K={}).prvKeyObj=j,K.pubKeyObj=v,K}if(h=="EC"){var j,K,$=f,H=new I.crypto.ECDSA({curve:$}).generateKeyPairHex();return(j=new I.crypto.ECDSA({curve:$})).setPublicKeyHex(H.ecpubhex),j.setPrivateKeyHex(H.ecprvhex),j.isPrivate=!0,j.isPublic=!1,(v=new I.crypto.ECDSA({curve:$})).setPublicKeyHex(H.ecpubhex),v.isPrivate=!1,v.isPublic=!0,(K={}).prvKeyObj=j,K.pubKeyObj=v,K}throw new Error("unknown algorithm: "+h)},qn.getPEM=function(h,f,m,v,A,C){var j=I,K=j.asn1,$=K.DERObjectIdentifier,H=K.DERInteger,W=K.ASN1Util.newObject,V=K.x509.SubjectPublicKeyInfo,Z=j.crypto,te=Z.DSA,ce=Z.ECDSA,he=Fe;function pe(Ie){return W({seq:[{int:0},{int:{bigint:Ie.n}},{int:Ie.e},{int:{bigint:Ie.d}},{int:{bigint:Ie.p}},{int:{bigint:Ie.q}},{int:{bigint:Ie.dmp1}},{int:{bigint:Ie.dmq1}},{int:{bigint:Ie.coeff}}]})}function U(Ie){return W({seq:[{int:1},{octstr:{hex:Ie.prvKeyHex}},{tag:["a0",!0,{oid:{name:Ie.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Ie.pubKeyHex}}]}]})}function q(Ie){return W({seq:[{int:0},{int:{bigint:Ie.p}},{int:{bigint:Ie.q}},{int:{bigint:Ie.g}},{int:{bigint:Ie.y}},{int:{bigint:Ie.x}}]})}if((he!==void 0&&h instanceof he||te!==void 0&&h instanceof te||ce!==void 0&&h instanceof ce)&&h.isPublic==1&&(f===void 0||f=="PKCS8PUB"))return di(ge=new V(h).getEncodedHex(),"PUBLIC KEY");if(f=="PKCS1PRV"&&he!==void 0&&h instanceof he&&(m===void 0||m==null)&&h.isPrivate==1)return di(ge=pe(h).getEncodedHex(),"RSA PRIVATE KEY");if(f=="PKCS1PRV"&&ce!==void 0&&h instanceof ce&&(m===void 0||m==null)&&h.isPrivate==1){var z=new $({name:h.curveName}).getEncodedHex(),J=U(h).getEncodedHex(),ue="";return ue+=di(z,"EC PARAMETERS"),ue+=di(J,"EC PRIVATE KEY")}if(f=="PKCS1PRV"&&te!==void 0&&h instanceof te&&(m===void 0||m==null)&&h.isPrivate==1)return di(ge=q(h).getEncodedHex(),"DSA PRIVATE KEY");if(f=="PKCS5PRV"&&he!==void 0&&h instanceof he&&m!==void 0&&m!=null&&h.isPrivate==1){var ge=pe(h).getEncodedHex();return v===void 0&&(v="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",ge,m,v,C)}if(f=="PKCS5PRV"&&ce!==void 0&&h instanceof ce&&m!==void 0&&m!=null&&h.isPrivate==1)return ge=U(h).getEncodedHex(),v===void 0&&(v="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",ge,m,v,C);if(f=="PKCS5PRV"&&te!==void 0&&h instanceof te&&m!==void 0&&m!=null&&h.isPrivate==1)return ge=q(h).getEncodedHex(),v===void 0&&(v="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",ge,m,v,C);var ke=function(Ke,rn){var _n=_e(Ke,rn);return new W({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:_n.pbkdf2Salt}},{int:_n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:_n.encryptionSchemeIV}}]}]}]},{octstr:{hex:_n.ciphertext}}]}).getEncodedHex()},_e=function(Ke,rn){var _n=F.lib.WordArray.random(8),fn=F.lib.WordArray.random(8),fi=F.PBKDF2(rn,_n,{keySize:6,iterations:100}),$r=F.enc.Hex.parse(Ke),Zr=F.TripleDES.encrypt($r,fi,{iv:fn})+"",Un={};return Un.ciphertext=Zr,Un.pbkdf2Salt=F.enc.Hex.stringify(_n),Un.pbkdf2Iter=100,Un.encryptionSchemeAlg="DES-EDE3-CBC",Un.encryptionSchemeIV=F.enc.Hex.stringify(fn),Un};if(f=="PKCS8PRV"&&he!=null&&h instanceof he&&h.isPrivate==1){var ht=pe(h).getEncodedHex();return ge=W({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:ht}}]}).getEncodedHex(),m===void 0||m==null?di(ge,"PRIVATE KEY"):di(J=ke(ge,m),"ENCRYPTED PRIVATE KEY")}if(f=="PKCS8PRV"&&ce!==void 0&&h instanceof ce&&h.isPrivate==1)return ht=new W({seq:[{int:1},{octstr:{hex:h.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+h.pubKeyHex}}]}]}).getEncodedHex(),ge=W({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:h.curveName}}]},{octstr:{hex:ht}}]}).getEncodedHex(),m===void 0||m==null?di(ge,"PRIVATE KEY"):di(J=ke(ge,m),"ENCRYPTED PRIVATE KEY");if(f=="PKCS8PRV"&&te!==void 0&&h instanceof te&&h.isPrivate==1)return ht=new H({bigint:h.x}).getEncodedHex(),ge=W({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:h.p}},{int:{bigint:h.q}},{int:{bigint:h.g}}]}]},{octstr:{hex:ht}}]}).getEncodedHex(),m===void 0||m==null?di(ge,"PRIVATE KEY"):di(J=ke(ge,m),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},qn.getKeyFromCSRPEM=function(h){var f=po(h,"CERTIFICATE REQUEST");return qn.getKeyFromCSRHex(f)},qn.getKeyFromCSRHex=function(h){var f=qn.parseCSRHex(h);return qn.getKey(f.p8pubkeyhex,null,"pkcs8pub")},qn.parseCSRHex=function(h){var f=oe,m=f.getChildIdx,v=f.getTLV,A={},C=h;if(C.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var j=m(C,0);if(j.length<1)throw new Error("malformed CSR(code:002)");if(C.substr(j[0],2)!="30")throw new Error("malformed CSR(code:003)");var K=m(C,j[0]);if(K.length<3)throw new Error("malformed CSR(code:004)");return A.p8pubkeyhex=v(C,K[2]),A},qn.getKeyID=function(h){var f=qn,m=oe;typeof h=="string"&&h.indexOf("BEGIN ")!=-1&&(h=f.getKey(h));var v=po(f.getPEM(h)),A=m.getIdxbyList(v,0,[1]),C=m.getV(v,A).substring(2);return I.crypto.Util.hashHex(C,"sha1")},qn.getJWKFromKey=function(h){var f={};if(h instanceof Fe&&h.isPrivate)return f.kty="RSA",f.n=rr(h.n.toString(16)),f.e=rr(h.e.toString(16)),f.d=rr(h.d.toString(16)),f.p=rr(h.p.toString(16)),f.q=rr(h.q.toString(16)),f.dp=rr(h.dmp1.toString(16)),f.dq=rr(h.dmq1.toString(16)),f.qi=rr(h.coeff.toString(16)),f;if(h instanceof Fe&&h.isPublic)return f.kty="RSA",f.n=rr(h.n.toString(16)),f.e=rr(h.e.toString(16)),f;if(h instanceof I.crypto.ECDSA&&h.isPrivate){if((v=h.getShortNISTPCurveName())!=="P-256"&&v!=="P-384")throw new Error("unsupported curve name for JWT: "+v);var m=h.getPublicKeyXYHex();return f.kty="EC",f.crv=v,f.x=rr(m.x),f.y=rr(m.y),f.d=rr(h.prvKeyHex),f}if(h instanceof I.crypto.ECDSA&&h.isPublic){var v;if((v=h.getShortNISTPCurveName())!=="P-256"&&v!=="P-384")throw new Error("unsupported curve name for JWT: "+v);return m=h.getPublicKeyXYHex(),f.kty="EC",f.crv=v,f.x=rr(m.x),f.y=rr(m.y),f}throw new Error("not supported key object")},Fe.getPosArrayOfChildrenFromHex=function(h){return oe.getChildIdx(h,0)},Fe.getHexValueArrayOfChildrenFromHex=function(h){var f,m=oe.getV,v=m(h,(f=Fe.getPosArrayOfChildrenFromHex(h))[0]),A=m(h,f[1]),C=m(h,f[2]),j=m(h,f[3]),K=m(h,f[4]),$=m(h,f[5]),H=m(h,f[6]),W=m(h,f[7]),V=m(h,f[8]);return(f=new Array).push(v,A,C,j,K,$,H,W,V),f},Fe.prototype.readPrivateKeyFromPEMString=function(h){var f=po(h),m=Fe.getHexValueArrayOfChildrenFromHex(f);this.setPrivateEx(m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8])},Fe.prototype.readPKCS5PrvKeyHex=function(h){var f=Fe.getHexValueArrayOfChildrenFromHex(h);this.setPrivateEx(f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8])},Fe.prototype.readPKCS8PrvKeyHex=function(h){var f,m,v,A,C,j,K,$,H=oe,W=H.getVbyListEx;if(H.isASN1HEX(h)===!1)throw new Error("not ASN.1 hex string");try{f=W(h,0,[2,0,1],"02"),m=W(h,0,[2,0,2],"02"),v=W(h,0,[2,0,3],"02"),A=W(h,0,[2,0,4],"02"),C=W(h,0,[2,0,5],"02"),j=W(h,0,[2,0,6],"02"),K=W(h,0,[2,0,7],"02"),$=W(h,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(f,m,v,A,C,j,K,$)},Fe.prototype.readPKCS5PubKeyHex=function(h){var f=oe,m=f.getV;if(f.isASN1HEX(h)===!1)throw new Error("keyHex is not ASN.1 hex string");var v=f.getChildIdx(h,0);if(v.length!==2||h.substr(v[0],2)!=="02"||h.substr(v[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var A=m(h,v[0]),C=m(h,v[1]);this.setPublic(A,C)},Fe.prototype.readPKCS8PubKeyHex=function(h){var f=oe;if(f.isASN1HEX(h)===!1)throw new Error("not ASN.1 hex string");if(f.getTLVbyListEx(h,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var m=f.getTLVbyListEx(h,0,[1,0]);this.readPKCS5PubKeyHex(m)},Fe.prototype.readCertPubKeyHex=function(h,f){var m,v;(m=new or).readCertHex(h),v=m.getPublicKeyHex(),this.readPKCS8PubKeyHex(v)};function Zm(h,f){for(var m="",v=f/4-h.length,A=0;A<v;A++)m+="0";return m+h}function Qm(h,f,m){for(var v="",A=0;v.length<f;)v+=Pi(m(ho(h+String.fromCharCode.apply(String,[(4278190080&A)>>24,(16711680&A)>>16,(65280&A)>>8,255&A])))),A+=1;return v}function Xm(h){for(var f in I.crypto.Util.DIGESTINFOHEAD){var m=I.crypto.Util.DIGESTINFOHEAD[f],v=m.length;if(h.substring(0,v)==m)return[f,h.substring(v)]}return[]}function or(h){var f,m=oe,v=m.getChildIdx,A=m.getV,C=m.getTLV,j=m.getVbyList,K=m.getVbyListEx,$=m.getTLVbyList,H=m.getTLVbyListEx,W=m.getIdxbyList,V=m.getIdxbyListEx,Z=m.getVidx,te=m.getInt,ce=m.oidname,he=m.hextooidstr,pe=po;try{f=I.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var U=$(this.hex,0,[0,0]);if(U.substr(0,2)=="a0"){var q=$(U,0,[0]),z=te(q,0);if(z<0||2<z)throw new Error("malformed version field");return this.version=z+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return K(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var U=H(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(U)},this.getAlgorithmIdentifierName=function(U){for(var q in f)if(U===f[q])return q;return ce(K(U,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return $(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return $(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var U=j(this.hex,0,[0,4+this.foffset,0]);return U=U.replace(/(..)/g,"%$1"),U=decodeURIComponent(U)},this.getNotAfter=function(){var U=j(this.hex,0,[0,4+this.foffset,1]);return U=U.replace(/(..)/g,"%$1"),U=decodeURIComponent(U)},this.getPublicKeyHex=function(){return m.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return W(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var U=this.getPublicKeyIdx();return W(this.hex,U,[1,0],"30")},this.getPublicKey=function(){return qn.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var U=$(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(U)},this.getSignatureValueHex=function(){return j(this.hex,0,[2],"03",!0)},this.verifySignature=function(U){var q=this.getSignatureAlgorithmField(),z=this.getSignatureValueHex(),J=$(this.hex,0,[0],"30"),ue=new I.crypto.Signature({alg:q});return ue.init(U),ue.updateHex(J),ue.verify(z)},this.parseExt=function(U){var q,z,J;if(U===void 0){if(J=this.hex,this.version!==3)return-1;q=W(J,0,[0,7,0],"30"),z=v(J,q)}else{J=po(U);var ue=W(J,0,[0,3,0,0],"06");if(A(J,ue)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);q=W(J,0,[0,3,0,1,0],"30"),z=v(J,q),this.hex=J}this.aExtInfo=new Array;for(var ge=0;ge<z.length;ge++){var ke={critical:!1},_e=0;v(J,z[ge]).length===3&&(ke.critical=!0,_e=1),ke.oid=m.hextooidstr(j(J,z[ge],[0],"06"));var ht=W(J,z[ge],[1+_e]);ke.vidx=Z(J,ht),this.aExtInfo.push(ke)}},this.getExtInfo=function(U){var q=this.aExtInfo,z=U;if(U.match(/^[0-9.]+$/)||(z=I.asn1.x509.OID.name2oid(U)),z!==""){for(var J=0;J<q.length;J++)if(q[J].oid===z)return q[J]}},this.getExtBasicConstraints=function(U,q){if(U===void 0&&q===void 0){var z=this.getExtInfo("basicConstraints");if(z===void 0)return;U=C(this.hex,z.vidx),q=z.critical}var J={extname:"basicConstraints"};if(q&&(J.critical=!0),U==="3000")return J;if(U==="30030101ff")return J.cA=!0,J;if(U.substr(0,12)==="30060101ff02"){var ue=A(U,10),ge=parseInt(ue,16);return J.cA=!0,J.pathLen=ge,J}throw new Error("hExtV parse error: "+U)},this.getExtKeyUsage=function(U,q){if(U===void 0&&q===void 0){var z=this.getExtInfo("keyUsage");if(z===void 0)return;U=C(this.hex,z.vidx),q=z.critical}var J={extname:"keyUsage"};return q&&(J.critical=!0),J.names=this.getExtKeyUsageString(U).split(","),J},this.getExtKeyUsageBin=function(U){if(U===void 0){var q=this.getExtInfo("keyUsage");if(q===void 0)return"";U=C(this.hex,q.vidx)}if(U.length!=8&&U.length!=10)throw new Error("malformed key usage value: "+U);var z="000000000000000"+parseInt(U.substr(6),16).toString(2);return U.length==8&&(z=z.slice(-8)),U.length==10&&(z=z.slice(-16)),(z=z.replace(/0+$/,""))==""&&(z="0"),z},this.getExtKeyUsageString=function(U){for(var q=this.getExtKeyUsageBin(U),z=new Array,J=0;J<q.length;J++)q.substr(J,1)=="1"&&z.push(or.KEYUSAGE_NAME[J]);return z.join(",")},this.getExtSubjectKeyIdentifier=function(U,q){if(U===void 0&&q===void 0){var z=this.getExtInfo("subjectKeyIdentifier");if(z===void 0)return;U=C(this.hex,z.vidx),q=z.critical}var J={extname:"subjectKeyIdentifier"};q&&(J.critical=!0);var ue=A(U,0);return J.kid={hex:ue},J},this.getExtAuthorityKeyIdentifier=function(U,q){if(U===void 0&&q===void 0){var z=this.getExtInfo("authorityKeyIdentifier");if(z===void 0)return;U=C(this.hex,z.vidx),q=z.critical}var J={extname:"authorityKeyIdentifier"};q&&(J.critical=!0);for(var ue=v(U,0),ge=0;ge<ue.length;ge++){var ke=U.substr(ue[ge],2);if(ke==="80"&&(J.kid={hex:A(U,ue[ge])}),ke==="a1"){var _e=C(U,ue[ge]),ht=this.getGeneralNames(_e);J.issuer=ht[0].dn}ke==="82"&&(J.sn={hex:A(U,ue[ge])})}return J},this.getExtExtKeyUsage=function(U,q){if(U===void 0&&q===void 0){var z=this.getExtInfo("extKeyUsage");if(z===void 0)return;U=C(this.hex,z.vidx),q=z.critical}var J={extname:"extKeyUsage",array:[]};q&&(J.critical=!0);for(var ue=v(U,0),ge=0;ge<ue.length;ge++)J.array.push(ce(A(U,ue[ge])));return J},this.getExtExtKeyUsageName=function(){var U=this.getExtInfo("extKeyUsage");if(U===void 0)return U;var q=new Array,z=C(this.hex,U.vidx);if(z==="")return q;for(var J=v(z,0),ue=0;ue<J.length;ue++)q.push(ce(A(z,J[ue])));return q},this.getExtSubjectAltName=function(U,q){if(U===void 0&&q===void 0){var z=this.getExtInfo("subjectAltName");if(z===void 0)return;U=C(this.hex,z.vidx),q=z.critical}var J={extname:"subjectAltName",array:[]};return q&&(J.critical=!0),J.array=this.getGeneralNames(U),J},this.getExtIssuerAltName=function(U,q){if(U===void 0&&q===void 0){var z=this.getExtInfo("issuerAltName");if(z===void 0)return;U=C(this.hex,z.vidx),q=z.critical}var J={extname:"issuerAltName",array:[]};return q&&(J.critical=!0),J.array=this.getGeneralNames(U),J},this.getGeneralNames=function(U){for(var q=v(U,0),z=[],J=0;J<q.length;J++){var ue=this.getGeneralName(C(U,q[J]));ue!==void 0&&z.push(ue)}return z},this.getGeneralName=function(U){var q=U.substr(0,2),z=A(U,0),J=Pi(z);return q=="81"?{rfc822:J}:q=="82"?{dns:J}:q=="86"?{uri:J}:q=="87"?{ip:uh(z)}:q=="a4"?{dn:this.getX500Name(z)}:void 0},this.getExtSubjectAltName2=function(){var U,q,z,J=this.getExtInfo("subjectAltName");if(J===void 0)return J;for(var ue=new Array,ge=C(this.hex,J.vidx),ke=v(ge,0),_e=0;_e<ke.length;_e++)z=ge.substr(ke[_e],2),U=A(ge,ke[_e]),z==="81"&&(q=ir(U),ue.push(["MAIL",q])),z==="82"&&(q=ir(U),ue.push(["DNS",q])),z==="84"&&(q=or.hex2dn(U,0),ue.push(["DN",q])),z==="86"&&(q=ir(U),ue.push(["URI",q])),z==="87"&&(q=uh(U),ue.push(["IP",q]));return ue},this.getExtCRLDistributionPoints=function(U,q){if(U===void 0&&q===void 0){var z=this.getExtInfo("cRLDistributionPoints");if(z===void 0)return;U=C(this.hex,z.vidx),q=z.critical}var J={extname:"cRLDistributionPoints",array:[]};q&&(J.critical=!0);for(var ue=v(U,0),ge=0;ge<ue.length;ge++){var ke=C(U,ue[ge]);J.array.push(this.getDistributionPoint(ke))}return J},this.getDistributionPoint=function(U){for(var q={},z=v(U,0),J=0;J<z.length;J++){var ue=U.substr(z[J],2),ge=C(U,z[J]);ue=="a0"&&(q.dpname=this.getDistributionPointName(ge))}return q},this.getDistributionPointName=function(U){for(var q={},z=v(U,0),J=0;J<z.length;J++){var ue=U.substr(z[J],2),ge=C(U,z[J]);ue=="a0"&&(q.full=this.getGeneralNames(ge))}return q},this.getExtCRLDistributionPointsURI=function(){var U=this.getExtInfo("cRLDistributionPoints");if(U===void 0)return U;for(var q=new Array,z=v(this.hex,U.vidx),J=0;J<z.length;J++)try{var ue=ir(j(this.hex,z[J],[0,0,0],"86"));q.push(ue)}catch{}return q},this.getExtAIAInfo=function(){var U=this.getExtInfo("authorityInfoAccess");if(U===void 0)return U;for(var q={ocsp:[],caissuer:[]},z=v(this.hex,U.vidx),J=0;J<z.length;J++){var ue=j(this.hex,z[J],[0],"06"),ge=j(this.hex,z[J],[1],"86");ue==="2b06010505073001"&&q.ocsp.push(ir(ge)),ue==="2b06010505073002"&&q.caissuer.push(ir(ge))}return q},this.getExtAuthorityInfoAccess=function(U,q){if(U===void 0&&q===void 0){var z=this.getExtInfo("authorityInfoAccess");if(z===void 0)return;U=C(this.hex,z.vidx),q=z.critical}var J={extname:"authorityInfoAccess",array:[]};q&&(J.critical=!0);for(var ue=v(U,0),ge=0;ge<ue.length;ge++){var ke=K(U,ue[ge],[0],"06"),_e=ir(j(U,ue[ge],[1],"86"));if(ke=="2b06010505073001")J.array.push({ocsp:_e});else{if(ke!="2b06010505073002")throw new Error("unknown method: "+ke);J.array.push({caissuer:_e})}}return J},this.getExtCertificatePolicies=function(U,q){if(U===void 0&&q===void 0){var z=this.getExtInfo("certificatePolicies");if(z===void 0)return;U=C(this.hex,z.vidx),q=z.critical}var J={extname:"certificatePolicies",array:[]};q&&(J.critical=!0);for(var ue=v(U,0),ge=0;ge<ue.length;ge++){var ke=C(U,ue[ge]),_e=this.getPolicyInformation(ke);J.array.push(_e)}return J},this.getPolicyInformation=function(U){var q={},z=j(U,0,[0],"06");q.policyoid=ce(z);var J=V(U,0,[1],"30");if(J!=-1){q.array=[];for(var ue=v(U,J),ge=0;ge<ue.length;ge++){var ke=C(U,ue[ge]),_e=this.getPolicyQualifierInfo(ke);q.array.push(_e)}}return q},this.getPolicyQualifierInfo=function(U){var q={},z=j(U,0,[0],"06");if(z==="2b06010505070201"){var J=K(U,0,[1],"16");q.cps=Pi(J)}else if(z==="2b06010505070202"){var ue=$(U,0,[1],"30");q.unotice=this.getUserNotice(ue)}return q},this.getUserNotice=function(U){for(var q={},z=v(U,0),J=0;J<z.length;J++){var ue=C(U,z[J]);ue.substr(0,2)!="30"&&(q.exptext=this.getDisplayText(ue))}return q},this.getDisplayText=function(U){var q={};return q.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[U.substr(0,2)],q.str=Pi(A(U,0)),q},this.getExtCRLNumber=function(U,q){var z={extname:"cRLNumber"};if(q&&(z.critical=!0),U.substr(0,2)=="02")return z.num={hex:A(U,0)},z;throw new Error("hExtV parse error: "+U)},this.getExtCRLReason=function(U,q){var z={extname:"cRLReason"};if(q&&(z.critical=!0),U.substr(0,2)=="0a")return z.code=parseInt(A(U,0),16),z;throw new Error("hExtV parse error: "+U)},this.getExtOcspNonce=function(U,q){var z={extname:"ocspNonce"};q&&(z.critical=!0);var J=A(U,0);return z.hex=J,z},this.getExtOcspNoCheck=function(U,q){var z={extname:"ocspNoCheck"};return q&&(z.critical=!0),z},this.getExtAdobeTimeStamp=function(U,q){if(U===void 0&&q===void 0){var z=this.getExtInfo("adobeTimeStamp");if(z===void 0)return;U=C(this.hex,z.vidx),q=z.critical}var J={extname:"adobeTimeStamp"};q&&(J.critical=!0);var ue=v(U,0);if(ue.length>1){var ge=C(U,ue[1]),ke=this.getGeneralName(ge);ke.uri!=null&&(J.uri=ke.uri)}if(ue.length>2){var _e=C(U,ue[2]);_e=="0101ff"&&(J.reqauth=!0),_e=="010100"&&(J.reqauth=!1)}return J},this.getX500NameRule=function(U){for(var q=null,z=[],J=0;J<U.length;J++)for(var ue=U[J],ge=0;ge<ue.length;ge++)z.push(ue[ge]);for(J=0;J<z.length;J++){var ke=z[J],_e=ke.ds,ht=ke.value,Ie=ke.type;if(_e!="prn"&&_e!="utf8"&&_e!="ia5")return"mixed";if(_e=="ia5"){if(Ie!="CN")return"mixed";if(I.lang.String.isMail(ht))continue;return"mixed"}if(Ie=="C"){if(_e=="prn")continue;return"mixed"}if(q==null)q=_e;else if(q!==_e)return"mixed"}return q==null?"prn":q},this.getX500Name=function(U){var q=this.getX500NameArray(U);return{array:q,str:this.dnarraytostr(q)}},this.getX500NameArray=function(U){for(var q=[],z=v(U,0),J=0;J<z.length;J++)q.push(this.getRDN(C(U,z[J])));return q},this.getRDN=function(U){for(var q=[],z=v(U,0),J=0;J<z.length;J++)q.push(this.getAttrTypeAndValue(C(U,z[J])));return q},this.getAttrTypeAndValue=function(U){var q={type:null,value:null,ds:null},z=v(U,0),J=j(U,z[0],[],"06"),ue=j(U,z[1],[]),ge=I.asn1.ASN1Util.oidHexToInt(J);return q.type=I.asn1.x509.OID.oid2atype(ge),q.ds=this.HEX2STAG[U.substr(z[1],2)],q.ds!="bmp"?q.value=ir(ue):q.value=zm(ue),q},this.readCertPEM=function(U){this.readCertHex(pe(U))},this.readCertHex=function(U){this.hex=U,this.getVersion();try{W(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var U={};return U.version=this.getVersion(),U.serial={hex:this.getSerialNumberHex()},U.sigalg=this.getSignatureAlgorithmField(),U.issuer=this.getIssuer(),U.notbefore=this.getNotBefore(),U.notafter=this.getNotAfter(),U.subject=this.getSubject(),U.sbjpubkey=di(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(U.ext=this.getExtParamArray()),U.sighex=this.getSignatureValueHex(),U},this.getExtParamArray=function(U){U==null&&V(this.hex,0,[0,"[3]"])!=-1&&(U=H(this.hex,0,[0,"[3]",0],"30"));for(var q=[],z=v(U,0),J=0;J<z.length;J++){var ue=C(U,z[J]),ge=this.getExtParam(ue);ge!=null&&q.push(ge)}return q},this.getExtParam=function(U){var q=v(U,0).length;if(q!=2&&q!=3)throw new Error("wrong number elements in Extension: "+q+" "+U);var z=he(j(U,0,[0],"06")),J=!1;q==3&&$(U,0,[1])=="0101ff"&&(J=!0);var ue=$(U,0,[q-1,0]),ge=void 0;if(z=="2.5.29.14"?ge=this.getExtSubjectKeyIdentifier(ue,J):z=="2.5.29.15"?ge=this.getExtKeyUsage(ue,J):z=="2.5.29.17"?ge=this.getExtSubjectAltName(ue,J):z=="2.5.29.18"?ge=this.getExtIssuerAltName(ue,J):z=="2.5.29.19"?ge=this.getExtBasicConstraints(ue,J):z=="2.5.29.31"?ge=this.getExtCRLDistributionPoints(ue,J):z=="2.5.29.32"?ge=this.getExtCertificatePolicies(ue,J):z=="2.5.29.35"?ge=this.getExtAuthorityKeyIdentifier(ue,J):z=="2.5.29.37"?ge=this.getExtExtKeyUsage(ue,J):z=="1.3.6.1.5.5.7.1.1"?ge=this.getExtAuthorityInfoAccess(ue,J):z=="2.5.29.20"?ge=this.getExtCRLNumber(ue,J):z=="2.5.29.21"?ge=this.getExtCRLReason(ue,J):z=="1.3.6.1.5.5.7.48.1.2"?ge=this.getExtOcspNonce(ue,J):z=="1.3.6.1.5.5.7.48.1.5"?ge=this.getExtOcspNoCheck(ue,J):z=="1.2.840.113583.1.1.9.1"&&(ge=this.getExtAdobeTimeStamp(ue,J)),ge!=null)return ge;var ke={extname:z,extn:ue};return J&&(ke.critical=!0),ke},this.findExt=function(U,q){for(var z=0;z<U.length;z++)if(U[z].extname==q)return U[z];return null},this.updateExtCDPFullURI=function(U,q){var z=this.findExt(U,"cRLDistributionPoints");if(z!=null&&z.array!=null){for(var J=z.array,ue=0;ue<J.length;ue++)if(J[ue].dpname!=null&&J[ue].dpname.full!=null)for(var ge=J[ue].dpname.full,ke=0;ke<ge.length;ke++){var _e=ge[ue];_e.uri!=null&&(_e.uri=q)}}},this.updateExtAIAOCSP=function(U,q){var z=this.findExt(U,"authorityInfoAccess");if(z!=null&&z.array!=null)for(var J=z.array,ue=0;ue<J.length;ue++)J[ue].ocsp!=null&&(J[ue].ocsp=q)},this.updateExtAIACAIssuer=function(U,q){var z=this.findExt(U,"authorityInfoAccess");if(z!=null&&z.array!=null)for(var J=z.array,ue=0;ue<J.length;ue++)J[ue].caissuer!=null&&(J[ue].caissuer=q)},this.dnarraytostr=function(U){return"/"+U.map(function(q){return function(J){return J.map(function(ue){return function(ke){return ke.type+"="+ke.value}(ue).replace(/\+/,"\\+")}).join("+")}(q).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var U,q,z,J=function(fi){return JSON.stringify(fi.array).replace(/[\[\]\{\}\"]/g,"")},ue=function(fi){for(var $r="",Zr=fi.array,Un=0;Un<Zr.length;Un++){var sr=Zr[Un];if($r+="    policy oid: "+sr.policyoid+`
`,sr.array!==void 0)for(var Dr=0;Dr<sr.array.length;Dr++){var Qr=sr.array[Dr];Qr.cps!==void 0&&($r+="    cps: "+Qr.cps+`
`)}}return $r},ge=function(fi){for(var $r="",Zr=fi.array,Un=0;Un<Zr.length;Un++){var sr=Zr[Un];try{sr.dpname.full[0].uri!==void 0&&($r+="    "+sr.dpname.full[0].uri+`
`)}catch{}try{sr.dname.full[0].dn.hex!==void 0&&($r+="    "+or.hex2dn(sr.dpname.full[0].dn.hex)+`
`)}catch{}}return $r},ke=function(fi){for(var $r="",Zr=fi.array,Un=0;Un<Zr.length;Un++){var sr=Zr[Un];sr.caissuer!==void 0&&($r+="    caissuer: "+sr.caissuer+`
`),sr.ocsp!==void 0&&($r+="    ocsp: "+sr.ocsp+`
`)}return $r};if(U=`Basic Fields
`,U+="  serial number: "+this.getSerialNumberHex()+`
`,U+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,U+="  issuer: "+this.getIssuerString()+`
`,U+="  notBefore: "+this.getNotBefore()+`
`,U+="  notAfter: "+this.getNotAfter()+`
`,U+="  subject: "+this.getSubjectString()+`
`,U+=`  subject public key info: 
`,U+="    key algorithm: "+(q=this.getPublicKey()).type+`
`,q.type==="RSA"&&(U+="    n="+lh(q.n.toString(16)).substr(0,16)+`...
`,U+="    e="+lh(q.e.toString(16))+`
`),(z=this.aExtInfo)!=null){U+=`X509v3 Extensions:
`;for(var _e=0;_e<z.length;_e++){var ht=z[_e],Ie=I.asn1.x509.OID.oid2name(ht.oid);Ie===""&&(Ie=ht.oid);var Ke="";if(ht.critical===!0&&(Ke="CRITICAL"),U+="  "+Ie+" "+Ke+`:
`,Ie==="basicConstraints"){var rn=this.getExtBasicConstraints();rn.cA===void 0?U+=`    {}
`:(U+="    cA=true",rn.pathLen!==void 0&&(U+=", pathLen="+rn.pathLen),U+=`
`)}else if(Ie==="keyUsage")U+="    "+this.getExtKeyUsageString()+`
`;else if(Ie==="subjectKeyIdentifier")U+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(Ie==="authorityKeyIdentifier"){var _n=this.getExtAuthorityKeyIdentifier();_n.kid!==void 0&&(U+="    kid="+_n.kid.hex+`
`)}else Ie==="extKeyUsage"?U+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:Ie==="subjectAltName"?U+="    "+J(this.getExtSubjectAltName())+`
`:Ie==="cRLDistributionPoints"?U+=ge(this.getExtCRLDistributionPoints()):Ie==="authorityInfoAccess"?U+=ke(this.getExtAuthorityInfoAccess()):Ie==="certificatePolicies"&&(U+=ue(this.getExtCertificatePolicies()))}}return U+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,U+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof h=="string"&&(h.indexOf("-----BEGIN")!=-1?this.readCertPEM(h):I.lang.String.isHex(h)&&this.readCertHex(h))}Fe.prototype.sign=function(h,f){var m=function(A){return I.crypto.Util.hashString(A,f)}(h);return this.signWithMessageHash(m,f)},Fe.prototype.signWithMessageHash=function(h,f){var m=pr(I.crypto.Util.getPaddedDigestInfoHex(h,f,this.n.bitLength()),16);return Zm(this.doPrivate(m).toString(16),this.n.bitLength())},Fe.prototype.signPSS=function(h,f,m){var v=function(C){return I.crypto.Util.hashHex(C,f)}(ho(h));return m===void 0&&(m=-1),this.signWithMessageHashPSS(v,f,m)},Fe.prototype.signWithMessageHashPSS=function(h,f,m){var v,A=Pi(h),C=A.length,j=this.n.bitLength()-1,K=Math.ceil(j/8),$=function(U){return I.crypto.Util.hashHex(U,f)};if(m===-1||m===void 0)m=C;else if(m===-2)m=K-C-2;else if(m<-2)throw new Error("invalid salt length");if(K<C+m+2)throw new Error("data too long");var H="";m>0&&(H=new Array(m),new dt().nextBytes(H),H=String.fromCharCode.apply(String,H));var W=Pi($(ho("\0\0\0\0\0\0\0\0"+A+H))),V=[];for(v=0;v<K-m-C-2;v+=1)V[v]=0;var Z=String.fromCharCode.apply(String,V)+""+H,te=Qm(W,Z.length,$),ce=[];for(v=0;v<Z.length;v+=1)ce[v]=Z.charCodeAt(v)^te.charCodeAt(v);var he=65280>>8*K-j&255;for(ce[0]&=~he,v=0;v<C;v++)ce.push(W.charCodeAt(v));return ce.push(188),Zm(this.doPrivate(new B(ce)).toString(16),this.n.bitLength())},Fe.prototype.verify=function(h,f){if((f=f.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var m=pr(f,16),v=this.n.bitLength();if(m.bitLength()>v)return!1;var A=this.doPublic(m).toString(16);if(A.length+3!=v/4)return!1;var C=Xm(A.replace(/^1f+00/,""));if(C.length==0)return!1;var j=C[0];return C[1]==function($){return I.crypto.Util.hashString($,j)}(h)},Fe.prototype.verifyWithMessageHash=function(h,f){if(f.length!=Math.ceil(this.n.bitLength()/4))return!1;var m=pr(f,16);if(m.bitLength()>this.n.bitLength())return 0;var v=Xm(this.doPublic(m).toString(16).replace(/^1f+00/,""));return v.length==0?!1:(v[0],v[1]==h)},Fe.prototype.verifyPSS=function(h,f,m,v){var A=function(j){return I.crypto.Util.hashHex(j,m)}(ho(h));return v===void 0&&(v=-1),this.verifyWithMessageHashPSS(A,f,m,v)},Fe.prototype.verifyWithMessageHashPSS=function(h,f,m,v){if(f.length!=Math.ceil(this.n.bitLength()/4))return!1;var A,C=new B(f,16),j=function(z){return I.crypto.Util.hashHex(z,m)},K=Pi(h),$=K.length,H=this.n.bitLength()-1,W=Math.ceil(H/8);if(v===-1||v===void 0)v=$;else if(v===-2)v=W-$-2;else if(v<-2)throw new Error("invalid salt length");if(W<$+v+2)throw new Error("data too long");var V=this.doPublic(C).toByteArray();for(A=0;A<V.length;A+=1)V[A]&=255;for(;V.length<W;)V.unshift(0);if(V[W-1]!==188)throw new Error("encoded message does not end in 0xbc");var Z=(V=String.fromCharCode.apply(String,V)).substr(0,W-$-1),te=V.substr(Z.length,$),ce=65280>>8*W-H&255;if((Z.charCodeAt(0)&ce)!=0)throw new Error("bits beyond keysize not zero");var he=Qm(te,Z.length,j),pe=[];for(A=0;A<Z.length;A+=1)pe[A]=Z.charCodeAt(A)^he.charCodeAt(A);pe[0]&=~ce;var U=W-$-v-2;for(A=0;A<U;A+=1)if(pe[A]!==0)throw new Error("leftmost octets not zero");if(pe[U]!==1)throw new Error("0x01 marker not found");return te===Pi(j(ho("\0\0\0\0\0\0\0\0"+K+String.fromCharCode.apply(String,pe.slice(-v)))))},Fe.SALT_LEN_HLEN=-1,Fe.SALT_LEN_MAX=-2,Fe.SALT_LEN_RECOVER=-2,or.hex2dn=function(h,f){f===void 0&&(f=0);var m=new or;return oe.getTLV(h,f),m.getX500Name(h).str},or.hex2rdn=function(h,f){if(f===void 0&&(f=0),h.substr(f,2)!=="31")throw new Error("malformed RDN");for(var m=new Array,v=oe.getChildIdx(h,f),A=0;A<v.length;A++)m.push(or.hex2attrTypeValue(h,v[A]));return(m=m.map(function(C){return C.replace("+","\\+")})).join("+")},or.hex2attrTypeValue=function(h,f){var m=oe,v=m.getV;if(f===void 0&&(f=0),h.substr(f,2)!=="30")throw new Error("malformed attribute type and value");var A=m.getChildIdx(h,f);A.length!==2||h.substr(A[0],2);var C=v(h,A[0]),j=I.asn1.ASN1Util.oidHexToInt(C);return I.asn1.x509.OID.oid2atype(j)+"="+Pi(v(h,A[1]))},or.getPublicKeyFromCertHex=function(h){var f=new or;return f.readCertHex(h),f.getPublicKey()},or.getPublicKeyFromCertPEM=function(h){var f=new or;return f.readCertPEM(h),f.getPublicKey()},or.getPublicKeyInfoPropOfCertPEM=function(h){var f,m,v=oe.getVbyList,A={};return A.algparam=null,(f=new or).readCertPEM(h),m=f.getPublicKeyHex(),A.keyhex=v(m,0,[1],"03").substr(2),A.algoid=v(m,0,[0,0],"06"),A.algoid==="2a8648ce3d0201"&&(A.algparam=v(m,0,[0,1],"06")),A},or.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],I!==void 0&&I||(r.KJUR=I={}),I.jws!==void 0&&I.jws||(I.jws={}),I.jws.JWS=function(){var h=I.jws.JWS.isSafeJSONString;this.parseJWS=function(f,m){if(this.parsedJWS===void 0||!m&&this.parsedJWS.sigvalH===void 0){var v=f.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(v==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var A=v[1],C=v[2],j=v[3],K=A+"."+C;if(this.parsedJWS={},this.parsedJWS.headB64U=A,this.parsedJWS.payloadB64U=C,this.parsedJWS.sigvalB64U=j,this.parsedJWS.si=K,!m){var $=dn(j),H=pr($,16);this.parsedJWS.sigvalH=$,this.parsedJWS.sigvalBI=H}var W=fe(A),V=fe(C);if(this.parsedJWS.headS=W,this.parsedJWS.payloadS=V,!h(W,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+W}}},I.jws.JWS.sign=function(h,f,m,v,A){var C,j,K,$=I,H=$.jws.JWS,W=H.readSafeJSONString,V=H.isSafeJSONString,Z=$.crypto,te=(Z.ECDSA,Z.Mac),ce=Z.Signature,he=JSON;if(typeof f!="string"&&(f===void 0?"undefined":E(f))!="object")throw"spHeader must be JSON string or object: "+f;if((f===void 0?"undefined":E(f))=="object"&&(j=f,C=he.stringify(j)),typeof f=="string"){if(!V(C=f))throw"JWS Head is not safe JSON string: "+C;j=W(C)}if(K=m,(m===void 0?"undefined":E(m))=="object"&&(K=he.stringify(m)),h!=""&&h!=null||j.alg===void 0||(h=j.alg),h!=""&&h!=null&&j.alg===void 0&&(j.alg=h,C=he.stringify(j)),h!==j.alg)throw"alg and sHeader.alg doesn't match: "+h+"!="+j.alg;var pe=null;if(H.jwsalg2sigalg[h]===void 0)throw"unsupported alg name: "+h;pe=H.jwsalg2sigalg[h];var U=ie(C)+"."+ie(K),q="";if(pe.substr(0,4)=="Hmac"){if(v===void 0)throw"mac key shall be specified for HS* alg";var z=new te({alg:pe,prov:"cryptojs",pass:v});z.updateString(U),q=z.doFinal()}else if(pe.indexOf("withECDSA")!=-1){(ue=new ce({alg:pe})).init(v,A),ue.updateString(U);var J=ue.sign();q=I.crypto.ECDSA.asn1SigToConcatSig(J)}else{var ue;pe!="none"&&((ue=new ce({alg:pe})).init(v,A),ue.updateString(U),q=ue.sign())}return U+"."+rr(q)},I.jws.JWS.verify=function(h,f,m){var v,A=I,C=A.jws.JWS,j=C.readSafeJSONString,K=A.crypto,$=K.ECDSA,H=K.Mac,W=K.Signature;E(Fe)!==void 0&&(v=Fe);var V=h.split(".");if(V.length!==3)return!1;var Z=V[0]+"."+V[1],te=dn(V[2]),ce=j(fe(V[0])),he=null,pe=null;if(ce.alg===void 0)throw"algorithm not specified in header";if(pe=(he=ce.alg).substr(0,2),m!=null&&Object.prototype.toString.call(m)==="[object Array]"&&m.length>0&&(":"+m.join(":")+":").indexOf(":"+he+":")==-1)throw"algorithm '"+he+"' not accepted in the list";if(he!="none"&&f===null)throw"key shall be specified to verify.";if(typeof f=="string"&&f.indexOf("-----BEGIN ")!=-1&&(f=qn.getKey(f)),!(pe!="RS"&&pe!="PS"||f instanceof v))throw"key shall be a RSAKey obj for RS* and PS* algs";if(pe=="ES"&&!(f instanceof $))throw"key shall be a ECDSA obj for ES* algs";var U=null;if(C.jwsalg2sigalg[ce.alg]===void 0)throw"unsupported alg name: "+he;if((U=C.jwsalg2sigalg[he])=="none")throw"not supported";if(U.substr(0,4)=="Hmac"){if(f===void 0)throw"hexadecimal key shall be specified for HMAC";var q=new H({alg:U,pass:f});return q.updateString(Z),te==q.doFinal()}if(U.indexOf("withECDSA")!=-1){var z,J=null;try{J=$.concatSigToASN1Sig(te)}catch{return!1}return(z=new W({alg:U})).init(f),z.updateString(Z),z.verify(J)}return(z=new W({alg:U})).init(f),z.updateString(Z),z.verify(te)},I.jws.JWS.parse=function(h){var f,m,v,A=h.split("."),C={};if(A.length!=2&&A.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return f=A[0],m=A[1],A.length==3&&(v=A[2]),C.headerObj=I.jws.JWS.readSafeJSONString(fe(f)),C.payloadObj=I.jws.JWS.readSafeJSONString(fe(m)),C.headerPP=JSON.stringify(C.headerObj,null,"  "),C.payloadObj==null?C.payloadPP=fe(m):C.payloadPP=JSON.stringify(C.payloadObj,null,"  "),v!==void 0&&(C.sigHex=dn(v)),C},I.jws.JWS.verifyJWT=function(h,f,m){var v=I.jws,A=v.JWS,C=A.readSafeJSONString,j=A.inArray,K=A.includedArray,$=h.split("."),H=$[0],W=$[1],V=(dn($[2]),C(fe(H))),Z=C(fe(W));if(V.alg===void 0)return!1;if(m.alg===void 0)throw"acceptField.alg shall be specified";if(!j(V.alg,m.alg)||Z.iss!==void 0&&E(m.iss)==="object"&&!j(Z.iss,m.iss)||Z.sub!==void 0&&E(m.sub)==="object"&&!j(Z.sub,m.sub))return!1;if(Z.aud!==void 0&&E(m.aud)==="object"){if(typeof Z.aud=="string"){if(!j(Z.aud,m.aud))return!1}else if(E(Z.aud)=="object"&&!K(Z.aud,m.aud))return!1}var te=v.IntDate.getNow();return m.verifyAt!==void 0&&typeof m.verifyAt=="number"&&(te=m.verifyAt),m.gracePeriod!==void 0&&typeof m.gracePeriod=="number"||(m.gracePeriod=0),!(Z.exp!==void 0&&typeof Z.exp=="number"&&Z.exp+m.gracePeriod<te)&&!(Z.nbf!==void 0&&typeof Z.nbf=="number"&&te<Z.nbf-m.gracePeriod)&&!(Z.iat!==void 0&&typeof Z.iat=="number"&&te<Z.iat-m.gracePeriod)&&(Z.jti===void 0||m.jti===void 0||Z.jti===m.jti)&&!!A.verify(h,f,m.alg)},I.jws.JWS.includedArray=function(h,f){var m=I.jws.JWS.inArray;if(h===null||(h===void 0?"undefined":E(h))!=="object"||typeof h.length!="number")return!1;for(var v=0;v<h.length;v++)if(!m(h[v],f))return!1;return!0},I.jws.JWS.inArray=function(h,f){if(f===null||(f===void 0?"undefined":E(f))!=="object"||typeof f.length!="number")return!1;for(var m=0;m<f.length;m++)if(f[m]==h)return!0;return!1},I.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},I.jws.JWS.isSafeJSONString=function(h,f,m){var v=null;try{return((v=k(h))===void 0?"undefined":E(v))!="object"||v.constructor===Array?0:(f&&(f[m]=v),1)}catch{return 0}},I.jws.JWS.readSafeJSONString=function(h){var f=null;try{return((f=k(h))===void 0?"undefined":E(f))!="object"||f.constructor===Array?null:f}catch{return null}},I.jws.JWS.getEncodedSignatureValueFromJWS=function(h){var f=h.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(f==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return f[1]},I.jws.JWS.getJWKthumbprint=function(h){if(h.kty!=="RSA"&&h.kty!=="EC"&&h.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var f="{";if(h.kty==="RSA"){if(typeof h.n!="string"||typeof h.e!="string")throw"wrong n and e value for RSA key";f+='"e":"'+h.e+'",',f+='"kty":"'+h.kty+'",',f+='"n":"'+h.n+'"}'}else if(h.kty==="EC"){if(typeof h.crv!="string"||typeof h.x!="string"||typeof h.y!="string")throw"wrong crv, x and y value for EC key";f+='"crv":"'+h.crv+'",',f+='"kty":"'+h.kty+'",',f+='"x":"'+h.x+'",',f+='"y":"'+h.y+'"}'}else if(h.kty==="oct"){if(typeof h.k!="string")throw"wrong k value for oct(symmetric) key";f+='"kty":"'+h.kty+'",',f+='"k":"'+h.k+'"}'}var m=ho(f);return rr(I.crypto.Util.hashHex(m,"sha256"))},I.jws.IntDate={},I.jws.IntDate.get=function(h){var f=I.jws.IntDate,m=f.getNow,v=f.getZulu;if(h=="now")return m();if(h=="now + 1hour")return m()+3600;if(h=="now + 1day")return m()+86400;if(h=="now + 1month")return m()+2592e3;if(h=="now + 1year")return m()+31536e3;if(h.match(/Z$/))return v(h);if(h.match(/^[0-9]+$/))return parseInt(h);throw"unsupported format: "+h},I.jws.IntDate.getZulu=function(h){return qm(h)},I.jws.IntDate.getNow=function(){return~~(new Date/1e3)},I.jws.IntDate.intDate2UTCString=function(h){return new Date(1e3*h).toUTCString()},I.jws.IntDate.intDate2Zulu=function(h){var f=new Date(1e3*h);return("0000"+f.getUTCFullYear()).slice(-4)+("00"+(f.getUTCMonth()+1)).slice(-2)+("00"+f.getUTCDate()).slice(-2)+("00"+f.getUTCHours()).slice(-2)+("00"+f.getUTCMinutes()).slice(-2)+("00"+f.getUTCSeconds()).slice(-2)+"Z"},r.SecureRandom=dt,r.rng_seed_time=de,r.BigInteger=B,r.RSAKey=Fe;var AE=I.crypto.EDSA;r.EDSA=AE;var xE=I.crypto.DSA;r.DSA=xE;var IE=I.crypto.Signature;r.Signature=IE;var RE=I.crypto.MessageDigest;r.MessageDigest=RE;var kE=I.crypto.Mac;r.Mac=kE;var FE=I.crypto.Cipher;r.Cipher=FE,r.KEYUTIL=qn,r.ASN1HEX=oe,r.X509=or,r.CryptoJS=F,r.b64tohex=Y,r.b64toBA=Q,r.stoBA=it,r.BAtos=ln,r.BAtohex=Lt,r.stohex=kt,r.stob64=function(f){return D(kt(f))},r.stob64u=function(f){return Ft(D(kt(f)))},r.b64utos=function(f){return ln(Q(Hc(f)))},r.b64tob64u=Ft,r.b64utob64=Hc,r.hex2b64=D,r.hextob64u=rr,r.b64utohex=dn,r.utf8tob64u=ie,r.b64utoutf8=fe,r.utf8tob64=function(f){return D(Al(Il(f)))},r.b64toutf8=function(f){return decodeURIComponent(xl(Y(f)))},r.utf8tohex=ah,r.hextoutf8=ir,r.hextorstr=Pi,r.rstrtohex=ho,r.hextob64=Hm,r.hextob64nl=Km,r.b64nltohex=Wm,r.hextopem=di,r.pemtohex=po,r.hextoArrayBuffer=function(f){if(f.length%2!=0)throw"input is not even length";if(f.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var m=new ArrayBuffer(f.length/2),v=new DataView(m),A=0;A<f.length/2;A++)v.setUint8(A,parseInt(f.substr(2*A,2),16));return m},r.ArrayBuffertohex=function(f){for(var m="",v=new DataView(f),A=0;A<f.byteLength;A++)m+=("00"+v.getUint8(A).toString(16)).slice(-2);return m},r.zulutomsec=ch,r.zulutosec=qm,r.zulutodate=function(f){return new Date(ch(f))},r.datetozulu=function(f,m,v){var A,C=f.getUTCFullYear();if(m){if(C<1950||2049<C)throw"not proper year for UTCTime: "+C;A=(""+C).slice(-2)}else A=("000"+C).slice(-4);if(A+=("0"+(f.getUTCMonth()+1)).slice(-2),A+=("0"+f.getUTCDate()).slice(-2),A+=("0"+f.getUTCHours()).slice(-2),A+=("0"+f.getUTCMinutes()).slice(-2),A+=("0"+f.getUTCSeconds()).slice(-2),v){var j=f.getUTCMilliseconds();j!==0&&(A+="."+(j=(j=("00"+j).slice(-3)).replace(/0+$/g,"")))}return A+="Z"},r.uricmptohex=Al,r.hextouricmp=xl,r.ipv6tohex=Vm,r.hextoipv6=Gm,r.hextoip=uh,r.iptohex=function(f){var m="malformed IP address";if(!(f=f.toLowerCase(f)).match(/^[0-9.]+$/)){if(f.match(/^[0-9a-f:]+$/)&&f.indexOf(":")!==-1)return Vm(f);throw m}var v=f.split(".");if(v.length!==4)throw m;var A="";try{for(var C=0;C<4;C++)A+=("0"+parseInt(v[C]).toString(16)).slice(-2);return A}catch{throw m}},r.encodeURIComponentAll=Il,r.newline_toUnix=function(f){return f=f.replace(/\r\n/gm,`
`)},r.newline_toDos=function(f){return f=(f=f.replace(/\r\n/gm,`
`)).replace(/\n/gm,`\r
`)},r.hextoposhex=lh,r.intarystrtohex=function(f){f=(f=(f=f.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return f.split(/,/).map(function(m,v,A){var C=parseInt(m);if(C<0||255<C)throw"integer not in range 0-255";return("00"+C.toString(16)).slice(-2)}).join("")}catch(m){throw"malformed integer array string: "+m}},r.strdiffidx=function(f,m){var v=f.length;f.length>m.length&&(v=m.length);for(var A=0;A<v;A++)if(f.charCodeAt(A)!=m.charCodeAt(A))return A;return f.length!=m.length?v:-1},r.KJUR=I;var DE=I.crypto;r.crypto=DE;var CE=I.asn1;r.asn1=CE;var PE=I.jws;r.jws=PE;var NE=I.lang;r.lang=NE}).call(this,i(28).Buffer)},function(n,r,i){(function(o){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var s=i(30),a=i(31),c=i(32);function u(){return d.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(X,N){if(u()<N)throw new RangeError("Invalid typed array length");return d.TYPED_ARRAY_SUPPORT?(X=new Uint8Array(N)).__proto__=d.prototype:(X===null&&(X=new d(N)),X.length=N),X}function d(X,N,O){if(!(d.TYPED_ARRAY_SUPPORT||this instanceof d))return new d(X,N,O);if(typeof X=="number"){if(typeof N=="string")throw new Error("If encoding is specified then the first argument must be a string");return y(this,X)}return p(this,X,N,O)}function p(X,N,O,G){if(typeof N=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&N instanceof ArrayBuffer?function(de,me,Ne,et){if(me.byteLength,Ne<0||me.byteLength<Ne)throw new RangeError("'offset' is out of bounds");if(me.byteLength<Ne+(et||0))throw new RangeError("'length' is out of bounds");return me=Ne===void 0&&et===void 0?new Uint8Array(me):et===void 0?new Uint8Array(me,Ne):new Uint8Array(me,Ne,et),d.TYPED_ARRAY_SUPPORT?(de=me).__proto__=d.prototype:de=w(de,me),de}(X,N,O,G):typeof N=="string"?function(de,me,Ne){if(typeof Ne=="string"&&Ne!==""||(Ne="utf8"),!d.isEncoding(Ne))throw new TypeError('"encoding" must be a valid string encoding');var et=0|E(me,Ne),St=(de=l(de,et)).write(me,Ne);return St!==et&&(de=de.slice(0,St)),de}(X,N,O):function(de,me){if(d.isBuffer(me)){var Ne=0|b(me.length);return(de=l(de,Ne)).length===0||me.copy(de,0,0,Ne),de}if(me){if(typeof ArrayBuffer!="undefined"&&me.buffer instanceof ArrayBuffer||"length"in me)return typeof me.length!="number"||function(St){return St!=St}(me.length)?l(de,0):w(de,me);if(me.type==="Buffer"&&c(me.data))return w(de,me.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(X,N)}function g(X){if(typeof X!="number")throw new TypeError('"size" argument must be a number');if(X<0)throw new RangeError('"size" argument must not be negative')}function y(X,N){if(g(N),X=l(X,N<0?0:0|b(N)),!d.TYPED_ARRAY_SUPPORT)for(var O=0;O<N;++O)X[O]=0;return X}function w(X,N){var O=N.length<0?0:0|b(N.length);X=l(X,O);for(var G=0;G<O;G+=1)X[G]=255&N[G];return X}function b(X){if(X>=u())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u().toString(16)+" bytes");return 0|X}function E(X,N){if(d.isBuffer(X))return X.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(X)||X instanceof ArrayBuffer))return X.byteLength;typeof X!="string"&&(X=""+X);var O=X.length;if(O===0)return 0;for(var G=!1;;)switch(N){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":case void 0:return cn(X).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*O;case"hex":return O>>>1;case"base64":return yn(X).length;default:if(G)return cn(X).length;N=(""+N).toLowerCase(),G=!0}}function S(X,N,O){var G=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0)<=(N>>>=0))return"";for(X||(X="utf8");;)switch(X){case"hex":return we(this,N,O);case"utf8":case"utf-8":return xe(this,N,O);case"ascii":return ne(this,N,O);case"latin1":case"binary":return ye(this,N,O);case"base64":return Ae(this,N,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qe(this,N,O);default:if(G)throw new TypeError("Unknown encoding: "+X);X=(X+"").toLowerCase(),G=!0}}function R(X,N,O){var G=X[N];X[N]=X[O],X[O]=G}function F(X,N,O,G,ee){if(X.length===0)return-1;if(typeof O=="string"?(G=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,isNaN(O)&&(O=ee?0:X.length-1),O<0&&(O=X.length+O),O>=X.length){if(ee)return-1;O=X.length-1}else if(O<0){if(!ee)return-1;O=0}if(typeof N=="string"&&(N=d.from(N,G)),d.isBuffer(N))return N.length===0?-1:M(X,N,O,G,ee);if(typeof N=="number")return N&=255,d.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?ee?Uint8Array.prototype.indexOf.call(X,N,O):Uint8Array.prototype.lastIndexOf.call(X,N,O):M(X,[N],O,G,ee);throw new TypeError("val must be string, number or Buffer")}function M(X,N,O,G,ee){var de,me=1,Ne=X.length,et=N.length;if(G!==void 0&&((G=String(G).toLowerCase())==="ucs2"||G==="ucs-2"||G==="utf16le"||G==="utf-16le")){if(X.length<2||N.length<2)return-1;me=2,Ne/=2,et/=2,O/=2}function St(Ei,Fe){return me===1?Ei[Fe]:Ei.readUInt16BE(Fe*me)}if(ee){var lt=-1;for(de=O;de<Ne;de++)if(St(X,de)===St(N,lt===-1?0:de-lt)){if(lt===-1&&(lt=de),de-lt+1===et)return lt*me}else lt!==-1&&(de-=de-lt),lt=-1}else for(O+et>Ne&&(O=Ne-et),de=O;de>=0;de--){for(var dt=!0,pr=0;pr<et;pr++)if(St(X,de+pr)!==St(N,pr)){dt=!1;break}if(dt)return de}return-1}function P(X,N,O,G){O=Number(O)||0;var ee=X.length-O;G?(G=Number(G))>ee&&(G=ee):G=ee;var de=N.length;if(de%2!=0)throw new TypeError("Invalid hex string");G>de/2&&(G=de/2);for(var me=0;me<G;++me){var Ne=parseInt(N.substr(2*me,2),16);if(isNaN(Ne))return me;X[O+me]=Ne}return me}function D(X,N,O,G){return Pt(cn(N,X.length-O),X,O,G)}function Y(X,N,O,G){return Pt(function(de){for(var me=[],Ne=0;Ne<de.length;++Ne)me.push(255&de.charCodeAt(Ne));return me}(N),X,O,G)}function Q(X,N,O,G){return Y(X,N,O,G)}function B(X,N,O,G){return Pt(yn(N),X,O,G)}function se(X,N,O,G){return Pt(function(de,me){for(var Ne,et,St,lt=[],dt=0;dt<de.length&&!((me-=2)<0);++dt)et=(Ne=de.charCodeAt(dt))>>8,St=Ne%256,lt.push(St),lt.push(et);return lt}(N,X.length-O),X,O,G)}function Ae(X,N,O){return N===0&&O===X.length?s.fromByteArray(X):s.fromByteArray(X.slice(N,O))}function xe(X,N,O){O=Math.min(X.length,O);for(var G=[],ee=N;ee<O;){var de,me,Ne,et,St=X[ee],lt=null,dt=St>239?4:St>223?3:St>191?2:1;if(ee+dt<=O)switch(dt){case 1:St<128&&(lt=St);break;case 2:(192&(de=X[ee+1]))==128&&(et=(31&St)<<6|63&de)>127&&(lt=et);break;case 3:de=X[ee+1],me=X[ee+2],(192&de)==128&&(192&me)==128&&(et=(15&St)<<12|(63&de)<<6|63&me)>2047&&(et<55296||et>57343)&&(lt=et);break;case 4:de=X[ee+1],me=X[ee+2],Ne=X[ee+3],(192&de)==128&&(192&me)==128&&(192&Ne)==128&&(et=(15&St)<<18|(63&de)<<12|(63&me)<<6|63&Ne)>65535&&et<1114112&&(lt=et)}lt===null?(lt=65533,dt=1):lt>65535&&(lt-=65536,G.push(lt>>>10&1023|55296),lt=56320|1023&lt),G.push(lt),ee+=dt}return function(Ei){var Fe=Ei.length;if(Fe<=re)return String.fromCharCode.apply(String,Ei);for(var un="",L=0;L<Fe;)un+=String.fromCharCode.apply(String,Ei.slice(L,L+=re));return un}(G)}r.Buffer=d,r.SlowBuffer=function(N){return+N!=N&&(N=0),d.alloc(+N)},r.INSPECT_MAX_BYTES=50,d.TYPED_ARRAY_SUPPORT=o.TYPED_ARRAY_SUPPORT!==void 0?o.TYPED_ARRAY_SUPPORT:function(){try{var N=new Uint8Array(1);return N.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},N.foo()===42&&typeof N.subarray=="function"&&N.subarray(1,1).byteLength===0}catch{return!1}}(),r.kMaxLength=u(),d.poolSize=8192,d._augment=function(X){return X.__proto__=d.prototype,X},d.from=function(X,N,O){return p(null,X,N,O)},d.TYPED_ARRAY_SUPPORT&&(d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0})),d.alloc=function(X,N,O){return function(ee,de,me,Ne){return g(de),de<=0?l(ee,de):me!==void 0?typeof Ne=="string"?l(ee,de).fill(me,Ne):l(ee,de).fill(me):l(ee,de)}(null,X,N,O)},d.allocUnsafe=function(X){return y(null,X)},d.allocUnsafeSlow=function(X){return y(null,X)},d.isBuffer=function(N){return!(N==null||!N._isBuffer)},d.compare=function(N,O){if(!d.isBuffer(N)||!d.isBuffer(O))throw new TypeError("Arguments must be Buffers");if(N===O)return 0;for(var G=N.length,ee=O.length,de=0,me=Math.min(G,ee);de<me;++de)if(N[de]!==O[de]){G=N[de],ee=O[de];break}return G<ee?-1:ee<G?1:0},d.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(N,O){if(!c(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return d.alloc(0);var G;if(O===void 0)for(O=0,G=0;G<N.length;++G)O+=N[G].length;var ee=d.allocUnsafe(O),de=0;for(G=0;G<N.length;++G){var me=N[G];if(!d.isBuffer(me))throw new TypeError('"list" argument must be an Array of Buffers');me.copy(ee,de),de+=me.length}return ee},d.byteLength=E,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var N=this.length;if(N%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<N;O+=2)R(this,O,O+1);return this},d.prototype.swap32=function(){var N=this.length;if(N%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<N;O+=4)R(this,O,O+3),R(this,O+1,O+2);return this},d.prototype.swap64=function(){var N=this.length;if(N%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<N;O+=8)R(this,O,O+7),R(this,O+1,O+6),R(this,O+2,O+5),R(this,O+3,O+4);return this},d.prototype.toString=function(){var N=0|this.length;return N===0?"":arguments.length===0?xe(this,0,N):S.apply(this,arguments)},d.prototype.equals=function(N){if(!d.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N||d.compare(this,N)===0},d.prototype.inspect=function(){var N="",O=r.INSPECT_MAX_BYTES;return this.length>0&&(N=this.toString("hex",0,O).match(/.{2}/g).join(" "),this.length>O&&(N+=" ... ")),"<Buffer "+N+">"},d.prototype.compare=function(N,O,G,ee,de){if(!d.isBuffer(N))throw new TypeError("Argument must be a Buffer");if(O===void 0&&(O=0),G===void 0&&(G=N?N.length:0),ee===void 0&&(ee=0),de===void 0&&(de=this.length),O<0||G>N.length||ee<0||de>this.length)throw new RangeError("out of range index");if(ee>=de&&O>=G)return 0;if(ee>=de)return-1;if(O>=G)return 1;if(this===N)return 0;for(var me=(de>>>=0)-(ee>>>=0),Ne=(G>>>=0)-(O>>>=0),et=Math.min(me,Ne),St=this.slice(ee,de),lt=N.slice(O,G),dt=0;dt<et;++dt)if(St[dt]!==lt[dt]){me=St[dt],Ne=lt[dt];break}return me<Ne?-1:Ne<me?1:0},d.prototype.includes=function(N,O,G){return this.indexOf(N,O,G)!==-1},d.prototype.indexOf=function(N,O,G){return F(this,N,O,G,!0)},d.prototype.lastIndexOf=function(N,O,G){return F(this,N,O,G,!1)},d.prototype.write=function(N,O,G,ee){if(O===void 0)ee="utf8",G=this.length,O=0;else if(G===void 0&&typeof O=="string")ee=O,G=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O|=0,isFinite(G)?(G|=0,ee===void 0&&(ee="utf8")):(ee=G,G=void 0)}var de=this.length-O;if((G===void 0||G>de)&&(G=de),N.length>0&&(G<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");for(var me=!1;;)switch(ee){case"hex":return P(this,N,O,G);case"utf8":case"utf-8":return D(this,N,O,G);case"ascii":return Y(this,N,O,G);case"latin1":case"binary":return Q(this,N,O,G);case"base64":return B(this,N,O,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,N,O,G);default:if(me)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),me=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var re=4096;function ne(X,N,O){var G="";O=Math.min(X.length,O);for(var ee=N;ee<O;++ee)G+=String.fromCharCode(127&X[ee]);return G}function ye(X,N,O){var G="";O=Math.min(X.length,O);for(var ee=N;ee<O;++ee)G+=String.fromCharCode(X[ee]);return G}function we(X,N,O){var G=X.length;(!N||N<0)&&(N=0),(!O||O<0||O>G)&&(O=G);for(var ee="",de=N;de<O;++de)ee+=xn(X[de]);return ee}function qe(X,N,O){for(var G=X.slice(N,O),ee="",de=0;de<G.length;de+=2)ee+=String.fromCharCode(G[de]+256*G[de+1]);return ee}function ve(X,N,O){if(X%1!=0||X<0)throw new RangeError("offset is not uint");if(X+N>O)throw new RangeError("Trying to access beyond buffer length")}function Oe(X,N,O,G,ee,de){if(!d.isBuffer(X))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>ee||N<de)throw new RangeError('"value" argument is out of bounds');if(O+G>X.length)throw new RangeError("Index out of range")}function Ge(X,N,O,G){N<0&&(N=65535+N+1);for(var ee=0,de=Math.min(X.length-O,2);ee<de;++ee)X[O+ee]=(N&255<<8*(G?ee:1-ee))>>>8*(G?ee:1-ee)}function Xe(X,N,O,G){N<0&&(N=4294967295+N+1);for(var ee=0,de=Math.min(X.length-O,4);ee<de;++ee)X[O+ee]=N>>>8*(G?ee:3-ee)&255}function nn(X,N,O,G,ee,de){if(O+G>X.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function bt(X,N,O,G,ee){return ee||nn(X,0,O,4),a.write(X,N,O,G,23,4),O+4}function an(X,N,O,G,ee){return ee||nn(X,0,O,8),a.write(X,N,O,G,52,8),O+8}d.prototype.slice=function(N,O){var G,ee=this.length;if((N=~~N)<0?(N+=ee)<0&&(N=0):N>ee&&(N=ee),(O=O===void 0?ee:~~O)<0?(O+=ee)<0&&(O=0):O>ee&&(O=ee),O<N&&(O=N),d.TYPED_ARRAY_SUPPORT)(G=this.subarray(N,O)).__proto__=d.prototype;else{var de=O-N;G=new d(de,void 0);for(var me=0;me<de;++me)G[me]=this[me+N]}return G},d.prototype.readUIntLE=function(N,O,G){N|=0,O|=0,G||ve(N,O,this.length);for(var ee=this[N],de=1,me=0;++me<O&&(de*=256);)ee+=this[N+me]*de;return ee},d.prototype.readUIntBE=function(N,O,G){N|=0,O|=0,G||ve(N,O,this.length);for(var ee=this[N+--O],de=1;O>0&&(de*=256);)ee+=this[N+--O]*de;return ee},d.prototype.readUInt8=function(N,O){return O||ve(N,1,this.length),this[N]},d.prototype.readUInt16LE=function(N,O){return O||ve(N,2,this.length),this[N]|this[N+1]<<8},d.prototype.readUInt16BE=function(N,O){return O||ve(N,2,this.length),this[N]<<8|this[N+1]},d.prototype.readUInt32LE=function(N,O){return O||ve(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+16777216*this[N+3]},d.prototype.readUInt32BE=function(N,O){return O||ve(N,4,this.length),16777216*this[N]+(this[N+1]<<16|this[N+2]<<8|this[N+3])},d.prototype.readIntLE=function(N,O,G){N|=0,O|=0,G||ve(N,O,this.length);for(var ee=this[N],de=1,me=0;++me<O&&(de*=256);)ee+=this[N+me]*de;return ee>=(de*=128)&&(ee-=Math.pow(2,8*O)),ee},d.prototype.readIntBE=function(N,O,G){N|=0,O|=0,G||ve(N,O,this.length);for(var ee=O,de=1,me=this[N+--ee];ee>0&&(de*=256);)me+=this[N+--ee]*de;return me>=(de*=128)&&(me-=Math.pow(2,8*O)),me},d.prototype.readInt8=function(N,O){return O||ve(N,1,this.length),128&this[N]?-1*(255-this[N]+1):this[N]},d.prototype.readInt16LE=function(N,O){O||ve(N,2,this.length);var G=this[N]|this[N+1]<<8;return 32768&G?4294901760|G:G},d.prototype.readInt16BE=function(N,O){O||ve(N,2,this.length);var G=this[N+1]|this[N]<<8;return 32768&G?4294901760|G:G},d.prototype.readInt32LE=function(N,O){return O||ve(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},d.prototype.readInt32BE=function(N,O){return O||ve(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},d.prototype.readFloatLE=function(N,O){return O||ve(N,4,this.length),a.read(this,N,!0,23,4)},d.prototype.readFloatBE=function(N,O){return O||ve(N,4,this.length),a.read(this,N,!1,23,4)},d.prototype.readDoubleLE=function(N,O){return O||ve(N,8,this.length),a.read(this,N,!0,52,8)},d.prototype.readDoubleBE=function(N,O){return O||ve(N,8,this.length),a.read(this,N,!1,52,8)},d.prototype.writeUIntLE=function(N,O,G,ee){N=+N,O|=0,G|=0,ee||Oe(this,N,O,G,Math.pow(2,8*G)-1,0);var de=1,me=0;for(this[O]=255&N;++me<G&&(de*=256);)this[O+me]=N/de&255;return O+G},d.prototype.writeUIntBE=function(N,O,G,ee){N=+N,O|=0,G|=0,ee||Oe(this,N,O,G,Math.pow(2,8*G)-1,0);var de=G-1,me=1;for(this[O+de]=255&N;--de>=0&&(me*=256);)this[O+de]=N/me&255;return O+G},d.prototype.writeUInt8=function(N,O,G){return N=+N,O|=0,G||Oe(this,N,O,1,255,0),d.TYPED_ARRAY_SUPPORT||(N=Math.floor(N)),this[O]=255&N,O+1},d.prototype.writeUInt16LE=function(N,O,G){return N=+N,O|=0,G||Oe(this,N,O,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[O]=255&N,this[O+1]=N>>>8):Ge(this,N,O,!0),O+2},d.prototype.writeUInt16BE=function(N,O,G){return N=+N,O|=0,G||Oe(this,N,O,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[O]=N>>>8,this[O+1]=255&N):Ge(this,N,O,!1),O+2},d.prototype.writeUInt32LE=function(N,O,G){return N=+N,O|=0,G||Oe(this,N,O,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[O+3]=N>>>24,this[O+2]=N>>>16,this[O+1]=N>>>8,this[O]=255&N):Xe(this,N,O,!0),O+4},d.prototype.writeUInt32BE=function(N,O,G){return N=+N,O|=0,G||Oe(this,N,O,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[O]=N>>>24,this[O+1]=N>>>16,this[O+2]=N>>>8,this[O+3]=255&N):Xe(this,N,O,!1),O+4},d.prototype.writeIntLE=function(N,O,G,ee){if(N=+N,O|=0,!ee){var de=Math.pow(2,8*G-1);Oe(this,N,O,G,de-1,-de)}var me=0,Ne=1,et=0;for(this[O]=255&N;++me<G&&(Ne*=256);)N<0&&et===0&&this[O+me-1]!==0&&(et=1),this[O+me]=(N/Ne>>0)-et&255;return O+G},d.prototype.writeIntBE=function(N,O,G,ee){if(N=+N,O|=0,!ee){var de=Math.pow(2,8*G-1);Oe(this,N,O,G,de-1,-de)}var me=G-1,Ne=1,et=0;for(this[O+me]=255&N;--me>=0&&(Ne*=256);)N<0&&et===0&&this[O+me+1]!==0&&(et=1),this[O+me]=(N/Ne>>0)-et&255;return O+G},d.prototype.writeInt8=function(N,O,G){return N=+N,O|=0,G||Oe(this,N,O,1,127,-128),d.TYPED_ARRAY_SUPPORT||(N=Math.floor(N)),N<0&&(N=255+N+1),this[O]=255&N,O+1},d.prototype.writeInt16LE=function(N,O,G){return N=+N,O|=0,G||Oe(this,N,O,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[O]=255&N,this[O+1]=N>>>8):Ge(this,N,O,!0),O+2},d.prototype.writeInt16BE=function(N,O,G){return N=+N,O|=0,G||Oe(this,N,O,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[O]=N>>>8,this[O+1]=255&N):Ge(this,N,O,!1),O+2},d.prototype.writeInt32LE=function(N,O,G){return N=+N,O|=0,G||Oe(this,N,O,4,2147483647,-2147483648),d.TYPED_ARRAY_SUPPORT?(this[O]=255&N,this[O+1]=N>>>8,this[O+2]=N>>>16,this[O+3]=N>>>24):Xe(this,N,O,!0),O+4},d.prototype.writeInt32BE=function(N,O,G){return N=+N,O|=0,G||Oe(this,N,O,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),d.TYPED_ARRAY_SUPPORT?(this[O]=N>>>24,this[O+1]=N>>>16,this[O+2]=N>>>8,this[O+3]=255&N):Xe(this,N,O,!1),O+4},d.prototype.writeFloatLE=function(N,O,G){return bt(this,N,O,!0,G)},d.prototype.writeFloatBE=function(N,O,G){return bt(this,N,O,!1,G)},d.prototype.writeDoubleLE=function(N,O,G){return an(this,N,O,!0,G)},d.prototype.writeDoubleBE=function(N,O,G){return an(this,N,O,!1,G)},d.prototype.copy=function(N,O,G,ee){if(G||(G=0),ee||ee===0||(ee=this.length),O>=N.length&&(O=N.length),O||(O=0),ee>0&&ee<G&&(ee=G),ee===G||N.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("sourceStart out of bounds");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),N.length-O<ee-G&&(ee=N.length-O+G);var de,me=ee-G;if(this===N&&G<O&&O<ee)for(de=me-1;de>=0;--de)N[de+O]=this[de+G];else if(me<1e3||!d.TYPED_ARRAY_SUPPORT)for(de=0;de<me;++de)N[de+O]=this[de+G];else Uint8Array.prototype.set.call(N,this.subarray(G,G+me),O);return me},d.prototype.fill=function(N,O,G,ee){if(typeof N=="string"){if(typeof O=="string"?(ee=O,O=0,G=this.length):typeof G=="string"&&(ee=G,G=this.length),N.length===1){var de=N.charCodeAt(0);de<256&&(N=de)}if(ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!d.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee)}else typeof N=="number"&&(N&=255);if(O<0||this.length<O||this.length<G)throw new RangeError("Out of range index");if(G<=O)return this;var me;if(O>>>=0,G=G===void 0?this.length:G>>>0,N||(N=0),typeof N=="number")for(me=O;me<G;++me)this[me]=N;else{var Ne=d.isBuffer(N)?N:cn(new d(N,ee).toString()),et=Ne.length;for(me=0;me<G-O;++me)this[me+O]=Ne[me%et]}return this};var hr=/[^+\/0-9A-Za-z-_]/g;function xn(X){return X<16?"0"+X.toString(16):X.toString(16)}function cn(X,N){var O;N=N||1/0;for(var G=X.length,ee=null,de=[],me=0;me<G;++me){if((O=X.charCodeAt(me))>55295&&O<57344){if(!ee){if(O>56319){(N-=3)>-1&&de.push(239,191,189);continue}if(me+1===G){(N-=3)>-1&&de.push(239,191,189);continue}ee=O;continue}if(O<56320){(N-=3)>-1&&de.push(239,191,189),ee=O;continue}O=65536+(ee-55296<<10|O-56320)}else ee&&(N-=3)>-1&&de.push(239,191,189);if(ee=null,O<128){if((N-=1)<0)break;de.push(O)}else if(O<2048){if((N-=2)<0)break;de.push(O>>6|192,63&O|128)}else if(O<65536){if((N-=3)<0)break;de.push(O>>12|224,O>>6&63|128,63&O|128)}else{if(!(O<1114112))throw new Error("Invalid code point");if((N-=4)<0)break;de.push(O>>18|240,O>>12&63|128,O>>6&63|128,63&O|128)}}return de}function yn(X){return s.toByteArray(function(O){if((O=function(ee){return ee.trim?ee.trim():ee.replace(/^\s+|\s+$/g,"")}(O).replace(hr,"")).length<2)return"";for(;O.length%4!=0;)O+="=";return O}(X))}function Pt(X,N,O,G){for(var ee=0;ee<G&&!(ee+O>=N.length||ee>=X.length);++ee)N[ee+O]=X[ee];return ee}}).call(this,i(29))},function(n,r){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}n.exports=i},function(n,r,i){r.byteLength=function(y){var w=d(y),b=w[0],E=w[1];return 3*(b+E)/4-E},r.toByteArray=function(y){var w,b,E=d(y),S=E[0],R=E[1],F=new a(function(Y,Q,B){return 3*(Q+B)/4-B}(0,S,R)),M=0,P=R>0?S-4:S;for(b=0;b<P;b+=4)w=s[y.charCodeAt(b)]<<18|s[y.charCodeAt(b+1)]<<12|s[y.charCodeAt(b+2)]<<6|s[y.charCodeAt(b+3)],F[M++]=w>>16&255,F[M++]=w>>8&255,F[M++]=255&w;return R===2&&(w=s[y.charCodeAt(b)]<<2|s[y.charCodeAt(b+1)]>>4,F[M++]=255&w),R===1&&(w=s[y.charCodeAt(b)]<<10|s[y.charCodeAt(b+1)]<<4|s[y.charCodeAt(b+2)]>>2,F[M++]=w>>8&255,F[M++]=255&w),F},r.fromByteArray=function(y){for(var w,b=y.length,E=b%3,S=[],R=16383,F=0,M=b-E;F<M;F+=R)S.push(p(y,F,F+R>M?M:F+R));return E===1?(w=y[b-1],S.push(o[w>>2]+o[w<<4&63]+"==")):E===2&&(w=(y[b-2]<<8)+y[b-1],S.push(o[w>>10]+o[w>>4&63]+o[w<<2&63]+"=")),S.join("")};for(var o=[],s=[],a=typeof Uint8Array!="undefined"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,l=c.length;u<l;++u)o[u]=c[u],s[c.charCodeAt(u)]=u;function d(g){var y=g.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=g.indexOf("=");return w===-1&&(w=y),[w,w===y?0:4-w%4]}function p(g,y,w){for(var b,E,S=[],R=y;R<w;R+=3)b=(g[R]<<16&16711680)+(g[R+1]<<8&65280)+(255&g[R+2]),S.push(o[(E=b)>>18&63]+o[E>>12&63]+o[E>>6&63]+o[63&E]);return S.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(n,r){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */r.read=function(i,o,s,a,c){var u,l,d=8*c-a-1,p=(1<<d)-1,g=p>>1,y=-7,w=s?c-1:0,b=s?-1:1,E=i[o+w];for(w+=b,u=E&(1<<-y)-1,E>>=-y,y+=d;y>0;u=256*u+i[o+w],w+=b,y-=8);for(l=u&(1<<-y)-1,u>>=-y,y+=a;y>0;l=256*l+i[o+w],w+=b,y-=8);if(u===0)u=1-g;else{if(u===p)return l?NaN:1/0*(E?-1:1);l+=Math.pow(2,a),u-=g}return(E?-1:1)*l*Math.pow(2,u-a)},r.write=function(i,o,s,a,c,u){var l,d,p,g=8*u-c-1,y=(1<<g)-1,w=y>>1,b=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=a?0:u-1,S=a?1:-1,R=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(d=isNaN(o)?1:0,l=y):(l=Math.floor(Math.log(o)/Math.LN2),o*(p=Math.pow(2,-l))<1&&(l--,p*=2),(o+=l+w>=1?b/p:b*Math.pow(2,1-w))*p>=2&&(l++,p/=2),l+w>=y?(d=0,l=y):l+w>=1?(d=(o*p-1)*Math.pow(2,c),l+=w):(d=o*Math.pow(2,w-1)*Math.pow(2,c),l=0));c>=8;i[s+E]=255&d,E+=S,d/=256,c-=8);for(l=l<<c|d,g+=c;g>0;i[s+E]=255&l,E+=S,l/=256,g-=8);i[s+E-S]|=128*R}},function(n,r){var i={}.toString;n.exports=Array.isArray||function(o){return i.call(o)=="[object Array]"}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(a){var c=a.jws,u=a.KeyUtil,l=a.X509,d=a.crypto,p=a.hextob64u,g=a.b64tohex,y=a.AllowedSigningAlgs;return function(){function w(){(function(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")})(this,w)}return w.parseJwt=function(E){o.Log.debug("JoseUtil.parseJwt");try{var S=c.JWS.parse(E);return{header:S.headerObj,payload:S.payloadObj}}catch(R){o.Log.error(R)}},w.validateJwt=function(E,S,R,F,M,P,D){o.Log.debug("JoseUtil.validateJwt");try{if(S.kty==="RSA")if(S.e&&S.n)S=u.getKey(S);else{if(!S.x5c||!S.x5c.length)return o.Log.error("JoseUtil.validateJwt: RSA key missing key material",S),Promise.reject(new Error("RSA key missing key material"));var Y=g(S.x5c[0]);S=l.getPublicKeyFromCertHex(Y)}else{if(S.kty!=="EC")return o.Log.error("JoseUtil.validateJwt: Unsupported key type",S&&S.kty),Promise.reject(new Error(S.kty));if(!(S.crv&&S.x&&S.y))return o.Log.error("JoseUtil.validateJwt: EC key missing key material",S),Promise.reject(new Error("EC key missing key material"));S=u.getKey(S)}return w._validateJwt(E,S,R,F,M,P,D)}catch(Q){return o.Log.error(Q&&Q.message||Q),Promise.reject("JWT validation failed")}},w.validateJwtAttributes=function(E,S,R,F,M,P){F||(F=0),M||(M=parseInt(Date.now()/1e3));var D=w.parseJwt(E).payload;if(!D.iss)return o.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(D.iss!==S)return o.Log.error("JoseUtil._validateJwt: Invalid issuer in token",D.iss),Promise.reject(new Error("Invalid issuer in token: "+D.iss));if(!D.aud)return o.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(D.aud===R||Array.isArray(D.aud)&&D.aud.indexOf(R)>=0))return o.Log.error("JoseUtil._validateJwt: Invalid audience in token",D.aud),Promise.reject(new Error("Invalid audience in token: "+D.aud));if(D.azp&&D.azp!==R)return o.Log.error("JoseUtil._validateJwt: Invalid azp in token",D.azp),Promise.reject(new Error("Invalid azp in token: "+D.azp));if(!P){var Y=M+F,Q=M-F;if(!D.iat)return o.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(Y<D.iat)return o.Log.error("JoseUtil._validateJwt: iat is in the future",D.iat),Promise.reject(new Error("iat is in the future: "+D.iat));if(D.nbf&&Y<D.nbf)return o.Log.error("JoseUtil._validateJwt: nbf is in the future",D.nbf),Promise.reject(new Error("nbf is in the future: "+D.nbf));if(!D.exp)return o.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(D.exp<Q)return o.Log.error("JoseUtil._validateJwt: exp is in the past",D.exp),Promise.reject(new Error("exp is in the past:"+D.exp))}return Promise.resolve(D)},w._validateJwt=function(E,S,R,F,M,P,D){return w.validateJwtAttributes(E,R,F,M,P,D).then(function(Y){try{return c.JWS.verify(E,S,y)?Y:(o.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(Q){return o.Log.error(Q&&Q.message||Q),Promise.reject(new Error("signature validation failed"))}})},w.hashString=function(E,S){try{return d.Util.hashString(E,S)}catch(R){o.Log.error(R)}},w.hexToBase64Url=function(E){try{return p(E)}catch(S){o.Log.error(S)}},w}()};var o=i(0);n.exports=r.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SigninResponse=void 0;var o=function(){function c(u,l){for(var d=0;d<l.length;d++){var p=l[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}return function(u,l,d){return l&&c(u.prototype,l),d&&c(u,d),u}}(),s=i(3);function a(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}r.SigninResponse=function(){function c(u){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#";a(this,c);var d=s.UrlUtility.parseUrlFragment(u,l);this.error=d.error,this.error_description=d.error_description,this.error_uri=d.error_uri,this.code=d.code,this.state=d.state,this.id_token=d.id_token,this.session_state=d.session_state,this.access_token=d.access_token,this.token_type=d.token_type,this.scope=d.scope,this.profile=void 0,this.expires_in=d.expires_in}return o(c,[{key:"expires_in",get:function(){if(this.expires_at){var l=parseInt(Date.now()/1e3);return this.expires_at-l}},set:function(l){var d=parseInt(l);if(typeof d=="number"&&d>0){var p=parseInt(Date.now()/1e3);this.expires_at=p+d}}},{key:"expired",get:function(){var l=this.expires_in;if(l!==void 0)return l<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),c}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SignoutRequest=void 0;var o=i(0),s=i(3),a=i(9);r.SignoutRequest=function c(u){var l=u.url,d=u.id_token_hint,p=u.post_logout_redirect_uri,g=u.data,y=u.extraQueryParams,w=u.request_type;if(function(S,R){if(!(S instanceof R))throw new TypeError("Cannot call a class as a function")}(this,c),!l)throw o.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var b in d&&(l=s.UrlUtility.addQueryParam(l,"id_token_hint",d)),p&&(l=s.UrlUtility.addQueryParam(l,"post_logout_redirect_uri",p),g&&(this.state=new a.State({data:g,request_type:w}),l=s.UrlUtility.addQueryParam(l,"state",this.state.id))),y)l=s.UrlUtility.addQueryParam(l,b,y[b]);this.url=l}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SignoutResponse=void 0;var o=i(3);r.SignoutResponse=function s(a){(function(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")})(this,s);var c=o.UrlUtility.parseUrlFragment(a,"?");this.error=c.error,this.error_description=c.error_description,this.error_uri=c.error_uri,this.state=c.state}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.InMemoryWebStorage=void 0;var o=function(){function a(c,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,u,l){return u&&a(c.prototype,u),l&&a(c,l),c}}(),s=i(0);r.InMemoryWebStorage=function(){function a(){(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,a),this._data={}}return a.prototype.getItem=function(u){return s.Log.debug("InMemoryWebStorage.getItem",u),this._data[u]},a.prototype.setItem=function(u,l){s.Log.debug("InMemoryWebStorage.setItem",u),this._data[u]=l},a.prototype.removeItem=function(u){s.Log.debug("InMemoryWebStorage.removeItem",u),delete this._data[u]},a.prototype.key=function(u){return Object.getOwnPropertyNames(this._data)[u]},o(a,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),a}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.UserManager=void 0;var o=function(){function R(F,M){for(var P=0;P<M.length;P++){var D=M[P];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(F,D.key,D)}}return function(F,M,P){return M&&R(F.prototype,M),P&&R(F,P),F}}(),s=i(0),a=i(10),c=i(39),u=i(15),l=i(45),d=i(47),p=i(18),g=i(8),y=i(20),w=i(11),b=i(4);function E(R,F){if(!(R instanceof F))throw new TypeError("Cannot call a class as a function")}function S(R,F){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!F||typeof F!="object"&&typeof F!="function"?R:F}r.UserManager=function(R){function F(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.SilentRenewService,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.SessionMonitor,Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:y.TokenRevocationClient,Q=arguments.length>4&&arguments[4]!==void 0?arguments[4]:w.TokenClient,B=arguments.length>5&&arguments[5]!==void 0?arguments[5]:b.JoseUtil;E(this,F),M instanceof c.UserManagerSettings||(M=new c.UserManagerSettings(M));var se=S(this,R.call(this,M));return se._events=new l.UserManagerEvents(M),se._silentRenewService=new P(se),se.settings.automaticSilentRenew&&(s.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),se.startSilentRenew()),se.settings.monitorSession&&(s.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),se._sessionMonitor=new D(se)),se._tokenRevocationClient=new Y(se._settings),se._tokenClient=new Q(se._settings),se._joseUtil=B,se}return function(P,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);P.prototype=Object.create(D&&D.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(P,D):P.__proto__=D)}(F,R),F.prototype.getUser=function(){var P=this;return this._loadUser().then(function(D){return D?(s.Log.info("UserManager.getUser: user loaded"),P._events.load(D,!1),D):(s.Log.info("UserManager.getUser: user not found in storage"),null)})},F.prototype.removeUser=function(){var P=this;return this.storeUser(null).then(function(){s.Log.info("UserManager.removeUser: user removed from storage"),P._events.unload()})},F.prototype.signinRedirect=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(P=Object.assign({},P)).request_type="si:r";var D={useReplaceToNavigate:P.useReplaceToNavigate};return this._signinStart(P,this._redirectNavigator,D).then(function(){s.Log.info("UserManager.signinRedirect: successful")})},F.prototype.signinRedirectCallback=function(P){return this._signinEnd(P||this._redirectNavigator.url).then(function(D){return D.profile&&D.profile.sub?s.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",D.profile.sub):s.Log.info("UserManager.signinRedirectCallback: no sub"),D})},F.prototype.signinPopup=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(P=Object.assign({},P)).request_type="si:p";var D=P.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return D?(P.redirect_uri=D,P.display="popup",this._signin(P,this._popupNavigator,{startUrl:D,popupWindowFeatures:P.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:P.popupWindowTarget||this.settings.popupWindowTarget}).then(function(Y){return Y&&(Y.profile&&Y.profile.sub?s.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",Y.profile.sub):s.Log.info("UserManager.signinPopup: no sub")),Y})):(s.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},F.prototype.signinPopupCallback=function(P){return this._signinCallback(P,this._popupNavigator).then(function(D){return D&&(D.profile&&D.profile.sub?s.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",D.profile.sub):s.Log.info("UserManager.signinPopupCallback: no sub")),D}).catch(function(D){s.Log.error(D.message)})},F.prototype.signinSilent=function(){var P=this,D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return D=Object.assign({},D),this._loadUser().then(function(Y){return Y&&Y.refresh_token?(D.refresh_token=Y.refresh_token,P._useRefreshToken(D)):(D.request_type="si:s",D.id_token_hint=D.id_token_hint||P.settings.includeIdTokenInSilentRenew&&Y&&Y.id_token,Y&&P._settings.validateSubOnSilentRenew&&(s.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",Y.profile.sub),D.current_sub=Y.profile.sub),P._signinSilentIframe(D))})},F.prototype._useRefreshToken=function(){var P=this,D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(D).then(function(Y){return Y?Y.access_token?P._loadUser().then(function(Q){if(Q){var B=Promise.resolve();return Y.id_token&&(B=P._validateIdTokenFromTokenRefreshToken(Q.profile,Y.id_token)),B.then(function(){return s.Log.debug("UserManager._useRefreshToken: refresh token response success"),Q.id_token=Y.id_token||Q.id_token,Q.access_token=Y.access_token,Q.refresh_token=Y.refresh_token||Q.refresh_token,Q.expires_in=Y.expires_in,P.storeUser(Q).then(function(){return P._events.load(Q),Q})})}return null}):(s.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(s.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},F.prototype._validateIdTokenFromTokenRefreshToken=function(P,D){var Y=this;return this._metadataService.getIssuer().then(function(Q){return Y.settings.getEpochTime().then(function(B){return Y._joseUtil.validateJwtAttributes(D,Q,Y._settings.client_id,Y._settings.clockSkew,B).then(function(se){return se?se.sub!==P.sub?(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):se.auth_time&&se.auth_time!==P.auth_time?(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):se.azp&&se.azp!==P.azp?(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!se.azp&&P.azp?(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(s.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},F.prototype._signinSilentIframe=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=P.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return D?(P.redirect_uri=D,P.prompt=P.prompt||"none",this._signin(P,this._iframeNavigator,{startUrl:D,silentRequestTimeout:P.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(Y){return Y&&(Y.profile&&Y.profile.sub?s.Log.info("UserManager.signinSilent: successful, signed in sub: ",Y.profile.sub):s.Log.info("UserManager.signinSilent: no sub")),Y})):(s.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},F.prototype.signinSilentCallback=function(P){return this._signinCallback(P,this._iframeNavigator).then(function(D){return D&&(D.profile&&D.profile.sub?s.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",D.profile.sub):s.Log.info("UserManager.signinSilentCallback: no sub")),D})},F.prototype.signinCallback=function(P){var D=this;return this.readSigninResponseState(P).then(function(Y){var Q=Y.state;return Y.response,Q.request_type==="si:r"?D.signinRedirectCallback(P):Q.request_type==="si:p"?D.signinPopupCallback(P):Q.request_type==="si:s"?D.signinSilentCallback(P):Promise.reject(new Error("invalid response_type in state"))})},F.prototype.signoutCallback=function(P,D){var Y=this;return this.readSignoutResponseState(P).then(function(Q){var B=Q.state,se=Q.response;return B?B.request_type==="so:r"?Y.signoutRedirectCallback(P):B.request_type==="so:p"?Y.signoutPopupCallback(P,D):Promise.reject(new Error("invalid response_type in state")):se})},F.prototype.querySessionStatus=function(){var P=this,D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(D=Object.assign({},D)).request_type="si:s";var Y=D.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return Y?(D.redirect_uri=Y,D.prompt="none",D.response_type=D.response_type||this.settings.query_status_response_type,D.scope=D.scope||"openid",D.skipUserInfo=!0,this._signinStart(D,this._iframeNavigator,{startUrl:Y,silentRequestTimeout:D.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(Q){return P.processSigninResponse(Q.url).then(function(B){if(s.Log.debug("UserManager.querySessionStatus: got signin response"),B.session_state&&B.profile.sub)return s.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",B.profile.sub),{session_state:B.session_state,sub:B.profile.sub,sid:B.profile.sid};s.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(B){if(B.session_state&&P.settings.monitorAnonymousSession&&(B.message=="login_required"||B.message=="consent_required"||B.message=="interaction_required"||B.message=="account_selection_required"))return s.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:B.session_state};throw B})})):(s.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},F.prototype._signin=function(P,D){var Y=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signinStart(P,D,Q).then(function(B){return Y._signinEnd(B.url,P)})},F.prototype._signinStart=function(P,D){var Y=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return D.prepare(Q).then(function(B){return s.Log.debug("UserManager._signinStart: got navigator window handle"),Y.createSigninRequest(P).then(function(se){return s.Log.debug("UserManager._signinStart: got signin request"),Q.url=se.url,Q.id=se.state.id,B.navigate(Q)}).catch(function(se){throw B.close&&(s.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),B.close()),se})})},F.prototype._signinEnd=function(P){var D=this,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.processSigninResponse(P).then(function(Q){s.Log.debug("UserManager._signinEnd: got signin response");var B=new u.User(Q);if(Y.current_sub){if(Y.current_sub!==B.profile.sub)return s.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",B.profile.sub),Promise.reject(new Error("login_required"));s.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return D.storeUser(B).then(function(){return s.Log.debug("UserManager._signinEnd: user stored"),D._events.load(B),B})})},F.prototype._signinCallback=function(P,D){s.Log.debug("UserManager._signinCallback");var Y=this._settings.response_mode==="query"||!this._settings.response_mode&&g.SigninRequest.isCode(this._settings.response_type)?"?":"#";return D.callback(P,void 0,Y)},F.prototype.signoutRedirect=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(P=Object.assign({},P)).request_type="so:r";var D=P.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;D&&(P.post_logout_redirect_uri=D);var Y={useReplaceToNavigate:P.useReplaceToNavigate};return this._signoutStart(P,this._redirectNavigator,Y).then(function(){s.Log.info("UserManager.signoutRedirect: successful")})},F.prototype.signoutRedirectCallback=function(P){return this._signoutEnd(P||this._redirectNavigator.url).then(function(D){return s.Log.info("UserManager.signoutRedirectCallback: successful"),D})},F.prototype.signoutPopup=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(P=Object.assign({},P)).request_type="so:p";var D=P.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return P.post_logout_redirect_uri=D,P.display="popup",P.post_logout_redirect_uri&&(P.state=P.state||{}),this._signout(P,this._popupNavigator,{startUrl:D,popupWindowFeatures:P.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:P.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){s.Log.info("UserManager.signoutPopup: successful")})},F.prototype.signoutPopupCallback=function(P,D){return D===void 0&&typeof P=="boolean"&&(D=P,P=null),this._popupNavigator.callback(P,D,"?").then(function(){s.Log.info("UserManager.signoutPopupCallback: successful")})},F.prototype._signout=function(P,D){var Y=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signoutStart(P,D,Q).then(function(B){return Y._signoutEnd(B.url)})},F.prototype._signoutStart=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=this,Y=arguments[1],Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Y.prepare(Q).then(function(B){return s.Log.debug("UserManager._signoutStart: got navigator window handle"),D._loadUser().then(function(se){return s.Log.debug("UserManager._signoutStart: loaded current user from storage"),(D._settings.revokeAccessTokenOnSignout?D._revokeInternal(se):Promise.resolve()).then(function(){var Ae=P.id_token_hint||se&&se.id_token;return Ae&&(s.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),P.id_token_hint=Ae),D.removeUser().then(function(){return s.Log.debug("UserManager._signoutStart: user removed, creating signout request"),D.createSignoutRequest(P).then(function(xe){return s.Log.debug("UserManager._signoutStart: got signout request"),Q.url=xe.url,xe.state&&(Q.id=xe.state.id),B.navigate(Q)})})})}).catch(function(se){throw B.close&&(s.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),B.close()),se})})},F.prototype._signoutEnd=function(P){return this.processSignoutResponse(P).then(function(D){return s.Log.debug("UserManager._signoutEnd: got signout response"),D})},F.prototype.revokeAccessToken=function(){var P=this;return this._loadUser().then(function(D){return P._revokeInternal(D,!0).then(function(Y){if(Y)return s.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),D.access_token=null,D.refresh_token=null,D.expires_at=null,D.token_type=null,P.storeUser(D).then(function(){s.Log.debug("UserManager.revokeAccessToken: user stored"),P._events.load(D)})})}).then(function(){s.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},F.prototype._revokeInternal=function(P,D){var Y=this;if(P){var Q=P.access_token,B=P.refresh_token;return this._revokeAccessTokenInternal(Q,D).then(function(se){return Y._revokeRefreshTokenInternal(B,D).then(function(Ae){return se||Ae||s.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),se||Ae})})}return Promise.resolve(!1)},F.prototype._revokeAccessTokenInternal=function(P,D){return!P||P.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(P,D).then(function(){return!0})},F.prototype._revokeRefreshTokenInternal=function(P,D){return P?this._tokenRevocationClient.revoke(P,D,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},F.prototype.startSilentRenew=function(){this._silentRenewService.start()},F.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},F.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(P){return P?(s.Log.debug("UserManager._loadUser: user storageString loaded"),u.User.fromStorageString(P)):(s.Log.debug("UserManager._loadUser: no user storageString"),null)})},F.prototype.storeUser=function(P){if(P){s.Log.debug("UserManager.storeUser: storing user");var D=P.toStorageString();return this._userStore.set(this._userStoreKey,D)}return s.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},o(F,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),F}(a.OidcClient)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.UserManagerSettings=void 0;var o=function(){function w(b,E){for(var S=0;S<E.length;S++){var R=E[S];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(b,R.key,R)}}return function(b,E,S){return E&&w(b.prototype,E),S&&w(b,S),b}}(),s=(i(0),i(5)),a=i(40),c=i(41),u=i(43),l=i(6),d=i(1),p=i(8);function g(w,b){if(!(w instanceof b))throw new TypeError("Cannot call a class as a function")}function y(w,b){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||typeof b!="object"&&typeof b!="function"?w:b}r.UserManagerSettings=function(w){function b(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=E.popup_redirect_uri,R=E.popup_post_logout_redirect_uri,F=E.popupWindowFeatures,M=E.popupWindowTarget,P=E.silent_redirect_uri,D=E.silentRequestTimeout,Y=E.automaticSilentRenew,Q=Y!==void 0&&Y,B=E.validateSubOnSilentRenew,se=B!==void 0&&B,Ae=E.includeIdTokenInSilentRenew,xe=Ae===void 0||Ae,re=E.monitorSession,ne=re===void 0||re,ye=E.monitorAnonymousSession,we=ye!==void 0&&ye,qe=E.checkSessionInterval,ve=qe===void 0?2e3:qe,Oe=E.stopCheckSessionOnError,Ge=Oe===void 0||Oe,Xe=E.query_status_response_type,nn=E.revokeAccessTokenOnSignout,bt=nn!==void 0&&nn,an=E.accessTokenExpiringNotificationTime,hr=an===void 0?60:an,xn=E.redirectNavigator,cn=xn===void 0?new a.RedirectNavigator:xn,yn=E.popupNavigator,Pt=yn===void 0?new c.PopupNavigator:yn,X=E.iframeNavigator,N=X===void 0?new u.IFrameNavigator:X,O=E.userStore,G=O===void 0?new l.WebStorageStateStore({store:d.Global.sessionStorage}):O;g(this,b);var ee=y(this,w.call(this,arguments[0]));return ee._popup_redirect_uri=S,ee._popup_post_logout_redirect_uri=R,ee._popupWindowFeatures=F,ee._popupWindowTarget=M,ee._silent_redirect_uri=P,ee._silentRequestTimeout=D,ee._automaticSilentRenew=Q,ee._validateSubOnSilentRenew=se,ee._includeIdTokenInSilentRenew=xe,ee._accessTokenExpiringNotificationTime=hr,ee._monitorSession=ne,ee._monitorAnonymousSession=we,ee._checkSessionInterval=ve,ee._stopCheckSessionOnError=Ge,Xe?ee._query_status_response_type=Xe:arguments[0]&&arguments[0].response_type?ee._query_status_response_type=p.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":ee._query_status_response_type="id_token",ee._revokeAccessTokenOnSignout=bt,ee._redirectNavigator=cn,ee._popupNavigator=Pt,ee._iframeNavigator=N,ee._userStore=G,ee}return function(S,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);S.prototype=Object.create(R&&R.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(S,R):S.__proto__=R)}(b,w),o(b,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),b}(s.OidcClientSettings)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.RedirectNavigator=void 0;var o=function(){function a(c,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,u,l){return u&&a(c.prototype,u),l&&a(c,l),c}}(),s=i(0);r.RedirectNavigator=function(){function a(){(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,a)}return a.prototype.prepare=function(){return Promise.resolve(this)},a.prototype.navigate=function(u){return u&&u.url?(u.useReplaceToNavigate?window.location.replace(u.url):window.location=u.url,Promise.resolve()):(s.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},o(a,[{key:"url",get:function(){return window.location.href}}]),a}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.PopupNavigator=void 0;var o=i(0),s=i(42);r.PopupNavigator=function(){function a(){(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,a)}return a.prototype.prepare=function(u){var l=new s.PopupWindow(u);return Promise.resolve(l)},a.prototype.callback=function(u,l,d){o.Log.debug("PopupNavigator.callback");try{return s.PopupWindow.notifyOpener(u,l,d),Promise.resolve()}catch(p){return Promise.reject(p)}},a}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.PopupWindow=void 0;var o=function(){function c(u,l){for(var d=0;d<l.length;d++){var p=l[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}return function(u,l,d){return l&&c(u.prototype,l),d&&c(u,d),u}}(),s=i(0),a=i(3);r.PopupWindow=function(){function c(u){var l=this;(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,c),this._promise=new Promise(function(g,y){l._resolve=g,l._reject=y});var d=u.popupWindowTarget||"_blank",p=u.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",d,p),this._popup&&(s.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return c.prototype.navigate=function(l){return this._popup?l&&l.url?(s.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=l.id,this._id&&(window["popupCallback_"+l.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=l.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},c.prototype._success=function(l){s.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(l)},c.prototype._error=function(l){s.Log.error("PopupWindow.error: ",l),this._cleanup(),this._reject(new Error(l))},c.prototype.close=function(){this._cleanup(!1)},c.prototype._cleanup=function(l){s.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!l&&this._popup.close(),this._popup=null},c.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},c.prototype._callback=function(l,d){this._cleanup(d),l?(s.Log.debug("PopupWindow.callback success"),this._success({url:l})):(s.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},c.notifyOpener=function(l,d,p){if(window.opener){if(l=l||window.location.href){var g=a.UrlUtility.parseUrlFragment(l,p);if(g.state){var y="popupCallback_"+g.state,w=window.opener[y];w?(s.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),w(l,d)):s.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else s.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else s.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},o(c,[{key:"promise",get:function(){return this._promise}}]),c}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IFrameNavigator=void 0;var o=i(0),s=i(44);r.IFrameNavigator=function(){function a(){(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,a)}return a.prototype.prepare=function(u){var l=new s.IFrameWindow(u);return Promise.resolve(l)},a.prototype.callback=function(u){o.Log.debug("IFrameNavigator.callback");try{return s.IFrameWindow.notifyParent(u),Promise.resolve()}catch(l){return Promise.reject(l)}},a}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IFrameWindow=void 0;var o=function(){function a(c,u){for(var l=0;l<u.length;l++){var d=u[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,u,l){return u&&a(c.prototype,u),l&&a(c,l),c}}(),s=i(0);r.IFrameWindow=function(){function a(c){var u=this;(function(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")})(this,a),this._promise=new Promise(function(l,d){u._resolve=l,u._reject=d}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return a.prototype.navigate=function(u){if(u&&u.url){var l=u.silentRequestTimeout||1e4;s.Log.debug("IFrameWindow.navigate: Using timeout of:",l),this._timer=window.setTimeout(this._timeout.bind(this),l),this._frame.src=u.url}else this._error("No url provided");return this.promise},a.prototype._success=function(u){this._cleanup(),s.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(u)},a.prototype._error=function(u){this._cleanup(),s.Log.error(u),this._reject(new Error(u))},a.prototype.close=function(){this._cleanup()},a.prototype._cleanup=function(){this._frame&&(s.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},a.prototype._timeout=function(){s.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},a.prototype._message=function(u){if(s.Log.debug("IFrameWindow.message"),this._timer&&u.origin===this._origin&&u.source===this._frame.contentWindow&&typeof u.data=="string"&&(u.data.startsWith("http://")||u.data.startsWith("https://"))){var l=u.data;l?this._success({url:l}):this._error("Invalid response from frame")}},a.notifyParent=function(u){s.Log.debug("IFrameWindow.notifyParent"),(u=u||window.location.href)&&(s.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(u,location.protocol+"//"+location.host))},o(a,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),a}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.UserManagerEvents=void 0;var o=i(0),s=i(16),a=i(17);r.UserManagerEvents=function(c){function u(l){(function(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")})(this,u);var d=function(g,y){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||typeof y!="object"&&typeof y!="function"?g:y}(this,c.call(this,l));return d._userLoaded=new a.Event("User loaded"),d._userUnloaded=new a.Event("User unloaded"),d._silentRenewError=new a.Event("Silent renew error"),d._userSignedIn=new a.Event("User signed in"),d._userSignedOut=new a.Event("User signed out"),d._userSessionChanged=new a.Event("User session changed"),d}return function(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}(u,c),u.prototype.load=function(d){var p=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];o.Log.debug("UserManagerEvents.load"),c.prototype.load.call(this,d),p&&this._userLoaded.raise(d)},u.prototype.unload=function(){o.Log.debug("UserManagerEvents.unload"),c.prototype.unload.call(this),this._userUnloaded.raise()},u.prototype.addUserLoaded=function(d){this._userLoaded.addHandler(d)},u.prototype.removeUserLoaded=function(d){this._userLoaded.removeHandler(d)},u.prototype.addUserUnloaded=function(d){this._userUnloaded.addHandler(d)},u.prototype.removeUserUnloaded=function(d){this._userUnloaded.removeHandler(d)},u.prototype.addSilentRenewError=function(d){this._silentRenewError.addHandler(d)},u.prototype.removeSilentRenewError=function(d){this._silentRenewError.removeHandler(d)},u.prototype._raiseSilentRenewError=function(d){o.Log.debug("UserManagerEvents._raiseSilentRenewError",d.message),this._silentRenewError.raise(d)},u.prototype.addUserSignedIn=function(d){this._userSignedIn.addHandler(d)},u.prototype.removeUserSignedIn=function(d){this._userSignedIn.removeHandler(d)},u.prototype._raiseUserSignedIn=function(){o.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},u.prototype.addUserSignedOut=function(d){this._userSignedOut.addHandler(d)},u.prototype.removeUserSignedOut=function(d){this._userSignedOut.removeHandler(d)},u.prototype._raiseUserSignedOut=function(){o.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},u.prototype.addUserSessionChanged=function(d){this._userSessionChanged.addHandler(d)},u.prototype.removeUserSessionChanged=function(d){this._userSessionChanged.removeHandler(d)},u.prototype._raiseUserSessionChanged=function(){o.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},u}(s.AccessTokenEvents)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.Timer=void 0;var o=function(){function d(p,g){for(var y=0;y<g.length;y++){var w=g[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(p,w.key,w)}}return function(p,g,y){return g&&d(p.prototype,g),y&&d(p,y),p}}(),s=i(0),a=i(1),c=i(17);function u(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function l(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||typeof p!="object"&&typeof p!="function"?d:p}r.Timer=function(d){function p(g){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.Global.timer,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;u(this,p);var b=l(this,d.call(this,g));return b._timer=y,b._nowFunc=w||function(){return Date.now()/1e3},b}return function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}(p,d),p.prototype.init=function(y){y<=0&&(y=1),y=parseInt(y);var w=this.now+y;if(this.expiration===w&&this._timerHandle)s.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),s.Log.debug("Timer.init timer "+this._name+" for duration:",y),this._expiration=w;var b=5;y<b&&(b=y),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*b)}},p.prototype.cancel=function(){this._timerHandle&&(s.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},p.prototype._callback=function(){var y=this._expiration-this.now;s.Log.debug("Timer.callback; "+this._name+" timer expires in:",y),this._expiration<=this.now&&(this.cancel(),d.prototype.raise.call(this))},o(p,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),p}(c.Event)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SilentRenewService=void 0;var o=i(0);r.SilentRenewService=function(){function s(a){(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,s),this._userManager=a}return s.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(c){}).catch(function(c){o.Log.error("SilentRenewService.start: Error from getUser:",c.message)}))},s.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},s.prototype._tokenExpiring=function(){var c=this;this._userManager.signinSilent().then(function(u){o.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(u){o.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",u.message),c._userManager.events._raiseSilentRenewError(u)})},s}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.CordovaPopupNavigator=void 0;var o=i(21);r.CordovaPopupNavigator=function(){function s(){(function(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")})(this,s)}return s.prototype.prepare=function(c){var u=new o.CordovaPopupWindow(c);return Promise.resolve(u)},s}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.CordovaIFrameNavigator=void 0;var o=i(21);r.CordovaIFrameNavigator=function(){function s(){(function(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")})(this,s)}return s.prototype.prepare=function(c){c.popupWindowFeatures="hidden=yes";var u=new o.CordovaPopupWindow(c);return Promise.resolve(u)},s}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.Version="1.11.6"}])})})(pi);function Jx(t,e){var n,r,i,o;throw t.error==="invalid_redirect_uri"?new Error(`Dynamic client registration failed: the provided redirect uri [${(n=e.redirectUrl)===null||n===void 0?void 0:n.toString()}] is invalid - ${(r=t.error_description)!==null&&r!==void 0?r:""}`):t.error==="invalid_client_metadata"?new Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(e)} is invalid - ${(i=t.error_description)!==null&&i!==void 0?i:""}`):new Error(`Dynamic client registration failed: ${t.error} - ${(o=t.error_description)!==null&&o!==void 0?o:""}`)}function Zx(t,e){if(t.client_id===void 0)throw new Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(t)}`);if(e.redirectUrl&&(t.redirect_uris===void 0||t.redirect_uris[0]!==e.redirectUrl.toString()))throw new Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(t.redirect_uris)} don't match the provided ${JSON.stringify([e.redirectUrl.toString()])}`)}async function Qx(t,e){var n;if(!e.registrationEndpoint)throw new Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");if(!Array.isArray(e.idTokenSigningAlgValuesSupported))throw new Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");const r=Ht.determineSigningAlg(e.idTokenSigningAlgValuesSupported,Ht.PREFERRED_SIGNING_ALG),i={client_name:t.clientName,application_type:"web",redirect_uris:[(n=t.redirectUrl)===null||n===void 0?void 0:n.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:r,grant_types:["authorization_code","refresh_token"]},o={"Content-Type":"application/json"},s=await fetch(e.registrationEndpoint.toString(),{method:"POST",headers:o,body:JSON.stringify(i)});if(s.ok){const a=await s.json();return Zx(a,t),{clientId:a.client_id,clientSecret:a.client_secret,idTokenSignedResponseAlg:a.id_token_signed_response_alg,clientType:"dynamic"}}throw s.status===400&&Jx(await s.json(),t),new Error(`Dynamic client registration failed: the server returned ${s.status} ${s.statusText} - ${await s.text()}`)}function Xx(t){return t.error!==void 0&&typeof t.error=="string"}function Fy(t){return t.error_description!==void 0&&typeof t.error_description=="string"}function eI(t){return t.error_uri!==void 0&&typeof t.error_uri=="string"}function tI(t){return t.access_token!==void 0&&typeof t.access_token=="string"}function nI(t){return t.id_token!==void 0&&typeof t.id_token=="string"}function rI(t){return t.refresh_token!==void 0&&typeof t.refresh_token=="string"}function iI(t){return t.token_type!==void 0&&typeof t.token_type=="string"}function oI(t){return t.expires_in===void 0||typeof t.expires_in=="number"}function sI(t,e){if(e.grantType&&(!t.grantTypesSupported||!t.grantTypesSupported.includes(e.grantType)))throw new Error(`The issuer [${t.issuer}] does not support the [${e.grantType}] grant`);if(!t.tokenEndpoint)throw new Error(`This issuer [${t.issuer}] does not have a token endpoint`)}function Wv(t,e){if(Xx(t))throw new Ht.OidcProviderError(`Token endpoint returned error [${t.error}]${Fy(t)?`: ${t.error_description}`:""}${eI(t)?` (see ${t.error_uri})`:""}`,t.error,Fy(t)?t.error_description:void 0);if(!tI(t))throw new Ht.InvalidResponseError(["access_token"]);if(!nI(t))throw new Ht.InvalidResponseError(["id_token"]);if(!iI(t))throw new Ht.InvalidResponseError(["token_type"]);if(!oI(t))throw new Ht.InvalidResponseError(["expires_in"]);if(!e&&t.token_type.toLowerCase()!=="bearer")throw new Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${t.token_type}].`);return t}async function aI(t,e,n,r){sI(t,n);const i={"content-type":"application/x-www-form-urlencoded"};let o;r&&(o=await Ht.generateDpopKeyPair(),i.DPoP=await Ht.createDpopHeader(t.tokenEndpoint,"POST",o)),e.clientSecret&&(i.Authorization=`Basic ${btoa(`${e.clientId}:${e.clientSecret}`)}`);const s={grant_type:n.grantType,redirect_uri:n.redirectUrl,code:n.code,code_verifier:n.codeVerifier,client_id:e.clientId},a={method:"POST",headers:i,body:new URLSearchParams(s).toString()},u=await(await await fetch(t.tokenEndpoint,a)).json(),l=Wv(u,r),d=await Ht.getWebidFromTokenPayload(l.id_token,t.jwksUri,t.issuer,e.clientId);return{accessToken:l.access_token,idToken:l.id_token,refreshToken:rI(l)?l.refresh_token:void 0,webId:d,dpopKey:o,expiresIn:l.expires_in}}async function cI(t){let e;try{const n=new pi.exports.OidcClient({response_mode:"query",loadUserInfo:!1});if(e=await n.processSigninResponse(t),n.settings.metadata===void 0)throw new Error("Cannot retrieve issuer metadata from client information in storage.");if(n.settings.metadata.jwks_uri===void 0)throw new Error("Missing some issuer metadata from client information in storage: 'jwks_uri' is undefined");if(n.settings.metadata.issuer===void 0)throw new Error("Missing some issuer metadata from client information in storage: 'issuer' is undefined");if(n.settings.client_id===void 0)throw new Error("Missing some client information in storage: 'client_id' is undefined");const r=await Ht.getWebidFromTokenPayload(e.id_token,n.settings.metadata.jwks_uri,n.settings.metadata.issuer,n.settings.client_id);return{accessToken:e.access_token,idToken:e.id_token,webId:r,refreshToken:e.refresh_token}}catch(n){throw new Error(`Problem handling Auth Code Grant (Flow) redirect - URL [${t}]: ${n}`)}}async function uI(t,e,n){return aI(t,e,n,!0)}const lI=t=>{try{return new URL(t),!0}catch{return!1}};async function dI(t,e,n,r){if(n.clientId===void 0)throw new Error("No client ID available when trying to refresh the access token.");const i={grant_type:"refresh_token",refresh_token:t,scope:Ht.DEFAULT_SCOPES};let o={};r!==void 0&&(o={DPoP:await Ht.createDpopHeader(e.tokenEndpoint,"POST",r)});let s={};n.clientSecret!==void 0?s={Authorization:`Basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`}:lI(n.clientId)&&(i.client_id=n.clientId);const a=await fetch(e.tokenEndpoint,{method:"POST",body:new URLSearchParams(i).toString(),headers:{...o,...s,"Content-Type":"application/x-www-form-urlencoded"}});let c;try{c=await a.json()}catch{throw new Error(`The token endpoint of issuer ${e.issuer} returned a malformed response.`)}const u=Wv(c,r!==void 0),l=await Ht.getWebidFromTokenPayload(u.id_token,e.jwksUri,e.issuer,n.clientId);return{accessToken:u.access_token,idToken:u.id_token,refreshToken:typeof u.refresh_token=="string"?u.refresh_token:void 0,webId:l,dpopKey:r,expiresIn:u.expires_in}}function fI(t){const e=new URL(t);return e.searchParams.delete("code"),e.searchParams.delete("state"),e.hash="",e.toString()}async function hI(){await new pi.exports.OidcClient({response_mode:"query"}).clearStaleState(new pi.exports.WebStorageStateStore({}));const e=window.localStorage,n=[];for(let r=0;r<=e.length;r+=1){const i=e.key(r);i&&(i.match(/^oidc\..+$/)||i.match(/^solidClientAuthenticationUser:.+$/))&&n.push(i)}n.forEach(r=>e.removeItem(r))}var pI=Object.freeze(Object.defineProperty({__proto__:null,clearOidcPersistentStorage:hI,getBearerToken:cI,getDpopToken:uI,refresh:dI,registerClient:Qx,removeOidcQueryParam:fI,CordovaIFrameNavigator:pi.exports.CordovaIFrameNavigator,CordovaPopupNavigator:pi.exports.CordovaPopupNavigator,InMemoryWebStorage:pi.exports.InMemoryWebStorage,Log:pi.exports.Log,OidcClient:pi.exports.OidcClient,SessionMonitor:pi.exports.SessionMonitor,User:pi.exports.User,UserManager:pi.exports.UserManager,Version:pi.exports.Version,WebStorageStateStore:pi.exports.WebStorageStateStore},Symbol.toStringTag,{value:"Module"})),Pc=nf(pI);Object.defineProperty(b0,"__esModule",{value:!0});const gI=Ht,mI=Pc,Dy=(t,e)=>window.fetch(t,e);class yI{constructor(e,n,r,i,o){this.loginHandler=e,this.redirectHandler=n,this.logoutHandler=r,this.sessionInfoManager=i,this.issuerConfigFetcher=o,this.login=async(s,a)=>{var c,u;await this.sessionInfoManager.clear(s.sessionId);const l=(0,mI.removeOidcQueryParam)((c=s.redirectUrl)!==null&&c!==void 0?c:window.location.href);await this.loginHandler.handle({...s,redirectUrl:l,clientName:(u=s.clientName)!==null&&u!==void 0?u:s.clientId,eventEmitter:a})},this.fetch=Dy,this.logout=async s=>{await this.logoutHandler.handle(s),this.fetch=Dy},this.getSessionInfo=async s=>this.sessionInfoManager.get(s),this.getAllSessionInfo=async()=>this.sessionInfoManager.getAll(),this.validateCurrentSession=async s=>{const a=await this.sessionInfoManager.get(s);return a===void 0||a.clientAppId===void 0||a.issuer===void 0?null:a},this.handleIncomingRedirect=async(s,a)=>{try{const c=await this.redirectHandler.handle(s,a);return this.fetch=c.fetch.bind(window),this.cleanUrlAfterRedirect(s),{isLoggedIn:c.isLoggedIn,webId:c.webId,sessionId:c.sessionId,expirationDate:c.expirationDate}}catch(c){this.cleanUrlAfterRedirect(s),a.emit(gI.EVENTS.ERROR,"redirect",c);return}}}cleanUrlAfterRedirect(e){const n=new URL(e);n.searchParams.delete("state"),n.searchParams.delete("code"),n.searchParams.delete("id_token"),n.searchParams.delete("access_token"),n.searchParams.delete("error"),n.searchParams.delete("error_description"),window.history.replaceState(null,"",n.toString())}}b0.default=yI;var E0={};Object.defineProperty(E0,"__esModule",{value:!0});const Rh=Ht;function Cy(t){return typeof t.oidcIssuer=="string"}function Py(t){return typeof t.redirectUrl=="string"}class _I{constructor(e,n,r,i){this.storageUtility=e,this.oidcHandler=n,this.issuerConfigFetcher=r,this.clientRegistrar=i}async canHandle(e){return Cy(e)&&Py(e)}async handle(e){if(!Cy(e))throw new Rh.ConfigurationError(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(e)}`);if(!Py(e))throw new Rh.ConfigurationError(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(e)}`);const n=await this.issuerConfigFetcher.fetchConfig(e.oidcIssuer),r=await(0,Rh.handleRegistration)(e,n,this.storageUtility,this.clientRegistrar),i={issuer:n.issuer,dpop:e.tokenType.toLowerCase()==="dpop",...e,issuerConfiguration:n,client:r};return this.oidcHandler.handle(i)}}E0.default=_I;var S0={};Object.defineProperty(S0,"__esModule",{value:!0});const wI=Ht,vI=Pc;class bI{constructor(e,n){this.storageUtility=e,this.redirector=n}async canHandle(e){return!!(e.issuerConfiguration.grantTypesSupported&&e.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1)}async handle(e){var n;const r={authority:e.issuer.toString(),client_id:e.client.clientId,client_secret:e.client.clientSecret,redirect_uri:e.redirectUrl.toString(),post_logout_redirect_uri:e.redirectUrl.toString(),response_type:"code",scope:wI.DEFAULT_SCOPES,filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:(n=e.prompt)!==null&&n!==void 0?n:"consent"},i=new vI.OidcClient(r),{redirector:o}=this,s=this.storageUtility;try{const a=await i.createSigninRequest();await Promise.all([s.setForUser(a.state._id,{sessionId:e.sessionId}),s.setForUser(e.sessionId,{codeVerifier:a.state._code_verifier,issuer:e.issuer.toString(),redirectUrl:e.redirectUrl,dpop:e.dpop?"true":"false"})]),o.redirect(a.url.toString(),{handleRedirect:e.handleRedirect})}catch(a){console.error(a)}}}S0.default=bI;var qv={},mf={};Object.defineProperty(mf,"__esModule",{value:!0});mf.appendToUrlPathname=void 0;function EI(t,e){const n=new URL(t),r=n.pathname;return n.pathname=`${r}${r.endsWith("/")?"":"/"}${e.startsWith("/")?e.substring(1):e}`,n.toString()}mf.appendToUrlPathname=EI;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WELL_KNOWN_OPENID_CONFIG=void 0;const e=Ht,n=mf;t.WELL_KNOWN_OPENID_CONFIG=".well-known/openid-configuration";const r={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};function i(s){const a={};return Object.keys(s).forEach(c=>{r[c]&&(a[r[c].toKey]=s[c])}),Array.isArray(a.scopesSupported)||(a.scopesSupported=["openid"]),a}class o{constructor(a){this.storageUtility=a}static getLocalStorageKey(a){return`issuerConfig:${a}`}async fetchConfig(a){let c;const u=(0,n.appendToUrlPathname)(a,t.WELL_KNOWN_OPENID_CONFIG),l=await window.fetch(u);try{c=i(await l.json())}catch(d){throw new e.ConfigurationError(`[${a.toString()}] has an invalid configuration: ${d.message}`)}return await this.storageUtility.set(o.getLocalStorageKey(a),JSON.stringify(c)),c}}t.default=o})(qv);var yf={},xo={};Object.defineProperty(xo,"__esModule",{value:!0});xo.SessionInfoManager=xo.clear=xo.getUnauthenticatedSession=void 0;const SI=Ht,TI=w0,AI=Pc;function xI(){return{isLoggedIn:!1,sessionId:(0,TI.v4)(),fetch}}xo.getUnauthenticatedSession=xI;async function Vv(t,e){await Promise.all([e.deleteAllUserData(t,{secure:!1}),e.deleteAllUserData(t,{secure:!0}),e.delete("clientKey",{secure:!1})]),await(0,AI.clearOidcPersistentStorage)()}xo.clear=Vv;class II{constructor(e){this.storageUtility=e}update(e,n){throw new Error("Not Implemented")}async get(e){var n;const r=await this.storageUtility.getForUser(e,"isLoggedIn",{secure:!0}),i=await this.storageUtility.getForUser(e,"webId",{secure:!0}),o=await this.storageUtility.getForUser(e,"clientId",{secure:!1}),s=await this.storageUtility.getForUser(e,"clientSecret",{secure:!1}),a=await this.storageUtility.getForUser(e,"redirectUrl",{secure:!1}),c=await this.storageUtility.getForUser(e,"refreshToken",{secure:!0}),u=await this.storageUtility.getForUser(e,"issuer",{secure:!1}),l=(n=await this.storageUtility.getForUser(e,"tokenType",{secure:!1}))!==null&&n!==void 0?n:"DPoP";if(!(0,SI.isSupportedTokenType)(l))throw new Error(`Tokens of type [${l}] are not supported.`);if(!(o===void 0&&r===void 0&&i===void 0&&c===void 0))return{sessionId:e,webId:i,isLoggedIn:r==="true",redirectUrl:a,refreshToken:c,issuer:u,clientAppId:o,clientAppSecret:s,tokenType:l}}async getAll(){throw new Error("Not implemented")}async clear(e){return Vv(e,this.storageUtility)}async register(e){throw new Error("Not implemented")}async getRegisteredSessionIdAll(){throw new Error("Not implemented")}async clearAll(){throw new Error("Not implemented")}}xo.SessionInfoManager=II;Object.defineProperty(yf,"__esModule",{value:!0});yf.FallbackRedirectHandler=void 0;const RI=xo;class kI{async canHandle(e){try{return new URL(e),!0}catch(n){throw new Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${n}`)}}async handle(e){return(0,RI.getUnauthenticatedSession)()}}yf.FallbackRedirectHandler=kI;var T0={};Object.defineProperty(T0,"__esModule",{value:!0});class FI{constructor(e){this.sessionInfoManager=e}async canHandle(){return!0}async handle(e){await this.sessionInfoManager.clear(e)}}T0.default=FI;var _f={};Object.defineProperty(_f,"__esModule",{value:!0});_f.AuthCodeRedirectHandler=void 0;const Ny=Ht,Oy=Pc;class DI{constructor(e,n,r,i,o){this.storageUtility=e,this.sessionInfoManager=n,this.issuerConfigFetcher=r,this.clientRegistrar=i,this.tokerRefresher=o}async canHandle(e){try{const n=new URL(e);return n.searchParams.get("code")!==null&&n.searchParams.get("state")!==null}catch(n){throw new Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${n}`)}}async handle(e,n){if(!await this.canHandle(e))throw new Error(`AuthCodeRedirectHandler cannot handle [${e}]: it is missing one of [code, state].`);const r=new URL(e),i=r.searchParams.get("state"),o=await this.storageUtility.getForUser(i,"sessionId",{errorIfNull:!0}),{issuerConfig:s,codeVerifier:a,redirectUrl:c,dpop:u}=await(0,Ny.loadOidcContextFromStorage)(o,this.storageUtility,this.issuerConfigFetcher);if(a===void 0)throw new Error(`The code verifier for session ${o} is missing from storage.`);if(c===void 0)throw new Error(`The redirect URL for session ${o} is missing from storage.`);const l=await this.clientRegistrar.getClient({sessionId:o},s);let d;const p=Date.now();u?(d=await(0,Oy.getDpopToken)(s,l,{grantType:"authorization_code",code:r.searchParams.get("code"),codeVerifier:a,redirectUrl:c}),window.localStorage.removeItem(`oidc.${i}`)):d=await(0,Oy.getBearerToken)(r.toString());let g;d.refreshToken!==void 0&&(g={sessionId:o,refreshToken:d.refreshToken,tokenRefresher:this.tokerRefresher});const y=await(0,Ny.buildAuthenticatedFetch)(fetch,d.accessToken,{dpopKey:d.dpopKey,refreshOptions:g,eventEmitter:n,expiresIn:d.expiresIn});await this.storageUtility.setForUser(o,{webId:d.webId,isLoggedIn:"true"},{secure:!0}),r.searchParams.delete("code"),await this.storageUtility.setForUser(o,{redirectUrl:r.toString()},{secure:!1});const w=await this.sessionInfoManager.get(o);if(!w)throw new Error(`Could not retrieve session: [${o}].`);return Object.assign(w,{fetch:y,expirationDate:typeof d.expiresIn=="number"?p+d.expiresIn*1e3:null})}}_f.AuthCodeRedirectHandler=DI;var A0={};Object.defineProperty(A0,"__esModule",{value:!0});const CI=Ht;class PI extends CI.AggregateHandler{constructor(e){super(e)}}A0.default=PI;var x0={};Object.defineProperty(x0,"__esModule",{value:!0});class NI{get storage(){return window.localStorage}async get(e){return this.storage.getItem(e)||void 0}async set(e,n){this.storage.setItem(e,n)}async delete(e){this.storage.removeItem(e)}}x0.default=NI;var I0={};Object.defineProperty(I0,"__esModule",{value:!0});class OI{redirect(e,n){n&&n.handleRedirect?n.handleRedirect(e):n&&n.redirectByReplacingState?window.history.replaceState({},"",e):window.location.href=e}}I0.default=OI;var R0={};Object.defineProperty(R0,"__esModule",{value:!0});const MI=Pc;class LI{constructor(e){this.storageUtility=e}async getClient(e,n){const[r,i]=await Promise.all([this.storageUtility.getForUser(e.sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(e.sessionId,"clientSecret",{secure:!1})]);if(r)return{clientId:r,clientSecret:i,clientType:"dynamic"};try{const o=await(0,MI.registerClient)(e,n),s={clientId:o.clientId};return o.clientSecret&&(s.clientSecret=o.clientSecret),o.idTokenSignedResponseAlg&&(s.idTokenSignedResponseAlg=o.idTokenSignedResponseAlg),await this.storageUtility.setForUser(e.sessionId,s,{secure:!1}),o}catch(o){throw new Error(`Client registration failed: [${o}]`)}}}R0.default=LI;var wf={};Object.defineProperty(wf,"__esModule",{value:!0});wf.ErrorOidcHandler=void 0;const UI=Ht,jI=xo;class $I{async canHandle(e){try{return new URL(e).searchParams.has("error")}catch(n){throw new Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${n}`)}}async handle(e,n){if(n!==void 0){const r=new URL(e),i=r.searchParams.get("error"),o=r.searchParams.get("error_description");n.emit(UI.EVENTS.ERROR,i,o)}return(0,jI.getUnauthenticatedSession)()}}wf.ErrorOidcHandler=$I;var k0={};Object.defineProperty(k0,"__esModule",{value:!0});const My=Ht,BI=Pc;class HI{constructor(e,n,r){this.storageUtility=e,this.issuerConfigFetcher=n,this.clientRegistrar=r}async refresh(e,n,r,i){const o=await(0,My.loadOidcContextFromStorage)(e,this.storageUtility,this.issuerConfigFetcher),s=await this.clientRegistrar.getClient({sessionId:e},o.issuerConfig);if(n===void 0)throw new Error(`Session [${e}] has no refresh token to allow it to refresh its access token.`);if(o.dpop&&r===void 0)throw new Error(`For session [${e}], the key bound to the DPoP access token must be provided to refresh said access token.`);const a=await(0,BI.refresh)(n,o.issuerConfig,s,r);return a.refreshToken!==void 0&&(i==null||i.emit(My.EVENTS.NEW_REFRESH_TOKEN,a.refreshToken),await this.storageUtility.setForUser(e,{refreshToken:a.refreshToken})),a}}k0.default=HI;var lo=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nl,"__esModule",{value:!0});nl.getClientAuthenticationWithDependencies=void 0;const KI=Ht,WI=lo(v0),qI=lo(b0),VI=lo(E0),GI=lo(S0),zI=lo(qv),YI=yf,JI=lo(T0),ZI=xo,QI=_f,XI=lo(A0),eR=lo(x0),tR=lo(I0),nR=lo(R0),rR=wf,iR=lo(k0);function oR(t){const e=new KI.InMemoryStorage,n=t.secureStorage||e,r=t.insecureStorage||new eR.default,i=new WI.default(n,r),o=new zI.default(i),s=new nR.default(i),a=new ZI.SessionInfoManager(i),c=new iR.default(i,o,s),u=new VI.default(i,new GI.default(i,new tR.default),o,s),l=new XI.default([new rR.ErrorOidcHandler,new QI.AuthCodeRedirectHandler(i,a,o,s,c),new YI.FallbackRedirectHandler]);return new qI.default(u,l,new JI.default(a),a,o)}nl.getClientAuthenticationWithDependencies=oR;var Ac={};Object.defineProperty(Ac,"__esModule",{value:!0});Ac.KEY_CURRENT_URL=Ac.KEY_CURRENT_SESSION=void 0;const Gv=Ht;Ac.KEY_CURRENT_SESSION=`${Gv.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentSession`;Ac.KEY_CURRENT_URL=`${Gv.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentUrl`;Object.defineProperty(Ta,"__esModule",{value:!0});Ta.Session=Ta.silentlyAuthenticate=void 0;const sR=Zu.exports,Oi=Ht,aR=w0,Ly=nl,Qa=Ac;async function zv(t,e,n){var r;const i=await e.validateCurrentSession(t);return i!==null?(window.localStorage.setItem(Qa.KEY_CURRENT_URL,window.location.href),await e.login({sessionId:t,prompt:"none",oidcIssuer:i.issuer,redirectUrl:i.redirectUrl,clientId:i.clientAppId,clientSecret:i.clientAppSecret,tokenType:(r=i.tokenType)!==null&&r!==void 0?r:"DPoP"},n),!0):!1}Ta.silentlyAuthenticate=zv;function cR(t){return!!(t!=null&&t.isLoggedIn)}class uR extends sR.EventEmitter{constructor(e={},n){super(),this.tokenRequestInProgress=!1,this.login=async r=>{var i;return await this.clientAuthentication.login({sessionId:this.info.sessionId,...r,tokenType:(i=r.tokenType)!==null&&i!==void 0?i:"DPoP"},this),new Promise(()=>{})},this.fetch=async(r,i)=>this.clientAuthentication.fetch(r,i),this.internalLogout=async r=>{window.localStorage.removeItem(Qa.KEY_CURRENT_SESSION),await this.clientAuthentication.logout(this.info.sessionId),this.info.isLoggedIn=!1,r&&this.emit(Oi.EVENTS.LOGOUT)},this.logout=async()=>this.internalLogout(!0),this.handleIncomingRedirect=async(r={})=>{var i;if(this.info.isLoggedIn)return this.info;if(this.tokenRequestInProgress)return;const o=typeof r=="string"?{url:r}:r,s=(i=o.url)!==null&&i!==void 0?i:window.location.href;this.tokenRequestInProgress=!0;const a=await this.clientAuthentication.handleIncomingRedirect(s,this);if(cR(a)){this.setSessionInfo(a);const c=window.localStorage.getItem(Qa.KEY_CURRENT_URL);c===null?this.emit(Oi.EVENTS.LOGIN):(window.localStorage.removeItem(Qa.KEY_CURRENT_URL),this.emit(Oi.EVENTS.SESSION_RESTORED,c))}else if(o.restorePreviousSession===!0){const c=window.localStorage.getItem(Qa.KEY_CURRENT_SESSION);if(c!==null&&await zv(c,this.clientAuthentication,this))return new Promise(()=>{})}return this.tokenRequestInProgress=!1,a},e.clientAuthentication?this.clientAuthentication=e.clientAuthentication:e.secureStorage&&e.insecureStorage?this.clientAuthentication=(0,Ly.getClientAuthenticationWithDependencies)({secureStorage:e.secureStorage,insecureStorage:e.insecureStorage}):this.clientAuthentication=(0,Ly.getClientAuthenticationWithDependencies)({}),e.sessionInfo?this.info={sessionId:e.sessionInfo.sessionId,isLoggedIn:!1,webId:e.sessionInfo.webId}:this.info={sessionId:n!=null?n:(0,aR.v4)(),isLoggedIn:!1},this.on(Oi.EVENTS.LOGIN,()=>window.localStorage.setItem(Qa.KEY_CURRENT_SESSION,this.info.sessionId)),this.on(Oi.EVENTS.SESSION_EXPIRED,()=>this.internalLogout(!1)),this.on(Oi.EVENTS.ERROR,()=>this.internalLogout(!1))}onLogin(e){this.on(Oi.EVENTS.LOGIN,e)}onLogout(e){this.on(Oi.EVENTS.LOGOUT,e)}onError(e){this.on(Oi.EVENTS.ERROR,e)}onSessionRestore(e){this.on(Oi.EVENTS.SESSION_RESTORED,e)}onSessionExpiration(e){this.on(Oi.EVENTS.SESSION_EXPIRED,e)}setSessionInfo(e){this.info.isLoggedIn=e.isLoggedIn,this.info.webId=e.webId,this.info.sessionId=e.sessionId,this.info.expirationDate=e.expirationDate,this.on(Oi.EVENTS.SESSION_EXTENDED,n=>{this.info.expirationDate=Date.now()+n*1e3})}}Ta.Session=uR;var Ar={};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.onSessionRestore=Ar.onLogout=Ar.onLogin=Ar.handleIncomingRedirect=Ar.logout=Ar.login=Ar.fetch=Ar.getDefaultSession=void 0;const lR=Ta;let kh;function js(){return typeof kh=="undefined"&&(kh=new lR.Session),kh}Ar.getDefaultSession=js;const dR=(...t)=>js().fetch(...t);Ar.fetch=dR;const fR=(...t)=>js().login(...t);Ar.login=fR;const hR=(...t)=>js().logout(...t);Ar.logout=hR;const pR=(...t)=>js().handleIncomingRedirect(...t);Ar.handleIncomingRedirect=pR;const gR=(...t)=>js().onLogin(...t);Ar.onLogin=gR;const mR=(...t)=>js().onLogout(...t);Ar.onLogout=mR;const yR=(...t)=>js().onSessionRestore(...t);Ar.onSessionRestore=yR;(function(t){var e=Gt&&Gt.__createBinding||(Object.create?function(s,a,c,u){u===void 0&&(u=c);var l=Object.getOwnPropertyDescriptor(a,c);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(s,u,l)}:function(s,a,c,u){u===void 0&&(u=c),s[u]=a[c]}),n=Gt&&Gt.__exportStar||function(s,a){for(var c in s)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,s,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryStorage=t.ConfigurationError=t.NotImplementedError=t.getClientAuthenticationWithDependencies=t.Session=void 0;var r=Ta;Object.defineProperty(t,"Session",{enumerable:!0,get:function(){return r.Session}});var i=nl;Object.defineProperty(t,"getClientAuthenticationWithDependencies",{enumerable:!0,get:function(){return i.getClientAuthenticationWithDependencies}}),n(Ar,t);var o=Ht;Object.defineProperty(t,"NotImplementedError",{enumerable:!0,get:function(){return o.NotImplementedError}}),Object.defineProperty(t,"ConfigurationError",{enumerable:!0,get:function(){return o.ConfigurationError}}),Object.defineProperty(t,"InMemoryStorage",{enumerable:!0,get:function(){return o.InMemoryStorage}})})(ta);var Ds={},vf={};vf.byteLength=vR;vf.toByteArray=ER;vf.fromByteArray=AR;var To=[],Li=[],_R=typeof Uint8Array!="undefined"?Uint8Array:Array,Fh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ga=0,wR=Fh.length;Ga<wR;++Ga)To[Ga]=Fh[Ga],Li[Fh.charCodeAt(Ga)]=Ga;Li["-".charCodeAt(0)]=62;Li["_".charCodeAt(0)]=63;function Yv(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function vR(t){var e=Yv(t),n=e[0],r=e[1];return(n+r)*3/4-r}function bR(t,e,n){return(e+n)*3/4-n}function ER(t){var e,n=Yv(t),r=n[0],i=n[1],o=new _R(bR(t,r,i)),s=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)e=Li[t.charCodeAt(c)]<<18|Li[t.charCodeAt(c+1)]<<12|Li[t.charCodeAt(c+2)]<<6|Li[t.charCodeAt(c+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Li[t.charCodeAt(c)]<<2|Li[t.charCodeAt(c+1)]>>4,o[s++]=e&255),i===1&&(e=Li[t.charCodeAt(c)]<<10|Li[t.charCodeAt(c+1)]<<4|Li[t.charCodeAt(c+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function SR(t){return To[t>>18&63]+To[t>>12&63]+To[t>>6&63]+To[t&63]}function TR(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(SR(r));return i.join("")}function AR(t){for(var e,n=t.length,r=n%3,i=[],o=16383,s=0,a=n-r;s<a;s+=o)i.push(TR(t,s,s+o>a?a:s+o));return r===1?(e=t[n-1],i.push(To[e>>2]+To[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(To[e>>10]+To[e>>4&63]+To[e<<2&63]+"=")),i.join("")}var F0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */F0.read=function(t,e,n,r,i){var o,s,a=i*8-r-1,c=(1<<a)-1,u=c>>1,l=-7,d=n?i-1:0,p=n?-1:1,g=t[e+d];for(d+=p,o=g&(1<<-l)-1,g>>=-l,l+=a;l>0;o=o*256+t[e+d],d+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=s*256+t[e+d],d+=p,l-=8);if(o===0)o=1-u;else{if(o===c)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-u}return(g?-1:1)*s*Math.pow(2,o-r)};F0.write=function(t,e,n,r,i,o){var s,a,c,u=o*8-i-1,l=(1<<u)-1,d=l>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:o-1,y=r?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+d>=1?e+=p/c:e+=p*Math.pow(2,1-d),e*c>=2&&(s++,c/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(e*c-1)*Math.pow(2,i),s=s+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;t[n+g]=a&255,g+=y,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[n+g]=s&255,g+=y,s/=256,u-=8);t[n+g-y]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=vf,n=F0,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=S,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const L=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(L,x),L.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.byteOffset}});function s(L){if(L>i)throw new RangeError('The value "'+L+'" is invalid for option "size"');const x=new Uint8Array(L);return Object.setPrototypeOf(x,a.prototype),x}function a(L,x,k){if(typeof L=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(L)}return c(L,x,k)}a.poolSize=8192;function c(L,x,k){if(typeof L=="string")return p(L,x);if(ArrayBuffer.isView(L))return y(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(dt(L,ArrayBuffer)||L&&dt(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(dt(L,SharedArrayBuffer)||L&&dt(L.buffer,SharedArrayBuffer)))return w(L,x,k);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const I=L.valueOf&&L.valueOf();if(I!=null&&I!==L)return a.from(I,x,k);const ie=b(L);if(ie)return ie;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return a.from(L[Symbol.toPrimitive]("string"),x,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}a.from=function(L,x,k){return c(L,x,k)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function l(L,x,k){return u(L),L<=0?s(L):x!==void 0?typeof k=="string"?s(L).fill(x,k):s(L).fill(x):s(L)}a.alloc=function(L,x,k){return l(L,x,k)};function d(L){return u(L),s(L<0?0:E(L)|0)}a.allocUnsafe=function(L){return d(L)},a.allocUnsafeSlow=function(L){return d(L)};function p(L,x){if((typeof x!="string"||x==="")&&(x="utf8"),!a.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const k=R(L,x)|0;let I=s(k);const ie=I.write(L,x);return ie!==k&&(I=I.slice(0,ie)),I}function g(L){const x=L.length<0?0:E(L.length)|0,k=s(x);for(let I=0;I<x;I+=1)k[I]=L[I]&255;return k}function y(L){if(dt(L,Uint8Array)){const x=new Uint8Array(L);return w(x.buffer,x.byteOffset,x.byteLength)}return g(L)}function w(L,x,k){if(x<0||L.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<x+(k||0))throw new RangeError('"length" is outside of buffer bounds');let I;return x===void 0&&k===void 0?I=new Uint8Array(L):k===void 0?I=new Uint8Array(L,x):I=new Uint8Array(L,x,k),Object.setPrototypeOf(I,a.prototype),I}function b(L){if(a.isBuffer(L)){const x=E(L.length)|0,k=s(x);return k.length===0||L.copy(k,0,0,x),k}if(L.length!==void 0)return typeof L.length!="number"||pr(L.length)?s(0):g(L);if(L.type==="Buffer"&&Array.isArray(L.data))return g(L.data)}function E(L){if(L>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return L|0}function S(L){return+L!=L&&(L=0),a.alloc(+L)}a.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==a.prototype},a.compare=function(x,k){if(dt(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),dt(k,Uint8Array)&&(k=a.from(k,k.offset,k.byteLength)),!a.isBuffer(x)||!a.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===k)return 0;let I=x.length,ie=k.length;for(let fe=0,oe=Math.min(I,ie);fe<oe;++fe)if(x[fe]!==k[fe]){I=x[fe],ie=k[fe];break}return I<ie?-1:ie<I?1:0},a.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(x,k){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return a.alloc(0);let I;if(k===void 0)for(k=0,I=0;I<x.length;++I)k+=x[I].length;const ie=a.allocUnsafe(k);let fe=0;for(I=0;I<x.length;++I){let oe=x[I];if(dt(oe,Uint8Array))fe+oe.length>ie.length?(a.isBuffer(oe)||(oe=a.from(oe)),oe.copy(ie,fe)):Uint8Array.prototype.set.call(ie,oe,fe);else if(a.isBuffer(oe))oe.copy(ie,fe);else throw new TypeError('"list" argument must be an Array of Buffers');fe+=oe.length}return ie};function R(L,x){if(a.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||dt(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);const k=L.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&k===0)return 0;let ie=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return me(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return St(L).length;default:if(ie)return I?-1:me(L).length;x=(""+x).toLowerCase(),ie=!0}}a.byteLength=R;function F(L,x,k){let I=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,x>>>=0,k<=x))return"";for(L||(L="utf8");;)switch(L){case"hex":return ve(this,x,k);case"utf8":case"utf-8":return re(this,x,k);case"ascii":return we(this,x,k);case"latin1":case"binary":return qe(this,x,k);case"base64":return xe(this,x,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,x,k);default:if(I)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),I=!0}}a.prototype._isBuffer=!0;function M(L,x,k){const I=L[x];L[x]=L[k],L[k]=I}a.prototype.swap16=function(){const x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let k=0;k<x;k+=2)M(this,k,k+1);return this},a.prototype.swap32=function(){const x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let k=0;k<x;k+=4)M(this,k,k+3),M(this,k+1,k+2);return this},a.prototype.swap64=function(){const x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let k=0;k<x;k+=8)M(this,k,k+7),M(this,k+1,k+6),M(this,k+2,k+5),M(this,k+3,k+4);return this},a.prototype.toString=function(){const x=this.length;return x===0?"":arguments.length===0?re(this,0,x):F.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(x){if(!a.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:a.compare(this,x)===0},a.prototype.inspect=function(){let x="";const k=t.INSPECT_MAX_BYTES;return x=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(x+=" ... "),"<Buffer "+x+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(x,k,I,ie,fe){if(dt(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),!a.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(k===void 0&&(k=0),I===void 0&&(I=x?x.length:0),ie===void 0&&(ie=0),fe===void 0&&(fe=this.length),k<0||I>x.length||ie<0||fe>this.length)throw new RangeError("out of range index");if(ie>=fe&&k>=I)return 0;if(ie>=fe)return-1;if(k>=I)return 1;if(k>>>=0,I>>>=0,ie>>>=0,fe>>>=0,this===x)return 0;let oe=fe-ie,it=I-k;const ln=Math.min(oe,it),Lt=this.slice(ie,fe),kt=x.slice(k,I);for(let Ft=0;Ft<ln;++Ft)if(Lt[Ft]!==kt[Ft]){oe=Lt[Ft],it=kt[Ft];break}return oe<it?-1:it<oe?1:0};function P(L,x,k,I,ie){if(L.length===0)return-1;if(typeof k=="string"?(I=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,pr(k)&&(k=ie?0:L.length-1),k<0&&(k=L.length+k),k>=L.length){if(ie)return-1;k=L.length-1}else if(k<0)if(ie)k=0;else return-1;if(typeof x=="string"&&(x=a.from(x,I)),a.isBuffer(x))return x.length===0?-1:D(L,x,k,I,ie);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(L,x,k):Uint8Array.prototype.lastIndexOf.call(L,x,k):D(L,[x],k,I,ie);throw new TypeError("val must be string, number or Buffer")}function D(L,x,k,I,ie){let fe=1,oe=L.length,it=x.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(L.length<2||x.length<2)return-1;fe=2,oe/=2,it/=2,k/=2}function ln(kt,Ft){return fe===1?kt[Ft]:kt.readUInt16BE(Ft*fe)}let Lt;if(ie){let kt=-1;for(Lt=k;Lt<oe;Lt++)if(ln(L,Lt)===ln(x,kt===-1?0:Lt-kt)){if(kt===-1&&(kt=Lt),Lt-kt+1===it)return kt*fe}else kt!==-1&&(Lt-=Lt-kt),kt=-1}else for(k+it>oe&&(k=oe-it),Lt=k;Lt>=0;Lt--){let kt=!0;for(let Ft=0;Ft<it;Ft++)if(ln(L,Lt+Ft)!==ln(x,Ft)){kt=!1;break}if(kt)return Lt}return-1}a.prototype.includes=function(x,k,I){return this.indexOf(x,k,I)!==-1},a.prototype.indexOf=function(x,k,I){return P(this,x,k,I,!0)},a.prototype.lastIndexOf=function(x,k,I){return P(this,x,k,I,!1)};function Y(L,x,k,I){k=Number(k)||0;const ie=L.length-k;I?(I=Number(I),I>ie&&(I=ie)):I=ie;const fe=x.length;I>fe/2&&(I=fe/2);let oe;for(oe=0;oe<I;++oe){const it=parseInt(x.substr(oe*2,2),16);if(pr(it))return oe;L[k+oe]=it}return oe}function Q(L,x,k,I){return lt(me(x,L.length-k),L,k,I)}function B(L,x,k,I){return lt(Ne(x),L,k,I)}function se(L,x,k,I){return lt(St(x),L,k,I)}function Ae(L,x,k,I){return lt(et(x,L.length-k),L,k,I)}a.prototype.write=function(x,k,I,ie){if(k===void 0)ie="utf8",I=this.length,k=0;else if(I===void 0&&typeof k=="string")ie=k,I=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(I)?(I=I>>>0,ie===void 0&&(ie="utf8")):(ie=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const fe=this.length-k;if((I===void 0||I>fe)&&(I=fe),x.length>0&&(I<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");let oe=!1;for(;;)switch(ie){case"hex":return Y(this,x,k,I);case"utf8":case"utf-8":return Q(this,x,k,I);case"ascii":case"latin1":case"binary":return B(this,x,k,I);case"base64":return se(this,x,k,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ae(this,x,k,I);default:if(oe)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),oe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function xe(L,x,k){return x===0&&k===L.length?e.fromByteArray(L):e.fromByteArray(L.slice(x,k))}function re(L,x,k){k=Math.min(L.length,k);const I=[];let ie=x;for(;ie<k;){const fe=L[ie];let oe=null,it=fe>239?4:fe>223?3:fe>191?2:1;if(ie+it<=k){let ln,Lt,kt,Ft;switch(it){case 1:fe<128&&(oe=fe);break;case 2:ln=L[ie+1],(ln&192)===128&&(Ft=(fe&31)<<6|ln&63,Ft>127&&(oe=Ft));break;case 3:ln=L[ie+1],Lt=L[ie+2],(ln&192)===128&&(Lt&192)===128&&(Ft=(fe&15)<<12|(ln&63)<<6|Lt&63,Ft>2047&&(Ft<55296||Ft>57343)&&(oe=Ft));break;case 4:ln=L[ie+1],Lt=L[ie+2],kt=L[ie+3],(ln&192)===128&&(Lt&192)===128&&(kt&192)===128&&(Ft=(fe&15)<<18|(ln&63)<<12|(Lt&63)<<6|kt&63,Ft>65535&&Ft<1114112&&(oe=Ft))}}oe===null?(oe=65533,it=1):oe>65535&&(oe-=65536,I.push(oe>>>10&1023|55296),oe=56320|oe&1023),I.push(oe),ie+=it}return ye(I)}const ne=4096;function ye(L){const x=L.length;if(x<=ne)return String.fromCharCode.apply(String,L);let k="",I=0;for(;I<x;)k+=String.fromCharCode.apply(String,L.slice(I,I+=ne));return k}function we(L,x,k){let I="";k=Math.min(L.length,k);for(let ie=x;ie<k;++ie)I+=String.fromCharCode(L[ie]&127);return I}function qe(L,x,k){let I="";k=Math.min(L.length,k);for(let ie=x;ie<k;++ie)I+=String.fromCharCode(L[ie]);return I}function ve(L,x,k){const I=L.length;(!x||x<0)&&(x=0),(!k||k<0||k>I)&&(k=I);let ie="";for(let fe=x;fe<k;++fe)ie+=Ei[L[fe]];return ie}function Oe(L,x,k){const I=L.slice(x,k);let ie="";for(let fe=0;fe<I.length-1;fe+=2)ie+=String.fromCharCode(I[fe]+I[fe+1]*256);return ie}a.prototype.slice=function(x,k){const I=this.length;x=~~x,k=k===void 0?I:~~k,x<0?(x+=I,x<0&&(x=0)):x>I&&(x=I),k<0?(k+=I,k<0&&(k=0)):k>I&&(k=I),k<x&&(k=x);const ie=this.subarray(x,k);return Object.setPrototypeOf(ie,a.prototype),ie};function Ge(L,x,k){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+x>k)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(x,k,I){x=x>>>0,k=k>>>0,I||Ge(x,k,this.length);let ie=this[x],fe=1,oe=0;for(;++oe<k&&(fe*=256);)ie+=this[x+oe]*fe;return ie},a.prototype.readUintBE=a.prototype.readUIntBE=function(x,k,I){x=x>>>0,k=k>>>0,I||Ge(x,k,this.length);let ie=this[x+--k],fe=1;for(;k>0&&(fe*=256);)ie+=this[x+--k]*fe;return ie},a.prototype.readUint8=a.prototype.readUInt8=function(x,k){return x=x>>>0,k||Ge(x,1,this.length),this[x]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(x,k){return x=x>>>0,k||Ge(x,2,this.length),this[x]|this[x+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(x,k){return x=x>>>0,k||Ge(x,2,this.length),this[x]<<8|this[x+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(x,k){return x=x>>>0,k||Ge(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(x,k){return x=x>>>0,k||Ge(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},a.prototype.readBigUInt64LE=Fe(function(x){x=x>>>0,O(x,"offset");const k=this[x],I=this[x+7];(k===void 0||I===void 0)&&G(x,this.length-8);const ie=k+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24,fe=this[++x]+this[++x]*2**8+this[++x]*2**16+I*2**24;return BigInt(ie)+(BigInt(fe)<<BigInt(32))}),a.prototype.readBigUInt64BE=Fe(function(x){x=x>>>0,O(x,"offset");const k=this[x],I=this[x+7];(k===void 0||I===void 0)&&G(x,this.length-8);const ie=k*2**24+this[++x]*2**16+this[++x]*2**8+this[++x],fe=this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+I;return(BigInt(ie)<<BigInt(32))+BigInt(fe)}),a.prototype.readIntLE=function(x,k,I){x=x>>>0,k=k>>>0,I||Ge(x,k,this.length);let ie=this[x],fe=1,oe=0;for(;++oe<k&&(fe*=256);)ie+=this[x+oe]*fe;return fe*=128,ie>=fe&&(ie-=Math.pow(2,8*k)),ie},a.prototype.readIntBE=function(x,k,I){x=x>>>0,k=k>>>0,I||Ge(x,k,this.length);let ie=k,fe=1,oe=this[x+--ie];for(;ie>0&&(fe*=256);)oe+=this[x+--ie]*fe;return fe*=128,oe>=fe&&(oe-=Math.pow(2,8*k)),oe},a.prototype.readInt8=function(x,k){return x=x>>>0,k||Ge(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},a.prototype.readInt16LE=function(x,k){x=x>>>0,k||Ge(x,2,this.length);const I=this[x]|this[x+1]<<8;return I&32768?I|4294901760:I},a.prototype.readInt16BE=function(x,k){x=x>>>0,k||Ge(x,2,this.length);const I=this[x+1]|this[x]<<8;return I&32768?I|4294901760:I},a.prototype.readInt32LE=function(x,k){return x=x>>>0,k||Ge(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},a.prototype.readInt32BE=function(x,k){return x=x>>>0,k||Ge(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},a.prototype.readBigInt64LE=Fe(function(x){x=x>>>0,O(x,"offset");const k=this[x],I=this[x+7];(k===void 0||I===void 0)&&G(x,this.length-8);const ie=this[x+4]+this[x+5]*2**8+this[x+6]*2**16+(I<<24);return(BigInt(ie)<<BigInt(32))+BigInt(k+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24)}),a.prototype.readBigInt64BE=Fe(function(x){x=x>>>0,O(x,"offset");const k=this[x],I=this[x+7];(k===void 0||I===void 0)&&G(x,this.length-8);const ie=(k<<24)+this[++x]*2**16+this[++x]*2**8+this[++x];return(BigInt(ie)<<BigInt(32))+BigInt(this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+I)}),a.prototype.readFloatLE=function(x,k){return x=x>>>0,k||Ge(x,4,this.length),n.read(this,x,!0,23,4)},a.prototype.readFloatBE=function(x,k){return x=x>>>0,k||Ge(x,4,this.length),n.read(this,x,!1,23,4)},a.prototype.readDoubleLE=function(x,k){return x=x>>>0,k||Ge(x,8,this.length),n.read(this,x,!0,52,8)},a.prototype.readDoubleBE=function(x,k){return x=x>>>0,k||Ge(x,8,this.length),n.read(this,x,!1,52,8)};function Xe(L,x,k,I,ie,fe){if(!a.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>ie||x<fe)throw new RangeError('"value" argument is out of bounds');if(k+I>L.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(x,k,I,ie){if(x=+x,k=k>>>0,I=I>>>0,!ie){const it=Math.pow(2,8*I)-1;Xe(this,x,k,I,it,0)}let fe=1,oe=0;for(this[k]=x&255;++oe<I&&(fe*=256);)this[k+oe]=x/fe&255;return k+I},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(x,k,I,ie){if(x=+x,k=k>>>0,I=I>>>0,!ie){const it=Math.pow(2,8*I)-1;Xe(this,x,k,I,it,0)}let fe=I-1,oe=1;for(this[k+fe]=x&255;--fe>=0&&(oe*=256);)this[k+fe]=x/oe&255;return k+I},a.prototype.writeUint8=a.prototype.writeUInt8=function(x,k,I){return x=+x,k=k>>>0,I||Xe(this,x,k,1,255,0),this[k]=x&255,k+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(x,k,I){return x=+x,k=k>>>0,I||Xe(this,x,k,2,65535,0),this[k]=x&255,this[k+1]=x>>>8,k+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(x,k,I){return x=+x,k=k>>>0,I||Xe(this,x,k,2,65535,0),this[k]=x>>>8,this[k+1]=x&255,k+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(x,k,I){return x=+x,k=k>>>0,I||Xe(this,x,k,4,4294967295,0),this[k+3]=x>>>24,this[k+2]=x>>>16,this[k+1]=x>>>8,this[k]=x&255,k+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(x,k,I){return x=+x,k=k>>>0,I||Xe(this,x,k,4,4294967295,0),this[k]=x>>>24,this[k+1]=x>>>16,this[k+2]=x>>>8,this[k+3]=x&255,k+4};function nn(L,x,k,I,ie){N(x,I,ie,L,k,7);let fe=Number(x&BigInt(4294967295));L[k++]=fe,fe=fe>>8,L[k++]=fe,fe=fe>>8,L[k++]=fe,fe=fe>>8,L[k++]=fe;let oe=Number(x>>BigInt(32)&BigInt(4294967295));return L[k++]=oe,oe=oe>>8,L[k++]=oe,oe=oe>>8,L[k++]=oe,oe=oe>>8,L[k++]=oe,k}function bt(L,x,k,I,ie){N(x,I,ie,L,k,7);let fe=Number(x&BigInt(4294967295));L[k+7]=fe,fe=fe>>8,L[k+6]=fe,fe=fe>>8,L[k+5]=fe,fe=fe>>8,L[k+4]=fe;let oe=Number(x>>BigInt(32)&BigInt(4294967295));return L[k+3]=oe,oe=oe>>8,L[k+2]=oe,oe=oe>>8,L[k+1]=oe,oe=oe>>8,L[k]=oe,k+8}a.prototype.writeBigUInt64LE=Fe(function(x,k=0){return nn(this,x,k,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Fe(function(x,k=0){return bt(this,x,k,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(x,k,I,ie){if(x=+x,k=k>>>0,!ie){const ln=Math.pow(2,8*I-1);Xe(this,x,k,I,ln-1,-ln)}let fe=0,oe=1,it=0;for(this[k]=x&255;++fe<I&&(oe*=256);)x<0&&it===0&&this[k+fe-1]!==0&&(it=1),this[k+fe]=(x/oe>>0)-it&255;return k+I},a.prototype.writeIntBE=function(x,k,I,ie){if(x=+x,k=k>>>0,!ie){const ln=Math.pow(2,8*I-1);Xe(this,x,k,I,ln-1,-ln)}let fe=I-1,oe=1,it=0;for(this[k+fe]=x&255;--fe>=0&&(oe*=256);)x<0&&it===0&&this[k+fe+1]!==0&&(it=1),this[k+fe]=(x/oe>>0)-it&255;return k+I},a.prototype.writeInt8=function(x,k,I){return x=+x,k=k>>>0,I||Xe(this,x,k,1,127,-128),x<0&&(x=255+x+1),this[k]=x&255,k+1},a.prototype.writeInt16LE=function(x,k,I){return x=+x,k=k>>>0,I||Xe(this,x,k,2,32767,-32768),this[k]=x&255,this[k+1]=x>>>8,k+2},a.prototype.writeInt16BE=function(x,k,I){return x=+x,k=k>>>0,I||Xe(this,x,k,2,32767,-32768),this[k]=x>>>8,this[k+1]=x&255,k+2},a.prototype.writeInt32LE=function(x,k,I){return x=+x,k=k>>>0,I||Xe(this,x,k,4,2147483647,-2147483648),this[k]=x&255,this[k+1]=x>>>8,this[k+2]=x>>>16,this[k+3]=x>>>24,k+4},a.prototype.writeInt32BE=function(x,k,I){return x=+x,k=k>>>0,I||Xe(this,x,k,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[k]=x>>>24,this[k+1]=x>>>16,this[k+2]=x>>>8,this[k+3]=x&255,k+4},a.prototype.writeBigInt64LE=Fe(function(x,k=0){return nn(this,x,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Fe(function(x,k=0){return bt(this,x,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function an(L,x,k,I,ie,fe){if(k+I>L.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function hr(L,x,k,I,ie){return x=+x,k=k>>>0,ie||an(L,x,k,4),n.write(L,x,k,I,23,4),k+4}a.prototype.writeFloatLE=function(x,k,I){return hr(this,x,k,!0,I)},a.prototype.writeFloatBE=function(x,k,I){return hr(this,x,k,!1,I)};function xn(L,x,k,I,ie){return x=+x,k=k>>>0,ie||an(L,x,k,8),n.write(L,x,k,I,52,8),k+8}a.prototype.writeDoubleLE=function(x,k,I){return xn(this,x,k,!0,I)},a.prototype.writeDoubleBE=function(x,k,I){return xn(this,x,k,!1,I)},a.prototype.copy=function(x,k,I,ie){if(!a.isBuffer(x))throw new TypeError("argument should be a Buffer");if(I||(I=0),!ie&&ie!==0&&(ie=this.length),k>=x.length&&(k=x.length),k||(k=0),ie>0&&ie<I&&(ie=I),ie===I||x.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),x.length-k<ie-I&&(ie=x.length-k+I);const fe=ie-I;return this===x&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(k,I,ie):Uint8Array.prototype.set.call(x,this.subarray(I,ie),k),fe},a.prototype.fill=function(x,k,I,ie){if(typeof x=="string"){if(typeof k=="string"?(ie=k,k=0,I=this.length):typeof I=="string"&&(ie=I,I=this.length),ie!==void 0&&typeof ie!="string")throw new TypeError("encoding must be a string");if(typeof ie=="string"&&!a.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(x.length===1){const oe=x.charCodeAt(0);(ie==="utf8"&&oe<128||ie==="latin1")&&(x=oe)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(k<0||this.length<k||this.length<I)throw new RangeError("Out of range index");if(I<=k)return this;k=k>>>0,I=I===void 0?this.length:I>>>0,x||(x=0);let fe;if(typeof x=="number")for(fe=k;fe<I;++fe)this[fe]=x;else{const oe=a.isBuffer(x)?x:a.from(x,ie),it=oe.length;if(it===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(fe=0;fe<I-k;++fe)this[fe+k]=oe[fe%it]}return this};const cn={};function yn(L,x,k){cn[L]=class extends k{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${L}]`,this.stack,delete this.name}get code(){return L}set code(ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ie,writable:!0})}toString(){return`${this.name} [${L}]: ${this.message}`}}}yn("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?`${L} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),yn("ERR_INVALID_ARG_TYPE",function(L,x){return`The "${L}" argument must be of type number. Received type ${typeof x}`},TypeError),yn("ERR_OUT_OF_RANGE",function(L,x,k){let I=`The value of "${L}" is out of range.`,ie=k;return Number.isInteger(k)&&Math.abs(k)>2**32?ie=Pt(String(k)):typeof k=="bigint"&&(ie=String(k),(k>BigInt(2)**BigInt(32)||k<-(BigInt(2)**BigInt(32)))&&(ie=Pt(ie)),ie+="n"),I+=` It must be ${x}. Received ${ie}`,I},RangeError);function Pt(L){let x="",k=L.length;const I=L[0]==="-"?1:0;for(;k>=I+4;k-=3)x=`_${L.slice(k-3,k)}${x}`;return`${L.slice(0,k)}${x}`}function X(L,x,k){O(x,"offset"),(L[x]===void 0||L[x+k]===void 0)&&G(x,L.length-(k+1))}function N(L,x,k,I,ie,fe){if(L>k||L<x){const oe=typeof x=="bigint"?"n":"";let it;throw fe>3?x===0||x===BigInt(0)?it=`>= 0${oe} and < 2${oe} ** ${(fe+1)*8}${oe}`:it=`>= -(2${oe} ** ${(fe+1)*8-1}${oe}) and < 2 ** ${(fe+1)*8-1}${oe}`:it=`>= ${x}${oe} and <= ${k}${oe}`,new cn.ERR_OUT_OF_RANGE("value",it,L)}X(I,ie,fe)}function O(L,x){if(typeof L!="number")throw new cn.ERR_INVALID_ARG_TYPE(x,"number",L)}function G(L,x,k){throw Math.floor(L)!==L?(O(L,k),new cn.ERR_OUT_OF_RANGE(k||"offset","an integer",L)):x<0?new cn.ERR_BUFFER_OUT_OF_BOUNDS:new cn.ERR_OUT_OF_RANGE(k||"offset",`>= ${k?1:0} and <= ${x}`,L)}const ee=/[^+/0-9A-Za-z-_]/g;function de(L){if(L=L.split("=")[0],L=L.trim().replace(ee,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function me(L,x){x=x||1/0;let k;const I=L.length;let ie=null;const fe=[];for(let oe=0;oe<I;++oe){if(k=L.charCodeAt(oe),k>55295&&k<57344){if(!ie){if(k>56319){(x-=3)>-1&&fe.push(239,191,189);continue}else if(oe+1===I){(x-=3)>-1&&fe.push(239,191,189);continue}ie=k;continue}if(k<56320){(x-=3)>-1&&fe.push(239,191,189),ie=k;continue}k=(ie-55296<<10|k-56320)+65536}else ie&&(x-=3)>-1&&fe.push(239,191,189);if(ie=null,k<128){if((x-=1)<0)break;fe.push(k)}else if(k<2048){if((x-=2)<0)break;fe.push(k>>6|192,k&63|128)}else if(k<65536){if((x-=3)<0)break;fe.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((x-=4)<0)break;fe.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return fe}function Ne(L){const x=[];for(let k=0;k<L.length;++k)x.push(L.charCodeAt(k)&255);return x}function et(L,x){let k,I,ie;const fe=[];for(let oe=0;oe<L.length&&!((x-=2)<0);++oe)k=L.charCodeAt(oe),I=k>>8,ie=k%256,fe.push(ie),fe.push(I);return fe}function St(L){return e.toByteArray(de(L))}function lt(L,x,k,I){let ie;for(ie=0;ie<I&&!(ie+k>=x.length||ie>=L.length);++ie)x[ie+k]=L[ie];return ie}function dt(L,x){return L instanceof x||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===x.name}function pr(L){return L!==L}const Ei=function(){const L="0123456789abcdef",x=new Array(256);for(let k=0;k<16;++k){const I=k*16;for(let ie=0;ie<16;++ie)x[I+ie]=L[k]+L[ie]}return x}();function Fe(L){return typeof BigInt=="undefined"?un:L}function un(){throw new Error("BigInt not supported")}})(Ds);var xR=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,IR=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,RR=/\s|\uFEFF|\xA0/,kR=/\r?\n[\x20\x09]+/g,FR=/[;,"]/,DR=/[;,"]|\s/,CR=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,Ko={IDLE:1<<0,URI:1<<1,ATTR:1<<2};function Uy(t){return t.replace(IR,"")}function Xl(t){return RR.test(t)}function PR(t,e){for(;Xl(t[e]);)e++;return e}function jy(t){return DR.test(t)||!CR.test(t)}class pn{constructor(e){this.refs=[],e&&this.parse(e)}rel(e){for(var n=[],r=e.toLowerCase(),i=0;i<this.refs.length;i++)this.refs[i].rel.toLowerCase()===r&&n.push(this.refs[i]);return n}get(e,n){e=e.toLowerCase();for(var r=[],i=0;i<this.refs.length;i++)this.refs[i][e]===n&&r.push(this.refs[i]);return r}set(e){return this.refs.push(e),this}has(e,n){e=e.toLowerCase();for(var r=0;r<this.refs.length;r++)if(this.refs[r][e]===n)return!0;return!1}parse(e,o){o=o||0,e=o?e.slice(o):e,e=Uy(e).replace(kR,"");for(var r=Ko.IDLE,i=e.length,o=0,s=null;o<i;)if(r===Ko.IDLE){if(Xl(e[o])){o++;continue}else if(e[o]==="<"){s!=null&&(s.rel!=null?this.refs.push(...pn.expandRelations(s)):this.refs.push(s));var a=e.indexOf(">",o);if(a===-1)throw new Error("Expected end of URI delimiter at offset "+o);s={uri:e.slice(o+1,a)},o=a,r=Ko.URI}else throw new Error('Unexpected character "'+e[o]+'" at offset '+o);o++}else if(r===Ko.URI)if(Xl(e[o])){o++;continue}else if(e[o]===";")r=Ko.ATTR,o++;else if(e[o]===",")r=Ko.IDLE,o++;else throw new Error('Unexpected character "'+e[o]+'" at offset '+o);else if(r===Ko.ATTR){if(e[o]===";"||Xl(e[o])){o++;continue}var a=e.indexOf("=",o);if(a===-1)throw new Error("Expected attribute delimiter at offset "+o);var c=Uy(e.slice(o,a)).toLowerCase(),u="";if(o=a+1,o=PR(e,o),e[o]==='"')for(o++;o<i;){if(e[o]==='"'){o++;break}e[o]==="\\"&&o++,u+=e[o],o++}else{for(var a=o+1;!FR.test(e[a])&&a<i;)a++;u=e.slice(o,a),o=a}switch(s[c]&&pn.isSingleOccurenceAttr(c)||(c[c.length-1]==="*"?s[c]=pn.parseExtendedValue(u):(u=c==="type"?u.toLowerCase():u,s[c]!=null?Array.isArray(s[c])?s[c].push(u):s[c]=[s[c],u]:s[c]=u)),e[o]){case",":r=Ko.IDLE;break;case";":r=Ko.ATTR;break}o++}else throw new Error('Unknown parser state "'+r+'"');return s!=null&&(s.rel!=null?this.refs.push(...pn.expandRelations(s)):this.refs.push(s)),s=null,this}toString(){for(var e=[],n="",r=null,i=0;i<this.refs.length;i++)r=this.refs[i],n=Object.keys(this.refs[i]).reduce(function(o,s){return s==="uri"?o:o+"; "+pn.formatAttribute(s,r[s])},"<"+r.uri+">"),e.push(n);return e.join(", ")}}pn.isCompatibleEncoding=function(t){return xR.test(t)};pn.parse=function(t,e){return new pn().parse(t,e)};pn.isSingleOccurenceAttr=function(t){return t==="rel"||t==="type"||t==="media"||t==="title"||t==="title*"};pn.isTokenAttr=function(t){return t==="rel"||t==="type"||t==="anchor"};pn.escapeQuotes=function(t){return t.replace(/"/g,'\\"')};pn.expandRelations=function(t){var e=t.rel.split(" ");return e.map(function(n){var r=Object.assign({},t);return r.rel=n,r})};pn.parseExtendedValue=function(t){var e=/([^']+)?(?:'([^']*)')?(.+)/.exec(t);return{language:e[2].toLowerCase(),encoding:pn.isCompatibleEncoding(e[1])?null:e[1].toLowerCase(),value:pn.isCompatibleEncoding(e[1])?decodeURIComponent(e[3]):e[3]}};pn.formatExtendedAttribute=function(t,e){var n=(e.encoding||"utf-8").toUpperCase(),r=e.language||"en",i="";return Ds.Buffer.isBuffer(e.value)&&pn.isCompatibleEncoding(n)?i=e.value.toString(n):Ds.Buffer.isBuffer(e.value)?i=e.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):i=encodeURIComponent(e.value),t+"="+n+"'"+r+"'"+i};pn.formatAttribute=function(t,e){return Array.isArray(e)?e.map(n=>pn.formatAttribute(t,n)).join("; "):t[t.length-1]==="*"||typeof e!="string"?pn.formatExtendedAttribute(t,e):(pn.isTokenAttr(t)?e=jy(e)?'"'+pn.escapeQuotes(e)+'"':pn.escapeQuotes(e):jy(e)&&(e=encodeURIComponent(e),e=e.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),e='"'+e+'"'),t+"="+e)};var NR=pn;class rl{constructor(e){this.value=e||"b"+ ++rl.nextId}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}rl.prototype.termType="BlankNode";rl.nextId=0;var OR=rl;class D0{equals(e){return!!e&&e.termType===this.termType}}D0.prototype.termType="DefaultGraph";D0.prototype.value="";var Jv=D0;function MR(t){if(!t)return null;if(t.termType==="BlankNode")return this.blankNode(t.value);if(t.termType==="DefaultGraph")return this.defaultGraph();if(t.termType==="Literal")return this.literal(t.value,t.language||this.namedNode(t.datatype.value));if(t.termType==="NamedNode")return this.namedNode(t.value);if(t.termType==="Quad"){const e=this.fromTerm(t.subject),n=this.fromTerm(t.predicate),r=this.fromTerm(t.object),i=this.fromTerm(t.graph);return this.quad(e,n,r,i)}if(t.termType==="Variable")return this.variable(t.value);throw new Error(`unknown termType ${t.termType}`)}var LR=MR;class Zv{constructor(e){this.value=e}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}Zv.prototype.termType="NamedNode";var Qv=Zv;const Xv=Qv;class xa{constructor(e,n,r){this.value=e,this.datatype=xa.stringDatatype,this.language="",n?(this.language=n,this.datatype=xa.langStringDatatype):r&&(this.datatype=r)}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}xa.prototype.termType="Literal";xa.langStringDatatype=new Xv("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");xa.stringDatatype=new Xv("http://www.w3.org/2001/XMLSchema#string");var UR=xa;const jR=Jv;class C0{constructor(e,n,r,i){this.subject=e,this.predicate=n,this.object=r,i?this.graph=i:this.graph=new jR}equals(e){return!!e&&(e.termType==="Quad"||!e.termType)&&e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}}C0.prototype.termType="Quad";C0.prototype.value="";var $R=C0;class e1{constructor(e){this.value=e}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}e1.prototype.termType="Variable";var BR=e1;const HR=OR,KR=Jv,t1=LR,Dh=UR,WR=Qv,qR=$R,VR=BR;function GR(t){return new WR(t)}function zR(t){return new HR(t)}function YR(t,e){return typeof e=="string"?e.indexOf(":")===-1?new Dh(t,e):new Dh(t,null,Pa.namedNode(e)):new Dh(t,null,e)}function JR(t){return new VR(t)}function ZR(){return Pa.defaultGraphInstance}function QR(t,e,n){return Pa.quad(t,e,n)}function XR(t,e,n,r){return new qR(t,e,n,r||Pa.defaultGraphInstance)}function e6(t){return t1.call(Pa,t)}function t6(t){return t1.call(Pa,t)}const Pa={namedNode:GR,blankNode:zR,literal:YR,variable:JR,defaultGraph:ZR,triple:QR,quad:XR,fromTerm:e6,fromQuad:t6,defaultGraphInstance:new KR};var n6=Pa;const r6=n6;var bf=r6;function Zs(t){return typeof t=="string"||t instanceof String}const i6="http://www.w3.org/2001/XMLSchema#string";function Vn(t){if(typeof t=="string")return t;if(!t)return"";if(typeof t.id!="undefined"&&t.termType!=="Quad")return t.id;let e,n,r,i;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return t.language?`"${t.value}"@${t.language}`:`"${t.value}"${t.datatype&&t.datatype.value!==i6?`^^${t.datatype.value}`:""}`;case"Quad":return e=Ch(Vn(t.subject)),n=Ch(Vn(t.predicate)),r=Ch(Vn(t.object)),i=t.graph.termType==="DefaultGraph"?"":` ${Vn(t.graph)}`,`<<${e} ${n} ${r}${i}>>`;default:throw new Error(`Unexpected termType: ${t.termType}`)}}const o6=/^"(.*".*)(?="[^"]*$)/;function Ch(t){return t.replace(o6,(e,n)=>`"${n.replace(/"/g,'""')}`)}class s6{constructor(e){if(this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._quads=new Map,e)for(const n of e)this.add(n)}get size(){let e=this._size;if(e!==null)return e;e=0;const n=this._graphs;let r,i;for(const o in n)for(const s in r=n[o].subjects)for(const a in i=r[s])e+=Object.keys(i[a]).length;return this._size=e,this._size}add(e){let n=Vn(e.subject),r=Vn(e.predicate),i=Vn(e.object);const o=Vn(e.graph);let s=this._graphs[o];s||(s=this._graphs[o]={subjects:{},predicates:{},objects:{}},Object.freeze(s));const a=this._ids,c=this._entities;return n=a[n]||(a[c[++this._id]=n]=this._id),r=a[r]||(a[c[++this._id]=r]=this._id),i=a[i]||(a[c[++this._id]=i]=this._id),this._addToIndex(s.subjects,n,r,i),this._addToIndex(s.predicates,r,i,n),this._addToIndex(s.objects,i,n,r),this._setQuad(n,r,i,o,e),this._size=null,this}delete(e){let n=Vn(e.subject),r=Vn(e.predicate),i=Vn(e.object);const o=Vn(e.graph),s=this._ids,a=this._graphs;let c,u,l;if(!(n=s[n])||!(r=s[r])||!(i=s[i])||!(c=a[o])||!(u=c.subjects[n])||!(l=u[r])||!(i in l))return this;this._removeFromIndex(c.subjects,n,r,i),this._removeFromIndex(c.predicates,r,i,n),this._removeFromIndex(c.objects,i,n,r),this._size!==null&&this._size--,this._deleteQuad(n,r,i,o);for(n in c.subjects)return this;return delete a[o],this}has(e){const n=Vn(e.subject),r=Vn(e.predicate),i=Vn(e.object),o=Vn(e.graph),s=this._graphs[o];if(!s)return!1;const a=this._ids;let c,u,l;return Zs(n)&&!(c=a[n])||Zs(r)&&!(u=a[r])||Zs(i)&&!(l=a[i])?!1:this._countInIndex(s.objects,l,c,u)===1}match(e,n,r,i){return this._createDataset(this._match(e,n,r,i))}[Symbol.iterator](){return this._match()[Symbol.iterator]()}_addToIndex(e,n,r,i){const o=e[n]||(e[n]={}),s=o[r]||(o[r]={}),a=i in s;return a||(s[i]=null),!a}_removeFromIndex(e,n,r,i){const o=e[n],s=o[r];delete s[i];for(const a in s)return;delete o[r];for(const a in o)return;delete e[n]}_findInIndex(e,n,r,i,o,s,a,c,u,l){let d,p,g;n&&((d=e,e={})[n]=d[n]);for(const y in e)if(p=e[y],p){r&&((d=p,p={})[r]=d[r]);for(const w in p)if(g=p[w],g){const b=i?i in g?[i]:[]:Object.keys(g);for(let E=0;E<b.length;E++){const S={[o]:y,[s]:w,[a]:b[E]},R=this._getQuad(S.subject,S.predicate,S.object,c);if(l)l.push(R);else if(u(R))return!0}}}return l}_countInIndex(e,n,r,i){let o=0,s,a,c;n&&((s=e,e={})[n]=s[n]);for(const u in e)if(a=e[u],a){r&&((s=a,a={})[r]=s[r]);for(const l in a)c=a[l],c&&(i?i in c&&o++:o+=Object.keys(c).length)}return o}_getGraphs(e){return Zs(e)?{[e]:this._graphs[e]}:this._graphs}_match(e,n,r,i){e=e&&Vn(e),n=n&&Vn(n),r=r&&Vn(r),i=i&&Vn(i);const o=[],s=this._getGraphs(i),a=this._ids;let c,u,l,d;if(Zs(e)&&!(u=a[e])||Zs(n)&&!(l=a[n])||Zs(r)&&!(d=a[r]))return o;for(const p in s)c=s[p],c&&(u?d?this._findInIndex(c.objects,d,u,l,"object","subject","predicate",p,null,o):this._findInIndex(c.subjects,u,l,null,"subject","predicate","object",p,null,o):l?this._findInIndex(c.predicates,l,d,null,"predicate","object","subject",p,null,o):d?this._findInIndex(c.objects,d,null,null,"object","subject","predicate",p,null,o):this._findInIndex(c.subjects,null,null,null,"subject","predicate","object",p,null,o));return o}_getQuad(e,n,r,i){return this._quads.get(this._toId(e,n,r,i))}_setQuad(e,n,r,i,o){this._quads.set(this._toId(e,n,r,i),o)}_deleteQuad(e,n,r,i){this._quads.delete(this._toId(e,n,r,i))}_createDataset(e){return new this.constructor(e)}_toId(e,n,r,i){return`${e}:${n}:${r}:${i}`}}var a6=s6;const c6=bf,u6=a6;function l6(t){return new u6(t)}var n1=Object.assign({dataset:l6},c6),P0=class r1{constructor(e,n=new Map,r=0){this.prefix=e,this._existing=n,this.counter=r}clone(){const{prefix:e,_existing:n,counter:r}=this;return new r1(e,new Map(n),r)}getId(e){const n=e&&this._existing.get(e);if(n)return n;const r=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,r),r}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}},i1={exports:{}},Wn=i1.exports={},_o,wo;function Gp(){throw new Error("setTimeout has not been defined")}function zp(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?_o=setTimeout:_o=Gp}catch{_o=Gp}try{typeof clearTimeout=="function"?wo=clearTimeout:wo=zp}catch{wo=zp}})();function o1(t){if(_o===setTimeout)return setTimeout(t,0);if((_o===Gp||!_o)&&setTimeout)return _o=setTimeout,setTimeout(t,0);try{return _o(t,0)}catch{try{return _o.call(null,t,0)}catch{return _o.call(this,t,0)}}}function d6(t){if(wo===clearTimeout)return clearTimeout(t);if((wo===zp||!wo)&&clearTimeout)return wo=clearTimeout,clearTimeout(t);try{return wo(t)}catch{try{return wo.call(null,t)}catch{return wo.call(this,t)}}}var Xo=[],sc=!1,ca,ed=-1;function f6(){!sc||!ca||(sc=!1,ca.length?Xo=ca.concat(Xo):ed=-1,Xo.length&&s1())}function s1(){if(!sc){var t=o1(f6);sc=!0;for(var e=Xo.length;e;){for(ca=Xo,Xo=[];++ed<e;)ca&&ca[ed].run();ed=-1,e=Xo.length}ca=null,sc=!1,d6(t)}}Wn.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Xo.push(new a1(t,e)),Xo.length===1&&!sc&&o1(s1)};function a1(t,e){this.fun=t,this.array=e}a1.prototype.run=function(){this.fun.apply(null,this.array)};Wn.title="browser";Wn.browser=!0;Wn.env={};Wn.argv=[];Wn.version="";Wn.versions={};function cs(){}Wn.on=cs;Wn.addListener=cs;Wn.once=cs;Wn.off=cs;Wn.removeListener=cs;Wn.removeAllListeners=cs;Wn.emit=cs;Wn.prependListener=cs;Wn.prependOnceListener=cs;Wn.listeners=function(t){return[]};Wn.binding=function(t){throw new Error("process.binding is not supported")};Wn.cwd=function(){return"/"};Wn.chdir=function(t){throw new Error("process.chdir is not supported")};Wn.umask=function(){return 0};var Wt=i1.exports;(function(t,e){if(t.setImmediate)return;var n=1,r={},i=!1,o=t.document,s;function a(S){typeof S!="function"&&(S=new Function(""+S));for(var R=new Array(arguments.length-1),F=0;F<R.length;F++)R[F]=arguments[F+1];var M={callback:S,args:R};return r[n]=M,s(n),n++}function c(S){delete r[S]}function u(S){var R=S.callback,F=S.args;switch(F.length){case 0:R();break;case 1:R(F[0]);break;case 2:R(F[0],F[1]);break;case 3:R(F[0],F[1],F[2]);break;default:R.apply(e,F);break}}function l(S){if(i)setTimeout(l,0,S);else{var R=r[S];if(R){i=!0;try{u(R)}finally{c(S),i=!1}}}}function d(){s=function(S){Wt.nextTick(function(){l(S)})}}function p(){if(t.postMessage&&!t.importScripts){var S=!0,R=t.onmessage;return t.onmessage=function(){S=!1},t.postMessage("","*"),t.onmessage=R,S}}function g(){var S="setImmediate$"+Math.random()+"$",R=function(F){F.source===t&&typeof F.data=="string"&&F.data.indexOf(S)===0&&l(+F.data.slice(S.length))};t.addEventListener?t.addEventListener("message",R,!1):t.attachEvent("onmessage",R),s=function(F){t.postMessage(S+F,"*")}}function y(){var S=new MessageChannel;S.port1.onmessage=function(R){var F=R.data;l(F)},s=function(R){S.port2.postMessage(R)}}function w(){var S=o.documentElement;s=function(R){var F=o.createElement("script");F.onreadystatechange=function(){l(R),F.onreadystatechange=null,S.removeChild(F),F=null},S.appendChild(F)}}function b(){s=function(S){setTimeout(l,0,S)}}var E=Object.getPrototypeOf&&Object.getPrototypeOf(t);E=E&&E.setTimeout?E:t,{}.toString.call(t.process)==="[object process]"?d():p()?g():t.MessageChannel?y():o&&"onreadystatechange"in o.createElement("script")?w():b(),E.setImmediate=a,E.clearImmediate=c})(typeof self=="undefined"?Gt:self);const Ph=self.crypto||self.msCrypto;var c1=class{constructor(e){if(!(Ph&&Ph.subtle))throw new Error("crypto.subtle not found.");if(e==="sha256")this.algorithm={name:"SHA-256"};else if(e==="sha1")this.algorithm={name:"SHA-1"};else throw new Error(`Unsupport algorithm "${e}".`);this._content=""}update(e){this._content+=e}async digest(){const e=new TextEncoder().encode(this._content),n=new Uint8Array(await Ph.subtle.digest(this.algorithm,e));let r="";for(let i=0;i<n.length;++i)r+=n[i].toString(16).padStart(2,"0");return r}},u1=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let n=0;n<e.length;++n)this.dir.set(e[n],!0)}hasNext(){return!this.done}next(){const{current:e,dir:n}=this,r=e.slice();let i=null,o=0;const s=e.length;for(let a=0;a<s;++a){const c=e[a],u=n.get(c);(i===null||c>i)&&(u&&a>0&&c>e[a-1]||!u&&a<s-1&&c>e[a+1])&&(i=c,o=a)}if(i===null)this.done=!0;else{const a=n.get(i)?o-1:o+1;e[o]=e[a],e[a]=i;for(const c of e)c>i&&n.set(c,!n.get(c))}return r}};const h6="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Nh=h6+"langString",Oh="http://www.w3.org/2001/XMLSchema#string",eo="NamedNode",Qs="BlankNode",td="Literal",$y="DefaultGraph",ac={};(()=>{const t="(?:<([^:]+:[^>]*)>)",n="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD"+"_",r=n+"0-9-\xB7\u0300-\u036F\u203F-\u2040",o="(_:(?:["+n+"0-9])(?:(?:["+r+".])*(?:["+r+"]))?)",s='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',a="(?:\\^\\^"+t+")",c="(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))",u="(?:"+s+"(?:"+a+"|"+c+")?)",l="[ \\t]+",d="[ \\t]*",p="(?:"+t+"|"+o+")"+l,g=t+l,y="(?:"+t+"|"+o+"|"+u+")"+d,w="(?:\\.|(?:(?:"+t+"|"+o+")"+d+"\\.))";ac.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,ac.empty=new RegExp("^"+d+"$"),ac.quad=new RegExp("^"+d+p+g+y+w+d+"$")})();var N0=class Yp{static parse(e){const n=[],r={},i=e.split(ac.eoln);let o=0;for(const s of i){if(o++,ac.empty.test(s))continue;const a=s.match(ac.quad);if(a===null)throw new Error("N-Quads parse error on line "+o+".");const c={subject:null,predicate:null,object:null,graph:null};if(a[1]!==void 0?c.subject={termType:eo,value:a[1]}:c.subject={termType:Qs,value:a[2]},c.predicate={termType:eo,value:a[3]},a[4]!==void 0?c.object={termType:eo,value:a[4]}:a[5]!==void 0?c.object={termType:Qs,value:a[5]}:(c.object={termType:td,value:void 0,datatype:{termType:eo}},a[7]!==void 0?c.object.datatype.value=a[7]:a[8]!==void 0?(c.object.datatype.value=Nh,c.object.language=a[8]):c.object.datatype.value=Oh,c.object.value=_6(a[6])),a[9]!==void 0?c.graph={termType:eo,value:a[9]}:a[10]!==void 0?c.graph={termType:Qs,value:a[10]}:c.graph={termType:$y,value:""},!(c.graph.value in r))r[c.graph.value]=[c],n.push(c);else{let u=!0;const l=r[c.graph.value];for(const d of l)if(p6(d,c)){u=!1;break}u&&(l.push(c),n.push(c))}}return n}static serialize(e){Array.isArray(e)||(e=Yp.legacyDatasetToQuads(e));const n=[];for(const r of e)n.push(Yp.serializeQuad(r));return n.sort().join("")}static serializeQuad(e){const n=e.subject,r=e.predicate,i=e.object,o=e.graph;let s="";return n.termType===eo?s+=`<${n.value}>`:s+=`${n.value}`,s+=` <${r.value}> `,i.termType===eo?s+=`<${i.value}>`:i.termType===Qs?s+=i.value:(s+=`"${m6(i.value)}"`,i.datatype.value===Nh?i.language&&(s+=`@${i.language}`):i.datatype.value!==Oh&&(s+=`^^<${i.datatype.value}>`)),o.termType===eo?s+=` <${o.value}>`:o.termType===Qs&&(s+=` ${o.value}`),s+=` .
`,s}static legacyDatasetToQuads(e){const n=[],r={"blank node":Qs,IRI:eo,literal:td};for(const i in e)e[i].forEach(s=>{const a={};for(const c in s){const u=s[c],l={termType:r[u.type],value:u.value};l.termType===td&&(l.datatype={termType:eo},"datatype"in u&&(l.datatype.value=u.datatype),"language"in u?("datatype"in u||(l.datatype.value=Nh),l.language=u.language):"datatype"in u||(l.datatype.value=Oh)),a[c]=l}i==="@default"?a.graph={termType:$y,value:""}:a.graph={termType:i.startsWith("_:")?Qs:eo,value:i},n.push(a)});return n}};function p6(t,e){return!(t.subject.termType===e.subject.termType&&t.object.termType===e.object.termType)||!(t.subject.value===e.subject.value&&t.predicate.value===e.predicate.value&&t.object.value===e.object.value)?!1:t.object.termType!==td?!0:t.object.datatype.termType===e.object.datatype.termType&&t.object.language===e.object.language&&t.object.datatype.value===e.object.datatype.value}const g6=/["\\\n\r]/g;function m6(t){return t.replace(g6,function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}const y6=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function _6(t){return t.replace(y6,function(e,n,r,i){if(n)switch(n){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(r)return String.fromCharCode(parseInt(r,16));if(i)throw new Error("Unsupported U escape")})}const By=P0,Mh=c1,w6=u1,Hy=N0;var l1=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new By("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}async main(e){this.quads=e;for(const c of e)this._addBlankNodeQuadInfo({quad:c,component:c.subject}),this._addBlankNodeQuadInfo({quad:c,component:c.object}),this._addBlankNodeQuadInfo({quad:c,component:c.graph});const n=new Map,r=[...this.blankNodeInfo.keys()];let i=0;for(const c of r)++i%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:c,hashToBlankNodes:n});const o=[...n.keys()].sort(),s=[];for(const c of o){const u=n.get(c);if(u.length>1){s.push(u);continue}const l=u[0];this.canonicalIssuer.getId(l)}for(const c of s){const u=[];for(const l of c){if(this.canonicalIssuer.hasId(l))continue;const d=new By("_:b");d.getId(l);const p=await this.hashNDegreeQuads(l,d);u.push(p)}u.sort(v6);for(const l of u){const d=l.issuer.getOldIds();for(const p of d)this.canonicalIssuer.getId(p)}}const a=[];for(const c of this.quads){const u={...c};u.subject=this._useCanonicalId({component:u.subject}),u.object=this._useCanonicalId({component:u.object}),u.graph=this._useCanonicalId({component:u.graph}),a.push(Hy.serializeQuad(u))}return a.sort(),a.join("")}async hashFirstDegreeQuads(e){const n=[],r=this.blankNodeInfo.get(e),i=r.quads;for(const s of i){const a={subject:null,predicate:s.predicate,object:null,graph:null};a.subject=this.modifyFirstDegreeComponent(e,s.subject,"subject"),a.object=this.modifyFirstDegreeComponent(e,s.object,"object"),a.graph=this.modifyFirstDegreeComponent(e,s.graph,"graph"),n.push(Hy.serializeQuad(a))}n.sort();const o=new Mh(this.hashAlgorithm);for(const s of n)o.update(s);return r.hash=await o.digest(),r.hash}async hashRelatedBlankNode(e,n,r,i){let o;this.canonicalIssuer.hasId(e)?o=this.canonicalIssuer.getId(e):r.hasId(e)?o=r.getId(e):o=this.blankNodeInfo.get(e).hash;const s=new Mh(this.hashAlgorithm);return s.update(i),i!=="g"&&s.update(this.getRelatedPredicate(n)),s.update(o),s.digest()}async hashNDegreeQuads(e,n){const r=new Mh(this.hashAlgorithm),i=await this.createHashToRelated(e,n),o=[...i.keys()].sort();for(const s of o){r.update(s);let a="",c;const u=new w6(i.get(s));let l=0;for(;u.hasNext();){const d=u.next();++l%3===0&&await this._yield();let p=n.clone(),g="";const y=[];let w=!1;for(const b of d)if(this.canonicalIssuer.hasId(b)?g+=this.canonicalIssuer.getId(b):(p.hasId(b)||y.push(b),g+=p.getId(b)),a.length!==0&&g>a){w=!0;break}if(!w){for(const b of y){const E=await this.hashNDegreeQuads(b,p);if(g+=p.getId(b),g+=`<${E.hash}>`,p=E.issuer,a.length!==0&&g>a){w=!0;break}}w||(a.length===0||g<a)&&(a=g,c=p)}}r.update(a),n=c}return{hash:await r.digest(),issuer:n}}modifyFirstDegreeComponent(e,n){return n.termType!=="BlankNode"?n:{termType:"BlankNode",value:n.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}async createHashToRelated(e,n){const r=new Map,i=this.blankNodeInfo.get(e).quads;let o=0;for(const s of i)++o%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:s,component:s.subject,position:"s",id:e,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:s,component:s.object,position:"o",id:e,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:s,component:s.graph,position:"g",id:e,issuer:n,hashToRelated:r})]);return r}async _hashAndTrackBlankNode({id:e,hashToBlankNodes:n}){const r=await this.hashFirstDegreeQuads(e),i=n.get(r);i?i.push(e):n.set(r,[e])}_addBlankNodeQuadInfo({quad:e,component:n}){if(n.termType!=="BlankNode")return;const r=n.value,i=this.blankNodeInfo.get(r);i?i.quads.add(e):this.blankNodeInfo.set(r,{quads:new Set([e]),hash:null})}async _addRelatedBlankNodeHash({quad:e,component:n,position:r,id:i,issuer:o,hashToRelated:s}){if(!(n.termType==="BlankNode"&&n.value!==i))return;const a=n.value,c=await this.hashRelatedBlankNode(a,e,o,r),u=s.get(c);u?u.push(a):s.set(c,[a])}_useCanonicalId({component:e}){return e.termType==="BlankNode"&&!e.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}:e}async _yield(){return new Promise(e=>setImmediate(e))}};function v6(t,e){return t.hash<e.hash?-1:t.hash>e.hash?1:0}const b6=l1;var E6=class extends b6{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,n,r){return n.termType!=="BlankNode"?n:r==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:n.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}async createHashToRelated(e,n){const r=new Map,i=this.blankNodeInfo.get(e).quads;let o=0;for(const s of i){let a,c;if(s.subject.termType==="BlankNode"&&s.subject.value!==e)c=s.subject.value,a="p";else if(s.object.termType==="BlankNode"&&s.object.value!==e)c=s.object.value,a="r";else continue;++o%100===0&&await this._yield();const u=await this.hashRelatedBlankNode(c,s,n,a),l=r.get(u);l?l.push(c):r.set(u,[c])}return r}};const Ky=P0,Lh=c1,S6=u1,Wy=N0;var d1=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new Ky("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(e){this.quads=e;for(const a of e)this._addBlankNodeQuadInfo({quad:a,component:a.subject}),this._addBlankNodeQuadInfo({quad:a,component:a.object}),this._addBlankNodeQuadInfo({quad:a,component:a.graph});const n=new Map,r=[...this.blankNodeInfo.keys()];for(const a of r)this._hashAndTrackBlankNode({id:a,hashToBlankNodes:n});const i=[...n.keys()].sort(),o=[];for(const a of i){const c=n.get(a);if(c.length>1){o.push(c);continue}const u=c[0];this.canonicalIssuer.getId(u)}for(const a of o){const c=[];for(const u of a){if(this.canonicalIssuer.hasId(u))continue;const l=new Ky("_:b");l.getId(u);const d=this.hashNDegreeQuads(u,l);c.push(d)}c.sort(T6);for(const u of c){const l=u.issuer.getOldIds();for(const d of l)this.canonicalIssuer.getId(d)}}const s=[];for(const a of this.quads){const c={...a};c.subject=this._useCanonicalId({component:c.subject}),c.object=this._useCanonicalId({component:c.object}),c.graph=this._useCanonicalId({component:c.graph}),s.push(Wy.serializeQuad(c))}return s.sort(),s.join("")}hashFirstDegreeQuads(e){const n=[],r=this.blankNodeInfo.get(e),i=r.quads;for(const s of i){const a={subject:null,predicate:s.predicate,object:null,graph:null};a.subject=this.modifyFirstDegreeComponent(e,s.subject,"subject"),a.object=this.modifyFirstDegreeComponent(e,s.object,"object"),a.graph=this.modifyFirstDegreeComponent(e,s.graph,"graph"),n.push(Wy.serializeQuad(a))}n.sort();const o=new Lh(this.hashAlgorithm);for(const s of n)o.update(s);return r.hash=o.digest(),r.hash}hashRelatedBlankNode(e,n,r,i){let o;this.canonicalIssuer.hasId(e)?o=this.canonicalIssuer.getId(e):r.hasId(e)?o=r.getId(e):o=this.blankNodeInfo.get(e).hash;const s=new Lh(this.hashAlgorithm);return s.update(i),i!=="g"&&s.update(this.getRelatedPredicate(n)),s.update(o),s.digest()}hashNDegreeQuads(e,n){const r=new Lh(this.hashAlgorithm),i=this.createHashToRelated(e,n),o=[...i.keys()].sort();for(const s of o){r.update(s);let a="",c;const u=new S6(i.get(s));for(;u.hasNext();){const l=u.next();let d=n.clone(),p="";const g=[];let y=!1;for(const w of l)if(this.canonicalIssuer.hasId(w)?p+=this.canonicalIssuer.getId(w):(d.hasId(w)||g.push(w),p+=d.getId(w)),a.length!==0&&p>a){y=!0;break}if(!y){for(const w of g){const b=this.hashNDegreeQuads(w,d);if(p+=d.getId(w),p+=`<${b.hash}>`,d=b.issuer,a.length!==0&&p>a){y=!0;break}}y||(a.length===0||p<a)&&(a=p,c=d)}}r.update(a),n=c}return{hash:r.digest(),issuer:n}}modifyFirstDegreeComponent(e,n){return n.termType!=="BlankNode"?n:{termType:"BlankNode",value:n.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}createHashToRelated(e,n){const r=new Map,i=this.blankNodeInfo.get(e).quads;for(const o of i)this._addRelatedBlankNodeHash({quad:o,component:o.subject,position:"s",id:e,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:o,component:o.object,position:"o",id:e,issuer:n,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:o,component:o.graph,position:"g",id:e,issuer:n,hashToRelated:r});return r}_hashAndTrackBlankNode({id:e,hashToBlankNodes:n}){const r=this.hashFirstDegreeQuads(e),i=n.get(r);i?i.push(e):n.set(r,[e])}_addBlankNodeQuadInfo({quad:e,component:n}){if(n.termType!=="BlankNode")return;const r=n.value,i=this.blankNodeInfo.get(r);i?i.quads.add(e):this.blankNodeInfo.set(r,{quads:new Set([e]),hash:null})}_addRelatedBlankNodeHash({quad:e,component:n,position:r,id:i,issuer:o,hashToRelated:s}){if(!(n.termType==="BlankNode"&&n.value!==i))return;const a=n.value,c=this.hashRelatedBlankNode(a,e,o,r),u=s.get(c);u?u.push(a):s.set(c,[a])}_useCanonicalId({component:e}){return e.termType==="BlankNode"&&!e.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}:e}};function T6(t,e){return t.hash<e.hash?-1:t.hash>e.hash?1:0}const A6=d1;var x6=class extends A6{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,n,r){return n.termType!=="BlankNode"?n:r==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:n.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,n){const r=new Map,i=this.blankNodeInfo.get(e).quads;for(const o of i){let s,a;if(o.subject.termType==="BlankNode"&&o.subject.value!==e)a=o.subject.value,s="p";else if(o.object.termType==="BlankNode"&&o.object.value!==e)a=o.object.value,s="r";else continue;const c=this.hashRelatedBlankNode(a,o,n,s),u=r.get(c);u?u.push(a):r.set(c,[a])}return r}};const I6=l1,R6=E6,k6=d1,F6=x6;let Ia;try{Ia=require("rdf-canonize-native")}catch{}const Cs={};var D6=Cs;Cs.NQuads=N0;Cs.IdentifierIssuer=P0;Cs._rdfCanonizeNative=function(t){return t&&(Ia=t),Ia};Cs.canonize=async function(t,e){if(Array.isArray(t)||(t=Cs.NQuads.legacyDatasetToQuads(t)),e.useNative){if(!Ia)throw new Error("rdf-canonize-native not available");return new Promise((n,r)=>Ia.canonize(t,e,(i,o)=>i?r(i):n(o)))}if(e.algorithm==="URDNA2015")return new I6(e).main(t);if(e.algorithm==="URGNA2012")return new R6(e).main(t);throw"algorithm"in e?new Error("Invalid RDF Dataset Canonicalization algorithm: "+e.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")};Cs._canonizeSync=function(t,e){if(Array.isArray(t)||(t=Cs.NQuads.legacyDatasetToQuads(t)),e.useNative){if(Ia)return Ia.canonizeSync(t,e);throw new Error("rdf-canonize-native not available")}if(e.algorithm==="URDNA2015")return new k6(e).main(t);if(e.algorithm==="URGNA2012")return new F6(e).main(t);throw"algorithm"in e?new Error("Invalid RDF Dataset Canonicalization algorithm: "+e.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")};var O0=D6;const zi={};var Ji=zi;zi.isArray=Array.isArray;zi.isBoolean=t=>typeof t=="boolean"||Object.prototype.toString.call(t)==="[object Boolean]";zi.isDouble=t=>zi.isNumber(t)&&(String(t).indexOf(".")!==-1||Math.abs(t)>=1e21);zi.isEmptyObject=t=>zi.isObject(t)&&Object.keys(t).length===0;zi.isNumber=t=>typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]";zi.isNumeric=t=>!isNaN(parseFloat(t))&&isFinite(t);zi.isObject=t=>Object.prototype.toString.call(t)==="[object Object]";zi.isString=t=>typeof t=="string"||Object.prototype.toString.call(t)==="[object String]";zi.isUndefined=t=>typeof t=="undefined";const Nc=Ji,os={};var us=os;os.isSubject=t=>Nc.isObject(t)&&!("@value"in t||"@set"in t||"@list"in t)?Object.keys(t).length>1||!("@id"in t):!1;os.isSubjectReference=t=>Nc.isObject(t)&&Object.keys(t).length===1&&"@id"in t;os.isValue=t=>Nc.isObject(t)&&"@value"in t;os.isList=t=>Nc.isObject(t)&&"@list"in t;os.isGraph=t=>Nc.isObject(t)&&"@graph"in t&&Object.keys(t).filter(e=>e!=="@id"&&e!=="@index").length===1;os.isSimpleGraph=t=>os.isGraph(t)&&!("@id"in t);os.isBlankNode=t=>Nc.isObject(t)?"@id"in t?t["@id"].indexOf("_:")===0:Object.keys(t).length===0||!("@value"in t||"@set"in t||"@list"in t):!1;var Lo=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",n="jsonld.Error",r={}){super(e),this.name=n,this.message=e,this.details=r}};const Pu=us,zr=Ji,f1=O0.IdentifierIssuer,C6=Lo,P6=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,N6=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,O6=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,qy={headers:{accept:"application/ld+json, application/json"}},Kt={};var fo=Kt;Kt.IdentifierIssuer=f1;Kt.clone=function(t){if(t&&typeof t=="object"){let e;if(zr.isArray(t)){e=[];for(let n=0;n<t.length;++n)e[n]=Kt.clone(t[n])}else if(t instanceof Map){e=new Map;for(const[n,r]of t)e.set(n,Kt.clone(r))}else if(t instanceof Set){e=new Set;for(const n of t)e.add(Kt.clone(n))}else if(zr.isObject(t)){e={};for(const n in t)e[n]=Kt.clone(t[n])}else e=t.toString();return e}return t};Kt.asArray=function(t){return Array.isArray(t)?t:[t]};Kt.buildHeaders=(t={})=>{if(Object.keys(t).some(n=>n.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+qy.headers.accept+'" is supported.');return Object.assign({Accept:qy.headers.accept},t)};Kt.parseLinkHeader=t=>{const e={},n=t.match(P6);for(let r=0;r<n.length;++r){let i=n[r].match(N6);if(!i)continue;const o={target:i[1]},s=i[2];for(;i=O6.exec(s);)o[i[1]]=i[2]===void 0?i[3]:i[2];const a=o.rel||"";Array.isArray(e[a])?e[a].push(o):e.hasOwnProperty(a)?e[a]=[e[a],o]:e[a]=o}return e};Kt.validateTypeValue=(t,e)=>{if(!zr.isString(t)&&!(zr.isArray(t)&&t.every(n=>zr.isString(n)))){if(e&&zr.isObject(t))switch(Object.keys(t).length){case 0:return;case 1:if("@default"in t&&Kt.asArray(t["@default"]).every(n=>zr.isString(n)))return}throw new C6('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:t})}};Kt.hasProperty=(t,e)=>{if(t.hasOwnProperty(e)){const n=t[e];return!zr.isArray(n)||n.length>0}return!1};Kt.hasValue=(t,e,n)=>{if(Kt.hasProperty(t,e)){let r=t[e];const i=Pu.isList(r);if(zr.isArray(r)||i){i&&(r=r["@list"]);for(let o=0;o<r.length;++o)if(Kt.compareValues(n,r[o]))return!0}else if(!zr.isArray(n))return Kt.compareValues(n,r)}return!1};Kt.addValue=(t,e,n,r)=>{if(r=r||{},"propertyIsArray"in r||(r.propertyIsArray=!1),"valueIsArray"in r||(r.valueIsArray=!1),"allowDuplicate"in r||(r.allowDuplicate=!0),"prependValue"in r||(r.prependValue=!1),r.valueIsArray)t[e]=n;else if(zr.isArray(n)){n.length===0&&r.propertyIsArray&&!t.hasOwnProperty(e)&&(t[e]=[]),r.prependValue&&(n=n.concat(t[e]),t[e]=[]);for(let i=0;i<n.length;++i)Kt.addValue(t,e,n[i],r)}else if(t.hasOwnProperty(e)){const i=!r.allowDuplicate&&Kt.hasValue(t,e,n);!zr.isArray(t[e])&&(!i||r.propertyIsArray)&&(t[e]=[t[e]]),i||(r.prependValue?t[e].unshift(n):t[e].push(n))}else t[e]=r.propertyIsArray?[n]:n};Kt.getValues=(t,e)=>[].concat(t[e]||[]);Kt.removeProperty=(t,e)=>{delete t[e]};Kt.removeValue=(t,e,n,r)=>{r=r||{},"propertyIsArray"in r||(r.propertyIsArray=!1);const i=Kt.getValues(t,e).filter(o=>!Kt.compareValues(o,n));i.length===0?Kt.removeProperty(t,e):i.length===1&&!r.propertyIsArray?t[e]=i[0]:t[e]=i};Kt.relabelBlankNodes=(t,e)=>{e=e||{};const n=e.issuer||new f1("_:b");return nd(n,t)};Kt.compareValues=(t,e)=>t===e||Pu.isValue(t)&&Pu.isValue(e)&&t["@value"]===e["@value"]&&t["@type"]===e["@type"]&&t["@language"]===e["@language"]&&t["@index"]===e["@index"]?!0:zr.isObject(t)&&"@id"in t&&zr.isObject(e)&&"@id"in e?t["@id"]===e["@id"]:!1;Kt.compareShortestLeast=(t,e)=>t.length<e.length?-1:e.length<t.length?1:t===e?0:t<e?-1:1;function nd(t,e){if(zr.isArray(e))for(let n=0;n<e.length;++n)e[n]=nd(t,e[n]);else if(Pu.isList(e))e["@list"]=nd(t,e["@list"]);else if(zr.isObject(e)){Pu.isBlankNode(e)&&(e["@id"]=t.getId(e["@id"]));const n=Object.keys(e).sort();for(let r=0;r<n.length;++r){const i=n[r];i!=="@id"&&(e[i]=nd(t,e[i]))}}return e}const to="http://www.w3.org/1999/02/22-rdf-syntax-ns#",eu="http://www.w3.org/2001/XMLSchema#";var M0={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:to,RDF_LIST:to+"List",RDF_FIRST:to+"first",RDF_REST:to+"rest",RDF_NIL:to+"nil",RDF_TYPE:to+"type",RDF_PLAIN_LITERAL:to+"PlainLiteral",RDF_XML_LITERAL:to+"XMLLiteral",RDF_JSON_LITERAL:to+"JSON",RDF_OBJECT:to+"object",RDF_LANGSTRING:to+"langString",XSD:eu,XSD_BOOLEAN:eu+"boolean",XSD_DOUBLE:eu+"double",XSD_INTEGER:eu+"integer",XSD_STRING:eu+"string"},h1=class{constructor(){this._requests={}}wrapLoader(e){const n=this;return n._loader=e,function(){return n.add.apply(n,arguments)}}async add(e){let n=this._requests[e];if(n)return Promise.resolve(n);n=this._requests[e]=this._loader(e);try{return await n}finally{delete this._requests[e]}}};const Ef=Ji,Yr={};var $s=Yr;Yr.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};Yr.parse=(t,e)=>{const n={},r=Yr.parsers[e||"full"],i=r.regex.exec(t);let o=r.keys.length;for(;o--;)n[r.keys[o]]=i[o]===void 0?null:i[o];return(n.scheme==="https"&&n.port==="443"||n.scheme==="http"&&n.port==="80")&&(n.href=n.href.replace(":"+n.port,""),n.authority=n.authority.replace(":"+n.port,""),n.port=null),n.normalizedPath=Yr.removeDotSegments(n.path),n};Yr.prependBase=(t,e)=>{if(t===null||Yr.isAbsolute(e))return e;(!t||Ef.isString(t))&&(t=Yr.parse(t||""));const n=Yr.parse(e),r={protocol:t.protocol||""};if(n.authority!==null)r.authority=n.authority,r.path=n.path,r.query=n.query;else if(r.authority=t.authority,n.path==="")r.path=t.path,n.query!==null?r.query=n.query:r.query=t.query;else{if(n.path.indexOf("/")===0)r.path=n.path;else{let o=t.path;o=o.substr(0,o.lastIndexOf("/")+1),(o.length>0||t.authority)&&o.substr(-1)!=="/"&&(o+="/"),o+=n.path,r.path=o}r.query=n.query}n.path!==""&&(r.path=Yr.removeDotSegments(r.path));let i=r.protocol;return r.authority!==null&&(i+="//"+r.authority),i+=r.path,r.query!==null&&(i+="?"+r.query),n.fragment!==null&&(i+="#"+n.fragment),i===""&&(i="./"),i};Yr.removeBase=(t,e)=>{if(t===null)return e;(!t||Ef.isString(t))&&(t=Yr.parse(t||""));let n="";if(t.href!==""?n+=(t.protocol||"")+"//"+(t.authority||""):e.indexOf("//")&&(n+="//"),e.indexOf(n)!==0)return e;const r=Yr.parse(e.substr(n.length)),i=t.normalizedPath.split("/"),o=r.normalizedPath.split("/"),s=r.fragment||r.query?0:1;for(;i.length>0&&o.length>s&&i[0]===o[0];)i.shift(),o.shift();let a="";if(i.length>0){i.pop();for(let c=0;c<i.length;++c)a+="../"}return a+=o.join("/"),r.query!==null&&(a+="?"+r.query),r.fragment!==null&&(a+="#"+r.fragment),a===""&&(a="./"),a};Yr.removeDotSegments=t=>{if(t.length===0)return"";const e=t.split("/"),n=[];for(;e.length>0;){const r=e.shift(),i=e.length===0;if(r==="."){i&&n.push("");continue}if(r===".."){n.pop(),i&&n.push("");continue}n.push(r)}return t[0]==="/"&&n.length>0&&n[0]!==""&&n.unshift(""),n.length===1&&n[0]===""?"/":n.join("/")};const M6=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;Yr.isAbsolute=t=>Ef.isString(t)&&M6.test(t);Yr.isRelative=t=>Ef.isString(t);const{parseLinkHeader:L6,buildHeaders:U6}=fo,{LINK_HEADER_CONTEXT:j6}=M0,tu=Lo,$6=h1,{prependBase:B6}=$s,H6=/(^|(\r\n))link:/i;var K6=({secure:t,headers:e={},xhr:n}={headers:{}})=>{return e=U6(e),new $6().wrapLoader(i);async function i(o){if(o.indexOf("http:")!==0&&o.indexOf("https:")!==0)throw new tu('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:o});if(t&&o.indexOf("https")!==0)throw new tu(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:o});let s;try{s=await W6(n,o,e)}catch(d){throw new tu("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:o,cause:d})}if(s.status>=400)throw new tu("URL could not be dereferenced: "+s.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:o,httpStatusCode:s.status});let a={contextUrl:null,documentUrl:o,document:s.response},c=null;const u=s.getResponseHeader("Content-Type");let l;if(H6.test(s.getAllResponseHeaders())&&(l=s.getResponseHeader("Link")),l&&u!=="application/ld+json"){const d=L6(l),p=d[j6];if(Array.isArray(p))throw new tu("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:o});p&&(a.contextUrl=p.target),c=d.alternate,c&&c.type=="application/ld+json"&&!(u||"").match(/^application\/(\w*\+)?json$/)&&(a=await i(B6(o,c.target)))}return a}};function W6(t,e,n){t=t||XMLHttpRequest;const r=new t;return new Promise((i,o)=>{r.onload=()=>i(r),r.onerror=s=>o(s),r.open("GET",e,!0);for(const s in n)r.setRequestHeader(s,n[s]);r.send()})}const q6=K6,L0={};var V6=L0;L0.setupDocumentLoaders=function(t){typeof XMLHttpRequest!="undefined"&&(t.documentLoaders.xhr=q6,t.useDocumentLoader("xhr"))};L0.setupGlobals=function(t){typeof globalThis.JsonLdProcessor=="undefined"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:t.JsonLdProcessor})};var G6=Ct;Ct.Node=Ra;Ct.create=Ct;function Ct(t){var e=this;if(e instanceof Ct||(e=new Ct),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}Ct.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Ct.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Ct.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Ct.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Y6(this,arguments[t]);return this.length};Ct.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)J6(this,arguments[t]);return this.length};Ct.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Ct.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Ct.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};Ct.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};Ct.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};Ct.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};Ct.prototype.map=function(t,e){e=e||this;for(var n=new Ct,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};Ct.prototype.mapReverse=function(t,e){e=e||this;for(var n=new Ct,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};Ct.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=t(n,r.value,i),r=r.next;return n};Ct.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=t(n,r.value,i),r=r.prev;return n};Ct.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};Ct.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};Ct.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new Ct;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)n.push(i.value);return n};Ct.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new Ct;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>t;r--,i=i.prev)n.push(i.value);return n};Ct.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(var o=[],r=0;i&&r<e;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=z6(this,i,n[r]);return o};Ct.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function z6(t,e,n){var r=e===t.head?new Ra(n,null,e,t):new Ra(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function Y6(t,e){t.tail=new Ra(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function J6(t,e){t.head=new Ra(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Ra(t,e,n,r){if(!(this instanceof Ra))return new Ra(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{require("./iterator.js")(Ct)}catch{}const Z6=G6,oa=Symbol("max"),zo=Symbol("length"),za=Symbol("lengthCalculator"),pu=Symbol("allowStale"),ua=Symbol("maxAge"),Vo=Symbol("dispose"),Vy=Symbol("noDisposeOnSet"),gr=Symbol("lruList"),ro=Symbol("cache"),p1=Symbol("updateAgeOnGet"),Uh=()=>1;class Q6{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[oa]=e.max||1/0;const n=e.length||Uh;if(this[za]=typeof n!="function"?Uh:n,this[pu]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[ua]=e.maxAge||0,this[Vo]=e.dispose,this[Vy]=e.noDisposeOnSet||!1,this[p1]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[oa]=e||1/0,nu(this)}get max(){return this[oa]}set allowStale(e){this[pu]=!!e}get allowStale(){return this[pu]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[ua]=e,nu(this)}get maxAge(){return this[ua]}set lengthCalculator(e){typeof e!="function"&&(e=Uh),e!==this[za]&&(this[za]=e,this[zo]=0,this[gr].forEach(n=>{n.length=this[za](n.value,n.key),this[zo]+=n.length})),nu(this)}get lengthCalculator(){return this[za]}get length(){return this[zo]}get itemCount(){return this[gr].length}rforEach(e,n){n=n||this;for(let r=this[gr].tail;r!==null;){const i=r.prev;Gy(this,e,r,n),r=i}}forEach(e,n){n=n||this;for(let r=this[gr].head;r!==null;){const i=r.next;Gy(this,e,r,n),r=i}}keys(){return this[gr].toArray().map(e=>e.key)}values(){return this[gr].toArray().map(e=>e.value)}reset(){this[Vo]&&this[gr]&&this[gr].length&&this[gr].forEach(e=>this[Vo](e.key,e.value)),this[ro]=new Map,this[gr]=new Z6,this[zo]=0}dump(){return this[gr].map(e=>Cd(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[gr]}set(e,n,r){if(r=r||this[ua],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,o=this[za](n,e);if(this[ro].has(e)){if(o>this[oa])return cc(this,this[ro].get(e)),!1;const c=this[ro].get(e).value;return this[Vo]&&(this[Vy]||this[Vo](e,c.value)),c.now=i,c.maxAge=r,c.value=n,this[zo]+=o-c.length,c.length=o,this.get(e),nu(this),!0}const s=new X6(e,n,o,i,r);return s.length>this[oa]?(this[Vo]&&this[Vo](e,n),!1):(this[zo]+=s.length,this[gr].unshift(s),this[ro].set(e,this[gr].head),nu(this),!0)}has(e){if(!this[ro].has(e))return!1;const n=this[ro].get(e).value;return!Cd(this,n)}get(e){return jh(this,e,!0)}peek(e){return jh(this,e,!1)}pop(){const e=this[gr].tail;return e?(cc(this,e),e.value):null}del(e){cc(this,this[ro].get(e))}load(e){this.reset();const n=Date.now();for(let r=e.length-1;r>=0;r--){const i=e[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{const s=o-n;s>0&&this.set(i.k,i.v,s)}}}prune(){this[ro].forEach((e,n)=>jh(this,n,!1))}}const jh=(t,e,n)=>{const r=t[ro].get(e);if(r){const i=r.value;if(Cd(t,i)){if(cc(t,r),!t[pu])return}else n&&(t[p1]&&(r.value.now=Date.now()),t[gr].unshiftNode(r));return i.value}},Cd=(t,e)=>{if(!e||!e.maxAge&&!t[ua])return!1;const n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[ua]&&n>t[ua]},nu=t=>{if(t[zo]>t[oa])for(let e=t[gr].tail;t[zo]>t[oa]&&e!==null;){const n=e.prev;cc(t,e),e=n}},cc=(t,e)=>{if(e){const n=e.value;t[Vo]&&t[Vo](n.key,n.value),t[zo]-=n.length,t[ro].delete(n.key),t[gr].removeNode(e)}};class X6{constructor(e,n,r,i,o){this.key=e,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}}const Gy=(t,e,n,r)=>{let i=n.value;Cd(t,i)&&(cc(t,n),t[pu]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};var g1=Q6;const ek=g1,tk=10;var nk=class{constructor({document:e}){this.document=e,this.cache=new ek({max:tk})}getProcessed(e){return this.cache.get(e)}setProcessed(e,n){this.cache.set(e,n)}};const{isArray:Jp,isObject:gu,isString:Pd}=Ji,{asArray:rk}=fo,{prependBase:Zp}=$s,uu=Lo,zy=nk,Yy=10;var ik=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}async resolve({activeCtx:e,context:n,documentLoader:r,base:i,cycles:o=new Set}){n&&gu(n)&&n["@context"]&&(n=n["@context"]),n=rk(n);const s=[];for(const a of n){if(Pd(a)){let l=this._get(a);l||(l=await this._resolveRemoteContext({activeCtx:e,url:a,documentLoader:r,base:i,cycles:o})),Jp(l)?s.push(...l):s.push(l);continue}if(a===null){s.push(new zy({document:null}));continue}gu(a)||ok(n);const c=JSON.stringify(a);let u=this._get(c);u||(u=new zy({document:a}),this._cacheResolvedContext({key:c,resolved:u,tag:"static"})),s.push(u)}return s}_get(e){let n=this.perOpCache.get(e);if(!n){const r=this.sharedCache.get(e);r&&(n=r.get("static"),n&&this.perOpCache.set(e,n))}return n}_cacheResolvedContext({key:e,resolved:n,tag:r}){if(this.perOpCache.set(e,n),r!==void 0){let i=this.sharedCache.get(e);i||(i=new Map,this.sharedCache.set(e,i)),i.set(r,n)}return n}async _resolveRemoteContext({activeCtx:e,url:n,documentLoader:r,base:i,cycles:o}){n=Zp(i,n);const{context:s,remoteDoc:a}=await this._fetchContext({activeCtx:e,url:n,documentLoader:r,cycles:o});i=a.documentUrl||n,Qp({context:s,base:i});const c=await this.resolve({activeCtx:e,context:s,documentLoader:r,base:i,cycles:o});return this._cacheResolvedContext({key:n,resolved:c,tag:a.tag}),c}async _fetchContext({activeCtx:e,url:n,documentLoader:r,cycles:i}){if(i.size>Yy)throw new uu("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:e.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:Yy});if(i.has(n))throw new uu("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:e.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:n});i.add(n);let o,s;try{s=await r(n),o=s.document||null,Pd(o)&&(o=JSON.parse(o))}catch(a){throw new uu("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:n,cause:a})}if(!gu(o))throw new uu("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:n});return"@context"in o?o={"@context":o["@context"]}:o={"@context":{}},s.contextUrl&&(Jp(o["@context"])||(o["@context"]=[o["@context"]]),o["@context"].push(s.contextUrl)),{context:o,remoteDoc:s}}};function ok(t){throw new uu("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:t})}function Qp({context:t,base:e}){if(!t)return;const n=t["@context"];if(Pd(n)){t["@context"]=Zp(e,n);return}if(Jp(n)){for(let r=0;r<n.length;++r){const i=n[r];if(Pd(i)){n[r]=Zp(e,i);continue}gu(i)&&Qp({context:{"@context":i},base:e})}return}if(!!gu(n))for(const r in n)Qp({context:n[r],base:e})}var sk=O0.NQuads;const Nd=fo,ze=Lo,{isArray:m1,isObject:ws,isString:gi,isUndefined:ak}=Ji,{isAbsolute:uc,isRelative:ck,prependBase:mu}=$s,{asArray:y1,compareShortestLeast:uk}=fo,Ll=new Map,lk=1e4,rd=/^@[a-zA-Z]+$/,en={};var Na=en;en.process=async({activeCtx:t,localCtx:e,options:n,propagate:r=!0,overrideProtected:i=!1,cycles:o=new Set})=>{if(ws(e)&&"@context"in e&&m1(e["@context"])&&(e=e["@context"]),y1(e).length===0)return t;const a=await n.contextResolver.resolve({activeCtx:t,context:e,documentLoader:n.documentLoader,base:n.base});ws(a[0].document)&&typeof a[0].document["@propagate"]=="boolean"&&(r=a[0].document["@propagate"]);let c=t;!r&&!c.previousContext&&(c=c.clone(),c.previousContext=t);for(const u of a){let{document:l}=u;if(t=c,l===null){if(!i&&Object.keys(t.protected).length!==0){const g=n&&n.protectedMode||"error";if(g==="error")throw new ze("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if(g==="warn"){console.warn("WARNING: invalid context nullification");const y=u.getProcessed(t);if(y){c=t=y;continue}const w=t;c=t=en.getInitialContext(n).clone();for(const[b,E]of Object.entries(w.protected))E&&(t.mappings[b]=Nd.clone(w.mappings[b]));t.protected=Nd.clone(w.protected),u.setProcessed(w,c);continue}throw new ze("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:e,protectedMode:g})}c=t=en.getInitialContext(n).clone();continue}const d=u.getProcessed(t);if(d){c=t=d;continue}if(ws(l)&&"@context"in l&&(l=l["@context"]),!ws(l))throw new ze("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:l});c=c.clone();const p=new Map;if("@version"in l){if(l["@version"]!==1.1)throw new ze("Unsupported JSON-LD version: "+l["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:l});if(t.processingMode&&t.processingMode==="json-ld-1.0")throw new ze("@version: "+l["@version"]+" not compatible with "+t.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:l});c.processingMode="json-ld-1.1",c["@version"]=l["@version"],p.set("@version",!0)}if(c.processingMode=c.processingMode||t.processingMode,"@base"in l){let g=l["@base"];if(!(g===null||uc(g)))if(ck(g))g=mu(c["@base"],g);else throw new ze('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:l});c["@base"]=g,p.set("@base",!0)}if("@vocab"in l){const g=l["@vocab"];if(g===null)delete c["@vocab"];else if(gi(g)){if(!uc(g)&&en.processingMode(c,1))throw new ze('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:l});c["@vocab"]=ec(c,g,{vocab:!0,base:!0},void 0,void 0,n)}else throw new ze('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:l});p.set("@vocab",!0)}if("@language"in l){const g=l["@language"];if(g===null)delete c["@language"];else if(gi(g))c["@language"]=g.toLowerCase();else throw new ze('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:l});p.set("@language",!0)}if("@direction"in l){const g=l["@direction"];if(t.processingMode==="json-ld-1.0")throw new ze("Invalid JSON-LD syntax; @direction not compatible with "+t.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:l});if(g===null)delete c["@direction"];else{if(g!=="ltr"&&g!=="rtl")throw new ze('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:l});c["@direction"]=g}p.set("@direction",!0)}if("@propagate"in l){const g=l["@propagate"];if(t.processingMode==="json-ld-1.0")throw new ze("Invalid JSON-LD syntax; @propagate not compatible with "+t.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:l});if(typeof g!="boolean")throw new ze("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:e});p.set("@propagate",!0)}if("@import"in l){const g=l["@import"];if(t.processingMode==="json-ld-1.0")throw new ze("Invalid JSON-LD syntax; @import not compatible with "+t.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:l});if(!gi(g))throw new ze("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:e});const y=await n.contextResolver.resolve({activeCtx:t,context:g,documentLoader:n.documentLoader,base:n.base});if(y.length!==1)throw new ze("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:e});const w=y[0].getProcessed(t);if(w)l=w;else{const b=y[0].document;if("@import"in b)throw new ze("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:e});for(const E in b)l.hasOwnProperty(E)||(l[E]=b[E]);y[0].setProcessed(t,l)}p.set("@import",!0)}p.set("@protected",l["@protected"]||!1);for(const g in l)if(en.createTermDefinition({activeCtx:c,localCtx:l,term:g,defined:p,options:n,overrideProtected:i}),ws(l[g])&&"@context"in l[g]){const y=l[g]["@context"];let w=!0;if(gi(y)){const b=mu(n.base,y);o.has(b)?w=!1:o.add(b)}if(w)try{await en.process({activeCtx:c.clone(),localCtx:l[g]["@context"],overrideProtected:!0,options:n,cycles:o})}catch{throw new ze("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:l[g]["@context"],term:g})}}u.setProcessed(t,c)}return c};en.createTermDefinition=({activeCtx:t,localCtx:e,term:n,defined:r,options:i,overrideProtected:o=!1})=>{if(r.has(n)){if(r.get(n))return;throw new ze("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:e,term:n})}r.set(n,!1);let s;if(e.hasOwnProperty(n)&&(s=e[n]),n==="@type"&&ws(s)&&(s["@container"]||"@set")==="@set"&&en.processingMode(t,1.1)){const g=["@container","@id","@protected"],y=Object.keys(s);if(y.length===0||y.some(w=>!g.includes(w)))throw new ze("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:e,term:n})}else{if(en.isKeyword(n))throw new ze("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:e,term:n});if(n.match(rd)){console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:n});return}else if(n==="")throw new ze("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:e})}const a=t.mappings.get(n);t.mappings.has(n)&&t.mappings.delete(n);let c=!1;if((gi(s)||s===null)&&(c=!0,s={"@id":s}),!ws(s))throw new ze("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:e});const u={};t.mappings.set(n,u),u.reverse=!1;const l=["@container","@id","@language","@reverse","@type"];en.processingMode(t,1.1)&&l.push("@context","@direction","@index","@nest","@prefix","@protected");for(const g in s)if(!l.includes(g))throw new ze("Invalid JSON-LD syntax; a term definition must not contain "+g,"jsonld.SyntaxError",{code:"invalid term definition",context:e});const d=n.indexOf(":");if(u._termHasColon=d>0,"@reverse"in s){if("@id"in s)throw new ze("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:e});if("@nest"in s)throw new ze("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:e});const g=s["@reverse"];if(!gi(g))throw new ze("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});if(!en.isKeyword(g)&&g.match(rd)){console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:g}),a?t.mappings.set(n,a):t.mappings.delete(n);return}const y=ec(t,g,{vocab:!0,base:!1},e,r,i);if(!uc(y))throw new ze("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});u["@id"]=y,u.reverse=!0}else if("@id"in s){let g=s["@id"];if(g&&!gi(g))throw new ze("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});if(g===null)u["@id"]=null;else if(!en.isKeyword(g)&&g.match(rd)){console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:g}),a?t.mappings.set(n,a):t.mappings.delete(n);return}else if(g!==n){if(g=ec(t,g,{vocab:!0,base:!1},e,r,i),!uc(g)&&!en.isKeyword(g))throw new ze("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e});if(n.match(/(?::[^:])|\//)){const y=new Map(r).set(n,!0);if(ec(t,n,{vocab:!0,base:!1},e,y,i)!==g)throw new ze("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e})}u["@id"]=g,u._prefix=c&&!u._termHasColon&&g.match(/[:\/\?#\[\]@]$/)}}if(!("@id"in u))if(u._termHasColon){const g=n.substr(0,d);if(e.hasOwnProperty(g)&&en.createTermDefinition({activeCtx:t,localCtx:e,term:g,defined:r,options:i}),t.mappings.has(g)){const y=n.substr(d+1);u["@id"]=t.mappings.get(g)["@id"]+y}else u["@id"]=n}else if(n==="@type")u["@id"]=n;else{if(!("@vocab"in t))throw new ze("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:e,term:n});u["@id"]=t["@vocab"]+n}if((s["@protected"]===!0||r.get("@protected")===!0&&s["@protected"]!==!1)&&(t.protected[n]=!0,u.protected=!0),r.set(n,!0),"@type"in s){let g=s["@type"];if(!gi(g))throw new ze("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:e});if(g==="@json"||g==="@none"){if(en.processingMode(t,1))throw new ze(`Invalid JSON-LD syntax; an @context @type value must not be "${g}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:e})}else if(g!=="@id"&&g!=="@vocab"){if(g=ec(t,g,{vocab:!0,base:!1},e,r,i),!uc(g))throw new ze("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:e});if(g.indexOf("_:")===0)throw new ze("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:e})}u["@type"]=g}if("@container"in s){const g=gi(s["@container"])?[s["@container"]]:s["@container"]||[],y=["@list","@set","@index","@language"];let w=!0;const b=g.includes("@set");if(en.processingMode(t,1.1)){if(y.push("@graph","@id","@type"),g.includes("@list")){if(g.length!==1)throw new ze("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:e})}else if(g.includes("@graph")){if(g.some(E=>E!=="@graph"&&E!=="@id"&&E!=="@index"&&E!=="@set"))throw new ze("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:e})}else w&=g.length<=(b?2:1);if(g.includes("@type")&&(u["@type"]=u["@type"]||"@id",!["@id","@vocab"].includes(u["@type"])))throw new ze("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:e})}else w&=!m1(s["@container"]),w&=g.length<=1;if(w&=g.every(E=>y.includes(E)),w&=!(b&&g.includes("@list")),!w)throw new ze("Invalid JSON-LD syntax; @context @container value must be one of the following: "+y.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:e});if(u.reverse&&!g.every(E=>["@index","@set"].includes(E)))throw new ze("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:e});u["@container"]=g}if("@index"in s){if(!("@container"in s)||!u["@container"].includes("@index"))throw new ze(`Invalid JSON-LD syntax; @index without @index in @container: "${s["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:e});if(!gi(s["@index"])||s["@index"].indexOf("@")===0)throw new ze(`Invalid JSON-LD syntax; @index must expand to an IRI: "${s["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:e});u["@index"]=s["@index"]}if("@context"in s&&(u["@context"]=s["@context"]),"@language"in s&&!("@type"in s)){let g=s["@language"];if(g!==null&&!gi(g))throw new ze("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:e});g!==null&&(g=g.toLowerCase()),u["@language"]=g}if("@prefix"in s){if(n.match(/:|\//))throw new ze("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:e});if(en.isKeyword(u["@id"]))throw new ze("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:e});if(typeof s["@prefix"]=="boolean")u._prefix=s["@prefix"]===!0;else throw new ze("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:e})}if("@direction"in s){const g=s["@direction"];if(g!==null&&g!=="ltr"&&g!=="rtl")throw new ze('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:e});u["@direction"]=g}if("@nest"in s){const g=s["@nest"];if(!gi(g)||g!=="@nest"&&g.indexOf("@")===0)throw new ze("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:e});u["@nest"]=g}// disallow aliasing @context and @preserve
const p=u["@id"];if(p==="@context"||p==="@preserve")throw new ze("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:e});if(a&&a.protected&&!o&&(t.protected[n]=!0,u.protected=!0,!Xp(a,u))){const g=i&&i.protectedMode||"error";if(g==="error")throw new ze(`Invalid JSON-LD syntax; tried to redefine "${n}" which is a protected term.`,"jsonld.SyntaxError",{code:"protected term redefinition",context:e,term:n});if(g==="warn"){console.warn("WARNING: protected term redefinition",{term:n});return}throw new ze("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:e,term:n,protectedMode:g})}};en.expandIri=(t,e,n,r)=>ec(t,e,n,void 0,void 0,r);function ec(t,e,n,r,i,o){if(e===null||!gi(e)||en.isKeyword(e))return e;if(e.match(rd))return null;if(r&&r.hasOwnProperty(e)&&i.get(e)!==!0&&en.createTermDefinition({activeCtx:t,localCtx:r,term:e,defined:i,options:o}),n=n||{},n.vocab){const a=t.mappings.get(e);if(a===null)return null;if(ws(a)&&"@id"in a)return a["@id"]}const s=e.indexOf(":");if(s>0){const a=e.substr(0,s),c=e.substr(s+1);if(a==="_"||c.indexOf("//")===0)return e;r&&r.hasOwnProperty(a)&&en.createTermDefinition({activeCtx:t,localCtx:r,term:a,defined:i,options:o});const u=t.mappings.get(a);if(u&&u._prefix)return u["@id"]+c;if(uc(e))return e}if(n.vocab&&"@vocab"in t)return t["@vocab"]+e;if(n.base&&"@base"in t){if(t["@base"])return mu(mu(o.base,t["@base"]),e)}else if(n.base)return mu(o.base,e);return e}en.getInitialContext=t=>{const e=JSON.stringify({processingMode:t.processingMode}),n=Ll.get(e);if(n)return n;const r={processingMode:t.processingMode,mappings:new Map,inverse:null,getInverse:i,clone:a,revertToPreviousContext:c,protected:{}};return Ll.size===lk&&Ll.clear(),Ll.set(e,r),r;function i(){const u=this;if(u.inverse)return u.inverse;const l=u.inverse={},d=u.fastCurieMap={},p={},g=(u["@language"]||"@none").toLowerCase(),y=u["@direction"],w=u.mappings,b=[...w.keys()].sort(uk);for(const E of b){const S=w.get(E);if(S===null)continue;let R=S["@container"]||"@none";if(R=[].concat(R).sort().join(""),S["@id"]===null)continue;const F=y1(S["@id"]);for(const M of F){let P=l[M];const D=en.isKeyword(M);if(P)!D&&!S._termHasColon&&p[M].push(E);else if(l[M]=P={},!D&&!S._termHasColon){p[M]=[E];const Y={iri:M,terms:p[M]};M[0]in d?d[M[0]].push(Y):d[M[0]]=[Y]}if(P[R]||(P[R]={"@language":{},"@type":{},"@any":{}}),P=P[R],s(E,P["@any"],"@none"),S.reverse)s(E,P["@type"],"@reverse");else if(S["@type"]==="@none")s(E,P["@any"],"@none"),s(E,P["@language"],"@none"),s(E,P["@type"],"@none");else if("@type"in S)s(E,P["@type"],S["@type"]);else if("@language"in S&&"@direction"in S){const Y=S["@language"],Q=S["@direction"];Y&&Q?s(E,P["@language"],`${Y}_${Q}`.toLowerCase()):Y?s(E,P["@language"],Y.toLowerCase()):Q?s(E,P["@language"],`_${Q}`):s(E,P["@language"],"@null")}else"@language"in S?s(E,P["@language"],(S["@language"]||"@null").toLowerCase()):"@direction"in S?S["@direction"]?s(E,P["@language"],`_${S["@direction"]}`):s(E,P["@language"],"@none"):y?(s(E,P["@language"],`_${y}`),s(E,P["@language"],"@none"),s(E,P["@type"],"@none")):(s(E,P["@language"],g),s(E,P["@language"],"@none"),s(E,P["@type"],"@none"))}}for(const E in d)o(d,E,1);return l}function o(u,l,d){const p=u[l],g=u[l]={};let y,w;for(const b of p)y=b.iri,d>=y.length?w="":w=y[d],w in g?g[w].push(b):g[w]=[b];for(const b in g)b!==""&&o(g,b,d+1)}function s(u,l,d){l.hasOwnProperty(d)||(l[d]=u)}function a(){const u={};return u.mappings=Nd.clone(this.mappings),u.clone=this.clone,u.inverse=null,u.getInverse=this.getInverse,u.protected=Nd.clone(this.protected),this.previousContext&&(u.previousContext=this.previousContext.clone()),u.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(u["@base"]=this["@base"]),"@language"in this&&(u["@language"]=this["@language"]),"@vocab"in this&&(u["@vocab"]=this["@vocab"]),u}function c(){return this.previousContext?this.previousContext.clone():this}};en.getContextValue=(t,e,n)=>{if(e===null)return n==="@context"?void 0:null;if(t.mappings.has(e)){const r=t.mappings.get(e);if(ak(n))return r;if(r.hasOwnProperty(n))return r[n]}if(n==="@language"&&n in t||n==="@direction"&&n in t)return t[n];if(n!=="@context")return null};en.processingMode=(t,e)=>e.toString()>="1.1"?!t.processingMode||t.processingMode>="json-ld-"+e.toString():t.processingMode==="json-ld-1.0";en.isKeyword=t=>{if(!gi(t)||t[0]!=="@")return!1;switch(t){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function Xp(t,e){if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return t===e;const n=Array.isArray(t);if(n!==Array.isArray(e))return!1;if(n){if(t.length!==e.length)return!1;for(let o=0;o<t.length;++o)if(!Xp(t[o],e[o]))return!1;return!0}const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const o in t){let s=t[o],a=e[o];if(o==="@container"&&Array.isArray(s)&&Array.isArray(a)&&(s=s.slice().sort(),a=a.slice().sort()),!Xp(s,a))return!1}return!0}const En=Lo,{isArray:$i,isObject:Mi,isEmptyObject:eg,isString:qr,isUndefined:Od}=Ji,{isList:$h,isValue:tg,isGraph:dk,isSubject:fk}=us,{expandIri:Jn,getContextValue:Bi,isKeyword:ng,process:yu,processingMode:id}=Na,{isAbsolute:_1}=$s,{addValue:Ai,asArray:no,getValues:hk,validateTypeValue:pk}=fo,Es={};var gk=Es;const mk=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;Es.expand=async({activeCtx:t,activeProperty:e=null,element:n,options:r={},insideList:i=!1,insideIndex:o=!1,typeScopedContext:s=null,expansionMap:a=()=>{}})=>{if(n==null)return null;if(e==="@default"&&(r=Object.assign({},r,{isFrame:!1})),!$i(n)&&!Mi(n)){if(!i&&(e===null||Jn(t,e,{vocab:!0},r)==="@graph")){const w=await a({unmappedValue:n,activeCtx:t,activeProperty:e,options:r,insideList:i});return w===void 0?null:w}return v1({activeCtx:t,activeProperty:e,value:n,options:r})}if($i(n)){let w=[];const b=Bi(t,e,"@container")||[];i=i||b.includes("@list");for(let E=0;E<n.length;++E){let S=await Es.expand({activeCtx:t,activeProperty:e,element:n[E],options:r,expansionMap:a,insideIndex:o,typeScopedContext:s});i&&$i(S)&&(S={"@list":S}),!(S===null&&(S=await a({unmappedValue:n[E],activeCtx:t,activeProperty:e,parent:n,index:E,options:r,expandedParent:w,insideList:i}),S===void 0))&&($i(S)?w=w.concat(S):w.push(S))}return w}const c=Jn(t,e,{vocab:!0},r),u=Bi(t,e,"@context");s=s||(t.previousContext?t:null);let l=Object.keys(n).sort(),d=!o;if(d&&s&&l.length<=2&&!l.includes("@context"))for(const w of l){const b=Jn(s,w,{vocab:!0},r);if(b==="@value"){d=!1,t=s;break}if(b==="@id"&&l.length===1){d=!1;break}}d&&(t=t.revertToPreviousContext()),Od(u)||(t=await yu({activeCtx:t,localCtx:u,propagate:!0,overrideProtected:!0,options:r})),"@context"in n&&(t=await yu({activeCtx:t,localCtx:n["@context"],options:r})),s=t;let p=null;for(const w of l)if(Jn(t,w,{vocab:!0},r)==="@type"){p=p||w;const E=n[w],S=Array.isArray(E)?E.length>1?E.slice().sort():E:[E];for(const R of S){const F=Bi(s,R,"@context");Od(F)||(t=await yu({activeCtx:t,localCtx:F,options:r,propagate:!1}))}}let g={};await w1({activeCtx:t,activeProperty:e,expandedActiveProperty:c,element:n,expandedParent:g,options:r,insideList:i,typeKey:p,typeScopedContext:s,expansionMap:a}),l=Object.keys(g);let y=l.length;if("@value"in g){if("@type"in g&&("@language"in g||"@direction"in g))throw new En('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:g});let w=y-1;if("@type"in g&&(w-=1),"@index"in g&&(w-=1),"@language"in g&&(w-=1),"@direction"in g&&(w-=1),w!==0)throw new En('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:g});const b=g["@value"]===null?[]:no(g["@value"]),E=hk(g,"@type");if(!(id(t,1.1)&&E.includes("@json")&&E.length===1))if(b.length===0){const S=await a({unmappedValue:g,activeCtx:t,activeProperty:e,element:n,options:r,insideList:i});S!==void 0?g=S:g=null}else{if(!b.every(S=>qr(S)||eg(S))&&"@language"in g)throw new En("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:g});if(!E.every(S=>_1(S)&&!(qr(S)&&S.indexOf("_:")===0)||eg(S)))throw new En('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:g})}}else if("@type"in g&&!$i(g["@type"]))g["@type"]=[g["@type"]];else if("@set"in g||"@list"in g){if(y>1&&!(y===2&&"@index"in g))throw new En('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:g});"@set"in g&&(g=g["@set"],l=Object.keys(g),y=l.length)}else if(y===1&&"@language"in g){const w=await a(g,{unmappedValue:g,activeCtx:t,activeProperty:e,element:n,options:r,insideList:i});w!==void 0?g=w:g=null}if(Mi(g)&&!r.keepFreeFloatingNodes&&!i&&(e===null||c==="@graph")&&(y===0||"@value"in g||"@list"in g||y===1&&"@id"in g)){const w=await a({unmappedValue:g,activeCtx:t,activeProperty:e,element:n,options:r,insideList:i});w!==void 0?g=w:g=null}return g};async function w1({activeCtx:t,activeProperty:e,expandedActiveProperty:n,element:r,expandedParent:i,options:o={},insideList:s,typeKey:a,typeScopedContext:c,expansionMap:u}){const l=Object.keys(r).sort(),d=[];let p;const g=r[a]&&Jn(t,$i(r[a])?r[a][0]:r[a],{vocab:!0},o)==="@json";for(const y of l){let w=r[y],b;if(y==="@context")continue;let E=Jn(t,y,{vocab:!0},o);if((E===null||!(_1(E)||ng(E)))&&(E=u({unmappedProperty:y,activeCtx:t,activeProperty:e,parent:r,options:o,insideList:s,value:w,expandedParent:i}),E===void 0))continue;if(ng(E)){if(n==="@reverse")throw new En("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:w});if(E in i&&E!=="@included"&&E!=="@type")throw new En("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:E})}if(E==="@id"){if(!qr(w)){if(!o.isFrame)throw new En('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:w});if(Mi(w)){if(!eg(w))throw new En('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:w})}else if($i(w)){if(!w.every(M=>qr(M)))throw new En('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:w})}else throw new En('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:w})}Ai(i,"@id",no(w).map(M=>qr(M)?Jn(t,M,{base:!0},o):M),{propertyIsArray:o.isFrame});continue}if(E==="@type"){Mi(w)&&(w=Object.fromEntries(Object.entries(w).map(([M,P])=>[Jn(c,M,{vocab:!0}),no(P).map(D=>Jn(c,D,{base:!0,vocab:!0}))]))),pk(w,o.isFrame),Ai(i,"@type",no(w).map(M=>qr(M)?Jn(c,M,{base:!0,vocab:!0},o):M),{propertyIsArray:o.isFrame});continue}if(E==="@included"&&id(t,1.1)){const M=no(await Es.expand({activeCtx:t,activeProperty:e,element:w,options:o,expansionMap:u}));if(!M.every(P=>fk(P)))throw new En("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:w});Ai(i,"@included",M,{propertyIsArray:!0});continue}if(E==="@graph"&&!(Mi(w)||$i(w)))throw new En('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:w});if(E==="@value"){p=w,g&&id(t,1.1)?i["@value"]=w:Ai(i,"@value",w,{propertyIsArray:o.isFrame});continue}if(E==="@language"){if(w===null)continue;if(!qr(w)&&!o.isFrame)throw new En('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:w});w=no(w).map(M=>qr(M)?M.toLowerCase():M);for(const M of w)qr(M)&&!M.match(mk)&&console.warn(`@language must be valid BCP47: ${M}`);Ai(i,"@language",w,{propertyIsArray:o.isFrame});continue}if(E==="@direction"){if(!qr(w)&&!o.isFrame)throw new En('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:w});w=no(w);for(const M of w)if(qr(M)&&M!=="ltr"&&M!=="rtl")throw new En('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:w});Ai(i,"@direction",w,{propertyIsArray:o.isFrame});continue}if(E==="@index"){if(!qr(w))throw new En('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:w});Ai(i,"@index",w);continue}if(E==="@reverse"){if(!Mi(w))throw new En('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:w});if(b=await Es.expand({activeCtx:t,activeProperty:"@reverse",element:w,options:o,expansionMap:u}),"@reverse"in b)for(const P in b["@reverse"])Ai(i,P,b["@reverse"][P],{propertyIsArray:!0});let M=i["@reverse"]||null;for(const P in b){if(P==="@reverse")continue;M===null&&(M=i["@reverse"]={}),Ai(M,P,[],{propertyIsArray:!0});const D=b[P];for(let Y=0;Y<D.length;++Y){const Q=D[Y];if(tg(Q)||$h(Q))throw new En('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:b});Ai(M,P,Q,{propertyIsArray:!0})}}continue}if(E==="@nest"){d.push(y);continue}let S=t;const R=Bi(t,y,"@context");Od(R)||(S=await yu({activeCtx:t,localCtx:R,propagate:!0,overrideProtected:!0,options:o}));const F=Bi(S,y,"@container")||[];if(F.includes("@language")&&Mi(w)){const M=Bi(S,y,"@direction");b=yk(S,w,M,o)}else if(F.includes("@index")&&Mi(w)){const M=F.includes("@graph"),P=Bi(S,y,"@index")||"@index",D=P!=="@index"&&Jn(t,P,{vocab:!0},o);b=await Bh({activeCtx:S,options:o,activeProperty:y,value:w,expansionMap:u,asGraph:M,indexKey:P,propertyIndex:D})}else if(F.includes("@id")&&Mi(w)){const M=F.includes("@graph");b=await Bh({activeCtx:S,options:o,activeProperty:y,value:w,expansionMap:u,asGraph:M,indexKey:"@id"})}else if(F.includes("@type")&&Mi(w))b=await Bh({activeCtx:S.revertToPreviousContext(),options:o,activeProperty:y,value:w,expansionMap:u,asGraph:!1,indexKey:"@type"});else{const M=E==="@list";if(M||E==="@set"){let P=e;M&&n==="@graph"&&(P=null),b=await Es.expand({activeCtx:S,activeProperty:P,element:w,options:o,insideList:M,expansionMap:u})}else Bi(t,y,"@type")==="@json"?b={"@type":"@json","@value":w}:b=await Es.expand({activeCtx:S,activeProperty:y,element:w,options:o,insideList:!1,expansionMap:u})}if(!(b===null&&E!=="@value"&&(b=u({unmappedValue:w,expandedProperty:E,activeCtx:S,activeProperty:e,parent:r,options:o,insideList:s,key:y,expandedParent:i}),b===void 0))){if(E!=="@list"&&!$h(b)&&F.includes("@list")&&(b={"@list":no(b)}),F.includes("@graph")&&!F.some(M=>M==="@id"||M==="@index")&&(b=no(b).map(M=>({"@graph":no(M)}))),S.mappings.has(y)&&S.mappings.get(y).reverse){const M=i["@reverse"]=i["@reverse"]||{};b=no(b);for(let P=0;P<b.length;++P){const D=b[P];if(tg(D)||$h(D))throw new En('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:b});Ai(M,E,D,{propertyIsArray:!0})}continue}Ai(i,E,b,{propertyIsArray:!0})}}if("@value"in i&&!(i["@type"]==="@json"&&id(t,1.1))){if((Mi(p)||$i(p))&&!o.isFrame)throw new En('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:p})}for(const y of d){const w=$i(r[y])?r[y]:[r[y]];for(const b of w){if(!Mi(b)||Object.keys(b).some(E=>Jn(t,E,{vocab:!0},o)==="@value"))throw new En("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:b});await w1({activeCtx:t,activeProperty:e,expandedActiveProperty:n,element:b,expandedParent:i,options:o,insideList:s,typeScopedContext:c,typeKey:a,expansionMap:u})}}}function v1({activeCtx:t,activeProperty:e,value:n,options:r}){if(n==null)return null;const i=Jn(t,e,{vocab:!0},r);if(i==="@id")return Jn(t,n,{base:!0},r);if(i==="@type")return Jn(t,n,{vocab:!0,base:!0},r);const o=Bi(t,e,"@type");if((o==="@id"||i==="@graph")&&qr(n))return{"@id":Jn(t,n,{base:!0},r)};if(o==="@vocab"&&qr(n))return{"@id":Jn(t,n,{vocab:!0,base:!0},r)};if(ng(i))return n;const s={};if(o&&!["@id","@vocab","@none"].includes(o))s["@type"]=o;else if(qr(n)){const a=Bi(t,e,"@language");a!==null&&(s["@language"]=a);const c=Bi(t,e,"@direction");c!==null&&(s["@direction"]=c)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),s["@value"]=n,s}function yk(t,e,n,r){const i=[],o=Object.keys(e).sort();for(const s of o){const a=Jn(t,s,{vocab:!0},r);let c=e[s];$i(c)||(c=[c]);for(const u of c){if(u===null)continue;if(!qr(u))throw new En("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:e});const l={"@value":u};a!=="@none"&&(l["@language"]=s.toLowerCase()),n&&(l["@direction"]=n),i.push(l)}}return i}async function Bh({activeCtx:t,options:e,activeProperty:n,value:r,expansionMap:i,asGraph:o,indexKey:s,propertyIndex:a}){const c=[],u=Object.keys(r).sort(),l=s==="@type";for(let d of u){if(l){const y=Bi(t,d,"@context");Od(y)||(t=await yu({activeCtx:t,localCtx:y,propagate:!1,options:e}))}let p=r[d];$i(p)||(p=[p]),p=await Es.expand({activeCtx:t,activeProperty:n,element:p,options:e,insideList:!1,insideIndex:!0,expansionMap:i});let g;a?d==="@none"?g="@none":g=v1({activeCtx:t,activeProperty:s,value:d,options:e}):g=Jn(t,d,{vocab:!0},e),s==="@id"?d=Jn(t,d,{base:!0},e):l&&(d=g);for(let y of p){if(o&&!dk(y)&&(y={"@graph":[y]}),s==="@type")g==="@none"||(y["@type"]?y["@type"]=[d].concat(y["@type"]):y["@type"]=[d]);else{if(tg(y)&&!["@language","@type","@index"].includes(s))throw new En(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${s}".`,"jsonld.SyntaxError",{code:"invalid value object",value:y});a?g!=="@none"&&Ai(y,a,g,{propertyIsArray:!0,prependValue:!0}):g!=="@none"&&!(s in y)&&(y[s]=d)}c.push(y)}}return c}const{isKeyword:b1}=Na,yo=us,Hh=Ji,Eo=fo,_k=Lo,ni={};var Sf=ni;ni.createMergedNodeMap=(t,e)=>{e=e||{};const n=e.issuer||new Eo.IdentifierIssuer("_:b"),r={"@default":{}};return ni.createNodeMap(t,r,"@default",n),ni.mergeNodeMaps(r)};ni.createNodeMap=(t,e,n,r,i,o)=>{if(Hh.isArray(t)){for(const u of t)ni.createNodeMap(u,e,n,r,void 0,o);return}if(!Hh.isObject(t)){o&&o.push(t);return}if(yo.isValue(t)){if("@type"in t){let u=t["@type"];u.indexOf("_:")===0&&(t["@type"]=u=r.getId(u))}o&&o.push(t);return}else if(o&&yo.isList(t)){const u=[];ni.createNodeMap(t["@list"],e,n,r,i,u),o.push({"@list":u});return}if("@type"in t){const u=t["@type"];for(const l of u)l.indexOf("_:")===0&&r.getId(l)}Hh.isUndefined(i)&&(i=yo.isBlankNode(t)?r.getId(t["@id"]):t["@id"]),o&&o.push({"@id":i});const s=e[n],a=s[i]=s[i]||{};a["@id"]=i;const c=Object.keys(t).sort();for(let u of c){if(u==="@id")continue;if(u==="@reverse"){const d={"@id":i},p=t["@reverse"];for(const g in p){const y=p[g];for(const w of y){let b=w["@id"];yo.isBlankNode(w)&&(b=r.getId(b)),ni.createNodeMap(w,e,n,r,b),Eo.addValue(s[b],g,d,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(u==="@graph"){i in e||(e[i]={}),ni.createNodeMap(t[u],e,i,r);continue}if(u==="@included"){ni.createNodeMap(t[u],e,n,r);continue}if(u!=="@type"&&b1(u)){if(u==="@index"&&u in a&&(t[u]!==a[u]||t[u]["@id"]!==a[u]["@id"]))throw new _k("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:a});a[u]=t[u];continue}const l=t[u];if(u.indexOf("_:")===0&&(u=r.getId(u)),l.length===0){Eo.addValue(a,u,[],{propertyIsArray:!0});continue}for(let d of l)if(u==="@type"&&(d=d.indexOf("_:")===0?r.getId(d):d),yo.isSubject(d)||yo.isSubjectReference(d)){if("@id"in d&&!d["@id"])continue;const p=yo.isBlankNode(d)?r.getId(d["@id"]):d["@id"];Eo.addValue(a,u,{"@id":p},{propertyIsArray:!0,allowDuplicate:!1}),ni.createNodeMap(d,e,n,r,p)}else if(yo.isValue(d))Eo.addValue(a,u,d,{propertyIsArray:!0,allowDuplicate:!1});else if(yo.isList(d)){const p=[];ni.createNodeMap(d["@list"],e,n,r,i,p),d={"@list":p},Eo.addValue(a,u,d,{propertyIsArray:!0,allowDuplicate:!1})}else ni.createNodeMap(d,e,n,r,i),Eo.addValue(a,u,d,{propertyIsArray:!0,allowDuplicate:!1})}};ni.mergeNodeMapGraphs=t=>{const e={};for(const n of Object.keys(t).sort())for(const r of Object.keys(t[n]).sort()){const i=t[n][r];r in e||(e[r]={"@id":r});const o=e[r];for(const s of Object.keys(i).sort())if(b1(s)&&s!=="@type")o[s]=Eo.clone(i[s]);else for(const a of i[s])Eo.addValue(o,s,Eo.clone(a),{propertyIsArray:!0,allowDuplicate:!1})}return e};ni.mergeNodeMaps=t=>{const e=t["@default"],n=Object.keys(t).sort();for(const r of n){if(r==="@default")continue;const i=t[r];let o=e[r];o?"@graph"in o||(o["@graph"]=[]):e[r]=o={"@id":r,"@graph":[]};const s=o["@graph"];for(const a of Object.keys(i).sort()){const c=i[a];yo.isSubjectReference(c)||s.push(c)}}return e};const{isSubjectReference:wk}=us,{createMergedNodeMap:vk}=Sf,E1={};var bk=E1;E1.flatten=t=>{const e=vk(t),n=[],r=Object.keys(e).sort();for(let i=0;i<r.length;++i){const o=e[r[i]];wk(o)||n.push(o)}return n};const Ek=Lo,Kh=us,lu=Ji,Jy=fo,{RDF_LIST:Sk,RDF_FIRST:Wh,RDF_REST:qh,RDF_NIL:Vh,RDF_TYPE:Tk,RDF_JSON_LITERAL:Ak,XSD_BOOLEAN:Zy,XSD_DOUBLE:Qy,XSD_INTEGER:Xy,XSD_STRING:Gh}=M0,xk=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,S1={};var Ik=S1;S1.fromRDF=async(t,{useRdfType:e=!1,useNativeTypes:n=!1,rdfDirection:r=null})=>{const i={},o={"@default":i},s={};for(const u of t){const l=u.graph.termType==="DefaultGraph"?"@default":u.graph.value;l in o||(o[l]={}),l!=="@default"&&!(l in i)&&(i[l]={"@id":l});const d=o[l],p=u.subject.value,g=u.predicate.value,y=u.object;p in d||(d[p]={"@id":p});const w=d[p],b=y.termType.endsWith("Node");if(b&&!(y.value in d)&&(d[y.value]={"@id":y.value}),g===Tk&&!e&&b){Jy.addValue(w,"@type",y.value,{propertyIsArray:!0});continue}const E=Rk(y,n,r);if(Jy.addValue(w,g,E,{propertyIsArray:!0}),b)if(y.value===Vh){const S=d[y.value];"usages"in S||(S.usages=[]),S.usages.push({node:w,property:g,value:E})}else y.value in s?s[y.value]=!1:s[y.value]={node:w,property:g,value:E}}for(const u in o){const l=o[u];if(!(Vh in l))continue;const d=l[Vh];if(!!d.usages){for(let p of d.usages){let g=p.node,y=p.property,w=p.value;const b=[],E=[];let S=Object.keys(g).length;for(;y===qh&&lu.isObject(s[g["@id"]])&&lu.isArray(g[Wh])&&g[Wh].length===1&&lu.isArray(g[qh])&&g[qh].length===1&&(S===3||S===4&&lu.isArray(g["@type"])&&g["@type"].length===1&&g["@type"][0]===Sk)&&(b.push(g[Wh][0]),E.push(g["@id"]),p=s[g["@id"]],g=p.node,y=p.property,w=p.value,S=Object.keys(g).length,!!Kh.isBlankNode(g)););delete w["@id"],w["@list"]=b.reverse();for(const R of E)delete l[R]}delete d.usages}}const a=[],c=Object.keys(i).sort();for(const u of c){const l=i[u];if(u in o){const d=l["@graph"]=[],p=o[u],g=Object.keys(p).sort();for(const y of g){const w=p[y];Kh.isSubjectReference(w)||d.push(w)}}Kh.isSubjectReference(l)||a.push(l)}return a};function Rk(t,e,n){if(t.termType.endsWith("Node"))return{"@id":t.value};const r={"@value":t.value};if(t.language)r["@language"]=t.language;else{let i=t.datatype.value;if(i||(i=Gh),i===Ak){i="@json";try{r["@value"]=JSON.parse(r["@value"])}catch(o){throw new Ek("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:r["@value"],cause:o})}}if(e){if(i===Zy)r["@value"]==="true"?r["@value"]=!0:r["@value"]==="false"&&(r["@value"]=!1);else if(lu.isNumeric(r["@value"]))if(i===Xy){const o=parseInt(r["@value"],10);o.toFixed(0)===r["@value"]&&(r["@value"]=o)}else i===Qy&&(r["@value"]=parseFloat(r["@value"]));[Zy,Xy,Qy,Gh].includes(i)||(r["@type"]=i)}else if(n==="i18n-datatype"&&i.startsWith("https://www.w3.org/ns/i18n#")){const[,o,s]=i.split(/[#_]/);o.length>0&&(r["@language"]=o,o.match(xk)||console.warn(`@language must be valid BCP47: ${o}`)),r["@direction"]=s}else i!==Gh&&(r["@type"]=i)}return r}var kk=function t(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((n,r,i)=>{const o=i===0?"":",",s=r===void 0||typeof r=="symbol"?null:r;return n+o+t(s)},"")+"]":"{"+Object.keys(e).sort().reduce((n,r,i)=>{if(e[r]===void 0||typeof e[r]=="symbol")return n;const o=n.length===0?"":",";return n+o+t(r)+":"+t(e[r])},"")+"}"};const{createNodeMap:Fk}=Sf,{isKeyword:Dk}=Na,e_=us,Ck=kk,ru=Ji,Pk=fo,{RDF_FIRST:Nk,RDF_REST:Ok,RDF_NIL:Mk,RDF_TYPE:Lk,RDF_JSON_LITERAL:Uk,RDF_LANGSTRING:jk,XSD_BOOLEAN:$k,XSD_DOUBLE:t_,XSD_INTEGER:Bk,XSD_STRING:Hk}=M0,{isAbsolute:Md}=$s,T1={};var Kk=T1;T1.toRDF=(t,e)=>{const n=new Pk.IdentifierIssuer("_:b"),r={"@default":{}};Fk(t,r,"@default",n);const i=[],o=Object.keys(r).sort();for(const s of o){let a;if(s==="@default")a={termType:"DefaultGraph",value:""};else if(Md(s))s.startsWith("_:")?a={termType:"BlankNode"}:a={termType:"NamedNode"},a.value=s;else continue;Wk(i,r[s],a,n,e)}return i};function Wk(t,e,n,r,i){const o=Object.keys(e).sort();for(const s of o){const a=e[s],c=Object.keys(a).sort();for(let u of c){const l=a[u];if(u==="@type")u=Lk;else if(Dk(u))continue;for(const d of l){const p={termType:s.startsWith("_:")?"BlankNode":"NamedNode",value:s};if(!Md(s))continue;const g={termType:u.startsWith("_:")?"BlankNode":"NamedNode",value:u};if(!Md(u)||g.termType==="BlankNode"&&!i.produceGeneralizedRdf)continue;const y=rg(d,r,t,n,i.rdfDirection);y&&t.push({subject:p,predicate:g,object:y,graph:n})}}}}function qk(t,e,n,r,i){const o={termType:"NamedNode",value:Nk},s={termType:"NamedNode",value:Ok},a={termType:"NamedNode",value:Mk},c=t.pop(),u=c?{termType:"BlankNode",value:e.getId()}:a;let l=u;for(const d of t){const p=rg(d,e,n,r,i),g={termType:"BlankNode",value:e.getId()};n.push({subject:l,predicate:o,object:p,graph:r}),n.push({subject:l,predicate:s,object:g,graph:r}),l=g}if(c){const d=rg(c,e,n,r,i);n.push({subject:l,predicate:o,object:d,graph:r}),n.push({subject:l,predicate:s,object:a,graph:r})}return u}function rg(t,e,n,r,i){const o={};if(e_.isValue(t)){o.termType="Literal",o.value=void 0,o.datatype={termType:"NamedNode"};let s=t["@value"];const a=t["@type"]||null;if(a==="@json")o.value=Ck(s),o.datatype.value=Uk;else if(ru.isBoolean(s))o.value=s.toString(),o.datatype.value=a||$k;else if(ru.isDouble(s)||a===t_)ru.isDouble(s)||(s=parseFloat(s)),o.value=s.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),o.datatype.value=a||t_;else if(ru.isNumber(s))o.value=s.toFixed(0),o.datatype.value=a||Bk;else if(i==="i18n-datatype"&&"@direction"in t){const c="https://www.w3.org/ns/i18n#"+(t["@language"]||"")+`_${t["@direction"]}`;o.datatype.value=c,o.value=s}else"@language"in t?(o.value=s,o.datatype.value=a||jk,o.language=t["@language"]):(o.value=s,o.datatype.value=a||Hk)}else if(e_.isList(t)){const s=qk(t["@list"],e,n,r,i);o.termType=s.termType,o.value=s.value}else{const s=ru.isObject(t)?t["@id"]:t;o.termType=s.startsWith("_:")?"BlankNode":"NamedNode",o.value=s}return o.termType==="NamedNode"&&!Md(o.value)?null:o}const{isKeyword:ig}=Na,Ui=us,tn=Ji,xr=fo,n_=$s,_u=Lo,{createNodeMap:Vk,mergeNodeMapGraphs:Gk}=Sf,ji={};var zk=ji;ji.frameMergedOrDefault=(t,e,n)=>{const r={options:n,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},i=new xr.IdentifierIssuer("_:b");Vk(t,r.graphMap,"@default",i),n.merged&&(r.graphMap["@merged"]=Gk(r.graphMap),r.graph="@merged"),r.subjects=r.graphMap[r.graph];const o=[];ji.frame(r,Object.keys(r.subjects).sort(),e,o),n.pruneBlankNodeIdentifiers&&(n.bnodesToClear=Object.keys(r.bnodeMap).filter(s=>r.bnodeMap[s].length===1));// remove @preserve from results
return n.link={},od(o,n)};ji.frame=(t,e,n,r,i=null)=>{A1(n),n=n[0];const o=t.options,s={embed:Ul(n,o,"embed"),explicit:Ul(n,o,"explicit"),requireAll:Ul(n,o,"requireAll")};t.link.hasOwnProperty(t.graph)||(t.link[t.graph]={});const a=t.link[t.graph],c=Jk(t,e,n,s),u=Object.keys(c).sort();for(const l of u){const d=c[l];if(i===null?t.uniqueEmbeds={[t.graph]:{}}:t.uniqueEmbeds[t.graph]=t.uniqueEmbeds[t.graph]||{},s.embed==="@link"&&l in a){Xs(r,i,a[l]);continue}const p={"@id":l};if(l.indexOf("_:")===0&&xr.addValue(t.bnodeMap,l,p,{propertyIsArray:!0}),a[l]=p,(s.embed==="@first"||s.embed==="@last")&&t.is11)throw new _u("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:n});if(!(!t.embedded&&t.uniqueEmbeds[t.graph].hasOwnProperty(l))){if(t.embedded&&(s.embed==="@never"||Yk(d,t.graph,t.subjectStack))){Xs(r,i,p);continue}if(t.embedded&&(s.embed=="@first"||s.embed=="@once")&&t.uniqueEmbeds[t.graph].hasOwnProperty(l)){Xs(r,i,p);continue}if(s.embed==="@last"&&l in t.uniqueEmbeds[t.graph]&&Zk(t,l),t.uniqueEmbeds[t.graph][l]={parent:r,property:i},t.subjectStack.push({subject:d,graph:t.graph}),l in t.graphMap){let g=!1,y=null;"@graph"in n?(y=n["@graph"][0],g=!(l==="@merged"||l==="@default"),tn.isObject(y)||(y={})):(g=t.graph!=="@merged",y={}),g&&ji.frame({...t,graph:l,embedded:!1},Object.keys(t.graphMap[l]).sort(),[y],p,"@graph")}"@included"in n&&ji.frame({...t,embedded:!1},e,n["@included"],p,"@included");for(const g of Object.keys(d).sort()){if(ig(g)){if(p[g]=xr.clone(d[g]),g==="@type")for(const y of d["@type"])y.indexOf("_:")===0&&xr.addValue(t.bnodeMap,y,p,{propertyIsArray:!0});continue}if(!(s.explicit&&!(g in n)))for(const y of d[g]){const w=g in n?n[g]:r_(s);if(Ui.isList(y)){const b=n[g]&&n[g][0]&&n[g][0]["@list"]?n[g][0]["@list"]:r_(s),E={"@list":[]};Xs(p,g,E);const S=y["@list"];for(const R of S)Ui.isSubjectReference(R)?ji.frame({...t,embedded:!0},[R["@id"]],b,E,"@list"):Xs(E,"@list",xr.clone(R))}else Ui.isSubjectReference(y)?ji.frame({...t,embedded:!0},[y["@id"]],w,p,g):og(w[0],y)&&Xs(p,g,xr.clone(y))}}for(const g of Object.keys(n).sort()){if(g==="@type"){if(!tn.isObject(n[g][0])||!("@default"in n[g][0]))continue}else if(ig(g))continue;const y=n[g][0]||{};if(!Ul(y,o,"omitDefault")&&!(g in p)){let b="@null";"@default"in y&&(b=xr.clone(y["@default"])),tn.isArray(b)||(b=[b]),p[g]=[{"@preserve":b}]}}for(const g of Object.keys(n["@reverse"]||{}).sort()){const y=n["@reverse"][g];for(const w of Object.keys(t.subjects))xr.getValues(t.subjects[w],g).some(E=>E["@id"]===l)&&(p["@reverse"]=p["@reverse"]||{},xr.addValue(p["@reverse"],g,[],{propertyIsArray:!0}),ji.frame({...t,embedded:!0},[w],y,p["@reverse"][g],i))}Xs(r,i,p),t.subjectStack.pop()}}};ji.cleanupNull=(t,e)=>{if(tn.isArray(t))return t.map(r=>ji.cleanupNull(r,e)).filter(r=>r);if(t==="@null")return null;if(tn.isObject(t)){if("@id"in t){const n=t["@id"];if(e.link.hasOwnProperty(n)){const r=e.link[n].indexOf(t);if(r!==-1)return e.link[n][r];e.link[n].push(t)}else e.link[n]=[t]}for(const n in t)t[n]=ji.cleanupNull(t[n],e)}return t};function r_(t){const e={};for(const n in t)t[n]!==void 0&&(e["@"+n]=[t[n]]);return[e]}function Yk(t,e,n){for(let r=n.length-1;r>=0;--r){const i=n[r];if(i.graph===e&&i.subject["@id"]===t["@id"])return!0}return!1}function Ul(t,e,n){const r="@"+n;let i=r in t?t[r][0]:e[n];if(n==="embed"){if(i===!0)i="@once";else if(i===!1)i="@never";else if(i!=="@always"&&i!=="@never"&&i!=="@link"&&i!=="@first"&&i!=="@last"&&i!=="@once")throw new _u("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:t})}return i}function A1(t){if(!tn.isArray(t)||t.length!==1||!tn.isObject(t[0]))throw new _u("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:t});if("@id"in t[0]){for(const e of xr.asArray(t[0]["@id"]))if(!(tn.isObject(e)||n_.isAbsolute(e))||tn.isString(e)&&e.indexOf("_:")===0)throw new _u("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:t})}if("@type"in t[0]){for(const e of xr.asArray(t[0]["@type"]))if(!(tn.isObject(e)||n_.isAbsolute(e))||tn.isString(e)&&e.indexOf("_:")===0)throw new _u("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:t})}}function Jk(t,e,n,r){const i={};for(const o of e){const s=t.graphMap[t.graph][o];x1(t,s,n,r)&&(i[o]=s)}return i}function x1(t,e,n,r){let i=!0,o=!1;for(const s in n){let a=!1;const c=xr.getValues(e,s),u=xr.getValues(n,s).length===0;if(s==="@id"){if(tn.isEmptyObject(n["@id"][0]||{})?a=!0:n["@id"].length>=0&&(a=n["@id"].includes(c[0])),!r.requireAll)return a}else if(s==="@type"){if(i=!1,u){if(c.length>0)return!1;a=!0}else if(n["@type"].length===1&&tn.isEmptyObject(n["@type"][0]))a=c.length>0;else for(const l of n["@type"])tn.isObject(l)&&"@default"in l?a=!0:a=a||c.some(d=>d===l);if(!r.requireAll)return a}else{if(ig(s))continue;{const l=xr.getValues(n,s)[0];let d=!1;if(l&&(A1([l]),d="@default"in l),i=!1,c.length===0&&d)continue;if(c.length>0&&u)return!1;if(l===void 0){if(c.length>0)return!1;a=!0}else if(Ui.isList(l)){const p=l["@list"][0];if(Ui.isList(c[0])){const g=c[0]["@list"];Ui.isValue(p)?a=g.some(y=>og(p,y)):(Ui.isSubject(p)||Ui.isSubjectReference(p))&&(a=g.some(y=>i_(t,p,y,r)))}}else Ui.isValue(l)?a=c.some(p=>og(l,p)):Ui.isSubjectReference(l)?a=c.some(p=>i_(t,l,p,r)):tn.isObject(l)?a=c.length>0:a=!1}}if(!a&&r.requireAll)return!1;o=o||a}return i||o}function Zk(t,e){const n=t.uniqueEmbeds[t.graph],r=n[e],i=r.parent,o=r.property,s={"@id":e};if(tn.isArray(i)){for(let c=0;c<i.length;++c)if(xr.compareValues(i[c],s)){i[c]=s;break}}else{const c=tn.isArray(i[o]);xr.removeValue(i,o,s,{propertyIsArray:c}),xr.addValue(i,o,s,{propertyIsArray:c})}const a=c=>{const u=Object.keys(n);for(const l of u)l in n&&tn.isObject(n[l].parent)&&n[l].parent["@id"]===c&&(delete n[l],a(l))};a(e)}/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function od(t,e){if(tn.isArray(t))return t.map(n=>od(n,e));if(tn.isObject(t)){// remove @preserve
if("@preserve"in t)return t["@preserve"][0];if(Ui.isValue(t))return t;if(Ui.isList(t))return t["@list"]=od(t["@list"],e),t;if("@id"in t){const n=t["@id"];if(e.link.hasOwnProperty(n)){const r=e.link[n].indexOf(t);if(r!==-1)return e.link[n][r];e.link[n].push(t)}else e.link[n]=[t]}for(const n in t){if(n==="@id"&&e.bnodesToClear.includes(t[n])){delete t["@id"];continue}t[n]=od(t[n],e)}}return t}function Xs(t,e,n){tn.isObject(t)?xr.addValue(t,e,n,{propertyIsArray:!0}):t.push(n)}function i_(t,e,n,r){if(!("@id"in n))return!1;const i=t.subjects[n["@id"]];return i&&x1(t,i,e,r)}function og(t,e){const n=e["@value"],r=e["@type"],i=e["@language"],o=t["@value"]?tn.isArray(t["@value"])?t["@value"]:[t["@value"]]:[],s=t["@type"]?tn.isArray(t["@type"])?t["@type"]:[t["@type"]]:[],a=t["@language"]?tn.isArray(t["@language"])?t["@language"]:[t["@language"]]:[];return o.length===0&&s.length===0&&a.length===0?!0:!(!(o.includes(n)||tn.isEmptyObject(o[0]))||!(!r&&s.length===0||s.includes(r)||r&&tn.isEmptyObject(s[0]))||!(!i&&a.length===0||a.includes(i)||i&&tn.isEmptyObject(a[0])))}const U0=Lo,{isArray:fs,isObject:Ss,isString:I1,isUndefined:zh}=Ji,{isList:sg,isValue:Zo,isGraph:R1,isSimpleGraph:o_,isSubjectReference:Yh}=us,{expandIri:k1,getContextValue:ti,isKeyword:F1,process:Jh,processingMode:Qk}=Na,{removeBase:s_,prependBase:Xk}=$s,{addValue:Si,asArray:jl,compareShortestLeast:e3}=fo,ct={};var t3=ct;ct.compact=async({activeCtx:t,activeProperty:e=null,element:n,options:r={},compactionMap:i=()=>{}})=>{if(fs(n)){let s=[];for(let a=0;a<n.length;++a){let c=await ct.compact({activeCtx:t,activeProperty:e,element:n[a],options:r,compactionMap:i});c===null&&(c=await i({unmappedValue:n[a],activeCtx:t,activeProperty:e,parent:n,index:a,options:r}),c===void 0)||s.push(c)}return r.compactArrays&&s.length===1&&(ti(t,e,"@container")||[]).length===0&&(s=s[0]),s}const o=ti(t,e,"@context");if(zh(o)||(t=await Jh({activeCtx:t,localCtx:o,propagate:!0,overrideProtected:!0,options:r})),Ss(n)){if(r.link&&"@id"in n&&r.link.hasOwnProperty(n["@id"])){const g=r.link[n["@id"]];for(let y=0;y<g.length;++y)if(g[y].expanded===n)return g[y].compacted}if(Zo(n)||Yh(n)){const g=ct.compactValue({activeCtx:t,activeProperty:e,value:n,options:r});return r.link&&Yh(n)&&(r.link.hasOwnProperty(n["@id"])||(r.link[n["@id"]]=[]),r.link[n["@id"]].push({expanded:n,compacted:g})),g}if(sg(n)&&(ti(t,e,"@container")||[]).includes("@list"))return ct.compact({activeCtx:t,activeProperty:e,element:n["@list"],options:r,compactionMap:i});const s=e==="@reverse",a={},c=t;!Zo(n)&&!Yh(n)&&(t=t.revertToPreviousContext());const u=ti(c,e,"@context");zh(u)||(t=await Jh({activeCtx:t,localCtx:u,propagate:!0,overrideProtected:!0,options:r})),r.link&&"@id"in n&&(r.link.hasOwnProperty(n["@id"])||(r.link[n["@id"]]=[]),r.link[n["@id"]].push({expanded:n,compacted:a}));let l=n["@type"]||[];l.length>1&&(l=Array.from(l).sort());const d=t;for(const g of l){const y=ct.compactIri({activeCtx:d,iri:g,relativeTo:{vocab:!0}}),w=ti(c,y,"@context");zh(w)||(t=await Jh({activeCtx:t,localCtx:w,options:r,propagate:!1}))}const p=Object.keys(n).sort();for(const g of p){const y=n[g];if(g==="@id"){let w=jl(y).map(E=>ct.compactIri({activeCtx:t,iri:E,relativeTo:{vocab:!1},base:r.base}));w.length===1&&(w=w[0]);const b=ct.compactIri({activeCtx:t,iri:"@id",relativeTo:{vocab:!0}});a[b]=w;continue}if(g==="@type"){let w=jl(y).map(F=>ct.compactIri({activeCtx:c,iri:F,relativeTo:{vocab:!0}}));w.length===1&&(w=w[0]);const b=ct.compactIri({activeCtx:t,iri:"@type",relativeTo:{vocab:!0}}),R=(ti(t,b,"@container")||[]).includes("@set")&&Qk(t,1.1)||fs(w)&&y.length===0;Si(a,b,w,{propertyIsArray:R});continue}if(g==="@reverse"){const w=await ct.compact({activeCtx:t,activeProperty:"@reverse",element:y,options:r,compactionMap:i});for(const b in w)if(t.mappings.has(b)&&t.mappings.get(b).reverse){const E=w[b],R=(ti(t,b,"@container")||[]).includes("@set")||!r.compactArrays;Si(a,b,E,{propertyIsArray:R}),delete w[b]}if(Object.keys(w).length>0){const b=ct.compactIri({activeCtx:t,iri:g,relativeTo:{vocab:!0}});Si(a,b,w)}continue}if(g==="@preserve"){const w=await ct.compact({activeCtx:t,activeProperty:e,element:y,options:r,compactionMap:i});fs(w)&&w.length===0||Si(a,g,w);continue}if(g==="@index"){if((ti(t,e,"@container")||[]).includes("@index"))continue;const b=ct.compactIri({activeCtx:t,iri:g,relativeTo:{vocab:!0}});Si(a,b,y);continue}if(g!=="@graph"&&g!=="@list"&&g!=="@included"&&F1(g)){const w=ct.compactIri({activeCtx:t,iri:g,relativeTo:{vocab:!0}});Si(a,w,y);continue}if(!fs(y))throw new U0("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(y.length===0){const w=ct.compactIri({activeCtx:t,iri:g,value:y,relativeTo:{vocab:!0},reverse:s}),b=t.mappings.has(w)?t.mappings.get(w)["@nest"]:null;let E=a;b&&(a_(t,b,r),Ss(a[b])||(a[b]={}),E=a[b]),Si(E,w,y,{propertyIsArray:!0})}for(const w of y){const b=ct.compactIri({activeCtx:t,iri:g,value:w,relativeTo:{vocab:!0},reverse:s}),E=t.mappings.has(b)?t.mappings.get(b)["@nest"]:null;let S=a;E&&(a_(t,E,r),Ss(a[E])||(a[E]={}),S=a[E]);const R=ti(t,b,"@container")||[],F=R1(w),M=sg(w);let P;M?P=w["@list"]:F&&(P=w["@graph"]);let D=await ct.compact({activeCtx:t,activeProperty:b,element:M||F?P:w,options:r,compactionMap:i});if(M)if(fs(D)||(D=[D]),!R.includes("@list"))D={[ct.compactIri({activeCtx:t,iri:"@list",relativeTo:{vocab:!0}})]:D},"@index"in w&&(D[ct.compactIri({activeCtx:t,iri:"@index",relativeTo:{vocab:!0}})]=w["@index"]);else{Si(S,b,D,{valueIsArray:!0,allowDuplicate:!0});continue}if(F)if(R.includes("@graph")&&(R.includes("@id")||R.includes("@index")&&o_(w))){let Y;S.hasOwnProperty(b)?Y=S[b]:S[b]=Y={};const Q=(R.includes("@id")?w["@id"]:w["@index"])||ct.compactIri({activeCtx:t,iri:"@none",relativeTo:{vocab:!0}});Si(Y,Q,D,{propertyIsArray:!r.compactArrays||R.includes("@set")})}else R.includes("@graph")&&o_(w)?(fs(D)&&D.length>1&&(D={"@included":D}),Si(S,b,D,{propertyIsArray:!r.compactArrays||R.includes("@set")})):(fs(D)&&D.length===1&&r.compactArrays&&(D=D[0]),D={[ct.compactIri({activeCtx:t,iri:"@graph",relativeTo:{vocab:!0}})]:D},"@id"in w&&(D[ct.compactIri({activeCtx:t,iri:"@id",relativeTo:{vocab:!0}})]=w["@id"]),"@index"in w&&(D[ct.compactIri({activeCtx:t,iri:"@index",relativeTo:{vocab:!0}})]=w["@index"]),Si(S,b,D,{propertyIsArray:!r.compactArrays||R.includes("@set")}));else if(R.includes("@language")||R.includes("@index")||R.includes("@id")||R.includes("@type")){let Y;S.hasOwnProperty(b)?Y=S[b]:S[b]=Y={};let Q;if(R.includes("@language"))Zo(D)&&(D=D["@value"]),Q=w["@language"];else if(R.includes("@index")){const B=ti(t,b,"@index")||"@index",se=ct.compactIri({activeCtx:t,iri:B,relativeTo:{vocab:!0}});if(B==="@index")Q=w["@index"],delete D[se];else{let Ae;if([Q,...Ae]=jl(D[B]||[]),!I1(Q))Q=null;else switch(Ae.length){case 0:delete D[B];break;case 1:D[B]=Ae[0];break;default:D[B]=Ae;break}}}else if(R.includes("@id")){const B=ct.compactIri({activeCtx:t,iri:"@id",relativeTo:{vocab:!0}});Q=D[B],delete D[B]}else if(R.includes("@type")){const B=ct.compactIri({activeCtx:t,iri:"@type",relativeTo:{vocab:!0}});let se;switch([Q,...se]=jl(D[B]||[]),se.length){case 0:delete D[B];break;case 1:D[B]=se[0];break;default:D[B]=se;break}Object.keys(D).length===1&&"@id"in w&&(D=await ct.compact({activeCtx:t,activeProperty:b,element:{"@id":w["@id"]},options:r,compactionMap:i}))}Q||(Q=ct.compactIri({activeCtx:t,iri:"@none",relativeTo:{vocab:!0}})),Si(Y,Q,D,{propertyIsArray:R.includes("@set")})}else{const Y=!r.compactArrays||R.includes("@set")||R.includes("@list")||fs(D)&&D.length===0||g==="@list"||g==="@graph";Si(S,b,D,{propertyIsArray:Y})}}}return a}return n};ct.compactIri=({activeCtx:t,iri:e,value:n=null,relativeTo:r={vocab:!1},reverse:i=!1,base:o=null})=>{if(e===null)return e;t.isPropertyTermScoped&&t.previousContext&&(t=t.previousContext);const s=t.getInverse();if(F1(e)&&e in s&&"@none"in s[e]&&"@type"in s[e]["@none"]&&"@none"in s[e]["@none"]["@type"])return s[e]["@none"]["@type"]["@none"];if(r.vocab&&e in s){const d=t["@language"]||"@none",p=[];Ss(n)&&"@index"in n&&!("@graph"in n)&&p.push("@index","@index@set"),Ss(n)&&"@preserve"in n&&(n=n["@preserve"][0]),R1(n)?("@index"in n&&p.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n&&p.push("@graph@id","@graph@id@set"),p.push("@graph","@graph@set","@set"),"@index"in n||p.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n||p.push("@graph@id","@graph@id@set")):Ss(n)&&!Zo(n)&&p.push("@id","@id@set","@type","@set@type");let g="@language",y="@null";if(i)g="@type",y="@reverse",p.push("@set");else if(sg(n)){"@index"in n||p.push("@list");const b=n["@list"];if(b.length===0)g="@any",y="@none";else{let E=b.length===0?d:null,S=null;for(let R=0;R<b.length;++R){const F=b[R];let M="@none",P="@none";if(Zo(F))if("@direction"in F){const D=(F["@language"]||"").toLowerCase(),Y=F["@direction"];M=`${D}_${Y}`}else"@language"in F?M=F["@language"].toLowerCase():"@type"in F?P=F["@type"]:M="@null";else P="@id";if(E===null?E=M:M!==E&&Zo(F)&&(E="@none"),S===null?S=P:P!==S&&(S="@none"),E==="@none"&&S==="@none")break}E=E||"@none",S=S||"@none",S!=="@none"?(g="@type",y=S):y=E}}else{if(Zo(n))if("@language"in n&&!("@index"in n)){p.push("@language","@language@set"),y=n["@language"];const b=n["@direction"];b&&(y=`${y}_${b}`)}else"@direction"in n&&!("@index"in n)?y=`_${n["@direction"]}`:"@type"in n&&(g="@type",y=n["@type"]);else g="@type",y="@id";p.push("@set")}p.push("@none"),Ss(n)&&!("@index"in n)&&p.push("@index","@index@set"),Zo(n)&&Object.keys(n).length===1&&p.push("@language","@language@set");const w=n3(t,e,n,p,g,y);if(w!==null)return w}if(r.vocab&&"@vocab"in t){const d=t["@vocab"];if(e.indexOf(d)===0&&e!==d){const p=e.substr(d.length);if(!t.mappings.has(p))return p}}let a=null;const c=[];let u=t.fastCurieMap;const l=e.length-1;for(let d=0;d<l&&e[d]in u;++d)u=u[e[d]],""in u&&c.push(u[""][0]);for(let d=c.length-1;d>=0;--d){const p=c[d],g=p.terms;for(const y of g){const w=y+":"+e.substr(p.iri.length);t.mappings.get(y)._prefix&&(!t.mappings.has(w)||n===null&&t.mappings.get(w)["@id"]===e)&&(a===null||e3(w,a)<0)&&(a=w)}}if(a!==null)return a;for(const[d,p]of t.mappings)if(p&&p._prefix&&e.startsWith(d+":"))throw new U0(`Absolute IRI "${e}" confused with prefix "${d}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:t});return r.vocab?e:"@base"in t?t["@base"]?s_(Xk(o,t["@base"]),e):e:s_(o,e)};ct.compactValue=({activeCtx:t,activeProperty:e,value:n,options:r})=>{if(Zo(n)){const a=ti(t,e,"@type"),c=ti(t,e,"@language"),u=ti(t,e,"@direction"),l=ti(t,e,"@container")||[],d="@index"in n&&!l.includes("@index");if(!d&&a!=="@none"&&(n["@type"]===a||"@language"in n&&n["@language"]===c&&"@direction"in n&&n["@direction"]===u||"@language"in n&&n["@language"]===c||"@direction"in n&&n["@direction"]===u))return n["@value"];const p=Object.keys(n).length,g=p===1||p===2&&"@index"in n&&!d,y="@language"in t,w=I1(n["@value"]),b=t.mappings.has(e)&&t.mappings.get(e)["@language"]===null;if(g&&a!=="@none"&&(!y||!w||b))return n["@value"];const E={};return d&&(E[ct.compactIri({activeCtx:t,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?E[ct.compactIri({activeCtx:t,iri:"@type",relativeTo:{vocab:!0}})]=ct.compactIri({activeCtx:t,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(E[ct.compactIri({activeCtx:t,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),"@direction"in n&&(E[ct.compactIri({activeCtx:t,iri:"@direction",relativeTo:{vocab:!0}})]=n["@direction"]),E[ct.compactIri({activeCtx:t,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],E}const i=k1(t,e,{vocab:!0},r),o=ti(t,e,"@type"),s=ct.compactIri({activeCtx:t,iri:n["@id"],relativeTo:{vocab:o==="@vocab"},base:r.base});return o==="@id"||o==="@vocab"||i==="@graph"?s:{[ct.compactIri({activeCtx:t,iri:"@id",relativeTo:{vocab:!0}})]:s}};function n3(t,e,n,r,i,o){o===null&&(o="@null");const s=[];if((o==="@id"||o==="@reverse")&&Ss(n)&&"@id"in n){o==="@reverse"&&s.push("@reverse");const c=ct.compactIri({activeCtx:t,iri:n["@id"],relativeTo:{vocab:!0}});t.mappings.has(c)&&t.mappings.get(c)&&t.mappings.get(c)["@id"]===n["@id"]?s.push.apply(s,["@vocab","@id"]):s.push.apply(s,["@id","@vocab"])}else{s.push(o);const c=s.find(u=>u.includes("_"));c&&s.push(c.replace(/^[^_]+_/,"_"))}s.push("@none");const a=t.inverse[e];for(const c of r){if(!(c in a))continue;const u=a[c][i];for(const l of s)if(l in u)return u[l]}return null}function a_(t,e,n){if(k1(t,e,{vocab:!0},n)!=="@nest")throw new U0("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}var r3=t=>{class e{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(e,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(e.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:e}),e.compact=function(n,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):t.compact(n,r)},e.expand=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):t.expand(n)},e.flatten=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):t.flatten(n)},e};/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2019 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const c_=O0,u_=V6,ps=fo,Wo=ik,Zh=ps.IdentifierIssuer,hs=Lo,i3=g1,$l=sk,{expand:o3}=gk,{flatten:s3}=bk,{fromRDF:a3}=Ik,{toRDF:c3}=Kk,{frameMergedOrDefault:u3,cleanupNull:l3}=zk,{isArray:Ya,isObject:ea,isString:go}=Ji,{isSubjectReference:d3}=us,{expandIri:f3,getInitialContext:Bl,process:l_,processingMode:Qh}=Na,{compact:h3,compactIri:p3}=t3,{createNodeMap:g3,createMergedNodeMap:m3,mergeNodeMaps:y3}=Sf,D1=function(t){const e={},r=new i3({max:100});t.compact=async function(o,s,a){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(s===null)throw new hs("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(o===null)return null;a=i(a,{base:go(o)?o:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new Zh("_:b"),contextResolver:new Wo({sharedCache:r})}),a.link&&(a.skipExpansion=!0),a.compactToRelative||delete a.base;let c;a.skipExpansion?c=o:c=await t.expand(o,a);const u=await t.processContext(Bl(a),s,a);let l=await h3({activeCtx:u,element:c,options:a,compactionMap:a.compactionMap});a.compactArrays&&!a.graph&&Ya(l)?l.length===1?l=l[0]:l.length===0&&(l={}):a.graph&&ea(l)&&(l=[l]),ea(s)&&"@context"in s&&(s=s["@context"]),s=ps.clone(s),Ya(s)||(s=[s]);const d=s;s=[];for(let g=0;g<d.length;++g)(!ea(d[g])||Object.keys(d[g]).length>0)&&s.push(d[g]);const p=s.length>0;if(s.length===1&&(s=s[0]),Ya(l)){const g=p3({activeCtx:u,iri:"@graph",relativeTo:{vocab:!0}}),y=l;l={},p&&(l["@context"]=s),l[g]=y}else if(ea(l)&&p){const g=l;l={"@context":s};for(const y in g)l[y]=g[y]}return l},t.expand=async function(o,s){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");s=i(s,{keepFreeFloatingNodes:!1,contextResolver:new Wo({sharedCache:r})}),s.expansionMap===!1&&(s.expansionMap=void 0);const a={},c=[];if("expandContext"in s){const p=ps.clone(s.expandContext);ea(p)&&"@context"in p?a.expandContext=p:a.expandContext={"@context":p},c.push(a.expandContext)}let u;if(!go(o))a.input=ps.clone(o);else{const p=await t.get(o,s);u=p.documentUrl,a.input=p.document,p.contextUrl&&(a.remoteContext={"@context":p.contextUrl},c.push(a.remoteContext))}"base"in s||(s.base=u||"");let l=Bl(s);for(const p of c)l=await l_({activeCtx:l,localCtx:p,options:s});let d=await o3({activeCtx:l,element:a.input,options:s,expansionMap:s.expansionMap});return ea(d)&&"@graph"in d&&Object.keys(d).length===1?d=d["@graph"]:d===null&&(d=[]),Ya(d)||(d=[d]),d},t.flatten=async function(o,s,a){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof s=="function"?s=null:s=s||null,a=i(a,{base:go(o)?o:"",contextResolver:new Wo({sharedCache:r})});const c=await t.expand(o,a),u=s3(c);return s===null?u:(a.graph=!0,a.skipExpansion=!0,await t.compact(u,s,a))},t.frame=async function(o,s,a){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(a=i(a,{base:go(o)?o:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new Wo({sharedCache:r})}),go(s)){const b=await t.get(s,a);if(s=b.document,b.contextUrl){let E=s["@context"];E?Ya(E)?E.push(b.contextUrl):E=[E,b.contextUrl]:E=b.contextUrl,s["@context"]=E}}const c=s?s["@context"]||{}:{},u=await t.processContext(Bl(a),c,a);a.hasOwnProperty("omitGraph")||(a.omitGraph=Qh(u,1.1)),a.hasOwnProperty("pruneBlankNodeIdentifiers")||(a.pruneBlankNodeIdentifiers=Qh(u,1.1));const l=await t.expand(o,a),d={...a};d.isFrame=!0,d.keepFreeFloatingNodes=!0;const p=await t.expand(s,d),g=Object.keys(s).map(b=>f3(u,b,{vocab:!0}));d.merged=!g.includes("@graph"),d.is11=Qh(u,1.1);const y=u3(l,p,d);d.graph=!a.omitGraph,d.skipExpansion=!0,d.link={},d.framing=!0;let w=await t.compact(y,c,d);return d.link={},w=l3(w,d),w},t.link=async function(o,s,a){const c={};return s&&(c["@context"]=s),c["@embed"]="@link",t.frame(o,c,a)},t.normalize=t.canonize=async function(o,s){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(s=i(s,{base:go(o)?o:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new Wo({sharedCache:r})}),"inputFormat"in s){if(s.inputFormat!=="application/n-quads"&&s.inputFormat!=="application/nquads")throw new hs("Unknown canonicalization input format.","jsonld.CanonizeError");const u=$l.parse(o);return c_.canonize(u,s)}const a={...s};delete a.format,a.produceGeneralizedRdf=!1;const c=await t.toRDF(o,a);return c_.canonize(c,s)},t.fromRDF=async function(o,s){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");s=i(s,{format:go(o)?"application/n-quads":void 0});const{format:a}=s;let{rdfParser:c}=s;if(a){if(c=c||e[a],!c)throw new hs("Unknown input format.","jsonld.UnknownFormat",{format:a})}else c=()=>o;const u=await c(o);return a3(u,s)},t.toRDF=async function(o,s){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");s=i(s,{base:go(o)?o:"",skipExpansion:!1,contextResolver:new Wo({sharedCache:r})});let a;s.skipExpansion?a=o:a=await t.expand(o,s);const c=c3(a,s);if(s.format){if(s.format==="application/n-quads"||s.format==="application/nquads")return $l.serialize(c);throw new hs("Unknown output format.","jsonld.UnknownFormat",{format:s.format})}return c},t.createNodeMap=async function(o,s){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");s=i(s,{base:go(o)?o:"",contextResolver:new Wo({sharedCache:r})});const a=await t.expand(o,s);return m3(a,s)},t.merge=async function(o,s,a){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!Ya(o))throw new TypeError('Could not merge, "docs" must be an array.');typeof s=="function"?s=null:s=s||null,a=i(a,{contextResolver:new Wo({sharedCache:r})});const c=await Promise.all(o.map(b=>{const E={...a};return t.expand(b,E)}));let u=!0;"mergeNodes"in a&&(u=a.mergeNodes);const l=a.issuer||new Zh("_:b"),d={"@default":{}};for(let b=0;b<c.length;++b){const E=ps.relabelBlankNodes(c[b],{issuer:new Zh("_:b"+b+"-")}),S=u||b===0?d:{"@default":{}};if(g3(E,S,"@default",l),S!==d)for(const R in S){const F=S[R];if(!(R in d)){d[R]=F;continue}const M=d[R];for(const P in F)P in M||(M[P]=F[P])}}const p=y3(d),g=[],y=Object.keys(p).sort();for(let b=0;b<y.length;++b){const E=p[y[b]];d3(E)||g.push(E)}return s===null?g:(a.graph=!0,a.skipExpansion=!0,await t.compact(g,s,a))},Object.defineProperty(t,"documentLoader",{get:()=>t._documentLoader,set:o=>t._documentLoader=o}),t.documentLoader=async o=>{throw new hs("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:o})},t.get=async function(o,s){let a;typeof s.documentLoader=="function"?a=s.documentLoader:a=t.documentLoader;const c=await a(o);try{if(!c.document)throw new hs("No remote document found at the given URL.","jsonld.NullRemoteDocument");go(c.document)&&(c.document=JSON.parse(c.document))}catch(u){throw new hs("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:u,remoteDoc:c})}return c},t.processContext=async function(o,s,a){return a=i(a,{base:"",contextResolver:new Wo({sharedCache:r})}),s===null?Bl(a):(s=ps.clone(s),ea(s)&&"@context"in s||(s={"@context":s}),l_({activeCtx:o,localCtx:s,options:a}))},t.getContextValue=Na.getContextValue,t.documentLoaders={},t.useDocumentLoader=function(o){if(!(o in t.documentLoaders))throw new hs('Unknown document loader type: "'+o+'"',"jsonld.UnknownDocumentLoader",{type:o});t.documentLoader=t.documentLoaders[o].apply(t,Array.prototype.slice.call(arguments,1))},t.registerRDFParser=function(o,s){e[o]=s},t.unregisterRDFParser=function(o){delete e[o]},t.registerRDFParser("application/n-quads",$l.parse),t.registerRDFParser("application/nquads",$l.parse),t.url=$s,t.util=ps,Object.assign(t,ps),t.promises=t,t.RequestQueue=h1,t.JsonLdProcessor=r3(t),u_.setupGlobals(t),u_.setupDocumentLoaders(t);function i(o,{documentLoader:s=t.documentLoader,...a}){return Object.assign({},{documentLoader:s},a,o)}return t},C1=function(){return D1(function(){return C1()})};D1(C1);const iu="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ou="http://www.w3.org/2001/XMLSchema#",Xh="http://www.w3.org/2000/10/swap/";var Gr={xsd:{decimal:`${ou}decimal`,boolean:`${ou}boolean`,double:`${ou}double`,integer:`${ou}integer`,string:`${ou}string`},rdf:{type:`${iu}type`,nil:`${iu}nil`,first:`${iu}first`,rest:`${iu}rest`,langString:`${iu}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Xh}reify#forSome`,forAll:`${Xh}reify#forAll`},log:{implies:`${Xh}log#implies`}};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let d_;var _3=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:Gt):t=>(d_||(d_=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0)),w3=_3;const{xsd:Hl}=Gr,v3=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,f_={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},b3=/[\x00-\x20<>\\"\{\}\|\^\`]/,E3={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},S3=/$0^/;class T3{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const n in this)!(n in E3)&&this[n]instanceof RegExp&&(this[n]=S3)}else this._n3Mode=e.n3!==!1;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let r=this._input,i=r.length;for(;;){let a,c;for(;a=this._newline.exec(r);)this._comments&&(c=this._comment.exec(a[0]))&&o("comment",c[1],"",this._line,a[0].length),r=r.substr(a[0].length,r.length),i=r.length,this._line++;if(!a&&(a=this._whitespace.exec(r))&&(r=r.substr(a[0].length,r.length)),this._endOfFile.test(r))return n&&(this._comments&&(c=this._comment.exec(r))&&o("comment",c[1],"",this._line,r.length),r=null,o("eof","","",this._line,0)),this._input=r;const u=this._line,l=r[0];let d="",p="",g="",y=null,w=0,b=!1;switch(l){case"^":if(r.length<3)break;if(r[1]==="^"){if(this._previousMarker="^^",r=r.substr(2),r[0]!=="<"){b=!0;break}}else{this._n3Mode&&(w=1,d="^");break}case"<":if(y=this._unescapedIri.exec(r))d="IRI",p=y[1];else if(y=this._iri.exec(r)){if(p=this._unescape(y[1]),p===null||b3.test(p))return s(this);d="IRI"}else r.length>1&&r[1]==="<"?(d="<<",w=2):this._n3Mode&&r.length>1&&r[1]==="="&&(d="inverse",w=2,p=">");break;case">":r.length>1&&r[1]===">"&&(d=">>",w=2);break;case"_":((y=this._blank.exec(r))||n&&(y=this._blank.exec(`${r} `)))&&(d="blank",g="_",p=y[1]);break;case'"':if(y=this._simpleQuotedString.exec(r))p=y[1];else if({value:p,matchLength:w}=this._parseLiteral(r),p===null)return s(this);(y!==null||w!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(y=this._simpleApostropheString.exec(r))p=y[1];else if({value:p,matchLength:w}=this._parseLiteral(r),p===null)return s(this);(y!==null||w!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(y=this._variable.exec(r))&&(d="var",p=y[0]);break;case"@":this._previousMarker==="literal"&&(y=this._langcode.exec(r))?(d="langcode",p=y[1]):(y=this._keyword.exec(r))&&(d=y[0]);break;case".":if(r.length===1?n:r[1]<"0"||r[1]>"9"){d=".",w=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(y=this._number.exec(r)||n&&(y=this._number.exec(`${r} `)))&&(d="literal",p=y[0],g=typeof y[1]=="string"?Hl.double:typeof y[2]=="string"?Hl.decimal:Hl.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(y=this._sparqlKeyword.exec(r))?d=y[0].toUpperCase():b=!0;break;case"f":case"t":(y=this._boolean.exec(r))?(d="literal",p=y[0],g=Hl.boolean):b=!0;break;case"a":(y=this._shortPredicates.exec(r))?(d="abbreviation",p="a"):b=!0;break;case"=":this._n3Mode&&r.length>1&&(d="abbreviation",r[1]!==">"?(w=1,p="="):(w=2,p=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(w=1,d=l);break;default:b=!0}if(b&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(y=this._prefix.exec(r))?(d="prefix",p=y[1]||""):((y=this._prefixed.exec(r))||n&&(y=this._prefixed.exec(`${r} `)))&&(d="prefixed",g=y[1]||"",p=this._unescape(y[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return n||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?s(this):this._input=r;const E=w||y[0].length,S=o(d,p,g,u,E);this.previousToken=S,this._previousMarker=d,r=r.substr(E,r.length)}function o(a,c,u,l,d){const p=r?i-r.length:i,g=p+d,y={type:a,value:c,prefix:u,line:l,start:p,end:g};return e(null,y),y}function s(a){e(a._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let n=!1;const r=e.replace(v3,(i,o,s,a)=>{if(typeof o=="string")return String.fromCharCode(Number.parseInt(o,16));if(typeof s=="string"){let c=Number.parseInt(s,16);return c<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return a in f_?f_[a]:(n=!0,"")});return n?null:r}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],r=n.length;let i=Math.max(this._literalClosingPos,r);for(;(i=e.indexOf(n,i))>0;){let o=0;for(;e[i-o-1]==="\\";)o++;if(o%2===0){const s=e.substring(r,i),a=s.split(/\r\n|\r|\n/).length-1,c=i+r;if(r===1&&a!==0||r===3&&this._lineMode)break;return this._line+=a,{value:this._unescape(s),matchLength:c}}i++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,n){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof n=="function")w3(()=>this._tokenizeToEnd(n,!0));else{const r=[];let i;if(this._tokenizeToEnd((o,s)=>o?i=o:r.push(s),!0),i)throw i;return r}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",r=>{this._input!==null&&r.length!==0&&(this._pendingBuffer&&(r=Ds.Buffer.concat([this._pendingBuffer,r]),this._pendingBuffer=null),r[r.length-1]&128?this._pendingBuffer=r:(typeof this._input=="undefined"?this._input=this._readStartingBom(typeof r=="string"?r:r.toString()):this._input+=r,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}function P1(t){return!!t&&t.termType==="DefaultGraph"}const{rdf:A3,xsd:sa}=Gr;let il,x3=0;const N1=/^"(.*".*)(?="[^"]*$)/,I3=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,ag={namedNode:C3,blankNode:P3,variable:O3,literal:N3,defaultGraph:M3,quad:h_,triple:h_};var j0=ag;class Uo{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Uo?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class O1 extends Uo{get termType(){return"NamedNode"}}class lc extends Uo{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&e[n++]==="@"?e.substr(n).toLowerCase():""}get datatype(){return new O1(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,r=n<e.length?e[n]:"";return r==="^"?e.substr(n+2):r!=="@"?sa.string:A3.langString}equals(e){return e instanceof lc?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class R3 extends Uo{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class k3 extends Uo{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class F3 extends Uo{constructor(){return super(""),il||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}il=new F3;function Qo(t,e){if(e=e||ag,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===ag)return new lc(t);if(t[t.length-1]==='"')return e.literal(t.substr(1,t.length-2));const n=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,n-1),t[n+1]==="@"?t.substr(n+2):e.namedNode(t.substr(n+3)));case"<":const r=I3.exec(t);return e.quad(Qo(Kl(r[1]),e),Qo(Kl(r[2]),e),Qo(Kl(r[3]),e),r[4]&&Qo(Kl(r[4]),e));default:return e.namedNode(t)}}function jt(t){if(typeof t=="string")return t;if(t instanceof Uo&&t.termType!=="Quad")return t.id;if(!t)return il.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==sa.string?`^^${t.datatype.value}`:""}`;case"Quad":return`<<${ep(jt(t.subject))} ${ep(jt(t.predicate))} ${ep(jt(t.object))}${P1(t.graph)?"":` ${jt(t.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${t.termType}`)}}class D3 extends Uo{constructor(e,n,r,i){super(""),this._subject=e,this._predicate=n,this._object=r,this._graph=i||il}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function ep(t){return t.replace(N1,(e,n)=>`"${n.replace(/"/g,'""')}`)}function Kl(t){return t.replace(N1,(e,n)=>`"${n.replace(/""/g,'"')}`)}function C3(t){return new O1(t)}function P3(t){return new R3(t||`n3-${x3++}`)}function N3(t,e){if(typeof e=="string")return new lc(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return n===""&&(typeof t=="boolean"?n=sa.boolean:typeof t=="number"&&(Number.isFinite(t)?n=Number.isInteger(t)?sa.integer:sa.double:(n=sa.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),n===""||n===sa.string?new lc(`"${t}"`):new lc(`"${t}"^^${n}`)}function O3(t){return new k3(t)}function M3(){return il}function h_(t,e,n,r){return new D3(t,e,n,r)}let p_=0;class $0{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&M1(this,e.factory);const n=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(n),i=/trig/.test(n),o=/triple/.test(n),s=/quad/.test(n),a=this._n3Mode=/n3/.test(n),c=o||s;(this._supportsNamedGraphs=!(r||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||i||o||a),this._supportsRDFStar=n===""||/star|\*$/.test(n),c&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new T3({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){p_=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,n,r,i,o){const s=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:i,object:o,graph:n,inverse:s?this._inversePredicate:!1,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.id.substr(2)}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let r;switch(e.type){case"IRI":case"typeIRI":const i=this._resolveIRI(e.value);if(i===null)return this._error("Invalid IRI",e);r=this._namedNode(i);break;case"type":case"prefixed":const o=this._prefixes[e.prefix];if(o===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._namedNode(o+e.value);break;case"blank":r=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${n}`,e):(this._subject=null,n==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,r=null,i=this._readListItem;const o=this._subject,s=this._contextStack,a=s[s.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._blankNode(),this.RDF_FIRST,this._subject=n=this._blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),s.length!==0&&s[s.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;r=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,i=this._readListItemDataTypeOrLang):(n=this._literal(e.value,this._namedNode(e.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((n=this._readEntity(e))===void 0)return}if(r===null&&(this._subject=r=this._blankNode()),o===null?a.predicate===null?a.subject=r:a.object=r:this._emit(o,this.RDF_REST,r,this._graph),n!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,r,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,n,this._graph)}return i}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const r=this._readEntity(e);if(r===void 0)return;n=this._literal(this._literalValue,r),e=null;break;case"langcode":n=this._literal(this._literalValue,e.value),e=null;break}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const r=this._completeLiteral(e);if(!!r)return this._object=r.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),r.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,r=this._graph;const i=this._subject,o=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,o&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:if(this._supportsQuads&&this._graph===null&&(r=this._readEntity(e))!==void 0){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(i!==null){const s=this._predicate,a=this._object;o?this._emit(a,s,i,r):this._emit(i,s,a,r)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n=e.type==="IRI"&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if((n=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,r=n.length&&n[n.length-1];if(r&&r.type==="item"){const i=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,r;const i=this._blankNode();if((r=this._readEntity(e))!==void 0)return this._predicate===null?(n=this._subject,this._subject=i):(n=this._object,this._object=i),this._emit(n,r,i,this._graph),this._readPath}_readBackwardPath(e){const n=this._blankNode();let r,i;if((r=this._readEntity(e))!==void 0)return this._predicate===null?(i=this._subject,this._subject=n):(i=this._object,this._object=n),this._emit(n,r,i,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const n=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,r,i){this._callback(null,this._quad(e,n,r,i||this.DEFAULTGRAPH))}_error(e,n){const r=new Error(`${e} on line ${n.line}.`);r.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=tp}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let r="",i=-1,o=-1,s=0,a="/";for(;i<n;){switch(a){case":":if(o<0&&e[++i]==="/"&&e[++i]==="/")for(;(o=i+1)<n&&e[o]!=="/";)i=o;break;case"?":case"#":i=n;break;case"/":if(e[i+1]===".")switch(a=e[++i+1],a){case"/":r+=e.substring(s,i-1),s=i+1;break;case void 0:case"?":case"#":return r+e.substring(s,i)+e.substr(i+1);case".":if(a=e[++i+1],a===void 0||a==="/"||a==="?"||a==="#"){if(r+=e.substring(s,i-2),(s=r.lastIndexOf("/"))>=o&&(r=r.substr(0,s)),a!=="/")return`${r}/${e.substr(i+1)}`;s=i+1}}}a=e[++i]}return r+e.substring(s)}parse(e,n,r){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${p_++}_`,this._prefixCallback=r||tp,this._inversePredicate=!1,this._quantified=Object.create(null),!n){const i=[];let o;if(this._callback=(s,a)=>{s?o=s:a&&i.push(a)},this._lexer.tokenize(e).every(s=>this._readCallback=this._readCallback(s)),o)throw o;return i}this._callback=n,this._lexer.tokenize(e,(i,o)=>{i!==null?(this._callback(i),this._callback=tp):this._readCallback&&(this._readCallback=this._readCallback(o))})}}function tp(){}function M1(t,e){const n=e.namedNode;t._namedNode=n,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=n(Gr.rdf.first),t.RDF_REST=n(Gr.rdf.rest),t.RDF_NIL=n(Gr.rdf.nil),t.N3_FORALL=n(Gr.r.forAll),t.N3_FORSOME=n(Gr.r.forSome),t.ABBREVIATIONS={a:n(Gr.rdf.type),"=":n(Gr.owl.sameAs),">":n(Gr.log.implies)},t.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}M1($0.prototype,j0);const su=j0.defaultGraph(),{rdf:L3,xsd:Ja}=Gr,g_=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,m_=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,U3={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class au extends Uo{equals(){return!1}}class L1{constructor(e,n){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(n=e,e=null),n=n||{},this._lists=n.lists,e)this._outputStream=e,this._endStream=n.end===void 0?!0:!!n.end;else{let r="";this._outputStream={write(i,o,s){r+=i,s&&s()},end:i=>{i&&i(null,r)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(n.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=su,this._prefixIRIs=Object.create(null),n.prefixes&&this.addPrefixes(n.prefixes),n.baseIRI&&(this._baseMatcher=new RegExp(`^${__(n.baseIRI)}${n.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=n.baseIRI.length))}get _inDefaultGraph(){return su.equals(this._graph)}_write(e,n){this._outputStream.write(e,"utf8",n)}_writeQuad(e,n,r,i,o){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(su.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),e.equals(this._subject)?n.equals(this._predicate)?this._write(`, ${this._encodeObject(r)}`,o):this._write(`;
    ${this._encodePredicate(this._predicate=n)} ${this._encodeObject(r)}`,o):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=n)} ${this._encodeObject(r)}`,o)}catch(s){o&&o(s)}}_writeQuadLine(e,n,r,i,o){delete this._prefixMatch,this._write(this.quadToString(e,n,r,i),o)}quadToString(e,n,r,i){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(n)} ${this._encodeObject(r)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(e){return e.map(n=>this.quadToString(n.subject,n.predicate,n.object,n.graph)).join("")}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let n=e.value;this._baseMatcher&&this._baseMatcher.test(n)&&(n=n.substr(this._baseLength)),g_.test(n)&&(n=n.replace(m_,y_));const r=this._prefixRegex.exec(n);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:n:`<${n}>`}_encodeLiteral(e){let n=e.value;if(g_.test(n)&&(n=n.replace(m_,y_)),e.language)return`"${n}"@${e.language}`;if(this._lineMode){if(e.datatype.value===Ja.string)return`"${n}"`}else switch(e.datatype.value){case Ja.string:return`"${n}"`;case Ja.boolean:if(n==="true"||n==="false")return n;break;case Ja.integer:if(/^[+-]?\d+$/.test(n))return n;break;case Ja.decimal:if(/^[+-]?\d*\.\d+$/.test(n))return n;break;case Ja.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(n))return n;break}return`"${n}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===L3.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:n,object:r,graph:i}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(n)} ${this._encodeObject(r)}${P1(i)?"":` ${this._encodeIriOrBlank(i)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,n,r,i,o){r===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,n):typeof i=="function"?this._writeQuad(e,n,r,su,i):this._writeQuad(e,n,r,i||su,o)}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}addPrefix(e,n,r){const i={};i[e]=n,this.addPrefixes(i,r)}addPrefixes(e,n){if(!this._prefixIRIs)return n&&n();let r=!1;for(let i in e){let o=e[i];typeof o!="string"&&(o=o.value),r=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[o]=i+=":",this._write(`@prefix ${i} <${o}>.
`)}if(r){let i="",o="";for(const s in this._prefixIRIs)i+=i?`|${s}`:s,o+=(o?"|":"")+this._prefixIRIs[s];i=__(i),this._prefixRegex=new RegExp(`^(?:${o})[^/]*$|^(${i})([a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(r?`
`:"",n)}blank(e,n){let r=e,i,o;switch(e===void 0?r=[]:e.termType?r=[{predicate:e,object:n}]:"length"in e||(r=[e]),o=r.length){case 0:return new au("[]");case 1:if(i=r[0],!(i.object instanceof au))return new au(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let s="[";for(let a=0;a<o;a++)i=r[a],i.predicate.equals(e)?s+=`, ${this._encodeObject(i.object)}`:(s+=`${(a?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new au(`${s}
]`)}}list(e){const n=e&&e.length||0,r=new Array(n);for(let i=0;i<n;i++)r[i]=this._encodeObject(e[i]);return new au(`(${r.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let n=e&&((r,i)=>{n=null,e(r,i)});if(this._endStream)try{return this._outputStream.end(n)}catch{}n&&n()}}function y_(t){let e=U3[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}function __(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var xc={exports:{}},U1=Zu.exports.EventEmitter,j3={},$3=Object.freeze(Object.defineProperty({__proto__:null,default:j3},Symbol.toStringTag,{value:"Module"})),j1=nf($3);function w_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function B3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w_(Object(n),!0).forEach(function(r){H3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H3(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W3(t,e,n){return e&&v_(t.prototype,e),n&&v_(t,n),t}var q3=Ds,sd=q3.Buffer,V3=j1,cg=V3.inspect,G3=cg&&cg.custom||"inspect";function z3(t,e,n){sd.prototype.copy.call(t,e,n)}var Y3=function(){function t(){K3(this,t),this.head=null,this.tail=null,this.length=0}return W3(t,[{key:"push",value:function(n){var r={data:n,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}},{key:"unshift",value:function(n){var r={data:n,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}},{key:"shift",value:function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(n){if(this.length===0)return"";for(var r=this.head,i=""+r.data;r=r.next;)i+=n+r.data;return i}},{key:"concat",value:function(n){if(this.length===0)return sd.alloc(0);for(var r=sd.allocUnsafe(n>>>0),i=this.head,o=0;i;)z3(i.data,r,o),o+=i.data.length,i=i.next;return r}},{key:"consume",value:function(n,r){var i;return n<this.head.data.length?(i=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):n===this.head.data.length?i=this.shift():i=r?this._getString(n):this._getBuffer(n),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var r=this.head,i=1,o=r.data;for(n-=o.length;r=r.next;){var s=r.data,a=n>s.length?s.length:n;if(a===s.length?o+=s:o+=s.slice(0,n),n-=a,n===0){a===s.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(n){var r=sd.allocUnsafe(n),i=this.head,o=1;for(i.data.copy(r),n-=i.data.length;i=i.next;){var s=i.data,a=n>s.length?s.length:n;if(s.copy(r,r.length-n,0,a),n-=a,n===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,r}},{key:G3,value:function(n,r){return cg(this,B3({},r,{depth:0,customInspect:!1}))}}]),t}();function J3(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Wt.nextTick(ug,this,t)):Wt.nextTick(ug,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?n._writableState?n._writableState.errorEmitted?Wt.nextTick(ad,n):(n._writableState.errorEmitted=!0,Wt.nextTick(b_,n,o)):Wt.nextTick(b_,n,o):e?(Wt.nextTick(ad,n),e(o)):Wt.nextTick(ad,n)}),this)}function b_(t,e){ug(t,e),ad(t)}function ad(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Z3(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function ug(t,e){t.emit("error",e)}function Q3(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}var $1={destroy:J3,undestroy:Z3,errorOrDestroy:Q3},Oa={};function X3(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var B1={};function Zi(t,e,n){n||(n=Error);function r(o,s,a){return typeof e=="string"?e:e(o,s,a)}var i=function(o){X3(s,o);function s(a,c,u){return o.call(this,r(a,c,u))||this}return s}(n);i.prototype.name=n.name,i.prototype.code=t,B1[t]=i}function E_(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map(function(r){return String(r)}),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function eF(t,e,n){return t.substr(!n||n<0?0:+n,e.length)===e}function tF(t,e,n){return(n===void 0||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}function nF(t,e,n){return typeof n!="number"&&(n=0),n+e.length>t.length?!1:t.indexOf(e,n)!==-1}Zi("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Zi("ERR_INVALID_ARG_TYPE",function(t,e,n){var r;typeof e=="string"&&eF(e,"not ")?(r="must not be",e=e.replace(/^not /,"")):r="must be";var i;if(tF(t," argument"))i="The ".concat(t," ").concat(r," ").concat(E_(e,"type"));else{var o=nF(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(r," ").concat(E_(e,"type"))}return i+=". Received type ".concat(typeof n),i},TypeError);Zi("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Zi("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Zi("ERR_STREAM_PREMATURE_CLOSE","Premature close");Zi("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Zi("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Zi("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Zi("ERR_STREAM_WRITE_AFTER_END","write after end");Zi("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Zi("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Zi("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Oa.codes=B1;var rF=Oa.codes.ERR_INVALID_OPT_VALUE;function iF(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function oF(t,e,n,r){var i=iF(e,r,n);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=r?n:"highWaterMark";throw new rF(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var H1={getHighWaterMark:oF},ka={exports:{}};typeof Object.create=="function"?ka.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ka.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}};var sF=aF;function aF(t,e){if(np("noDeprecation"))return t;var n=!1;function r(){if(!n){if(np("throwDeprecation"))throw new Error(e);np("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}return r}function np(t){try{if(!Gt.localStorage)return!1}catch{return!1}var e=Gt.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var K1=Mn;function W1(t){var e=this;this.next=null,this.entry=null,this.finish=function(){NF(e,t)}}var dc;Mn.WritableState=ol;var cF={deprecate:sF},q1=U1,Tf=Ds.Buffer,uF=Gt.Uint8Array||function(){};function lF(t){return Tf.from(t)}function dF(t){return Tf.isBuffer(t)||t instanceof uF}var B0=$1,fF=H1,hF=fF.getHighWaterMark,Bs=Oa.codes,pF=Bs.ERR_INVALID_ARG_TYPE,gF=Bs.ERR_METHOD_NOT_IMPLEMENTED,mF=Bs.ERR_MULTIPLE_CALLBACK,yF=Bs.ERR_STREAM_CANNOT_PIPE,_F=Bs.ERR_STREAM_DESTROYED,wF=Bs.ERR_STREAM_NULL_VALUES,vF=Bs.ERR_STREAM_WRITE_AFTER_END,bF=Bs.ERR_UNKNOWN_ENCODING,Ic=B0.errorOrDestroy;ka.exports(Mn,q1);function EF(){}function ol(t,e,n){dc=dc||Oc,t=t||{},typeof n!="boolean"&&(n=e instanceof dc),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=hF(this,t,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var r=t.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){kF(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new W1(this)}ol.prototype.getBuffer=function(){for(var e=this.bufferedRequest,n=[];e;)n.push(e),e=e.next;return n};(function(){try{Object.defineProperty(ol.prototype,"buffer",{get:cF.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var cd;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(cd=Function.prototype[Symbol.hasInstance],Object.defineProperty(Mn,Symbol.hasInstance,{value:function(e){return cd.call(this,e)?!0:this!==Mn?!1:e&&e._writableState instanceof ol}})):cd=function(e){return e instanceof this};function Mn(t){dc=dc||Oc;var e=this instanceof dc;if(!e&&!cd.call(Mn,this))return new Mn(t);this._writableState=new ol(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),q1.call(this)}Mn.prototype.pipe=function(){Ic(this,new yF)};function SF(t,e){var n=new vF;Ic(t,n),Wt.nextTick(e,n)}function TF(t,e,n,r){var i;return n===null?i=new wF:typeof n!="string"&&!e.objectMode&&(i=new pF("chunk",["string","Buffer"],n)),i?(Ic(t,i),Wt.nextTick(r,i),!1):!0}Mn.prototype.write=function(t,e,n){var r=this._writableState,i=!1,o=!r.objectMode&&dF(t);return o&&!Tf.isBuffer(t)&&(t=lF(t)),typeof e=="function"&&(n=e,e=null),o?e="buffer":e||(e=r.defaultEncoding),typeof n!="function"&&(n=EF),r.ending?SF(this,n):(o||TF(this,r,t,n))&&(r.pendingcb++,i=xF(this,r,o,t,e,n)),i};Mn.prototype.cork=function(){this._writableState.corked++};Mn.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&V1(this,t))};Mn.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new bF(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Mn.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function AF(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Tf.from(e,n)),e}Object.defineProperty(Mn.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function xF(t,e,n,r,i,o){if(!n){var s=AF(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else lg(t,e,!1,a,r,i,o);return c}function lg(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new _F("write")):n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function IF(t,e,n,r,i){--e.pendingcb,n?(Wt.nextTick(i,r),Wt.nextTick(Nu,t,e),t._writableState.errorEmitted=!0,Ic(t,r)):(i(r),t._writableState.errorEmitted=!0,Ic(t,r),Nu(t,e))}function RF(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function kF(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(typeof i!="function")throw new mF;if(RF(n),e)IF(t,n,r,e,i);else{var o=G1(n)||t.destroyed;!o&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&V1(t,n),r?Wt.nextTick(S_,t,n,o,i):S_(t,n,o,i)}}function S_(t,e,n,r){n||FF(t,e),e.pendingcb--,r(),Nu(t,e)}function FF(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function V1(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0,a=!0;n;)i[s]=n,n.isBuf||(a=!1),n=n.next,s+=1;i.allBuffers=a,lg(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new W1(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,l=n.callback,d=e.objectMode?1:c.length;if(lg(t,e,!1,d,c,u,l),n=n.next,e.bufferedRequestCount--,e.writing)break}n===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}Mn.prototype._write=function(t,e,n){n(new gF("_write()"))};Mn.prototype._writev=null;Mn.prototype.end=function(t,e,n){var r=this._writableState;return typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null),t!=null&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||PF(this,r,n),this};Object.defineProperty(Mn.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function G1(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function DF(t,e){t._final(function(n){e.pendingcb--,n&&Ic(t,n),e.prefinished=!0,t.emit("prefinish"),Nu(t,e)})}function CF(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,Wt.nextTick(DF,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Nu(t,e){var n=G1(e);if(n&&(CF(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return n}function PF(t,e,n){e.ending=!0,Nu(t,e),n&&(e.finished?Wt.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function NF(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree.next=t}Object.defineProperty(Mn.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});Mn.prototype.destroy=B0.destroy;Mn.prototype._undestroy=B0.undestroy;Mn.prototype._destroy=function(t,e){e(t)};var OF=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},Oc=Do,z1=J1,dg=K1;ka.exports(Do,z1);for(var T_=OF(dg.prototype),rp=0;rp<T_.length;rp++){var ip=T_[rp];Do.prototype[ip]||(Do.prototype[ip]=dg.prototype[ip])}function Do(t){if(!(this instanceof Do))return new Do(t);z1.call(this,t),dg.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",MF)))}Object.defineProperty(Do.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Do.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Do.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function MF(){this._writableState.ended||Wt.nextTick(LF,this)}function LF(t){t.end()}Object.defineProperty(Do.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var H0={},fg={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=Ds,r=n.Buffer;function i(s,a){for(var c in s)a[c]=s[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=o);function o(s,a,c){return r(s,a,c)}o.prototype=Object.create(r.prototype),i(r,o),o.from=function(s,a,c){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,a,c)},o.alloc=function(s,a,c){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=r(s);return a!==void 0?typeof c=="string"?u.fill(a,c):u.fill(a):u.fill(0),u},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}})(fg,fg.exports);var K0=fg.exports.Buffer,A_=K0.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function UF(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function jF(t){var e=UF(t);if(typeof e!="string"&&(K0.isEncoding===A_||!A_(t)))throw new Error("Unknown encoding: "+t);return e||t}H0.StringDecoder=sl;function sl(t){this.encoding=jF(t);var e;switch(this.encoding){case"utf16le":this.text=qF,this.end=VF,e=4;break;case"utf8":this.fillLast=HF,e=4;break;case"base64":this.text=GF,this.end=zF,e=3;break;default:this.write=YF,this.end=JF;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=K0.allocUnsafe(e)}sl.prototype.write=function(t){if(t.length===0)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""};sl.prototype.end=WF;sl.prototype.text=KF;sl.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function op(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function $F(t,e,n){var r=e.length-1;if(r<n)return 0;var i=op(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||i===-2?0:(i=op(e[r]),i>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||i===-2?0:(i=op(e[r]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function BF(t,e,n){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function HF(t){var e=this.lastTotal-this.lastNeed,n=BF(this,t);if(n!==void 0)return n;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function KF(t,e){var n=$F(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function WF(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function qF(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function VF(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function GF(t,e){var n=(t.length-e)%3;return n===0?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function zF(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function YF(t){return t.toString(this.encoding)}function JF(t){return t&&t.length?this.write(t):""}var x_=Oa.codes.ERR_STREAM_PREMATURE_CLOSE;function ZF(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r)}}}function QF(){}function XF(t){return t.setHeader&&typeof t.abort=="function"}function Y1(t,e,n){if(typeof e=="function")return Y1(t,null,e);e||(e={}),n=ZF(n||QF);var r=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||a()},s=t._writableState&&t._writableState.finished,a=function(){i=!1,s=!0,r||n.call(t)},c=t._readableState&&t._readableState.endEmitted,u=function(){r=!1,c=!0,i||n.call(t)},l=function(y){n.call(t,y)},d=function(){var y;if(r&&!c)return(!t._readableState||!t._readableState.ended)&&(y=new x_),n.call(t,y);if(i&&!s)return(!t._writableState||!t._writableState.ended)&&(y=new x_),n.call(t,y)},p=function(){t.req.on("finish",a)};return XF(t)?(t.on("complete",a),t.on("abort",d),t.req?p():t.on("request",p)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",u),t.on("finish",a),e.error!==!1&&t.on("error",l),t.on("close",d),function(){t.removeListener("complete",a),t.removeListener("abort",d),t.removeListener("request",p),t.req&&t.req.removeListener("finish",a),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",a),t.removeListener("end",u),t.removeListener("error",l),t.removeListener("close",d)}}var W0=Y1,Wl;function ys(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var eD=W0,_s=Symbol("lastResolve"),na=Symbol("lastReject"),wu=Symbol("error"),Ld=Symbol("ended"),la=Symbol("lastPromise"),q0=Symbol("handlePromise"),da=Symbol("stream");function Ts(t,e){return{value:t,done:e}}function tD(t){var e=t[_s];if(e!==null){var n=t[da].read();n!==null&&(t[la]=null,t[_s]=null,t[na]=null,e(Ts(n,!1)))}}function nD(t){Wt.nextTick(tD,t)}function rD(t,e){return function(n,r){t.then(function(){if(e[Ld]){n(Ts(void 0,!0));return}e[q0](n,r)},r)}}var iD=Object.getPrototypeOf(function(){}),oD=Object.setPrototypeOf((Wl={get stream(){return this[da]},next:function(){var e=this,n=this[wu];if(n!==null)return Promise.reject(n);if(this[Ld])return Promise.resolve(Ts(void 0,!0));if(this[da].destroyed)return new Promise(function(s,a){Wt.nextTick(function(){e[wu]?a(e[wu]):s(Ts(void 0,!0))})});var r=this[la],i;if(r)i=new Promise(rD(r,this));else{var o=this[da].read();if(o!==null)return Promise.resolve(Ts(o,!1));i=new Promise(this[q0])}return this[la]=i,i}},ys(Wl,Symbol.asyncIterator,function(){return this}),ys(Wl,"return",function(){var e=this;return new Promise(function(n,r){e[da].destroy(null,function(i){if(i){r(i);return}n(Ts(void 0,!0))})})}),Wl),iD),sD=function(e){var n,r=Object.create(oD,(n={},ys(n,da,{value:e,writable:!0}),ys(n,_s,{value:null,writable:!0}),ys(n,na,{value:null,writable:!0}),ys(n,wu,{value:null,writable:!0}),ys(n,Ld,{value:e._readableState.endEmitted,writable:!0}),ys(n,q0,{value:function(o,s){var a=r[da].read();a?(r[la]=null,r[_s]=null,r[na]=null,o(Ts(a,!1))):(r[_s]=o,r[na]=s)},writable:!0}),n));return r[la]=null,eD(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=r[na];o!==null&&(r[la]=null,r[_s]=null,r[na]=null,o(i)),r[wu]=i;return}var s=r[_s];s!==null&&(r[la]=null,r[_s]=null,r[na]=null,s(Ts(void 0,!0))),r[Ld]=!0}),e.on("readable",nD.bind(null,r)),r},aD=sD,cD=function(){throw new Error("Readable.from is not available in the browser")},J1=Rt,fc;Rt.ReadableState=Q1;Zu.exports.EventEmitter;var Z1=function(e,n){return e.listeners(n).length},al=U1,Af=Ds.Buffer,uD=Gt.Uint8Array||function(){};function lD(t){return Af.from(t)}function dD(t){return Af.isBuffer(t)||t instanceof uD}var sp=j1,gt;sp&&sp.debuglog?gt=sp.debuglog("stream"):gt=function(){};var fD=Y3,V0=$1,hD=H1,pD=hD.getHighWaterMark,xf=Oa.codes,gD=xf.ERR_INVALID_ARG_TYPE,mD=xf.ERR_STREAM_PUSH_AFTER_EOF,yD=xf.ERR_METHOD_NOT_IMPLEMENTED,_D=xf.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,hc,ap,cp;ka.exports(Rt,al);var vu=V0.errorOrDestroy,up=["error","close","destroy","pause","resume"];function wD(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}function Q1(t,e,n){fc=fc||Oc,t=t||{},typeof n!="boolean"&&(n=e instanceof fc),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=pD(this,t,"readableHighWaterMark",n),this.buffer=new fD,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(hc||(hc=H0.StringDecoder),this.decoder=new hc(t.encoding),this.encoding=t.encoding)}function Rt(t){if(fc=fc||Oc,!(this instanceof Rt))return new Rt(t);var e=this instanceof fc;this._readableState=new Q1(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),al.call(this)}Object.defineProperty(Rt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});Rt.prototype.destroy=V0.destroy;Rt.prototype._undestroy=V0.undestroy;Rt.prototype._destroy=function(t,e){e(t)};Rt.prototype.push=function(t,e){var n=this._readableState,r;return n.objectMode?r=!0:typeof t=="string"&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=Af.from(t,e),e=""),r=!0),X1(this,t,e,!1,r)};Rt.prototype.unshift=function(t){return X1(this,t,null,!0,!1)};function X1(t,e,n,r,i){gt("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,ED(t,o);else{var s;if(i||(s=vD(o,e)),s)vu(t,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==Af.prototype&&(e=lD(e)),r)o.endEmitted?vu(t,new _D):lp(t,o,e,!0);else if(o.ended)vu(t,new mD);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!n?(e=o.decoder.write(e),o.objectMode||e.length!==0?lp(t,o,e,!1):hg(t,o)):lp(t,o,e,!1)}else r||(o.reading=!1,hg(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function lp(t,e,n,r){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&If(t)),hg(t,e)}function vD(t,e){var n;return!dD(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(n=new gD("chunk",["string","Buffer","Uint8Array"],e)),n}Rt.prototype.isPaused=function(){return this._readableState.flowing===!1};Rt.prototype.setEncoding=function(t){hc||(hc=H0.StringDecoder);var e=new hc(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";n!==null;)r+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),r!==""&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var I_=1073741824;function bD(t){return t>=I_?t=I_:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function R_(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=bD(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Rt.prototype.read=function(t){gt("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return gt("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?dp(this):If(this),null;if(t=R_(t,e),t===0&&e.ended)return e.length===0&&dp(this),null;var r=e.needReadable;gt("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,gt("length less than watermark",r)),e.ended||e.reading?(r=!1,gt("reading or ended",r)):r&&(gt("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=R_(n,e)));var i;return t>0?i=nb(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&dp(this)),i!==null&&this.emit("data",i),i};function ED(t,e){if(gt("onEofChunk"),!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?If(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,eb(t)))}}function If(t){var e=t._readableState;gt("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(gt("emitReadable",e.flowing),e.emittedReadable=!0,Wt.nextTick(eb,t))}function eb(t){var e=t._readableState;gt("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,G0(t)}function hg(t,e){e.readingMore||(e.readingMore=!0,Wt.nextTick(SD,t,e))}function SD(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var n=e.length;if(gt("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}Rt.prototype._read=function(t){vu(this,new yD("_read()"))};Rt.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t);break}r.pipesCount+=1,gt("pipe count=%d opts=%j",r.pipesCount,e);var i=(!e||e.end!==!1)&&t!==Wt.stdout&&t!==Wt.stderr,o=i?a:w;r.endEmitted?Wt.nextTick(o):n.once("end",o),t.on("unpipe",s);function s(b,E){gt("onunpipe"),b===n&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,l())}function a(){gt("onend"),t.end()}var c=TD(n);t.on("drain",c);var u=!1;function l(){gt("cleanup"),t.removeListener("close",g),t.removeListener("finish",y),t.removeListener("drain",c),t.removeListener("error",p),t.removeListener("unpipe",s),n.removeListener("end",a),n.removeListener("end",w),n.removeListener("data",d),u=!0,r.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c()}n.on("data",d);function d(b){gt("ondata");var E=t.write(b);gt("dest.write",E),E===!1&&((r.pipesCount===1&&r.pipes===t||r.pipesCount>1&&rb(r.pipes,t)!==-1)&&!u&&(gt("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function p(b){gt("onerror",b),w(),t.removeListener("error",p),Z1(t,"error")===0&&vu(t,b)}wD(t,"error",p);function g(){t.removeListener("finish",y),w()}t.once("close",g);function y(){gt("onfinish"),t.removeListener("close",g),w()}t.once("finish",y);function w(){gt("unpipe"),n.unpipe(t)}return t.emit("pipe",n),r.flowing||(gt("pipe resume"),n.resume()),t};function TD(t){return function(){var n=t._readableState;gt("pipeOnDrain",n.awaitDrain),n.awaitDrain&&n.awaitDrain--,n.awaitDrain===0&&Z1(t,"data")&&(n.flowing=!0,G0(t))}}Rt.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=rb(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)};Rt.prototype.on=function(t,e){var n=al.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,gt("on readable",r.length,r.reading),r.length?If(this):r.reading||Wt.nextTick(AD,this)),n};Rt.prototype.addListener=Rt.prototype.on;Rt.prototype.removeListener=function(t,e){var n=al.prototype.removeListener.call(this,t,e);return t==="readable"&&Wt.nextTick(tb,this),n};Rt.prototype.removeAllListeners=function(t){var e=al.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Wt.nextTick(tb,this),e};function tb(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function AD(t){gt("readable nexttick read 0"),t.read(0)}Rt.prototype.resume=function(){var t=this._readableState;return t.flowing||(gt("resume"),t.flowing=!t.readableListening,xD(this,t)),t.paused=!1,this};function xD(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Wt.nextTick(ID,t,e))}function ID(t,e){gt("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),G0(t),e.flowing&&!e.reading&&t.read(0)}Rt.prototype.pause=function(){return gt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(gt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function G0(t){var e=t._readableState;for(gt("flow",e.flowing);e.flowing&&t.read()!==null;);}Rt.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;t.on("end",function(){if(gt("wrapped end"),n.decoder&&!n.ended){var s=n.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(gt("wrapped data"),n.decoder&&(s=n.decoder.write(s)),!(n.objectMode&&s==null)&&!(!n.objectMode&&(!s||!s.length))){var a=e.push(s);a||(r=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var o=0;o<up.length;o++)t.on(up[o],this.emit.bind(this,up[o]));return this._read=function(s){gt("wrapped _read",s),r&&(r=!1,t.resume())},this};typeof Symbol=="function"&&(Rt.prototype[Symbol.asyncIterator]=function(){return ap===void 0&&(ap=aD),ap(this)});Object.defineProperty(Rt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Rt.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Rt.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Rt._fromList=nb;Object.defineProperty(Rt.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function nb(t,e){if(e.length===0)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.first():n=e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function dp(t){var e=t._readableState;gt("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Wt.nextTick(RD,e,t))}function RD(t,e){if(gt("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}typeof Symbol=="function"&&(Rt.from=function(t,e){return cp===void 0&&(cp=cD),cp(Rt,t,e)});function rb(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}var ib=ss,Rf=Oa.codes,kD=Rf.ERR_METHOD_NOT_IMPLEMENTED,FD=Rf.ERR_MULTIPLE_CALLBACK,DD=Rf.ERR_TRANSFORM_ALREADY_TRANSFORMING,CD=Rf.ERR_TRANSFORM_WITH_LENGTH_0,kf=Oc;ka.exports(ss,kf);function PD(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(r===null)return this.emit("error",new FD);n.writechunk=null,n.writecb=null,e!=null&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function ss(t){if(!(this instanceof ss))return new ss(t);kf.call(this,t),this._transformState={afterTransform:PD.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",ND)}function ND(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,n){k_(t,e,n)}):k_(this,null,null)}ss.prototype.push=function(t,e){return this._transformState.needTransform=!1,kf.prototype.push.call(this,t,e)};ss.prototype._transform=function(t,e,n){n(new kD("_transform()"))};ss.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};ss.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};ss.prototype._destroy=function(t,e){kf.prototype._destroy.call(this,t,function(n){e(n)})};function k_(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new CD;if(t._transformState.transforming)throw new DD;return t.push(null)}var OD=Ou,ob=ib;ka.exports(Ou,ob);function Ou(t){if(!(this instanceof Ou))return new Ou(t);ob.call(this,t)}Ou.prototype._transform=function(t,e,n){n(null,t)};var fp;function MD(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var sb=Oa.codes,LD=sb.ERR_MISSING_ARGS,UD=sb.ERR_STREAM_DESTROYED;function F_(t){if(t)throw t}function jD(t){return t.setHeader&&typeof t.abort=="function"}function $D(t,e,n,r){r=MD(r);var i=!1;t.on("close",function(){i=!0}),fp===void 0&&(fp=W0),fp(t,{readable:e,writable:n},function(s){if(s)return r(s);i=!0,r()});var o=!1;return function(s){if(!i&&!o){if(o=!0,jD(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();r(s||new UD("pipe"))}}}function D_(t){t()}function BD(t,e){return t.pipe(e)}function HD(t){return!t.length||typeof t[t.length-1]!="function"?F_:t.pop()}function KD(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=HD(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new LD("streams");var i,o=e.map(function(s,a){var c=a<e.length-1,u=a>0;return $D(s,c,u,function(l){i||(i=l),l&&o.forEach(D_),!c&&(o.forEach(D_),r(i))})});return e.reduce(BD)}var WD=KD;(function(t,e){e=t.exports=J1,e.Stream=e,e.Readable=e,e.Writable=K1,e.Duplex=Oc,e.Transform=ib,e.PassThrough=OD,e.finished=W0,e.pipeline=WD})(xc,xc.exports);class qD{constructor(e,n){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,!n&&e&&!e[0]&&(n=e,e=null),n=n||{},this._factory=n.factory||j0,e&&this.addQuads(e)}get size(){let e=this._size;if(e!==null)return e;e=0;const n=this._graphs;let r,i;for(const o in n)for(const s in r=n[o].subjects)for(const a in i=r[s])e+=Object.keys(i[a]).length;return this._size=e}_addToIndex(e,n,r,i){const o=e[n]||(e[n]={}),s=o[r]||(o[r]={}),a=i in s;return a||(s[i]=null),!a}_removeFromIndex(e,n,r,i){const o=e[n],s=o[r];delete s[i];for(const a in s)return;delete o[r];for(const a in o)return;delete e[n]}*_findInIndex(e,n,r,i,o,s,a,c){let u,l,d;const p=this._entities,g=Qo(c,this._factory),y={subject:null,predicate:null,object:null};n&&((u=e,e={})[n]=u[n]);for(const w in e)if(l=e[w]){y[o]=Qo(p[w],this._factory),r&&((u=l,l={})[r]=u[r]);for(const b in l)if(d=l[b]){y[s]=Qo(p[b],this._factory);const E=i?i in d?[i]:[]:Object.keys(d);for(let S=0;S<E.length;S++)y[a]=Qo(p[E[S]],this._factory),yield this._factory.quad(y.subject,y.predicate,y.object,g)}}}_loop(e,n){for(const r in e)n(r)}_loopByKey0(e,n,r){let i,o;if(i=e[n])for(o in i)r(o)}_loopByKey1(e,n,r){let i,o;for(i in e)o=e[i],o[n]&&r(i)}_loopBy2Keys(e,n,r,i){let o,s,a;if((o=e[n])&&(s=o[r]))for(a in s)i(a)}_countInIndex(e,n,r,i){let o=0,s,a,c;n&&((s=e,e={})[n]=s[n]);for(const u in e)if(a=e[u]){r&&((s=a,a={})[r]=s[r]);for(const l in a)(c=a[l])&&(i?i in c&&o++:o+=Object.keys(c).length)}return o}_getGraphs(e){if(!Ti(e))return this._graphs;const n={};return n[e]=this._graphs[e],n}_uniqueEntities(e){const n=Object.create(null);return r=>{r in n||(n[r]=!0,e(Qo(this._entities[r],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,n,r,i){n||(i=e.graph,r=e.object,n=e.predicate,e=e.subject),e=jt(e),n=jt(n),r=jt(r),i=jt(i);let o=this._graphs[i];o||(o=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(o));const s=this._ids,a=this._entities;e=s[e]||(s[a[++this._id]=e]=this._id),n=s[n]||(s[a[++this._id]=n]=this._id),r=s[r]||(s[a[++this._id]=r]=this._id);const c=this._addToIndex(o.subjects,e,n,r);return this._addToIndex(o.predicates,n,r,e),this._addToIndex(o.objects,r,e,n),this._size=null,c}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}delete(e){return this.removeQuad(e),this}has(e,n,r,i){return e&&e.subject&&({subject:e,predicate:n,object:r,graph:i}=e),!this.readQuads(e,n,r,i).next().done}import(e){return e.on("data",n=>{this.addQuad(n)}),e}removeQuad(e,n,r,i){n||(i=e.graph,r=e.object,n=e.predicate,e=e.subject),e=jt(e),n=jt(n),r=jt(r),i=jt(i);const o=this._ids,s=this._graphs;let a,c,u;if(!(e=o[e])||!(n=o[n])||!(r=o[r])||!(a=s[i])||!(c=a.subjects[e])||!(u=c[n])||!(r in u))return!1;this._removeFromIndex(a.subjects,e,n,r),this._removeFromIndex(a.predicates,n,r,e),this._removeFromIndex(a.objects,r,e,n),this._size!==null&&this._size--;for(e in a.subjects)return!0;return delete s[i],!0}removeQuads(e){for(let n=0;n<e.length;n++)this.removeQuad(e[n])}remove(e){return e.on("data",n=>{this.removeQuad(n)}),e}removeMatches(e,n,r,i){const o=new xc.exports.Readable({objectMode:!0});return o._read=()=>{for(const s of this.readQuads(e,n,r,i))o.push(s);o.push(null)},this.remove(o)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,n,r,i){return[...this.readQuads(e,n,r,i)]}*readQuads(e,n,r,i){e=e&&jt(e),n=n&&jt(n),r=r&&jt(r),i=i&&jt(i);const o=this._getGraphs(i),s=this._ids;let a,c,u,l;if(!(Ti(e)&&!(c=s[e])||Ti(n)&&!(u=s[n])||Ti(r)&&!(l=s[r])))for(const d in o)(a=o[d])&&(c?l?yield*this._findInIndex(a.objects,l,c,u,"object","subject","predicate",d):yield*this._findInIndex(a.subjects,c,u,null,"subject","predicate","object",d):u?yield*this._findInIndex(a.predicates,u,l,null,"predicate","object","subject",d):l?yield*this._findInIndex(a.objects,l,null,null,"object","subject","predicate",d):yield*this._findInIndex(a.subjects,null,null,null,"subject","predicate","object",d))}match(e,n,r,i){return new z0(this,e,n,r,i)}countQuads(e,n,r,i){e=e&&jt(e),n=n&&jt(n),r=r&&jt(r),i=i&&jt(i);const o=this._getGraphs(i),s=this._ids;let a=0,c,u,l,d;if(Ti(e)&&!(u=s[e])||Ti(n)&&!(l=s[n])||Ti(r)&&!(d=s[r]))return 0;for(const p in o)(c=o[p])&&(e?r?a+=this._countInIndex(c.objects,d,u,l):a+=this._countInIndex(c.subjects,u,l,d):n?a+=this._countInIndex(c.predicates,l,d,u):a+=this._countInIndex(c.objects,d,u,l));return a}forEach(e,n,r,i,o){this.some(s=>(e(s),!1),n,r,i,o)}every(e,n,r,i,o){let s=!1;const a=!this.some(c=>(s=!0,!e(c)),n,r,i,o);return s&&a}some(e,n,r,i,o){for(const s of this.readQuads(n,r,i,o))if(e(s))return!0;return!1}getSubjects(e,n,r){const i=[];return this.forSubjects(o=>{i.push(o)},e,n,r),i}forSubjects(e,n,r,i){n=n&&jt(n),r=r&&jt(r),i=i&&jt(i);const o=this._ids,s=this._getGraphs(i);let a,c,u;if(e=this._uniqueEntities(e),!(Ti(n)&&!(c=o[n])||Ti(r)&&!(u=o[r])))for(i in s)(a=s[i])&&(c?u?this._loopBy2Keys(a.predicates,c,u,e):this._loopByKey1(a.subjects,c,e):u?this._loopByKey0(a.objects,u,e):this._loop(a.subjects,e))}getPredicates(e,n,r){const i=[];return this.forPredicates(o=>{i.push(o)},e,n,r),i}forPredicates(e,n,r,i){n=n&&jt(n),r=r&&jt(r),i=i&&jt(i);const o=this._ids,s=this._getGraphs(i);let a,c,u;if(e=this._uniqueEntities(e),!(Ti(n)&&!(c=o[n])||Ti(r)&&!(u=o[r])))for(i in s)(a=s[i])&&(c?u?this._loopBy2Keys(a.objects,u,c,e):this._loopByKey0(a.subjects,c,e):u?this._loopByKey1(a.predicates,u,e):this._loop(a.predicates,e))}getObjects(e,n,r){const i=[];return this.forObjects(o=>{i.push(o)},e,n,r),i}forObjects(e,n,r,i){n=n&&jt(n),r=r&&jt(r),i=i&&jt(i);const o=this._ids,s=this._getGraphs(i);let a,c,u;if(e=this._uniqueEntities(e),!(Ti(n)&&!(c=o[n])||Ti(r)&&!(u=o[r])))for(i in s)(a=s[i])&&(c?u?this._loopBy2Keys(a.subjects,c,u,e):this._loopByKey1(a.objects,c,e):u?this._loopByKey0(a.predicates,u,e):this._loop(a.objects,e))}getGraphs(e,n,r){const i=[];return this.forGraphs(o=>{i.push(o)},e,n,r),i}forGraphs(e,n,r,i){for(const o in this._graphs)this.some(s=>(e(s.graph),!0),n,r,i,o)}createBlankNode(e){let n,r;if(e)for(n=e=`_:${e}`,r=1;this._ids[n];)n=e+r++;else do n=`_:b${this._blankNodeIndex++}`;while(this._ids[n]);return this._ids[n]=++this._id,this._entities[this._id]=n,this._factory.blankNode(n.substr(2))}extractLists({remove:e=!1,ignoreErrors:n=!1}={}){const r={},i=n?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},o=this.getQuads(null,Gr.rdf.rest,Gr.rdf.nil,null),s=e?[...o]:[];return o.forEach(a=>{const c=[];let u=!1,l,d;const p=a.graph;let g=a.subject;for(;g&&!u;){const y=this.getQuads(null,null,g,null),w=this.getQuads(g,null,null,null);let b,E=null,S=null,R=null;for(let F=0;F<w.length&&!u;F++)b=w[F],b.graph.equals(p)?l?u=i(g,"has non-list arcs out"):b.predicate.value===Gr.rdf.first?E?u=i(g,"has multiple rdf:first arcs"):s.push(E=b):b.predicate.value===Gr.rdf.rest?S?u=i(g,"has multiple rdf:rest arcs"):s.push(S=b):y.length?u=i(g,"can't be subject and object"):(l=b,d="subject"):u=i(g,"not confined to single graph");for(let F=0;F<y.length&&!u;++F)b=y[F],l?u=i(g,"can't have coreferences"):b.predicate.value===Gr.rdf.rest?R?u=i(g,"has incoming rdf:rest arcs"):R=b:(l=b,d="object");E?c.unshift(E.object):u=i(g,"has no list head"),g=R&&R.subject}u?e=!1:l&&(r[l[d].value]=c)}),e&&this.removeQuads(s),r}*[Symbol.iterator](){yield*this.readQuads()}}function Ti(t){return typeof t=="string"||t instanceof String}class z0 extends xc.exports.Readable{constructor(e,n,r,i,o){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:n,predicate:r,object:i,graph:o})}get filtered(){if(!this._filtered){const{n3Store:e,graph:n,object:r,predicate:i,subject:o}=this,s=this._filtered=new qD({factory:e._factory});for(const a of e.readQuads(o,i,r,n))s.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,n,r,i){return new z0(this.filtered,e,n,r,i)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class rO extends xc.exports.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;const n=new $0(e);let r,i;n.parse({on:(o,s)=>{switch(o){case"data":r=s;break;case"end":i=s;break}}},(o,s)=>{o&&this.emit("error",o)||s&&this.push(s)},(o,s)=>{this.emit("prefix",o,s)}),this._transform=(o,s,a)=>{r(o),a()},this._flush=o=>{i(),o()}}import(e){return e.on("data",n=>{this.write(n)}),e.on("end",()=>{this.end()}),e.on("error",n=>{this.emit("error",n)}),this}}class iO extends xc.exports.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const n=this._writer=new L1({write:(r,i,o)=>{this.push(r),o&&o()},end:r=>{this.push(null),r&&r()}},e);this._transform=(r,i,o)=>{n.addQuad(r,o)},this._flush=r=>{n.end(r)}}import(e){return e.on("data",n=>{this.write(n)}),e.on("end",()=>{this.end()}),e.on("error",n=>{this.emit("error",n)}),e.on("prefix",(n,r)=>{this._writer.addPrefix(n,r)}),this}}function Ff(t){const e=t;return typeof e=="object"&&typeof e.internal_resourceInfo=="object"}function cl(t){const e=t;return typeof e=="object"&&typeof e.internal_resourceInfo=="object"&&typeof e.internal_resourceInfo.linkedResources=="object"}function Mc(t){const e=t;return typeof e.internal_changeLog=="object"&&Array.isArray(e.internal_changeLog.additions)&&Array.isArray(e.internal_changeLog.deletions)}class ul extends Error{}function st(t){return typeof t=="string"?t:t.value}const ab=async(t,e)=>{if(typeof window=="object"&&typeof require!="function")return await window.fetch(t,e);if(typeof require!="function"){const i=(await $E(()=>Promise.resolve().then(function(){return IT}),void 0)).default;return i(t,e)}let n;return n=require("cross-fetch"),await n(t,e)};function Y0(t){var e,n,r,i,o;const s=(n=(e=t.headers.get("Content-Type"))===null||e===void 0?void 0:e.split(";"))!==null&&n!==void 0?n:[],a=s.length>0&&["text/turtle","application/ld+json"].includes(s[0]),c={sourceIri:t.url,isRawData:!a,contentLocation:(r=t.headers.get("Content-Location"))!==null&&r!==void 0?r:void 0,contentType:(i=t.headers.get("Content-Type"))!==null&&i!==void 0?i:void 0,linkedResources:{},location:(o=t.headers.get("Location"))!==null&&o!==void 0?o:void 0},u=t.headers.get("Link");if(u){const d=NR.parse(u),p=d.get("rel","acl");p.length===1&&(c.aclUrl=new URL(p[0].uri,c.sourceIri).href),c.linkedResources=d.refs.reduce((g,y)=>{var w,b;return(w=g[b=y.rel])!==null&&w!==void 0||(g[b]=[]),g[y.rel].push(new URL(y.uri,c.sourceIri).href),g},c.linkedResources)}const l=t.headers.get("WAC-Allow");return l&&(c.permissions=VD(l)),c}function VD(t){function e(r){const i=r.split(" ");return i.includes("write")?{read:i.includes("read"),append:!0,write:!0,control:i.includes("control")}:{read:i.includes("read"),append:i.includes("append"),write:!1,control:i.includes("control")}}function n(r,i){const o=r.split(",").map(a=>a.split("=")).filter(a=>a.length===2&&a[0].trim()===i);if(o.length!==1)return"";const s=o[0][1].trim();return s.charAt(0)!=='"'||s.charAt(s.length-1)!=='"'?"":s.substring(1,s.length-1)}return{user:e(n(t,"user")),public:e(n(t,"public"))}}function ll(t){let e;return typeof t.slice=="function"?e=Object.assign(t.slice(),Object.assign({},t)):e=Object.assign({},t),e}function dl(t){return!t.ok}function GD(t){return t.status===401||t.status===403}const ui={type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"},zD={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Container:"http://www.w3.org/ns/ldp#Container",Resource:"http://www.w3.org/ns/ldp#Resource",contains:"http://www.w3.org/ns/ldp#contains"},le={AccessControlResource:"http://www.w3.org/ns/solid/acp#AccessControlResource",Policy:"http://www.w3.org/ns/solid/acp#Policy",AccessControl:"http://www.w3.org/ns/solid/acp#AccessControl",Read:"http://www.w3.org/ns/solid/acp#Read",Append:"http://www.w3.org/ns/solid/acp#Append",Write:"http://www.w3.org/ns/solid/acp#Write",Rule:"http://www.w3.org/ns/solid/acp#Rule",Matcher:"http://www.w3.org/ns/solid/acp#Matcher",accessControl:"http://www.w3.org/ns/solid/acp#accessControl",memberAccessControl:"http://www.w3.org/ns/solid/acp#memberAccessControl",apply:"http://www.w3.org/ns/solid/acp#apply",applyMembers:"http://www.w3.org/ns/solid/acp#applyMembers",allow:"http://www.w3.org/ns/solid/acp#allow",deny:"http://www.w3.org/ns/solid/acp#deny",allOf:"http://www.w3.org/ns/solid/acp#allOf",anyOf:"http://www.w3.org/ns/solid/acp#anyOf",noneOf:"http://www.w3.org/ns/solid/acp#noneOf",access:"http://www.w3.org/ns/solid/acp#access",accessMembers:"http://www.w3.org/ns/solid/acp#accessMembers",agent:"http://www.w3.org/ns/solid/acp#agent",group:"http://www.w3.org/ns/solid/acp#group",client:"http://www.w3.org/ns/solid/acp#client",PublicAgent:"http://www.w3.org/ns/solid/acp#PublicAgent",AuthenticatedAgent:"http://www.w3.org/ns/solid/acp#AuthenticatedAgent",CreatorAgent:"http://www.w3.org/ns/solid/acp#CreatorAgent"},Hs={PublicOidcClient:"http://www.w3.org/ns/solid/terms#PublicOidcClient"},gn={fetch:ab};async function fl(t,e=Object.assign(Object.assign({},gn),{ignoreAuthenticationErrors:!1})){var n;const i=await Object.assign(Object.assign({},gn),e).fetch(t,{method:"HEAD"});return cb(i,{ignoreAuthenticationErrors:(n=e.ignoreAuthenticationErrors)!==null&&n!==void 0?n:!1})}function cb(t,e={ignoreAuthenticationErrors:!1}){if(dl(t)&&(!GD(t)||!e.ignoreAuthenticationErrors))throw new hl(`Fetching the metadata of the Resource at [${t.url}] failed: [${t.status}] [${t.statusText}].`,t);return{internal_resourceInfo:Y0(t)}}function YD(t){var e;return(e=t.internal_resourceInfo.contentType)!==null&&e!==void 0?e:null}function Qe(t){return Ff(t)?t.internal_resourceInfo.sourceIri:null}const ya=Qe;function JD(t){return t.internal_resourceInfo.linkedResources}class hl extends ul{constructor(e,n){super(e),this.response=n}get statusCode(){return this.response.status}get statusText(){return this.response.statusText}}const C_={fetch:ab};async function ub(t,e=C_){const n=Object.assign(Object.assign({},C_),e),r=st(t),i=await n.fetch(r,n.init);if(dl(i))throw new hl(`Fetching the File failed: [${i.status}] [${i.statusText}].`,i);const o=Y0(i),s=await i.blob();return Object.assign(s,{internal_resourceInfo:o})}n1.dataset;const Ud="https://inrupt.com/.well-known/sdk-local-node/",Ee=Object.freeze;function ao(t){return t.substring(0,Ud.length)===Ud}function Yi(t){return t.substring(Ud.length)}function ZD(t){return`${Ud}${t}`}function Df(t){return typeof t=="string"&&t.substring(0,2)==="_:"}function J0(t){return t.substring(2)}function lb(t){return`_:${t.value}`}const Tn={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",date:"http://www.w3.org/2001/XMLSchema#date",time:"http://www.w3.org/2001/XMLSchema#time",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function QD(t){return t?"true":"false"}function db(t){return t==="true"||t==="1"?!0:t==="false"||t==="0"?!1:null}function XD(t){let e,n;if(t.millisecond&&(t.millisecond<10?e="00"+t.millisecond:t.millisecond<100?e="0"+t.millisecond:e=t.millisecond),typeof t.timezoneHourOffset=="number"){const r=Math.abs(t.timezoneHourOffset)<10?"0"+Math.abs(t.timezoneHourOffset):Math.abs(t.timezoneHourOffset);n=t.timezoneHourOffset>=0?"+"+r:"-"+r,t.timezoneMinuteOffset?n=n+":"+(t.timezoneMinuteOffset<10?"0"+t.timezoneMinuteOffset:t.timezoneMinuteOffset):n=n+":00"}return(t.hour<10?"0"+t.hour:t.hour)+":"+(t.minute<10?"0"+t.minute:t.minute)+":"+(t.second<10?"0"+t.second:t.second)+(t.millisecond?"."+e:"")+(n||"")}function eC(t){if(!/\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(t))return null;const[n,r]=Z0(t),[i,o,s]=n.split(":");let a=Number.parseInt(i,10),c=Number.parseInt(o,10);const[u,l]=s.split("."),d=Number.parseInt(u,10),p=l?Number.parseInt(l,10):void 0;c>=60&&(a=a+1,c=c-60);const g={hour:a,minute:c,second:d};if(typeof p=="number"&&(g.millisecond=p),typeof r=="string"){const[y,w]=hb(r);if(typeof y!="number"||y>24||typeof w!="number"||w>59)return null;g.timezoneHourOffset=y,g.timezoneMinuteOffset=w}return g}function tC(t){return t.toISOString()}function fb(t){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(t))return null;const[n,r]=t.split("T"),[i,o]=n.charAt(0)==="-"?[-1,n.substring(1)]:[1,n],[s,a,c]=o.split("-"),u=Number.parseInt(s,10)*i,l=Number.parseInt(a,10)-1,d=Number.parseInt(c,10),[p,g]=Z0(r),[y,w]=typeof g=="string"?hb(g):[0,0],[b,E,S]=p.split(":"),R=Number.parseInt(b,10)+y,F=Number.parseInt(E,10)+w,[M,P]=S.split("."),D=Number.parseInt(M,10),Y=P?Number.parseInt(P,10):0,Q=new Date(Date.UTC(u,l,d,R,F,D,Y));return u>=0&&u<100&&Q.setUTCFullYear(Q.getUTCFullYear()-1900),Q}function nC(t){const e=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),[i,o]=Z0(t.toISOString());return`${e}-${String(n).padStart(2,"0")}-${String(r).padStart(2,"0")}${o}`}function rC(t){if(!/-?\d{4,}-\d\d-\d\d(Z|(\+|-)\d\d:\d\d)?/.test(t))return null;const n=t,[r,i]=n.charAt(0)==="-"?[-1,n.substring(1)]:[1,n],[o,s,a]=i.split("-"),c=a.length>2?a.substring(0,2):a,u=Number.parseInt(o,10)*r,l=Number.parseInt(s,10)-1,d=Number.parseInt(c,10),p=12,g=new Date(Date.UTC(u,l,d,p));return u>=0&&u<100&&g.setUTCFullYear(g.getUTCFullYear()-1900),g}function Z0(t){if(t.endsWith("Z"))return[t.substring(0,t.length-1),"Z"];const e=t.split("+"),n=t.split("-");return e.length===1&&n.length===1?[e[0],void 0]:e.length>n.length?[e[0],"+"+e[1]]:[n[0],"-"+n[1]]}function hb(t){if(t==="Z")return[0,0];const e=t.charAt(0)==="+"?1:-1,[n,r]=t.substring(1).split(":"),i=Number.parseInt(n,10),o=Number.parseInt(r,10);return[i*e,o*e]}function iC(t){return t.toString()}function pb(t){const e=Number.parseFloat(t);return Number.isNaN(e)?null:e}function oC(t){return t.toString()}function gb(t){const e=Number.parseInt(t,10);return Number.isNaN(e)?null:e}function pg(t){return t.toLowerCase()}function fr(t){return mb(t)&&t.termType==="NamedNode"}function sC(t){return mb(t)&&t.termType==="Literal"}function mb(t){return t!==null&&typeof t=="object"&&typeof t.termType=="string"&&typeof t.value=="string"&&typeof t.equals=="function"}function P_(t){return fr(t)&&ao(t.value)}function Fn(t){const e=st(t);if(typeof URL!="function")return!0;try{new URL(e)}catch{return!1}return!0}function N_(t,e){return ci.namedNode(pl(Yi(t.value),e))}function pl(t,e){if(typeof URL!="function")throw new Error("The URL interface is not available, so an IRI cannot be determined.");const n=new URL(e);return n.hash=t,n.href}const ci=bf;function O_(t,e,n={}){var r;if(!["NamedNode","DefaultGraph"].includes(e.graph.termType))throw new Error(`Cannot parse Quads with nodes of type [${e.graph.termType}] as their Graph node.`);const o=e.graph.termType==="DefaultGraph"?"default":e.graph.value,s=(r=t.graphs[o])!==null&&r!==void 0?r:{};return Ee(Object.assign(Object.assign({},t),{graphs:Ee(Object.assign(Object.assign({},t.graphs),{[o]:aC(s,e,n)}))}))}function aC(t,e,n){var r;if(!["NamedNode","BlankNode"].includes(e.subject.termType))throw new Error(`Cannot parse Quads with nodes of type [${e.subject.termType}] as their Subject node.`);const o=e.subject.termType==="BlankNode"?`_:${e.subject.value}`:e.subject.value,s=(r=t[o])!==null&&r!==void 0?r:{type:"Subject",url:o,predicates:{}};return Ee(Object.assign(Object.assign({},t),{[o]:cC(s,e,n)}))}function cC(t,e,n){return Ee(Object.assign(Object.assign({},t),{predicates:uC(t.predicates,e,n)}))}function uC(t,e,n){var r;if(!["NamedNode"].includes(e.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${e.predicate.termType}] as their Predicate node.`);const o=e.predicate.value,s=(r=t[o])!==null&&r!==void 0?r:{};return Ee(Object.assign(Object.assign({},t),{[o]:yb(s,e,n)}))}function yb(t,e,n){var r,i,o,s,a,c,u,l;if(e.object.termType==="NamedNode"){const d=Ee([...(r=t.namedNodes)!==null&&r!==void 0?r:[],e.object.value]);return Ee(Object.assign(Object.assign({},t),{namedNodes:d}))}if(e.object.termType==="Literal"){if(e.object.datatype.value===Tn.langString){const g=e.object.language.toLowerCase(),y=Ee([...(o=(i=t.langStrings)===null||i===void 0?void 0:i[g])!==null&&o!==void 0?o:[],e.object.value]),w=Ee(Object.assign(Object.assign({},(s=t.langStrings)!==null&&s!==void 0?s:{}),{[g]:y}));return Ee(Object.assign(Object.assign({},t),{langStrings:w}))}const d=Ee([...(c=(a=t.literals)===null||a===void 0?void 0:a[e.object.datatype.value])!==null&&c!==void 0?c:[],e.object.value]),p=Ee(Object.assign(Object.assign({},(u=t.literals)!==null&&u!==void 0?u:{}),{[e.object.datatype.value]:d}));return Ee(Object.assign(Object.assign({},t),{literals:p}))}if(e.object.termType==="BlankNode"){const d=_b(e.object,n),p=Ee([...(l=t.blankNodes)!==null&&l!==void 0?l:[],d]);return Ee(Object.assign(Object.assign({},t),{blankNodes:p}))}throw new Error(`Objects of type [${e.object.termType}] are not supported.`)}function _b(t,e){var n,r;if(((n=e.chainBlankNodes)!==null&&n!==void 0?n:[]).find(u=>u.equals(t))===void 0)return lb(t);const s=((r=e.otherQuads)!==null&&r!==void 0?r:[]).filter(u=>u.subject.equals(t)),a=s.filter(u=>!Lu(u.object)).reduce((u,l)=>{var d;if(!["NamedNode"].includes(l.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${l.predicate.termType}] as their Predicate node.`);const g=(d=u[l.predicate.value])!==null&&d!==void 0?d:{};return Ee(Object.assign(Object.assign({},u),{[l.predicate.value]:yb(g,l,e)}))},{});return s.filter(u=>Lu(u.object)).reduce((u,l)=>{var d,p;if(!["NamedNode"].includes(l.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${l.predicate.termType}] as their Predicate node.`);const y=(d=u[l.predicate.value])!==null&&d!==void 0?d:{},w=(p=y.blankNodes)!==null&&p!==void 0?p:[];return Ee(Object.assign(Object.assign({},u),{[l.predicate.value]:Object.assign(Object.assign({},y),{blankNodes:[...w,_b(l.object,e)]})}))},a)}function lC(t){const e=t.map(s=>s.subject).filter(Lu),n=t.map(s=>s.object).filter(Lu);function r(s){return s.every(a=>s.every(c=>a.equals(c)))}const i=[];return n.forEach(s=>{i.push(...wb(s,t))}),e.concat(n).filter(s=>{if(i.some(c=>c.equals(s)))return!1;const a=t.filter(c=>c.object.equals(s)).map(c=>c.subject);return a.length>0&&r(a)})}function dC(t,e={}){var n;const r=[],i=(n=e.dataFactory)!==null&&n!==void 0?n:bf;return Object.keys(t.graphs).forEach(o=>{const s=t.graphs[o],a=o==="default"?i.defaultGraph():i.namedNode(o);Object.keys(s).forEach(c=>{const u=s[c].predicates,l=Df(c)?i.blankNode(J0(c)):i.namedNode(c);r.push(...Mu(u,l,a,e))})}),r}function Mu(t,e,n,r={}){var i;const o=[],s=(i=r.dataFactory)!==null&&i!==void 0?i:bf;return Object.keys(t).forEach(a=>{var c,u,l,d;const p=s.namedNode(a),g=(c=t[a].langStrings)!==null&&c!==void 0?c:{},y=(u=t[a].namedNodes)!==null&&u!==void 0?u:[],w=(l=t[a].literals)!==null&&l!==void 0?l:{},b=(d=t[a].blankNodes)!==null&&d!==void 0?d:[];Object.keys(w).forEach(R=>{const F=s.namedNode(R);w[R].forEach(P=>{const D=s.literal(P,F);o.push(s.quad(e,p,D,n))})}),Object.keys(g).forEach(R=>{g[R].forEach(M=>{const P=s.literal(M,R);o.push(s.quad(e,p,P,n))})}),y.forEach(R=>{const F=s.namedNode(R);o.push(s.quad(e,p,F,n))}),b.forEach(R=>{if(Df(R)){const F=s.blankNode(J0(R));o.push(s.quad(e,p,F,n))}else{const F=s.blankNode(),M=s.quad(e,p,F,n),P=Mu(R,F,n);o.push(M),o.push(...P)}})}),o}function wb(t,e,n=[]){if(n.find(a=>a.equals(t))!==void 0)return n;const r=e.filter(a=>a.subject.equals(t)&&Lu(a.object)).map(a=>a.object);if(r.length===0)return[];const i=[...n,t],o=r.map(a=>wb(a,e,i)),s=[];for(const a of o)s.push(...a);return s}function Lu(t){return t.termType==="BlankNode"}const fC=()=>{const t=[],e=[],n=[];return{onQuad:r=>{t.push(r)},onError:r=>{n.push(r)},onComplete:r=>{e.push(r)},parse:async(r,i)=>{(await hC(Qe(i))).parse(r,(s,a,c)=>{s?n.forEach(u=>u(s)):a?t.forEach(u=>u(a)):e.forEach(u=>u())})}}};async function hC(t){return new $0({format:"text/turtle",baseIRI:t})}async function gg(t){const e="text/turtle",n=new L1({format:e}),r=t.map(s=>ci.quad(s.subject,s.predicate,s.object,void 0));return n.addQuads(r),await new Promise((s,a)=>{n.end((c,u)=>{if(c)return a(c);s(u)})})}function mg(t){var e,n,r,i,o,s,a,c;if(fr(t))return`<${t.value}> (URL)`;if(sC(t)){if(!fr(t.datatype))return`[${t.value}] (RDF/JS Literal of unknown type)`;let u;switch(t.datatype.value){case Tn.boolean:return u=(n=(e=db(t.value))===null||e===void 0?void 0:e.valueOf())!==null&&n!==void 0?n:`Invalid data: \`${t.value}\``,u+" (boolean)";case Tn.dateTime:return u=(i=(r=fb(t.value))===null||r===void 0?void 0:r.toUTCString())!==null&&i!==void 0?i:`Invalid data: \`${t.value}\``,u+" (datetime)";case Tn.decimal:return u=(s=(o=pb(t.value))===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:`Invalid data: \`${t.value}\``,u+" (decimal)";case Tn.integer:return u=(c=(a=gb(t.value))===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:`Invalid data: \`${t.value}\``,u+" (integer)";case Tn.langString:return`"${t.value}" (${t.language} string)`;case Tn.string:return`"${t.value}" (string)`;default:return`[${t.value}] (RDF/JS Literal of type: \`${t.datatype.value}\`)`}}return t.termType==="BlankNode"?`[${t.value}] (RDF/JS BlankNode)`:t.termType==="Quad"?"??? (nested RDF* Quad)":t.termType==="Variable"?`?${t.value} (RDF/JS Variable)`:t}function ut(t){if(!gl(t))throw new TC(t)}function pC(t,e){const n=Mc(t)?t.internal_changeLog:{additions:[],deletions:[]},[r,i]=e.filter(o=>!bb(o)).reduce(([o,s],a)=>typeof s.find(u=>u.equals(a))!="undefined"?[o,s.filter(u=>!u.equals(a))]:[o.concat(a),s],[n.additions,n.deletions]);return Ee(Object.assign(Object.assign({},t),{internal_changeLog:{additions:r,deletions:i}}))}function vb(t,e){const n=Mc(t)?t.internal_changeLog:{additions:[],deletions:[]},[r,i]=e.filter(o=>!bb(o)).reduce(([o,s],a)=>typeof o.find(u=>u.equals(a))!="undefined"?[o.filter(u=>!u.equals(a)),s]:[o,s.concat(a)],[n.additions,n.deletions]);return Ee(Object.assign(Object.assign({},t),{internal_changeLog:{additions:r,deletions:i}}))}function gC(t){return Mc(t)?t:Ee(Object.assign(Object.assign({},t),{internal_changeLog:{additions:[],deletions:[]}}))}function bb(t){return t.subject.termType==="BlankNode"||t.object.termType==="BlankNode"}function mC(t,e){var n,r,i;if(ut(t),!Fn(e))throw new Jr(e);const o=st(e),s=(i=(r=(n=t.predicates[o])===null||n===void 0?void 0:n.namedNodes)===null||r===void 0?void 0:r[0])!==null&&i!==void 0?i:null;return s===null?null:ao(s)?`#${Yi(s)}`:s}function yC(t,e){var n,r,i;if(ut(t),!Fn(e))throw new Jr(e);const o=st(e);return(i=(r=(n=t.predicates[o])===null||n===void 0?void 0:n.namedNodes)===null||r===void 0?void 0:r.map(s=>ao(s)?`#${Yi(s)}`:s))!==null&&i!==void 0?i:[]}const rt=yC;function _C(t,e){return ut(t),EC(t,e,Tn.string)}function wC(t,e){return rt(t,e).map(r=>ci.namedNode(r))}function vC(t,e){var n,r,i,o;if(ut(t),!Fn(e))throw new Jr(e);const s=st(e);let a=[];const c=(r=(n=t.predicates[s])===null||n===void 0?void 0:n.langStrings)!==null&&r!==void 0?r:{},u=Object.keys(c);for(const p of u){const y=c[p].map(w=>ci.literal(w,p));a=a.concat(y)}const l=(o=(i=t.predicates[s])===null||i===void 0?void 0:i.literals)!==null&&o!==void 0?o:{},d=Object.keys(l);for(const p of d){const g=l[p],y=ci.namedNode(p),w=g.map(b=>ci.literal(b,y));a=a.concat(w)}return a}function bC(t,e){var n,r;ut(t);const i=wC(t,e),o=vC(t,e),s=st(e),c=((r=(n=t.predicates[s])===null||n===void 0?void 0:n.blankNodes)!==null&&r!==void 0?r:[]).map(l=>{const d=Df(l)?J0(l):void 0;return ci.blankNode(d)});return i.concat(o).concat(c)}function EC(t,e,n){var r,i,o;if(!Fn(e))throw new Jr(e);const s=st(e);return[...(o=(i=(r=t.predicates[s])===null||r===void 0?void 0:r.literals)===null||i===void 0?void 0:i[n])!==null&&o!==void 0?o:[]]}function mn(t,e,n={}){var r;if(!Fn(e))throw new Eb(e);const i=typeof n.scope!="undefined"?st(n.scope):"default",o=(r=t.graphs[i])!==null&&r!==void 0?r:{},s=st(e),a=ao(s)&&cl(t)?pl(Yi(s),Qe(t)):s,c=o[a];return typeof c=="undefined"?null:c}function Ks(t,e={acceptBlankNodes:!1}){var n;const r=typeof e.scope!="undefined"?st(e.scope):"default",i=(n=t.graphs[r])!==null&&n!==void 0?n:{};return Object.values(i).filter(o=>!Df(o.url)||e.acceptBlankNodes)}function Ur(t,e){var n;const r=Lc(e)&&cl(t)?pl(Yi(e.url),Qe(t)):e.url,i=t.graphs.default,o=Ee(Object.assign(Object.assign({},i),{[r]:Ee(Object.assign(Object.assign({},e),{url:r}))})),s=Ee(Object.assign(Object.assign({},t.graphs),{default:o})),a=ci.namedNode(r),c=(n=t.graphs.default[r])===null||n===void 0?void 0:n.predicates,u=typeof c!="undefined"?Mu(c,a,ci.defaultGraph()):[],l=Mu(e.predicates,a,ci.defaultGraph());return pC(vb(Ee(Object.assign(Object.assign({},t),{graphs:s})),u),l)}function Ws(t,e){var n;let r;fr(e)?r=e.value:typeof e=="string"?r=ao(e)&&cl(t)?pl(Yi(e),Qe(t)):e:Lc(e)?r=e.url:r=ml(e);const i=t.graphs.default,o=Object.assign({},i);delete o[r];const s=Ee(Object.assign(Object.assign({},t.graphs),{default:Ee(o)})),a=ci.namedNode(r),c=(n=t.graphs.default[r])===null||n===void 0?void 0:n.predicates,u=typeof c!="undefined"?Mu(c,a,ci.defaultGraph()):[];return vb(Ee(Object.assign(Object.assign({},t),{graphs:s})),u)}function li(t={}){var e;if(typeof t.url!="undefined"){const o=t.url;if(!Fn(o))throw new Eb(o);return Ee({type:"Subject",predicates:Ee({}),url:o})}const n=(e=t.name)!==null&&e!==void 0?e:AC(),r=ZD(n);return Ee({type:"Subject",predicates:Ee({}),url:r})}function gl(t){return typeof t=="object"&&t!==null&&typeof t.type=="string"&&t.type==="Subject"}function ls(t,e){if(Lc(t)){if(typeof e=="undefined")throw new Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return pl(Yi(t.url),e)}return t.url}const ml=ls;function SC(t){let e="";Lc(t)?e+=`## Thing (no URL yet \u2014 identifier: \`#${Yi(t.url)}\`)
`:e+=`## Thing: ${t.url}
`;const n=Object.keys(t.predicates);if(n.length===0)e+=`
<empty>
`;else for(const r of n)e+=`
Property: ${r}
`,bC(t,r).forEach(o=>{e+=`- ${mg(o)}
`});return e}function Lc(t){return ao(t.url)}class TC extends ul{constructor(e){const n=`Expected a Thing, but received: [${e}].`;super(n),this.receivedValue=e}}class Jr extends ul{constructor(e){const n=fr(e)?e.value:e,r=`Expected a valid URL to identify a property, but received: [${n}].`;super(r),this.receivedProperty=n}}class Q0 extends ul{constructor(e){const n=fr(e)?e.value:e,r=`Expected a valid URL value, but received: [${n}].`;super(r),this.receivedValue=n}}class Eb extends ul{constructor(e){const n=fr(e)?e.value:e,r=`Expected a valid URL to identify a Thing, but received: [${n}].`;super(r),this.receivedValue=n}}const AC=()=>Date.now().toString()+Math.random().toString().substring(2);function tc(t){const e=new URL(t);return e.hash="",e.href}function Sb(){return Ee({type:"Dataset",graphs:{default:{}}})}async function xC(t,e={}){if(dl(t))throw new hl(`Fetching the SolidDataset at [${t.url}] failed: [${t.status}] [${t.statusText}].`,t);const n=cb(t),r=Object.assign({"text/turtle":fC()},e.parsers),i=YD(n);if(i===null)throw new Error(`Could not determine the content type of the Resource at [${Qe(n)}].`);const o=i.split(";")[0],s=r[o];if(typeof s=="undefined")throw new Error(`The Resource at [${Qe(n)}] has a MIME type of [${o}], but the only parsers available are for the following MIME types: [${Object.keys(r).join(", ")}].`);const a=await t.text();return await new Promise((u,l)=>{let d=Ee({graphs:Ee({default:Ee({})}),type:"Dataset"});const p=[],g=[];s.onError(y=>{l(new Error(`Encountered an error parsing the Resource at [${Qe(n)}] with content type [${i}]: ${y}`))}),s.onQuad(y=>{g.push(y),y.subject.termType==="BlankNode"||y.object.termType==="BlankNode"?p.push(y):d=O_(d,y)}),s.onComplete(async()=>{const w=p.length<=20?lC(p):[];d=p.filter(S=>w.every(R=>!R.equals(S.subject))).reduce((S,R)=>O_(S,R,{otherQuads:g,chainBlankNodes:w}),d);const E=Ee(Object.assign(Object.assign({},d),n));u(E)}),s.parse(a,n)})}async function yl(t,e=gn){var n;t=st(t);const r=Object.assign(Object.assign({},gn),e),i=Object.keys((n=e.parsers)!==null&&n!==void 0?n:{}),o=i.length>0?i.join(", "):"text/turtle",s=await r.fetch(t,{headers:{Accept:o}});if(dl(s))throw new hl(`Fetching the Resource at [${t}] failed: [${s.status}] [${s.statusText}].`,s);return await xC(s,e)}async function IC(t){const e=t.internal_changeLog.deletions.length>0?`DELETE DATA {${(await gg(t.internal_changeLog.deletions.map(yg))).trim()}};`:"",n=t.internal_changeLog.additions.length>0?`INSERT DATA {${(await gg(t.internal_changeLog.additions.map(yg))).trim()}};`:"";return{method:"PATCH",body:`${e} ${n}`,headers:{"Content-Type":"application/sparql-update"}}}async function RC(t){return{method:"PUT",body:await gg(dC(t).map(yg)),headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:`<${zD.Resource}>; rel="type"`}}}async function Tb(t,e,n=gn){t=st(t);const r=Object.assign(Object.assign({},gn),n),i=gC(e),o=M_(i,t)?await IC(i):await RC(i),s=await r.fetch(t,o);if(dl(s)){const l=M_(i,t)?`The changes that were sent to the Pod are listed below.

`+DC(i):`The SolidDataset that was sent to the Pod is listed below.

`+FC(i);throw new hl(`Storing the Resource at [${t}] failed: [${s.status}] [${s.statusText}].

`+l,s)}const a=Object.assign(Object.assign({},Y0(s)),{isRawData:!1}),c=Ee(Object.assign(Object.assign({},e),{internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:a}));return NC(c)}function kC(t,e){return tc(t.internal_resourceInfo.sourceIri)===tc(e)}function M_(t,e){return Mc(t)&&Ff(t)&&typeof t.internal_resourceInfo.sourceIri=="string"&&kC(t,e)}function FC(t){let e="";Ff(t)?e+=`# SolidDataset: ${Qe(t)}
`:e+=`# SolidDataset (no URL yet)
`;const n=Ks(t);return n.length===0?e+=`
<empty>
`:n.forEach(r=>{e+=`
`+SC(r),Mc(t)&&(e+=`
`+PC(t,r)+`
`)}),e}function DC(t){if(!Ff(t))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!Mc(t)||t.internal_changeLog.additions.length===0&&t.internal_changeLog.deletions.length===0)return`## Changes compared to ${Qe(t)}

This SolidDataset has not been modified since it was fetched from ${Qe(t)}.
`;let e=`## Changes compared to ${Qe(t)}
`;const n=CC(t);return Object.keys(n).forEach(r=>{e+=`
### Thing: ${r}
`;const i=n[r];Object.keys(i).forEach(o=>{e+=`
Property: ${o}
`;const s=i[o].deleted,a=i[o].added;s.length>0&&(e+=`- Removed:
`,s.forEach(c=>e+=`  - ${mg(c)}
`)),a.length>0&&(e+=`- Added:
`,a.forEach(c=>e+=`  - ${mg(c)}
`))})}),e}function CC(t){const e={};return t.internal_changeLog.deletions.forEach(n=>{var r,i,o;const s=P_(n.subject)?N_(n.subject,Qe(t)):n.subject;if(!fr(s)||!fr(n.predicate))return;const a=st(s),c=st(n.predicate);(r=e[a])!==null&&r!==void 0||(e[a]={}),(i=(o=e[a])[c])!==null&&i!==void 0||(o[c]={added:[],deleted:[]}),e[a][c].deleted.push(n.object)}),t.internal_changeLog.additions.forEach(n=>{var r,i,o;const s=P_(n.subject)?N_(n.subject,Qe(t)):n.subject;if(!fr(s)||!fr(n.predicate))return;const a=st(s),c=st(n.predicate);(r=e[a])!==null&&r!==void 0||(e[a]={}),(i=(o=e[a])[c])!==null&&i!==void 0||(o[c]={added:[],deleted:[]}),e[a][c].added.push(n.object)}),e}function PC(t,e){const n=ci.namedNode(e.url),r=t.internal_changeLog.additions.reduce((a,c)=>c.subject.equals(n)?a+1:a,0),i=t.internal_changeLog.deletions.reduce((a,c)=>c.subject.equals(n)?a+1:a,0),o=r===1?"1 new value added":r+" new values added",s=i===1?"1 value removed":i+" values removed";return`(${o} / ${s})`}function yg(t){const e=fr(t.subject)?L_(t.subject):t.subject,n=fr(t.object)?L_(t.object):t.object;return ci.quad(e,t.predicate,n,t.graph)}function L_(t){return ao(t.value)?ci.namedNode("#"+Yi(t.value)):t}function NC(t){const e=Qe(t),n=t.graphs.default,i=Object.keys(n).reduce((s,a)=>{const c=OC(s[a],e),u=ao(a)?`${e}#${Yi(a)}`:a,l=Object.assign({},s);return delete l[a],l[u]=c,Ee(l)},n),o=Ee(Object.assign(Object.assign({},t.graphs),{default:i}));return Ee(Object.assign(Object.assign({},t),{graphs:o}))}function OC(t,e){const r=Object.keys(t.predicates).reduce((i,o)=>{var s;const a=(s=i[o].namedNodes)!==null&&s!==void 0?s:[];if(a.every(l=>!ao(l)))return i;const c=Ee(a.map(l=>ao(l)?`${e}#${Yi(l)}`:l)),u=Ee(Object.assign(Object.assign({},i[o]),{namedNodes:c}));return Ee(Object.assign(Object.assign({},i),{[o]:u}))},t.predicates);return Ee(Object.assign(Object.assign({},t),{predicates:r,url:ao(t.url)?`${e}#${Yi(t.url)}`:t.url}))}function MC(t){const e=Sb();return Object.assign(Object.assign({},e),{internal_resourceInfo:{sourceIri:st(t),isRawData:!1,contentType:"text/turtle",linkedResources:{}}})}const Cf=(t,e,n)=>{var r,i;if(ut(t),!Fn(e))throw new Jr(e);if(!gl(n)&&!Fn(n))throw new Q0(n);const o=st(e),s=(r=t.predicates[o])!==null&&r!==void 0?r:{},a=(i=s.namedNodes)!==null&&i!==void 0?i:[];let c;fr(n)?c=n.value:typeof n=="string"?c=n:Lc(n)?c=n.url:c=ml(n);const u=Ee(a.concat(st(c))),l=Ee(Object.assign(Object.assign({},s),{namedNodes:u})),d=Ee(Object.assign(Object.assign({},t.predicates),{[o]:l}));return Ee(Object.assign(Object.assign({},t),{predicates:d}))},at=Cf,Ab=(t,e,n)=>(ut(t),qs(t,e,QD(n),Tn.boolean)),xb=(t,e,n)=>(ut(t),qs(t,e,tC(n),Tn.dateTime)),Ib=(t,e,n)=>(ut(t),qs(t,e,nC(n),Tn.date)),Rb=(t,e,n)=>(ut(t),qs(t,e,XD(n),Tn.time)),kb=(t,e,n)=>(ut(t),qs(t,e,iC(n),Tn.decimal)),Fb=(t,e,n)=>(ut(t),qs(t,e,oC(n),Tn.integer));function jd(t,e,n,r){var i,o,s;if(ut(t),!Fn(e))throw new Jr(e);const a=st(e),c=pg(r),u=(i=t.predicates[a])!==null&&i!==void 0?i:{},l=(o=u.langStrings)!==null&&o!==void 0?o:{},d=(s=l[c])!==null&&s!==void 0?s:[],p=Ee(d.concat(n)),g=Ee(Object.assign(Object.assign({},l),{[c]:p})),y=Ee(Object.assign(Object.assign({},u),{langStrings:g})),w=Ee(Object.assign(Object.assign({},t.predicates),{[a]:y}));return Ee(Object.assign(Object.assign({},t),{predicates:w}))}const X0=(t,e,n)=>(ut(t),qs(t,e,n,Tn.string));function em(t,e,n){return Cf(t,e,n.value)}function tm(t,e,n){if(ut(t),!Fn(e))throw new Jr(e);return n.datatype.value===Tn.langString?jd(t,e,n.value,n.language):qs(t,e,n.value,n.datatype.value)}function Db(t,e,n){var r,i;if(n.termType==="NamedNode")return em(t,e,n);if(n.termType==="Literal")return tm(t,e,n);if(n.termType==="BlankNode"){if(ut(t),!Fn(e))throw new Jr(e);const o=st(e),s=(r=t.predicates[o])!==null&&r!==void 0?r:{},a=(i=s.blankNodes)!==null&&i!==void 0?i:[],c=Ee(a.concat(lb(n))),u=Ee(Object.assign(Object.assign({},s),{blankNodes:c})),l=Ee(Object.assign(Object.assign({},t.predicates),{[o]:u}));return Ee(Object.assign(Object.assign({},t),{predicates:l}))}throw new Error(`Term type [${n.termType}] is not supported by @inrupt/solid-client.`)}function qs(t,e,n,r){var i,o,s;if(ut(t),!Fn(e))throw new Jr(e);const a=st(e),c=(i=t.predicates[a])!==null&&i!==void 0?i:{},u=(o=c.literals)!==null&&o!==void 0?o:{},l=(s=u[r])!==null&&s!==void 0?s:[],d=Ee(l.concat(n)),p=Ee(Object.assign(Object.assign({},u),{[r]:d})),g=Ee(Object.assign(Object.assign({},c),{literals:p})),y=Ee(Object.assign(Object.assign({},t.predicates),{[a]:g}));return Ee(Object.assign(Object.assign({},t),{predicates:y}))}function Ln(t,e){if(ut(t),!Fn(e))throw new Jr(e);const n=st(e),r=Object.assign({},t.predicates);return delete r[n],Ee(Object.assign(Object.assign({},t),{predicates:Ee(r)}))}const nm=(t,e,n)=>{var r,i,o;if(ut(t),!Fn(e))throw new Jr(e);const s=st(e);if(!gl(n)&&!Fn(n))throw new Q0(n);const a=fr(n)?n.value:typeof n=="string"?n:ml(n),c=Ee((o=(i=(r=t.predicates[s])===null||r===void 0?void 0:r.namedNodes)===null||i===void 0?void 0:i.filter(d=>d.toLowerCase()!==a.toLowerCase()))!==null&&o!==void 0?o:[]),u=Ee(Object.assign(Object.assign({},t.predicates[s]),{namedNodes:c})),l=Ee(Object.assign(Object.assign({},t.predicates),{[s]:u}));return Ee(Object.assign(Object.assign({},t),{predicates:l}))},Jt=nm,LC=(t,e,n)=>(ut(t),Ma(t,e,Tn.boolean,r=>db(r)===n)),UC=(t,e,n)=>(ut(t),Ma(t,e,Tn.dateTime,r=>{var i;return((i=fb(r))===null||i===void 0?void 0:i.getTime())===n.getTime()})),jC=(t,e,n)=>(ut(t),Ma(t,e,Tn.date,function(r){const i=rC(r);return i?i.getFullYear()===n.getFullYear()&&i.getMonth()===n.getMonth()&&i.getDate()===n.getDate():!1})),$C=(t,e,n)=>(ut(t),Ma(t,e,Tn.time,function(r){const i=eC(r);return i?i.hour===n.hour&&i.minute===n.minute&&i.second===n.second&&i.millisecond===n.millisecond&&i.timezoneHourOffset===n.timezoneHourOffset&&i.timezoneMinuteOffset===n.timezoneMinuteOffset:!1})),BC=(t,e,n)=>(ut(t),Ma(t,e,Tn.decimal,r=>pb(r)===n)),HC=(t,e,n)=>(ut(t),Ma(t,e,Tn.integer,r=>gb(r)===n));function _g(t,e,n,r){var i,o;if(ut(t),!Fn(e))throw new Jr(e);const s=st(e),a=(o=(i=t.predicates[s])===null||i===void 0?void 0:i.langStrings)!==null&&o!==void 0?o:{},c=Object.keys(a).find(y=>pg(y)===pg(r)&&Array.isArray(a[y])&&a[y].length>0);if(typeof c!="string")return t;const u=a[c],l=Ee(u.filter(y=>y!==n)),d=Ee(Object.assign(Object.assign({},a),{[c]:l})),p=Ee(Object.assign(Object.assign({},t.predicates[s]),{langStrings:d})),g=Ee(Object.assign(Object.assign({},t.predicates),{[s]:p}));return Ee(Object.assign(Object.assign({},t),{predicates:g}))}const Cb=(t,e,n)=>(ut(t),Ma(t,e,Tn.string,r=>r===n));function KC(t,e,n){return nm(t,e,n.value)}function WC(t,e,n){var r,i,o;if(ut(t),!Fn(e))throw new Jr(e);const s=n.datatype.value;if(s===Tn.langString)return _g(t,e,n.value,n.language);const a=st(e),c=(r=t.predicates[a])!==null&&r!==void 0?r:{},u=(i=c.literals)!==null&&i!==void 0?i:{},l=(o=u[s])!==null&&o!==void 0?o:[],d=Ee(l.filter(b=>b!==n.value)),p=Ee(Object.assign(Object.assign({},u),{[s]:d})),g=Ee(Object.assign(Object.assign({},c),{literals:p})),y=Ee(Object.assign(Object.assign({},t.predicates),{[a]:g}));return Ee(Object.assign(Object.assign({},t),{predicates:y}))}function Ma(t,e,n,r){var i,o,s;if(!Fn(e))throw new Jr(e);const a=st(e),c=(i=t.predicates[a])!==null&&i!==void 0?i:{},u=(o=c.literals)!==null&&o!==void 0?o:{},l=(s=u[n])!==null&&s!==void 0?s:[],d=Ee(l.filter(b=>!r(b))),p=Ee(Object.assign(Object.assign({},u),{[n]:d})),g=Ee(Object.assign(Object.assign({},c),{literals:p})),y=Ee(Object.assign(Object.assign({},t.predicates),{[a]:g}));return Ee(Object.assign(Object.assign({},t),{predicates:y}))}const Vs=(t,e,n)=>{if(ut(t),!Fn(e))throw new Jr(e);if(!gl(n)&&!Fn(n))throw new Q0(n);return Cf(Ln(t,e),e,n)},Ci=Vs,qC=(t,e,n)=>(ut(t),Ab(Ln(t,e),e,n)),VC=(t,e,n)=>(ut(t),xb(Ln(t,e),e,n)),GC=(t,e,n)=>(ut(t),Ib(Ln(t,e),e,n)),zC=(t,e,n)=>(ut(t),Rb(Ln(t,e),e,n)),YC=(t,e,n)=>(ut(t),kb(Ln(t,e),e,n)),JC=(t,e,n)=>(ut(t),Fb(Ln(t,e),e,n));function U_(t,e,n,r){return ut(t),jd(Ln(t,e),e,n,r)}const ZC=(t,e,n)=>(ut(t),X0(Ln(t,e),e,n));function QC(t,e,n){return ut(t),em(Ln(t,e),e,n)}function XC(t,e,n){return ut(t),tm(Ln(t,e),e,n)}function eP(t,e,n){if(ut(t),!Fn(e))throw new Jr(e);return Db(Ln(t,e),e,n)}function co(t=li()){let e=gl(t)?t:li(t);function n(s){return(a,c)=>(e=s(e,a,c),o)}function r(s){return(a,c)=>(e=s(e,a,c),o)}function i(s){return(a,c)=>(e=s(e,a,c),o)}const o={build:()=>e,addUrl:n(Cf),addIri:n(at),addBoolean:n(Ab),addDatetime:n(xb),addDate:n(Ib),addTime:n(Rb),addDecimal:n(kb),addInteger:n(Fb),addStringNoLocale:n(X0),addStringEnglish:(s,a)=>(e=jd(e,s,a,"en"),o),addStringWithLocale:(s,a,c)=>(e=jd(e,s,a,c),o),addNamedNode:n(em),addLiteral:n(tm),addTerm:n(Db),setUrl:r(Vs),setIri:r(Ci),setBoolean:r(qC),setDatetime:r(VC),setDate:r(GC),setTime:r(zC),setDecimal:r(YC),setInteger:r(JC),setStringNoLocale:r(ZC),setStringEnglish:(s,a)=>(e=U_(e,s,a,"en"),o),setStringWithLocale:(s,a,c)=>(e=U_(e,s,a,c),o),setNamedNode:r(QC),setLiteral:r(XC),setTerm:r(eP),removeAll:s=>(e=Ln(e,s),o),removeUrl:i(nm),removeIri:i(Jt),removeBoolean:i(LC),removeDatetime:i(UC),removeDate:i(jC),removeTime:i($C),removeDecimal:i(BC),removeInteger:i(HC),removeStringNoLocale:i(Cb),removeStringEnglish:(s,a)=>co(_g(e,s,a,"en")),removeStringWithLocale:(s,a,c)=>co(_g(e,s,a,c)),removeNamedNode:i(KC),removeLiteral:i(WC)};return o}function Pb(t){const e=JD(t).type;return Array.isArray(e)&&e.includes(le.AccessControlResource)}async function rm(t,e=gn){if(!La(t))return{resourceAcl:null,fallbackAcl:null};try{const n=await Nb(t,e);return n===null?{resourceAcl:null,fallbackAcl:await Ob(t,e)}:{resourceAcl:n,fallbackAcl:null}}catch(n){if(n instanceof wg)return{resourceAcl:null,fallbackAcl:null};throw n}}async function Nb(t,e=gn){if(!La(t))return null;try{const n=await yl(t.internal_resourceInfo.aclUrl,e);if(Pb(n))throw new wg(t,n);return Ee(Object.assign(Object.assign({},n),{internal_accessTo:Qe(t)}))}catch(n){if(n instanceof wg)throw n;return null}}async function Ob(t,e=gn){const n=new URL(Qe(t)),r=n.pathname;if(r==="/")return null;const i=tP(r),o=new URL(i,n.origin).href,s=await fl(o,e);if(!La(s))return null;const a=await Nb(s,e);return a===null?Ob(s,e):a}function tP(t){const e=t.substring(t.length-1)==="/"?t.substring(0,t.length-1):t;return t.substring(0,e.lastIndexOf("/"))+"/"}const Ki={read:"http://www.w3.org/ns/auth/acl#Read",append:"http://www.w3.org/ns/auth/acl#Append",write:"http://www.w3.org/ns/auth/acl#Write",control:"http://www.w3.org/ns/auth/acl#Control"};function im(t,e){return Object.assign(ll(t),{internal_acl:e})}class wg extends Error{constructor(e,n){super(`[${ya(e)}] is governed by Access Control Policies in [${ya(n)}] rather than by Web Access Control.`)}}function La(t){return typeof t.internal_resourceInfo.aclUrl=="string"}n1.dataset;function ft(t){if(!jc(t))throw new Error(`An Access Control Resource for [${Qe(t)}] is not available. This could be because the current user is not allowed to see it, or because their Pod Server does not support Access Control Resources.`);return t.internal_acp.acr}function jr(t,e){return Object.assign(ll(t),{internal_acp:Object.assign(Object.assign({},t.internal_acp),{acr:e})})}function Mb(t){let e=li(t);return e=Ci(e,ui.type,le.AccessControl),e}function nP(t,e,n){const r=ft(t),i=mn(r,e,n);return i===null||!rt(i,ui.type).includes(le.AccessControl)?null:i}function as(t,e){const n=ft(t),r=Ks(n,e),i=r.filter(s=>rt(s,ui.type).includes(le.AccessControl)),o=r.filter(s=>rt(s,le.accessControl).length>0).map(s=>{const a=rt(s,le.accessControl)[0];return li({url:a})});return i.concat(o)}function Ua(t,e){const n=ft(t),r=Ur(n,e);return jr(t,r)}function Lb(t,e){return at(t,le.apply,e)}function Ub(t){return rt(t,le.apply)}function jb(t,e){return Jt(t,le.apply,e)}function $b(t){return Ln(t,le.apply)}function Bb(t,e){return at(t,le.applyMembers,e)}function vg(t){return rt(t,le.applyMembers)}function rP(t,e){return Jt(t,le.applyMembers,e)}function Hb(t){return Ln(t,le.applyMembers)}function Kb(t){const e=as(t);return e.length===0?Mb():e[0]}function _l(t){return cl(t)&&Array.isArray(t.internal_resourceInfo.linkedResources[le.accessControl])&&t.internal_resourceInfo.linkedResources[le.accessControl].length===1}function Pf(t,e){var n;const r=ft(t),i=Qe(r);let o=(n=mn(r,i))!==null&&n!==void 0?n:li({url:i});o=at(o,le.access,e);const s=Ur(r,o);return jr(t,s)}function om(t,e){var n;const r=ft(t),i=Qe(r);let o=(n=mn(r,i))!==null&&n!==void 0?n:li({url:i});o=at(o,le.accessMembers,e);const s=Ur(r,o);return jr(t,s)}function ja(t){const e=ft(t),n=Qe(e),r=mn(e,n);return r===null?[]:rt(r,le.access)}function wl(t){const e=ft(t),n=Qe(e),r=mn(e,n);return r===null?[]:rt(r,le.accessMembers)}function Nf(t,e){const n=ft(t),r=Qe(n),i=mn(n,r);if(i===null)return t;const o=Jt(i,le.access,e),s=Ur(n,o);return jr(t,s)}function sm(t,e){const n=ft(t),r=Qe(n),i=mn(n,r);if(i===null)return t;const o=Jt(i,le.accessMembers,e),s=Ur(n,o);return jr(t,s)}function Of(t){const e=ft(t),n=Qe(e),r=mn(e,n);if(r===null)return t;const i=Ln(r,le.access),o=Ur(e,i);return jr(t,o)}function Mf(t){const e=ft(t),n=Qe(e),r=mn(e,n);if(r===null)return t;const i=Ln(r,le.accessMembers),o=Ur(e,i);return jr(t,o)}function am(t,e){const n=Kb(t),r=Lb(n,e);return Ua(t,r)}function Wb(t,e){const n=Kb(t),r=Bb(n,e);return Ua(t,r)}function Uc(t){const n=as(t).map(i=>Ub(i)),r=new Set;return n.forEach(i=>{i.forEach(o=>r.add(o))}),Array.from(r)}function Lf(t){const n=as(t).map(i=>vg(i)),r=new Set;return n.forEach(i=>{i.forEach(o=>r.add(o))}),Array.from(r)}function cm(t,e){return as(t).map(o=>jb(o,e)).reduce(Ua,t)}function qb(t,e){return as(t).map(o=>rP(o,e)).reduce(Ua,t)}function um(t){return as(t).map(i=>$b(i)).reduce(Ua,t)}function lm(t){return as(t).map(i=>Hb(i)).reduce(Ua,t)}function Vb(t){let e=`# Access controls for ${Qe(t)}
`;const n=Uc(t),r=Lf(t),i=ja(t),o=wl(t);return n.length===0&&r.length===0&&i.length===0&&o.length===0&&(e+=`
<no policies specified yet>
`),n.length>0&&(e+=`
The following policies apply to this resource:
- `,e+=n.join(`
- `)+`
`),i.length>0&&(e+=`
The following policies apply to the access control resource for this resource:
- `,e+=i.join(`
- `)+`
`),r.length>0&&(e+=`
The following policies apply to the children of this resource:
- `,e+=r.join(`
- `)+`
`),o.length>0&&(e+=`
The following policies apply to the access control resources for children of this resource:
- `,e+=o.join(`
- `)+`
`),e}const cr="http://www.w3.org/ns/solid/acp#",Ot={AccessControl:cr.concat("AccessControl"),AccessControlResource:cr.concat("AccessControlResource"),AuthenticatedAgent:cr.concat("AuthenticatedAgent"),CreatorAgent:cr.concat("CreatorAgent"),Matcher:cr.concat("Matcher"),Policy:cr.concat("Policy"),PublicAgent:cr.concat("PublicAgent"),access:cr.concat("access"),accessControl:cr.concat("accessControl"),agent:cr.concat("agent"),allOf:cr.concat("allOf"),allow:cr.concat("allow"),anyOf:cr.concat("anyOf"),apply:cr.concat("apply"),client:cr.concat("client"),deny:cr.concat("deny"),memberAccessControl:cr.concat("memberAccessControl"),noneOf:cr.concat("noneOf"),vc:cr.concat("vc")},ql="http://www.w3.org/ns/auth/acl#",pc={Append:ql.concat("Append"),Control:ql.concat("Control"),Read:ql.concat("Read"),Write:ql.concat("Write")},iP="http://www.w3.org/ns/solid/vc#SolidAccessGrant";function vl(t){const e=ft(t),n=Qe(e);return mn(e,n)}const bg="defaultAccessControl",Eg="defaultAcrAccessControl",Sg="defaultMemberAccessControl",Tg="defaultMemberAcrAccessControl";function Gb(t,e){const n=ft(t);return Qe(n).concat("#").concat(e)}function jo(t,e){const n=ft(t),r=Gb(t,e),i=mn(n,r);return i===null||typeof i=="undefined"?li({url:r}):i}function zb(t,e){const n=rt(t,e);return{read:n.includes(pc.Read),append:n.includes(pc.Append),write:n.includes(pc.Write),controlRead:!1,controlWrite:!1}}function oP(t,e){return Object.assign(ll(t),{internal_acp:{acr:e}})}function sP(t,e,n){let r=Ln(t,n);return(e.read||e.controlRead)&&(r=at(r,n,pc.Read)),e.append&&(r=at(r,n,pc.Append)),(e.write||e.controlWrite)&&(r=at(r,n,pc.Write)),r}const Yb="defaultVcPolicy",Jb="defaultVcMatcher";function aP(t,e){var n,r;let i=ft(t);const o=`${ya(i)}#${Yb}`,s=`${ya(i)}#${Jb}`;let a=jo(t,"defaultAccessControl"),c=(n=vl(t))!==null&&n!==void 0?n:co({url:ya(i)}).addIri(Ot.accessControl,a).build();rt(c,Ot.accessControl).includes(ml(a))||(c=at(c,Ot.accessControl,a));let u=mn(i,o);u===null&&(u=co({url:o}).addIri(ui.type,Ot.Policy).addIri(Ot.anyOf,s).build(),a=at(a,Ot.apply,u));const l=(r=mn(i,s))!==null&&r!==void 0?r:co({url:s}).addIri(ui.type,Ot.Matcher).addIri(Ot.vc,iP).build(),d=zb(u,Ot.allow);return u=sP(u,Object.assign(Object.assign({},d),e),Ot.allow),i=[c,a,u,l].reduce(Ur,i),oP(t,i)}const hp={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},pp=(t,e,n)=>rt(t,e).includes(ml(n));function cP(t){const e=ft(t),n=jo(t,"defaultAccessControl"),r=vl(t);if(r===null||!pp(r,Ot.accessControl,n))return hp;const i=`${ya(e)}#${Yb}`,o=mn(e,i);if(o===null||!pp(n,Ot.apply,o))return hp;const s=`${ya(e)}#${Jb}`,a=mn(e,s);return a===null||!pp(o,Ot.anyOf,a)?hp:zb(o,Ot.allow)}async function Uf(t,e=gn){const n=st(t),r=Object.assign(Object.assign({},gn),e),i=await yl(n,r),o=await $a(i,r);return Object.assign(Object.assign({},i),o)}async function jf(t,e=gn){const n=st(t),r=Object.assign(Object.assign({},gn),e),i=await ub(n,r),o=await $a(i,r);return Object.assign(i,o)}async function $f(t,e=gn){const n=st(t),r=Object.assign(Object.assign({},gn),e),i=await fl(n,r),o=await $a(i,r);return Object.assign(Object.assign({},i),o)}async function Bf(t,e=gn){const n=st(t),r=Object.assign(Object.assign({},gn),e),i=await yl(n,r);if(La(i)){const o=await rm(i,r);return im(i,o)}else{const o=await $a(i,r);return Object.assign(Object.assign({},i),o)}}async function Hf(t,e=gn){const n=st(t),r=Object.assign(Object.assign({},gn),e),i=await ub(n,r);if(La(i)){const o=await rm(i,r);return im(i,o)}else{const o=await $a(i,r);return Object.assign(i,o)}}async function Kf(t,e=gn){const n=st(t),r=Object.assign(Object.assign({},gn),e),i=await fl(n,r);if(La(i)){const o=await rm(i,r);return im(i,o)}else{const o=await $a(i,r);return Object.assign(Object.assign({},i),o)}}async function Wf(t,e=gn){const n=ft(t),r=Object.assign(Object.assign({},gn),e),i=await Tb(Qe(n),n,r);return jr(t,i)}function jc(t){return typeof t.internal_acp=="object"&&t.internal_acp!==null&&typeof t.internal_acp.acr=="object"&&t.internal_acp.acr!==null}async function $a(t,e){let n;if(_l(t))n=t.internal_resourceInfo.linkedResources[le.accessControl][0];else if(La(t)){const s=await fl(t.internal_resourceInfo.aclUrl,e);Pb(s)&&(n=Qe(s))}if(typeof n!="string")return{internal_acp:{acr:null}};let r;try{r=await yl(n,e)}catch{return{internal_acp:{acr:null}}}return{internal_acp:{acr:Object.assign(Object.assign({},r),{accessTo:Qe(t)})}}}function qf(t){const e=Uc(t).map(tc).concat(Lf(t).map(tc)).concat(ja(t).map(tc)).concat(wl(t).map(tc));return Array.from(new Set(e))}async function Zb(t,e=gn){const n=st(t),r=Object.assign(Object.assign({},gn),e),i=await fl(n,r);return jc(await $a(i,r))}function uP(t){return cl(t)?[le.accessControl,"acl"].map(n=>{if(Array.isArray(t.internal_resourceInfo.linkedResources[n])&&t.internal_resourceInfo.linkedResources[n].length===1)return t.internal_resourceInfo.linkedResources[n][0]}).find(n=>n!==void 0):void 0}function dm(t){return rt(t,ui.type).includes(le.Rule)}function fm(t,e){return at(t,le.allOf,e)}function hm(t,e){return Jt(t,le.allOf,e)}function pm(t,e){return Ci(t,le.allOf,e)}function Vf(t){return rt(t,le.allOf)}function gm(t,e){return at(t,le.anyOf,e)}function mm(t,e){return Jt(t,le.anyOf,e)}function ym(t,e){return Ci(t,le.anyOf,e)}function Gf(t){return rt(t,le.anyOf)}function _m(t,e){return at(t,le.noneOf,e)}function wm(t,e){return Jt(t,le.noneOf,e)}function vm(t,e){return Ci(t,le.noneOf,e)}function $c(t){return rt(t,le.noneOf)}function bm(t){const e=st(t);let n=li({url:e});return n=Vs(n,ui.type,le.Rule),n}function lP(t,e){const n=ft(t),r=new URL(Qe(n));r.hash=`#${e}`;let i=li({url:r.href});return i=Vs(i,ui.type,le.Rule),i}function Em(t,e){const n=mn(t,e);return n===null||mC(n,ui.type)!==le.Rule?null:n}function Qb(t,e){const n=ft(t),r=Qe(n),i=new URL(r);i.hash=`#${e}`;const o=mn(n,i.href);return o===null||!dm(o)?null:o}function Sm(t){return Ks(t).filter(dm)}function dP(t){const e=ft(t);return Ks(e).filter(dm)}function Tm(t,e){return Ws(t,e)}function fP(t,e){const n=ft(t);let r;if(typeof e=="string")try{new URL(e),r=e}catch{const c=new URL(Qe(n));c.hash=`#${e}`,r=c.href}else fr(e)?r=st(e):r=ls(e);const i=Qb(t,new URL(r).hash.substring(1));if(i===null)return t;const o=Ws(n,i);return jr(t,o)}function Am(t,e){return Ur(t,e)}function hP(t,e){const n=ft(t),r=Ur(n,e);return jr(t,r)}function zf(t){return rt(t,le.agent).filter(e=>e!==le.PublicAgent&&e!==le.AuthenticatedAgent&&e!==le.CreatorAgent)}function xm(t,e){const n=bl(t),r=El(t),i=Sl(t);let o=Ci(t,le.agent,e);return n&&(o=Cm(o)),r&&(o=Pm(o)),i&&(o=Nm(o)),o}function Im(t,e){return at(t,le.agent,e)}function Rm(t,e){return Jt(t,le.agent,e)}function Yf(t){return rt(t,le.group)}function km(t,e){return Ci(t,le.group,e)}function Fm(t,e){return at(t,le.group,e)}function Dm(t,e){return Jt(t,le.group,e)}function bl(t){return rt(t,le.agent).filter(e=>e===le.PublicAgent).length>0}function Cm(t){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return at(t,le.agent,le.PublicAgent)}function Xb(t){return Jt(t,le.agent,le.PublicAgent)}function El(t){return rt(t,le.agent).filter(e=>e===le.AuthenticatedAgent).length>0}function Pm(t){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return at(t,le.agent,le.AuthenticatedAgent)}function eE(t){return Jt(t,le.agent,le.AuthenticatedAgent)}function Sl(t){return rt(t,le.agent).filter(e=>e===le.CreatorAgent).length>0}function Nm(t){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return at(t,le.agent,le.CreatorAgent)}function tE(t){return Jt(t,le.agent,le.CreatorAgent)}function nE(t){return rt(t,le.client).filter(e=>e!==Hs.PublicOidcClient)}function pP(t,e){const n=Om(t);let r=Ci(t,le.client,e);return n&&(r=rE(r)),r}function gP(t,e){return at(t,le.client,e)}function mP(t,e){return Jt(t,le.client,e)}function Om(t){return rt(t,le.client).filter(e=>e===Hs.PublicOidcClient).length>0}function rE(t){return at(t,le.client,Hs.PublicOidcClient)}function yP(t){return Jt(t,le.client,Hs.PublicOidcClient)}function Mm(t){let e=`## Rule: ${ls(t)}

`,n="";bl(t)&&(n+=`- Everyone
`),El(t)&&(n+=`- All authenticated agents
`),Sl(t)&&(n+=`- The creator of this resource
`),Om(t)&&(n+=`- Users of any client application
`);const r=zf(t);r.length>0&&(n+=`- The following agents:
  - `,n+=r.join(`
  - `)+`
`);const i=Yf(t);i.length>0&&(n+=`- Members of the following groups:
  - `,n+=i.join(`
  - `)+`
`);const o=nE(t);return o.length>0&&(n+=`- Users of the following client applications:
  - `,n+=o.join(`
  - `)+`
`),e+=n.length>0?`This rule applies to:
`+n:`<empty>
`,e}function Bc(t){return rt(t,ui.type).includes(le.Policy)}function Jf(t){const e=st(t);let n=li({url:e});return n=Vs(n,ui.type,le.Policy),n}function Zf(t,e){const n=mn(t,e);return n===null||!Bc(n)?null:n}function Qf(t){return Ks(t).filter(r=>!Lc(r)&&Bc(r))}function Xf(t,e){return Ws(t,e)}function eh(t,e){return Ur(t,e)}function _P(t,e){let n=Ln(t,le.allow);return e.read===!0&&(n=at(n,le.allow,Ki.read)),e.append===!0&&(n=at(n,le.allow,Ki.append)),e.write===!0&&(n=at(n,le.allow,Ki.write)),n}function Lm(t,e){let n=Ln(t,le.allow);return e.read===!0&&(n=at(n,le.allow,le.Read)),e.append===!0&&(n=at(n,le.allow,le.Append)),e.write===!0&&(n=at(n,le.allow,le.Write)),n}function wP(t){const e=rt(t,le.allow);return{read:e.includes(Ki.read),append:e.includes(Ki.append),write:e.includes(Ki.write)}}function th(t){const e=rt(t,le.allow);return{read:e.includes(le.Read),append:e.includes(le.Append),write:e.includes(le.Write)}}function vP(t,e){let n=Ln(t,le.deny);return e.read===!0&&(n=at(n,le.deny,Ki.read)),e.append===!0&&(n=at(n,le.deny,Ki.append)),e.write===!0&&(n=at(n,le.deny,Ki.write)),n}function Um(t,e){let n=Ln(t,le.deny);return e.read===!0&&(n=at(n,le.deny,le.Read)),e.append===!0&&(n=at(n,le.deny,le.Append)),e.write===!0&&(n=at(n,le.deny,le.Write)),n}function bP(t){const e=rt(t,le.deny);return{read:e.includes(Ki.read),append:e.includes(Ki.append),write:e.includes(Ki.write)}}function nh(t){const e=rt(t,le.deny);return{read:e.includes(le.Read),append:e.includes(le.Append),write:e.includes(le.Write)}}function iE(t,e){const n=ft(t),r=new URL(Qe(n));r.hash=`#${e}`;let i=li({url:r.href});return i=Vs(i,ui.type,le.Policy),i}function jm(t,e){const n=ft(t),r=Qe(n),i=new URL(r);i.hash=`#${e}`;const o=mn(n,i.href);return!Uc(t).includes(i.href)||o===null||!Bc(o)?null:o}function $m(t,e){const n=ft(t),r=Qe(n),i=new URL(r);i.hash=`#${e}`;const o=mn(n,i.href);return!ja(t).includes(i.href)||o===null||!Bc(o)?null:o}function oE(t){const e=ft(t);return Uc(t).map(o=>mn(e,o)).filter(o=>o!==null&&Bc(o))}function sE(t){const e=ft(t);return ja(t).map(o=>mn(e,o)).filter(o=>o!==null&&Bc(o))}function aE(t,e){const n=ft(t);let r=e;if(typeof r=="string")try{new URL(r)}catch{const u=new URL(Qe(n));u.hash=`#${e}`,r=u.href}let i;if(typeof r=="string"?i=r:fr(r)?i=st(r):i=ls(r,Qe(n)),jm(t,new URL(i).hash.substring(1))===null)return t;const s=Ws(n,r),a=jr(t,s);return cm(a,i)}function cE(t,e){const n=ft(t);let r=e;if(typeof r=="string")try{new URL(r)}catch{const u=new URL(Qe(n));u.hash=`#${e}`,r=u.href}let i;if(typeof r=="string"?i=r:fr(r)?i=st(r):i=ls(r,Qe(n)),$m(t,new URL(i).hash.substring(1))===null)return t;const s=Ws(n,r),a=jr(t,s);return Nf(a,i)}function EP(t,e){const n=ft(t),r=Ur(n,e),i=jr(t,r),o=ls(e,Qe(n));return am(i,o)}function SP(t,e){const n=ft(t),r=Ur(n,e),i=jr(t,r),o=ls(e,Qe(n));return Pf(i,o)}function Bm(t){function e(c,u){return u?"denied":c?"allowed":"unspecified"}const n=th(t),r=nh(t);let i=`## Policy: ${ls(t)}

`;i+=`- Read: ${e(n.read,r.read)}
`,i+=`- Append: ${e(n.append,r.append)}
`,i+=`- Write: ${e(n.write,r.write)}
`;const o=Vf(t),s=Gf(t),a=$c(t);return o.length===0&&s.length===0&&a.length===0&&(i+=`
<no rules specified yet>
`),o.length>0&&(i+=`
All of these rules should match:
`,i+="- "+o.join(`
- `)+`
`),s.length>0&&(i+=`
At least one of these rules should match:
`,i+="- "+s.join(`
- `)+`
`),a.length>0&&(i+=`
None of these rules should match:
`,i+="- "+a.join(`
- `)+`
`),i}function Tl(t){const e=new URL("access-control-resource",t).href;return Object.assign(Object.assign({},MC(e)),{accessTo:t})}function rh(t,e=Tl(Qe(t))){return Object.assign(ll(t),{internal_acp:{acr:e,aprs:{}}})}const TP={getFileWithAccessDatasets:Hf,getFileWithAcr:jf,getReferencedPolicyUrlAll:qf,getResourceInfoWithAccessDatasets:Kf,getResourceInfoWithAcr:$f,getSolidDatasetWithAccessDatasets:Bf,getSolidDatasetWithAcr:Uf,hasAccessibleAcr:jc,saveAcrFor:Wf},AP={acrAsMarkdown:Vb,addAcrPolicyUrl:Pf,addMemberAcrPolicyUrl:om,addMemberPolicyUrl:Wb,addPolicyUrl:am,getAcrPolicyUrlAll:ja,getMemberAcrPolicyUrlAll:wl,getMemberPolicyUrlAll:Lf,getPolicyUrlAll:Uc,hasLinkedAcr:_l,removeAcrPolicyUrl:Nf,removeAcrPolicyUrlAll:Of,removeMemberAcrPolicyUrl:sm,removeMemberAcrPolicyUrlAll:Mf,removeMemberPolicyUrl:qb,removeMemberPolicyUrlAll:lm,removePolicyUrl:cm,removePolicyUrlAll:um},xP={createPolicy:Jf,getAllowModes:th,getDenyModes:nh,getPolicy:Zf,getPolicyAll:Qf,policyAsMarkdown:Bm,removePolicy:Xf,setAllowModes:Lm,setDenyModes:Um,setPolicy:eh},IP={addAgent:Im,addForbiddenRuleUrl:_m,addGroup:Fm,addOptionalRuleUrl:gm,addRequiredRuleUrl:fm,createRule:bm,getAgentAll:zf,getForbiddenRuleUrlAll:$c,getGroupAll:Yf,getOptionalRuleUrlAll:Gf,getRequiredRuleUrlAll:Vf,getRule:Em,getRuleAll:Sm,hasAuthenticated:El,hasCreator:Sl,hasPublic:bl,removeAgent:Rm,removeForbiddenRuleUrl:wm,removeGroup:Dm,removeOptionalRuleUrl:mm,removeRequiredRuleUrl:hm,removeRule:Tm,ruleAsMarkdown:Mm,setAgent:xm,setForbiddenRuleUrl:vm,setGroup:km,setOptionalRuleUrl:ym,setRequiredRuleUrl:pm,setRule:Am},RP={addMockAcrTo:rh,mockAcrFor:Tl};function uE(t,e){return e?Cm(t):Xb(t)}function lE(t,e){return e?Pm(t):eE(t)}function dE(t,e){return e?Nm(t):tE(t)}const kP={getForbiddenRuleurlAll:$c,setPublic:uE,setAuthenticated:lE,setCreator:dE};Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},TP),AP),xP),IP),RP),kP);const FP={getFileWithAccessDatasets:Hf,getFileWithAcr:jf,getReferencedPolicyUrlAll:qf,getResourceInfoWithAccessDatasets:Kf,getResourceInfoWithAcr:$f,getSolidDatasetWithAccessDatasets:Bf,getSolidDatasetWithAcr:Uf,hasAccessibleAcr:jc,saveAcrFor:Wf},DP={createPolicy:Jf,getAllowModes:th,getDenyModes:nh,getPolicy:Zf,getPolicyAll:Qf,policyAsMarkdown:Bm,removePolicy:Xf,setAllowModes:Lm,setDenyModes:Um,setPolicy:eh},CP={addAgent:Im,addForbiddenRuleUrl:_m,addGroup:Fm,addOptionalRuleUrl:gm,addRequiredRuleUrl:fm,createRule:bm,getAgentAll:zf,getForbiddenRuleUrlAll:$c,getGroupAll:Yf,getOptionalRuleUrlAll:Gf,getRequiredRuleUrlAll:Vf,getRule:Em,getRuleAll:Sm,hasAuthenticated:El,hasCreator:Sl,hasPublic:bl,removeAgent:Rm,removeForbiddenRuleUrl:wm,removeGroup:Dm,removeOptionalRuleUrl:mm,removeRequiredRuleUrl:hm,removeRule:Tm,ruleAsMarkdown:Mm,setAgent:xm,setForbiddenRuleUrl:vm,setGroup:km,setOptionalRuleUrl:ym,setRequiredRuleUrl:pm,setRule:Am},PP={addMockAcrTo:rh,mockAcrFor:Tl},NP={hasLinkedAcr:_l,addAcrPolicyUrl:Pf,addMemberAcrPolicyUrl:om,getAcrPolicyUrlAll:ja,getMemberAcrPolicyUrlAll:wl,removeAcrPolicyUrl:Nf,removeAcrPolicyUrlAll:Of,removeMemberAcrPolicyUrl:sm,removeMemberAcrPolicyUrlAll:Mf},OP={createControl:Mb,getControl:nP,getAllControl:as,getControlAll:as,setControl:Ua,removeControl:MP,addPolicyUrl:Lb,getPolicyUrlAll:Ub,removePolicyUrl:jb,removePolicyUrlAll:$b,addMemberPolicyUrl:Bb,getMemberPolicyUrlAll:vg,removeMemberPolicyUrl:vg,removeMemberPolicyUrlAll:Hb,getForbiddenRuleurlAll:$c,setPublic:uE,setAuthenticated:lE,setCreator:dE};Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},FP),DP),CP),PP),NP),OP);function MP(t,e){const n=ft(t),r=Ws(n,e);return jr(t,r)}const LP={getFileWithAccessDatasets:Hf,getFileWithAcr:jf,getLinkedAcrUrl:uP,getReferencedPolicyUrlAll:qf,getResourceInfoWithAccessDatasets:Kf,getResourceInfoWithAcr:$f,getSolidDatasetWithAccessDatasets:Bf,getSolidDatasetWithAcr:Uf,hasAccessibleAcr:jc,saveAcrFor:Wf,isAcpControlled:Zb},UP={acrAsMarkdown:Vb,addAcrPolicyUrl:Pf,addMemberAcrPolicyUrl:om,addMemberPolicyUrl:Wb,addPolicyUrl:am,getAcrPolicyUrlAll:ja,getMemberAcrPolicyUrlAll:wl,getMemberPolicyUrlAll:Lf,getPolicyUrlAll:Uc,hasLinkedAcr:_l,removeAcrPolicyUrl:Nf,removeAcrPolicyUrlAll:Of,removeMemberAcrPolicyUrl:sm,removeMemberAcrPolicyUrlAll:Mf,removeMemberPolicyUrl:qb,removeMemberPolicyUrlAll:lm,removePolicyUrl:cm,removePolicyUrlAll:um},jP={createPolicy:Jf,getAllowModes:th,getDenyModes:nh,getPolicy:Zf,getPolicyAll:Qf,policyAsMarkdown:Bm,removePolicy:Xf,setAllowModes:Lm,setDenyModes:Um,setPolicy:eh,createResourcePolicyFor:iE,getResourceAcrPolicy:$m,getResourceAcrPolicyAll:sE,getResourcePolicy:jm,getResourcePolicyAll:oE,removeResourceAcrPolicy:cE,removeResourcePolicy:aE,setResourceAcrPolicy:SP,setResourcePolicy:EP},$P={addAgent:Im,addGroup:Fm,createRule:bm,getAgentAll:zf,getGroupAll:Yf,getRule:Em,getRuleAll:Sm,removeAgent:Rm,removeGroup:Dm,removeRule:Tm,ruleAsMarkdown:Mm,setAgent:xm,setGroup:km,setRule:Am,addClient:gP,getClientAll:nE,hasAnyClient:Om,removeClient:mP,setAnyClient:rE,setClient:pP,removeAnyClient:yP,hasAuthenticated:El,hasCreator:Sl,hasPublic:bl,setAuthenticated:Pm,setCreator:Nm,setPublic:Cm,removeAuthenticated:eE,removeCreator:tE,removePublic:Xb,getAnyOfRuleUrlAll:Gf,addAnyOfRuleUrl:gm,removeAnyOfRuleUrl:mm,setAnyOfRuleUrl:ym,getAllOfRuleUrlAll:Vf,addAllOfRuleUrl:fm,removeAllOfRuleUrl:hm,setAllOfRuleUrl:pm,getNoneOfRuleUrlAll:$c,addNoneOfRuleUrl:_m,removeNoneOfRuleUrl:wm,setNoneOfRuleUrl:vm,createResourceRuleFor:lP,getResourceRule:Qb,getResourceRuleAll:dP,removeResourceRule:fP,setResourceRule:hP},BP={addMockAcrTo:rh,mockAcrFor:Tl};Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},LP),UP),jP),$P),BP);function $o(t,e){return Object.assign(ll(t),{internal_acp:Object.assign(Object.assign({},t.internal_acp),{acr:Ur(t.internal_acp.acr,e)})})}function j_(t){return t.includes("Member")?Ot.memberAccessControl:Ot.accessControl}function ih(t,e){const n=Gb(t,e),r=ft(t);let i=vl(t);return(i===null||typeof i=="undefined")&&(i=li({url:Qe(r)})),rt(i,j_(e)).includes(n)?t:(i=co(i).addUrl(j_(e),n).build(),$o(t,i))}function HP(t,e){const n=ih(t,Eg),r=jo(n,Eg);return $o(n,co(r).addUrl(Ot.access,e).build())}function KP(t,e){const n=ih(t,Tg),r=jo(n,Tg);return $o(n,co(r).addUrl(Ot.access,e).build())}function WP(t,e){const n=ih(t,Sg),r=jo(n,Sg);return $o(n,co(r).addUrl(Ot.apply,e).build())}function qP(t,e){const n=ih(t,bg),r=jo(n,bg);return $o(n,co(r).addUrl(Ot.apply,e).build())}function fE(t){const e=vl(t);return e===null?[]:rt(e,Ot.accessControl)}function oh(t,e,n){const r=ft(t);return Array.from(new Set(e.map(i=>{const o=mn(r,i);return o!==null?rt(o,n):[]}).reduce((i,o)=>i.concat(o),[])))}function VP(t){return oh(t,fE(t),Ot.access)}function hE(t){const e=vl(t);return e===null?[]:rt(e,Ot.memberAccessControl)}function GP(t){return oh(t,hE(t),Ot.access)}function zP(t){return oh(t,hE(t),Ot.apply)}function YP(t){return oh(t,fE(t),Ot.apply)}function JP(t,e){const n=jo(t,Eg);return $o(t,Jt(n,Ot.access,e))}function ZP(t,e){const n=jo(t,Tg);return $o(t,Jt(n,Ot.access,e))}function QP(t,e){const n=jo(t,Sg);return $o(t,Jt(n,Ot.apply,e))}function XP(t,e){const n=jo(t,bg);return $o(t,Jt(n,Ot.apply,e))}function eN(t,e){return $o(t,e)}function sh(t){return rt(t,ui.type).includes(le.Matcher)}function tN(t,e){return at(t,le.allOf,e)}function nN(t,e){return Jt(t,le.allOf,e)}function rN(t,e){return Ci(t,le.allOf,e)}function iN(t){return rt(t,le.allOf)}function oN(t,e){return at(t,le.anyOf,e)}function sN(t,e){return Jt(t,le.anyOf,e)}function aN(t,e){return Ci(t,le.anyOf,e)}function cN(t){return rt(t,le.anyOf)}function uN(t,e){return at(t,le.noneOf,e)}function lN(t,e){return Jt(t,le.noneOf,e)}function dN(t,e){return Ci(t,le.noneOf,e)}function fN(t){return rt(t,le.noneOf)}function hN(t){const e=st(t);let n=li({url:e});return n=Vs(n,ui.type,le.Matcher),n}function pN(t,e){const n=ft(t),r=new URL(Qe(n));r.hash=`#${e}`;let i=li({url:r.href});return i=Vs(i,ui.type,le.Matcher),i}function gN(t,e){const n=mn(t,e);return n===null||!sh(n)?null:n}function pE(t,e){const n=ft(t),r=Qe(n),i=new URL(r);i.hash=`#${e}`;const o=mn(n,i.href);return o===null||!sh(o)?null:o}function mN(t){return Ks(t).filter(sh)}function yN(t){const e=ft(t);return Ks(e).filter(sh)}function _N(t,e){return Ws(t,e)}function wN(t,e){const n=ft(t);let r;if(typeof e=="string")try{new URL(e),r=e}catch{const c=new URL(Qe(n));c.hash=`#${e}`,r=c.href}else fr(e)?r=st(e):r=ls(e);const i=pE(t,new URL(r).hash.substring(1));if(i===null)return t;const o=Ws(n,i);return jr(t,o)}function vN(t,e){return Ur(t,e)}function bN(t,e){const n=ft(t),r=Ur(n,e);return jr(t,r)}function EN(t){return rt(t,le.agent).filter(e=>e!==le.PublicAgent&&e!==le.AuthenticatedAgent&&e!==le.CreatorAgent)}function SN(t,e){const n=gE(t),r=yE(t),i=wE(t);let o=Ci(t,le.agent,e);return n&&(o=mE(o)),r&&(o=_E(o)),i&&(o=vE(o)),o}function TN(t,e){return at(t,le.agent,e)}function AN(t,e){return Jt(t,le.agent,e)}function gE(t){return rt(t,le.agent).filter(e=>e===le.PublicAgent).length>0}function mE(t){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return at(t,le.agent,le.PublicAgent)}function xN(t){return Jt(t,le.agent,le.PublicAgent)}function yE(t){return rt(t,le.agent).filter(e=>e===le.AuthenticatedAgent).length>0}function _E(t){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return at(t,le.agent,le.AuthenticatedAgent)}function IN(t){return Jt(t,le.agent,le.AuthenticatedAgent)}function wE(t){return rt(t,le.agent).filter(e=>e===le.CreatorAgent).length>0}function vE(t){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return at(t,le.agent,le.CreatorAgent)}function RN(t){return Jt(t,le.agent,le.CreatorAgent)}function kN(t){return rt(t,le.client).filter(e=>e!==Hs.PublicOidcClient).concat(_C(t,le.client))}function FN(t,e){const n=bE(t);let r=Ci(t,le.client,e);return n&&(r=EE(r)),r}function DN(t,e){return Fn(e)?at(t,le.client,e):X0(t,le.client,e)}function CN(t,e){return Fn(e)?Jt(t,le.client,e):Cb(t,le.client,e)}function bE(t){return rt(t,le.client).filter(e=>e===Hs.PublicOidcClient).length>0}function EE(t){return at(t,le.client,Hs.PublicOidcClient)}function PN(t){return Jt(t,le.client,Hs.PublicOidcClient)}const NN={getFileWithAccessDatasets:Hf,getFileWithAcr:jf,getReferencedPolicyUrlAll:qf,getResourceInfoWithAccessDatasets:Kf,getResourceInfoWithAcr:$f,getSolidDatasetWithAccessDatasets:Bf,getSolidDatasetWithAcr:Uf,hasAccessibleAcr:jc,saveAcrFor:Wf,isAcpControlled:Zb,getVcAccess:cP,setVcAccess:aP},ON={addAcrPolicyUrl:HP,addMemberAcrPolicyUrl:KP,addMemberPolicyUrl:WP,addPolicyUrl:qP,getAcrPolicyUrlAll:VP,getMemberAcrPolicyUrlAll:GP,getMemberPolicyUrlAll:zP,getPolicyUrlAll:YP,hasLinkedAcr:_l,removeAcrPolicyUrl:JP,removeAcrPolicyUrlAll:Of,removeMemberAcrPolicyUrl:ZP,removeMemberAcrPolicyUrlAll:Mf,removeMemberPolicyUrl:QP,removeMemberPolicyUrlAll:lm,removePolicyUrl:XP,removePolicyUrlAll:um},MN={createPolicy:Jf,getAllowModes:wP,getDenyModes:bP,getPolicy:Zf,getPolicyAll:Qf,removePolicy:Xf,setAllowModes:_P,setDenyModes:vP,setPolicy:eh,createResourcePolicyFor:iE,getResourceAcrPolicy:$m,getResourceAcrPolicyAll:sE,getResourcePolicy:jm,getResourcePolicyAll:oE,removeResourceAcrPolicy:cE,removeResourcePolicy:aE,setResourcePolicy:eN},LN={addAgent:TN,createMatcher:hN,getAgentAll:EN,getMatcher:gN,getMatcherAll:mN,removeAgent:AN,removeMatcher:_N,setAgent:SN,setMatcher:vN,addClient:DN,getClientAll:kN,hasAnyClient:bE,removeClient:CN,setAnyClient:EE,setClient:FN,removeAnyClient:PN,hasAuthenticated:yE,hasCreator:wE,hasPublic:gE,setAuthenticated:_E,setCreator:vE,setPublic:mE,removeAuthenticated:IN,removeCreator:RN,removePublic:xN,getAnyOfMatcherUrlAll:cN,addAnyOfMatcherUrl:oN,removeAnyOfMatcherUrl:sN,setAnyOfMatcherUrl:aN,getAllOfMatcherUrlAll:iN,addAllOfMatcherUrl:tN,removeAllOfMatcherUrl:nN,setAllOfMatcherUrl:rN,getNoneOfMatcherUrlAll:fN,addNoneOfMatcherUrl:uN,removeNoneOfMatcherUrl:lN,setNoneOfMatcherUrl:dN,createResourceMatcherFor:pN,getResourceMatcher:pE,getResourceMatcherAll:yN,removeResourceMatcher:wN,setResourceMatcher:bN},UN={addMockAcrTo:rh,mockAcrFor:Tl};Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},NN),ON),MN),LN),UN);var SE="http://www.w3.org/1999/02/22-rdf-syntax-ns#";function In(t){return SE+t}var jN={PREFIX:"rdf",NAMESPACE:SE,PREFIX_AND_NAMESPACE:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#"},NS:In,Property:In("Property"),HTML:In("HTML"),langString:In("langString"),PlainLiteral:In("PlainLiteral"),Statement:In("Statement"),Bag:In("Bag"),Seq:In("Seq"),Alt:In("Alt"),List:In("List"),XMLLiteral:In("XMLLiteral"),JSON:In("JSON"),CompoundLiteral:In("CompoundLiteral"),type:In("type"),subject:In("subject"),predicate:In("predicate"),object:In("object"),value:In("value"),nil:In("nil"),first:In("first"),rest:In("rest"),language:In("language"),direction:In("direction")},TE="http://schema.org/";function tt(t){return TE+t}var $N={PREFIX:"schema-inrupt",NAMESPACE:TE,PREFIX_AND_NAMESPACE:{"schema-inrupt":"http://schema.org/"},NS:tt,Organization:tt("Organization"),Person:tt("Person"),ImageObject:tt("ImageObject"),URL:tt("URL"),MedicalTherapy:tt("MedicalTherapy"),EducationalOccupationalCredential:tt("EducationalOccupationalCredential"),PostalAddress:tt("PostalAddress"),Product:tt("Product"),Event:tt("Event"),alternateName:tt("alternateName"),givenName:tt("givenName"),familyName:tt("familyName"),additionalName:tt("additionalName"),license:tt("license"),name:tt("name"),text:tt("text"),identifier:tt("identifier"),description:tt("description"),image:tt("image"),url:tt("url"),startTime:tt("startTime"),endTime:tt("endTime"),startDate:tt("startDate"),endDate:tt("endDate"),email:tt("email"),primaryPrevention:tt("primaryPrevention"),qualifications:tt("qualifications"),attendee:tt("attendee"),address:tt("address"),streetAddress:tt("streetAddress"),addressLocality:tt("addressLocality"),addressRegion:tt("addressRegion"),postalCode:tt("postalCode"),addressCountry:tt("addressCountry"),accessCode:tt("accessCode"),accountId:tt("accountId"),serialNumber:tt("serialNumber"),productID:tt("productID"),brand:tt("brand"),model:tt("model"),value:tt("value"),distance:tt("distance"),latitude:tt("latitude"),longitude:tt("longitude"),dateModified:tt("dateModified")};function BN(t){let e;return{c(){e=qt("+ Create new event")},l(n){e=Vt(n,"+ Create new event")},m(n,r){Nt(n,e,r)},d(n){n&&Ye(e)}}}function HN(t){let e,n,r,i,o,s,a,c,u,l;return o=new is({props:{$$slots:{default:[BN]},$$scope:{ctx:t}}}),a=new fT({props:{firstname:"Abel",lastname:"de Bruijn"}}),a.$on("click",t[0]),u=new uT({}),{c(){e=$t("div"),n=$t("h1"),r=qt("Your calendar"),i=Rn(),ii(o.$$.fragment),s=Rn(),ii(a.$$.fragment),c=Rn(),ii(u.$$.fragment),this.h()},l(d){e=Bt(d,"DIV",{class:!0});var p=Nn(e);n=Bt(p,"H1",{id:!0,class:!0});var g=Nn(n);r=Vt(g,"Your calendar"),g.forEach(Ye),i=kn(p),oi(o.$$.fragment,p),s=kn(p),oi(a.$$.fragment,p),p.forEach(Ye),c=kn(d),oi(u.$$.fragment,d),this.h()},h(){Tt(n,"id","title"),Tt(n,"class","svelte-15564hs"),Tt(e,"class","header svelte-15564hs")},m(d,p){Nt(d,e,p),We(e,n),We(n,r),We(e,i),si(o,e,null),We(e,s),si(a,e,null),Nt(d,c,p),si(u,d,p),l=!0},p(d,[p]){const g={};p&32&&(g.$$scope={dirty:p,ctx:d}),o.$set(g)},i(d){l||(_t(o.$$.fragment,d),_t(a.$$.fragment,d),_t(u.$$.fragment,d),l=!0)},o(d){Dt(o.$$.fragment,d),Dt(a.$$.fragment,d),Dt(u.$$.fragment,d),l=!1},d(d){d&&Ye(e),ai(o),ai(a),d&&Ye(c),ai(u,d)}}}function KN(t){let e,n,r;B_(async()=>{await ta.handleIncomingRedirect({restorePreviousSession:!0});const s=ta.getDefaultSession();r=window.location.href,e=localStorage.getItem("podUrl")||"http://localhost:3000",n=localStorage.getItem("webID")||"johndoe",s.info.isLoggedIn&&o()});async function i(){var s,a;e=(s=prompt("URL to identity provider/pod host:",e))!=null?s:e,n=(a=prompt("WebID: ",n))!=null?a:n,e.indexOf("//")<0&&(e="http://"+e),localStorage.setItem("podUrl",e),localStorage.setItem("webID",n),ta.getDefaultSession().info.isLoggedIn||await ta.login({oidcIssuer:e,clientName:"Project-IDLab",redirectUrl:r}),console.log("get data"),o()}async function o(){let s;console.log("ytest");let a="test2",c;console.log(`${e}/${n}/${a}`);try{s=await yl(`${e}/${n}/${a}`,{fetch:ta.fetch}),c=Ks(s),console.log(c)}catch(u){console.log(u),u.response.status==404&&(console.log("Dataset not found, creating new one"),s=Sb(),c=co(li({name:"thingname"})).addStringNoLocale($N.name,"Schema inrupt name").addUrl(jN.type,"https://schema.org/Thing").build())}console.log(c),s=Ur(s,c),await Tb(`${e}/${n}/${a}`,s,{fetch:ta.fetch})}return[i]}class oO extends Ps{constructor(e){super(),Ns(this,e,KN,HN,Os,{})}}export{oO as default};
