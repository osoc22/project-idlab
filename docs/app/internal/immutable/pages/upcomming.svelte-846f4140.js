import{S as z,i as H,s as K,w as R,x as Y,y as U,q as O,o as P,B as G,t as w,h as k,g as S,j as C,d as c,e as D,k as F,c as E,a as W,m as V,b as T,J as u,L as we,E as X,l as Z,v as x,I as ie,n as ee,p as te,Y as ve,_ as ke}from"../chunks/index-6d6fbed6.js";import{t as Q,e as $e,T as De,P as oe,b as ce}from"../chunks/eventStore-24e1c1fe.js";import{B as ye,P as Ee}from"../chunks/Button-2f919fe0.js";import"../chunks/preload-helper-ed63bd61.js";import"../chunks/userStore-ad134bbc.js";import"../chunks/index-b2bed869.js";function We(s){let e,r,a;return{c(){e=w(s[3]),r=w("-"),a=w(s[2])},l(t){e=k(t,s[3]),r=k(t,"-"),a=k(t,s[2])},m(t,n){S(t,e,n),S(t,r,n),S(t,a,n)},p(t,n){n&8&&C(e,t[3]),n&4&&C(a,t[2])},d(t){t&&c(e),t&&c(r),t&&c(a)}}}function Te(s){let e;return{c(){e=w("All day")},l(r){e=k(r,"All day")},m(r,a){S(r,e,a)},p:X,d(r){r&&c(e)}}}function fe(s){let e,r=s[0].location+"",a;return{c(){e=w("- "),a=w(r)},l(t){e=k(t,"- "),a=k(t,r)},m(t,n){S(t,e,n),S(t,a,n)},p(t,n){n&1&&r!==(r=t[0].location+"")&&C(a,r)},d(t){t&&c(e),t&&c(a)}}}function Ae(s){let e,r,a,t,n,l=s[0].title+"",o,i,d,A,_=s[1].join(", ")+"",m,$;function v(y,g){return y[0].isAllDay?Te:We}let I=v(s),h=I(s),f=s[0].location&&fe(s);return{c(){e=D("div"),r=D("span"),h.c(),a=F(),f&&f.c(),t=F(),n=D("span"),o=w(l),i=F(),d=D("span"),A=w("You are beining notified when the weather is "),m=w(_),$=w("."),this.h()},l(y){e=E(y,"DIV",{class:!0});var g=W(e);r=E(g,"SPAN",{class:!0});var q=W(r);h.l(q),a=V(q),f&&f.l(q),q.forEach(c),t=V(g),n=E(g,"SPAN",{class:!0});var N=W(n);o=k(N,l),N.forEach(c),i=V(g),d=E(g,"SPAN",{class:!0});var B=W(d);A=k(B,"You are beining notified when the weather is "),m=k(B,_),$=k(B,"."),B.forEach(c),g.forEach(c),this.h()},h(){T(r,"class","text-xs font-light"),T(n,"class","font-medium mt-1"),T(d,"class","font-light text-xs mt-4"),T(e,"class","flex flex-col items-start mb-2 text-left")},m(y,g){S(y,e,g),u(e,r),h.m(r,null),u(r,a),f&&f.m(r,null),u(e,t),u(e,n),u(n,o),u(e,i),u(e,d),u(d,A),u(d,m),u(d,$)},p(y,g){I===(I=v(y))&&h?h.p(y,g):(h.d(1),h=I(y),h&&(h.c(),h.m(r,a))),y[0].location?f?f.p(y,g):(f=fe(y),f.c(),f.m(r,null)):f&&(f.d(1),f=null),g&1&&l!==(l=y[0].title+"")&&C(o,l),g&2&&_!==(_=y[1].join(", ")+"")&&C(m,_)},d(y){y&&c(e),h.d(),f&&f.d()}}}function Se(s){let e,r;return e=new ye({props:{focused:!0,$$slots:{default:[Ae]},$$scope:{ctx:s}}}),e.$on("click",s[4]),{c(){R(e.$$.fragment)},l(a){Y(e.$$.fragment,a)},m(a,t){U(e,a,t),r=!0},p(a,[t]){const n={};t&47&&(n.$$scope={dirty:t,ctx:a}),e.$set(n)},i(a){r||(O(e.$$.fragment,a),r=!0)},o(a){P(e.$$.fragment,a),r=!1},d(a){G(e,a)}}}function Ie(s,e,r){let a,t,n,{activity:l}=e;function o(i){we.call(this,s,i)}return s.$$set=i=>{"activity"in i&&r(0,l=i.activity)},s.$$.update=()=>{var i,d;s.$$.dirty&1&&r(3,a=(i=l.time)==null?void 0:i.from.toString({smallestUnit:"minute"})),s.$$.dirty&1&&r(2,t=(d=l.time)==null?void 0:d.to.toString({smallestUnit:"minute"})),s.$$.dirty&1&&r(1,n=Array.from(l.notifyOnWeather))},[l,n,t,a,o]}class Oe extends z{constructor(e){super(),H(this,e,Ie,Se,K,{activity:0})}}function ue(s){let e,r,a=s[0].minimumTemperature+"",t,n,l=s[0].maximumTemperature+"",o,i,d,A,_,m;return{c(){e=D("div"),r=D("span"),t=w(a),n=w("-"),o=w(l),i=w("\xB0C"),d=F(),A=D("div"),_=D("div"),m=w("\u{1F324}"),this.h()},l($){e=E($,"DIV",{class:!0});var v=W(e);r=E(v,"SPAN",{class:!0});var I=W(r);t=k(I,a),n=k(I,"-"),o=k(I,l),i=k(I,"\xB0C"),I.forEach(c),d=V(v),A=E(v,"DIV",{class:!0});var h=W(A);_=E(h,"DIV",{class:!0});var f=W(_);m=k(f,"\u{1F324}"),f.forEach(c),h.forEach(c),v.forEach(c),this.h()},h(){T(r,"class",""),T(_,"class","absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"),T(A,"class","absolute h-6 aspect-square rounded-full bg-blue-700 -right-1 -top-1"),T(e,"class","bg-blue-200 rounded-md min-h-4 px-3 py-1 select-none relative")},m($,v){S($,e,v),u(e,r),u(r,t),u(r,n),u(r,o),u(r,i),u(e,d),u(e,A),u(A,_),u(_,m)},p($,v){v&1&&a!==(a=$[0].minimumTemperature+"")&&C(t,a),v&1&&l!==(l=$[0].maximumTemperature+"")&&C(o,l)},d($){$&&c(e)}}}function me(s){let e,r,a;return{c(){e=D("div"),r=D("span"),a=w("unavailable"),this.h()},l(t){e=E(t,"DIV",{class:!0});var n=W(e);r=E(n,"SPAN",{class:!0});var l=W(r);a=k(l,"unavailable"),l.forEach(c),n.forEach(c),this.h()},h(){T(r,"class","italic text-gray-500"),T(e,"class","bg-blue-50 rounded-md min-h-4 px-3 py-1 select-none relative")},m(t,n){S(t,e,n),u(e,r),u(r,a)},d(t){t&&c(e)}}}function Ne(s){let e,r,a=s[0]&&ue(s),t=!s[0]&&me();return{c(){a&&a.c(),e=F(),t&&t.c(),r=Z()},l(n){a&&a.l(n),e=V(n),t&&t.l(n),r=Z()},m(n,l){a&&a.m(n,l),S(n,e,l),t&&t.m(n,l),S(n,r,l)},p(n,[l]){n[0]?a?a.p(n,l):(a=ue(n),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),n[0]?t&&(t.d(1),t=null):t||(t=me(),t.c(),t.m(r.parentNode,r))},i:X,o:X,d(n){a&&a.d(n),n&&c(e),t&&t.d(n),n&&c(r)}}}function Pe(s,e,r){let{day:a}=e,{weather:t}=e,n;return x(()=>{if(Q.Now.plainDateISO().until(a).days<0)return;const i=t.getWeatherDataFor(a);!i||r(0,n=i)}),s.$$set=l=>{"day"in l&&r(1,a=l.day),"weather"in l&&r(2,t=l.weather)},[n,a,t]}class Fe extends z{constructor(e){super(),H(this,e,Pe,Ne,K,{day:1,weather:2})}}function de(s,e,r){const a=s.slice();return a[9]=e[r],a}function he(s,e,r){const a=s.slice();return a[12]=e[r],a}function Ve(s){let e,r,a;function t(){return s[8](s[9])}return r=new ye({props:{icon:Ee,$$slots:{default:[je]},$$scope:{ctx:s}}}),r.$on("click",t),{c(){e=D("div"),R(r.$$.fragment)},l(n){e=E(n,"DIV",{});var l=W(e);Y(r.$$.fragment,l),l.forEach(c)},m(n,l){S(n,e,l),U(r,e,null),a=!0},p(n,l){s=n;const o={};l&32768&&(o.$$scope={dirty:l,ctx:s}),r.$set(o)},i(n){a||(O(r.$$.fragment,n),a=!0)},o(n){P(r.$$.fragment,n),a=!1},d(n){n&&c(e),G(r)}}}function Ce(s){let e,r,a=s[2][s[9].toString()],t=[];for(let l=0;l<a.length;l+=1)t[l]=pe(he(s,a,l));const n=l=>P(t[l],1,1,()=>{t[l]=null});return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=Z()},l(l){for(let o=0;o<t.length;o+=1)t[o].l(l);e=Z()},m(l,o){for(let i=0;i<t.length;i+=1)t[i].m(l,o);S(l,e,o),r=!0},p(l,o){if(o&6){a=l[2][l[9].toString()];let i;for(i=0;i<a.length;i+=1){const d=he(l,a,i);t[i]?(t[i].p(d,o),O(t[i],1)):(t[i]=pe(d),t[i].c(),O(t[i],1),t[i].m(e.parentNode,e))}for(ee(),i=a.length;i<t.length;i+=1)n(i);te()}},i(l){if(!r){for(let o=0;o<a.length;o+=1)O(t[o]);r=!0}},o(l){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)P(t[o]);r=!1},d(l){ve(t,l),l&&c(e)}}}function je(s){let e;return{c(){e=w("Create event")},l(r){e=k(r,"Create event")},m(r,a){S(r,e,a)},d(r){r&&c(e)}}}function pe(s){let e,r;function a(){return s[7](s[12])}return e=new Oe({props:{activity:s[12]}}),e.$on("click",a),{c(){R(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,n){U(e,t,n),r=!0},p(t,n){s=t;const l={};n&6&&(l.activity=s[12]),e.$set(l)},i(t){r||(O(e.$$.fragment,t),r=!0)},o(t){P(e.$$.fragment,t),r=!1},d(t){G(e,t)}}}function _e(s){let e,r,a,t=s[4][s[9].dayOfWeek-1]+"",n,l,o,i=s[9].day+"",d,A,_,m,$,v,I,h,f,y,g;m=new Fe({props:{weather:s[0],day:s[9]}});const q=[Ce,Ve],N=[];function B(p,b){return b&6&&(I=null),I==null&&(I=p[9].toString()in p[2]),I?0:1}return h=B(s,-1),f=N[h]=q[h](s),{c(){e=D("div"),r=D("div"),a=D("span"),n=w(t),l=F(),o=D("span"),d=w(i),A=F(),_=D("div"),R(m.$$.fragment),$=F(),v=D("div"),f.c(),y=F(),this.h()},l(p){e=E(p,"DIV",{class:!0});var b=W(e);r=E(b,"DIV",{class:!0});var j=W(r);a=E(j,"SPAN",{class:!0});var M=W(a);n=k(M,t),M.forEach(c),l=V(j),o=E(j,"SPAN",{class:!0});var le=W(o);d=k(le,i),le.forEach(c),j.forEach(c),A=V(b),_=E(b,"DIV",{class:!0});var ne=W(_);Y(m.$$.fragment,ne),ne.forEach(c),$=V(b),v=E(b,"DIV",{class:!0});var se=W(v);f.l(se),se.forEach(c),y=V(b),b.forEach(c),this.h()},h(){T(a,"class","text-gray-400 font-light mr-1"),T(o,"class","font-medium h-8 flex items-center justify-center svelte-8n7y6t"),ie(o,"today",s[9].equals(s[3])),T(r,"class","py-2 flex items-center justify-center text-sm border-b"),T(_,"class","flex flex-col p-4 min-h-[38] border-b"),T(v,"class","flex flex-col my-4 p-4 gap-4"),T(e,"class","grow max-w-xs border-r last:border-r-0 flex flex-shrink-0 flex-col w-[14%]")},m(p,b){S(p,e,b),u(e,r),u(r,a),u(a,n),u(r,l),u(r,o),u(o,d),u(e,A),u(e,_),U(m,_,null),u(e,$),u(e,v),N[h].m(v,null),u(e,y),g=!0},p(p,b){(!g||b&2)&&t!==(t=p[4][p[9].dayOfWeek-1]+"")&&C(n,t),(!g||b&2)&&i!==(i=p[9].day+"")&&C(d,i),b&10&&ie(o,"today",p[9].equals(p[3]));const j={};b&1&&(j.weather=p[0]),b&2&&(j.day=p[9]),m.$set(j);let M=h;h=B(p,b),h===M?N[h].p(p,b):(ee(),P(N[M],1,1,()=>{N[M]=null}),te(),f=N[h],f?f.p(p,b):(f=N[h]=q[h](p),f.c()),O(f,1),f.m(v,null))},i(p){g||(O(m.$$.fragment,p),O(f),g=!0)},o(p){P(m.$$.fragment,p),P(f),g=!1},d(p){p&&c(e),G(m),N[h].d()}}}function qe(s){let e,r,a=s[1],t=[];for(let l=0;l<a.length;l+=1)t[l]=_e(de(s,a,l));const n=l=>P(t[l],1,1,()=>{t[l]=null});return{c(){e=D("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=E(l,"DIV",{class:!0});var o=W(e);for(let i=0;i<t.length;i+=1)t[i].l(o);o.forEach(c),this.h()},h(){T(e,"class","m-4 flex container mx-auto h-full w-full")},m(l,o){S(l,e,o);for(let i=0;i<t.length;i+=1)t[i].m(e,null);r=!0},p(l,[o]){if(o&63){a=l[1];let i;for(i=0;i<a.length;i+=1){const d=de(l,a,i);t[i]?(t[i].p(d,o),O(t[i],1)):(t[i]=_e(d),t[i].c(),O(t[i],1),t[i].m(e,null))}for(ee(),i=a.length;i<t.length;i+=1)n(i);te()}},i(l){if(!r){for(let o=0;o<a.length;o+=1)O(t[o]);r=!0}},o(l){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)P(t[o]);r=!1},d(l){l&&c(e),ve(t,l)}}}function Be(s,e,r){let a;ke(s,$e,m=>r(2,a=m));let{startOfWeek:t}=e,{weather:n}=e;const l=Q.Now.plainDateISO(De),o=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];let i=[];function d(m){ce.set({editMode:!1,activity:oe.new(m)})}x(()=>{oe.init()});const A=m=>ce.edit(m),_=m=>d(m);return s.$$set=m=>{"startOfWeek"in m&&r(6,t=m.startOfWeek),"weather"in m&&r(0,n=m.weather)},s.$$.update=()=>{s.$$.dirty&64&&t&&r(1,i=o.map((m,$)=>t.add({days:$})))},[n,i,a,l,o,d,t,A,_]}class Me extends z{constructor(e){super(),H(this,e,Be,qe,K,{startOfWeek:6,weather:0})}}function be(s){if(s.length==0)throw Error(`Array is empty for: ${s}`);return s[0]["@value"]}function L(s){return parseInt(""+be(s))}function ge(s){return parseFloat(""+be(s))}class re{constructor(e,r,a,t,n,l){this.id=e,this.clouds=r,this.minimumTemperature=a,this.maximumTemperature=t,this.feelsLikeTemperature=n,this.temperature=l}get temporalDate(){const e=new Date(this.id*1e3);return new Q.PlainDate(e.getFullYear(),e.getMonth()+1,e.getDate())}static fromRDF(e){const r=L(e["http://schema.org/identifier"]),a=L(e["ex:clouds"]),t=L(e["ex:minimumTemperature"]),n=L(e["ex:maximumTemperature"]),l=L(e["https://uri.fiware.org/ns/data-models#feelsLikeTemperature"]),o=L(e["https://uri.fiware.org/ns/data-models#temperature"]);return new re(r,a,t,n,l,o)}}class ae{constructor(e,r){this.geoCoordinates=e,this.days=r}getWeatherDataFor(e){return this.days.find(r=>r.temporalDate.equals(e))}static fromRDF(e){const r={longitude:0,latitude:0},a=[];return e.forEach(t=>{const n=t["@type"][0];if(n=="https://uri.fiware.org/ns/data-models#WeatherForcecast"){const l=re.fromRDF(t);a.push(l)}if(n=="http://schema.org/GeoCoordinates"){const l=t;r.latitude=ge(l["http://schema.org/latitude"]),r.longitude=ge(l["http://schema.org/longitude"])}}),new ae(r,a)}}function Le(s){let e,r;return e=new Me({props:{startOfWeek:s[0],weather:s[1]}}),{c(){R(e.$$.fragment)},l(a){Y(e.$$.fragment,a)},m(a,t){U(e,a,t),r=!0},p(a,[t]){const n={};t&1&&(n.startOfWeek=a[0]),t&2&&(n.weather=a[1]),e.$set(n)},i(a){r||(O(e.$$.fragment,a),r=!0)},o(a){P(e.$$.fragment,a),r=!1},d(a){G(e,a)}}}let J;const He=async({fetch:s})=>{if(J)return J;const r=await s("https://idlab.osoc.be/weather/Brussels");return J={status:r.status,props:{rdfWeatherArray:r.ok&&await r.json()}},J};function Re(s,e,r){let{rdfWeatherArray:a=[]}=e;const t=Q.Now.plainDateISO();let n,l;function o(){return r(0,n=t.subtract({days:t.dayOfWeek-1})),n}return x(async()=>{r(1,l=ae.fromRDF(a)),o()}),s.$$set=i=>{"rdfWeatherArray"in i&&r(2,a=i.rdfWeatherArray)},[n,l,a]}class Ke extends z{constructor(e){super(),H(this,e,Re,Le,K,{rdfWeatherArray:2})}}export{Ke as default,He as load};
